INFO 2024-10-01 17:25:14,525 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:14,531 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:14,532 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:14,542 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:25:14.534637+00:00, Should reset: False
INFO 2024-10-01 17:25:14,542 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:14,542 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:14,543 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:14,543 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:14,547 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:14,548 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:14,548 models 570 138242068317888 Initial state: caller=7552, callee=0562638887, duration=None, total_cost=0.00
INFO 2024-10-01 17:25:14,551 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:25:14,551 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0562638887
INFO 2024-10-01 17:25:14,551 utils 570 138242068317888 Original number: 0562638887
INFO 2024-10-01 17:25:14,551 utils 570 138242068317888 Cleaned number: 0562638887
INFO 2024-10-01 17:25:14,551 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:25:14,552 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:14,552 models 570 138242068317888 Categorizing call for number: 0562638887
INFO 2024-10-01 17:25:14,554 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:14,555 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:14,555 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:25:14,555 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Match found: 0562638887 matches 05
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:14,556 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:25:14,557 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:25:14,557 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:14,557 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:14,559 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:14,559 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:14,562 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:14,563 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:14,566 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:25:14.564919+00:00, Should reset: False
INFO 2024-10-01 17:25:14,567 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:14,567 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:14,567 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:14,567 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:14,568 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:14,568 socket_server 570 138242068317888 Saved call record for company Smasco: 7552 -> 0562638887 at 2024-10-01 14:25:06+03:00
INFO 2024-10-01 17:25:14,973 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57405) on port 8000
INFO 2024-10-01 17:25:19,458 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:25:02,0504578882,7791,00:00:03,2024/10/01 14:25:15,2024/10/01 14:25:18,TerminatedBySrc,,,Ext.7791,0504578882,10001,,,Extension,Line,,Arwa Almagli,0504578882,
INFO 2024-10-01 17:25:19,458 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:25:02', '0504578882', '7791', '00:00:03', '2024/10/01 14:25:15', '2024/10/01 14:25:18', 'TerminatedBySrc', '', '', 'Ext.7791', '0504578882', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0504578882', '']
INFO 2024-10-01 17:25:19,477 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:19,477 models 570 138242068317888 Initial state: caller=7791, callee=0504578882, duration=3, total_cost=0.0
INFO 2024-10-01 17:25:19,478 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:25:19,478 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0504578882
INFO 2024-10-01 17:25:19,478 utils 570 138242068317888 Original number: 0504578882
INFO 2024-10-01 17:25:19,478 utils 570 138242068317888 Cleaned number: 0504578882
INFO 2024-10-01 17:25:19,478 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:25:19,479 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:19,479 models 570 138242068317888 Categorizing call for number: 0504578882
INFO 2024-10-01 17:25:19,481 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:19,483 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:19,484 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:25:19,484 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:25:19,484 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:25:19,484 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:25:19,484 models 570 138242068317888 Match found: 0504578882 matches 05
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:25:19,485 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:25:19,486 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:25:19,486 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:19,488 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:19,488 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:19,494 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:25:19,497 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:25:19,501 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:25:19.499319+00:00, Should reset: False
INFO 2024-10-01 17:25:19,502 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:25:19,502 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:25:19,502 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:25:19,502 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 17:25:19,503 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 17:25:19,503 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 17:25:19,504 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:19,505 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:19,505 models 570 138242068317888 Initial state: caller=7791, callee=0504578882, duration=3, total_cost=0.40
INFO 2024-10-01 17:25:19,508 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:25:19,508 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0504578882
INFO 2024-10-01 17:25:19,508 utils 570 138242068317888 Original number: 0504578882
INFO 2024-10-01 17:25:19,508 utils 570 138242068317888 Cleaned number: 0504578882
INFO 2024-10-01 17:25:19,508 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:25:19,509 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:19,509 models 570 138242068317888 Categorizing call for number: 0504578882
INFO 2024-10-01 17:25:19,511 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:19,512 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:19,512 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:25:19,512 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:25:19,513 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:25:19,513 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:25:19,513 models 570 138242068317888 Match found: 0504578882 matches 05
INFO 2024-10-01 17:25:19,513 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:25:19,513 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:25:19,514 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:19,516 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:19,517 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:25:19,519 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:25:19,521 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:25:19,525 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:25:19.523025+00:00, Should reset: False
INFO 2024-10-01 17:25:19,525 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:25:19,525 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:25:19,525 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:19,526 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:19,528 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:19,529 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0504578882 at 2024-10-01 14:25:02+03:00
INFO 2024-10-01 17:25:19,925 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57406) on port 8000
INFO 2024-10-01 17:25:30,695 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:25:29,0549069736,7552,,,2024/10/01 14:25:29,Failed,,,Ext.7552,0549069736,0549069736,,,Extension,LineSet,,Prabu Muruganantham,0549069736,
INFO 2024-10-01 17:25:30,695 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:25:29', '0549069736', '7552', '', '', '2024/10/01 14:25:29', 'Failed', '', '', 'Ext.7552', '0549069736', '0549069736', '', '', 'Extension', 'LineSet', '', 'Prabu Muruganantham', '0549069736', '']
INFO 2024-10-01 17:25:30,716 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:30,717 models 570 138242068317888 Initial state: caller=7552, callee=0549069736, duration=None, total_cost=0.0
INFO 2024-10-01 17:25:30,717 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:25:30,718 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0549069736
INFO 2024-10-01 17:25:30,718 utils 570 138242068317888 Original number: 0549069736
INFO 2024-10-01 17:25:30,718 utils 570 138242068317888 Cleaned number: 0549069736
INFO 2024-10-01 17:25:30,718 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:25:30,720 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:30,720 models 570 138242068317888 Categorizing call for number: 0549069736
INFO 2024-10-01 17:25:30,725 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:30,732 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:30,733 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:25:30,733 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:25:30,733 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:25:30,734 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:25:30,736 models 570 138242068317888 Match found: 0549069736 matches 05
INFO 2024-10-01 17:25:30,736 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:25:30,736 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:30,737 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:25:30,737 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:25:30,737 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:30,738 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:30,744 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:30,745 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:30,749 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:30,752 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:30,756 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:25:30.754440+00:00, Should reset: False
INFO 2024-10-01 17:25:30,757 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:30,757 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:30,758 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:30,758 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:30,760 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:30,761 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:30,761 models 570 138242068317888 Initial state: caller=7552, callee=0549069736, duration=None, total_cost=0.00
INFO 2024-10-01 17:25:30,764 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:25:30,765 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0549069736
INFO 2024-10-01 17:25:30,766 utils 570 138242068317888 Original number: 0549069736
INFO 2024-10-01 17:25:30,766 utils 570 138242068317888 Cleaned number: 0549069736
INFO 2024-10-01 17:25:30,766 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:25:30,767 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:30,767 models 570 138242068317888 Categorizing call for number: 0549069736
INFO 2024-10-01 17:25:30,770 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:30,772 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:30,772 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Match found: 0549069736 matches 05
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:25:30,773 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:30,775 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:25:30,775 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:25:30,776 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:30,776 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:30,779 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:30,780 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:30,783 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:30,786 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:30,790 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:25:30.788127+00:00, Should reset: False
INFO 2024-10-01 17:25:30,791 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:25:30,791 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:25:30,792 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:30,792 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:30,793 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:30,794 socket_server 570 138242068317888 Saved call record for company Smasco: 7552 -> 0549069736 at 2024-10-01 14:25:29+03:00
INFO 2024-10-01 17:25:31,188 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57412) on port 8000
INFO 2024-10-01 17:25:49,973 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:24:01,8000,10001,00:01:47,2024/10/01 14:24:01,2024/10/01 14:25:49,TerminatedBySrc,ReplacedDst,,0556412146,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0556412146:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 17:25:49,973 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:24:01', '8000', '10001', '00:01:47', '2024/10/01 14:24:01', '2024/10/01 14:25:49', 'TerminatedBySrc', 'ReplacedDst', '', '0556412146', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0556412146:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 17:25:49,992 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:49,992 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=107, total_cost=0.0
INFO 2024-10-01 17:25:49,993 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:25:49,993 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:25:49,993 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:25:49,993 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:25:49,994 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:25:49,994 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:49,994 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:25:49,997 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:50,001 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:50,001 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:25:50,002 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:25:50,002 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:50,002 models 570 138242068317888 Calculating total cost for call: duration=107 seconds
INFO 2024-10-01 17:25:50,002 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:25:50,002 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:25:50,003 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:25:50,003 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:50,003 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:50,006 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:50,007 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:25:50,010 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:25:50,013 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:50,013 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:50,013 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=107, total_cost=0.00
INFO 2024-10-01 17:25:50,017 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:25:50,017 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:25:50,018 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:25:50,018 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:25:50,021 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:25:50,021 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:50,021 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:25:50,023 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:50,025 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:50,025 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:25:50,025 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:25:50,025 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 Calculating total cost for call: duration=107 seconds
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:50,026 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:50,029 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:50,029 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:25:50,031 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:25:50,032 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:50,032 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:24:01+03:00
INFO 2024-10-01 17:25:50,433 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57419) on port 8000
INFO 2024-10-01 17:25:57,233 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:25:31,7446,8477,00:00:04,2024/10/01 14:25:51,2024/10/01 14:25:56,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:25:57,233 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:25:31', '7446', '8477', '00:00:04', '2024/10/01 14:25:51', '2024/10/01 14:25:56', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:25:57,248 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:57,248 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=4, total_cost=0.0
INFO 2024-10-01 17:25:57,248 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:25:57,249 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:25:57,249 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:25:57,249 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:25:57,250 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:25:57,250 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:57,250 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:25:57,253 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:57,255 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:57,255 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:25:57,255 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:25:57,255 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:57,256 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:57,261 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:57,262 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:57,265 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:25:57,267 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:25:57,279 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:25:57.271974+00:00, Should reset: False
INFO 2024-10-01 17:25:57,279 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:25:57,279 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:25:57,280 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:57,280 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:57,283 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:57,284 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:25:57,284 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=4, total_cost=0.00
INFO 2024-10-01 17:25:57,287 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:25:57,287 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:25:57,287 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:25:57,287 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:25:57,287 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:25:57,288 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:25:57,288 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:25:57,290 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:25:57,292 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:25:57,292 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:25:57,292 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:25:57,292 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:25:57,292 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:25:57,293 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:25:57,293 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:25:57,293 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:25:57,293 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:25:57,293 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:25:57,295 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:25:57,295 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:25:57,299 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:25:57,300 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:25:57,304 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:25:57.301966+00:00, Should reset: False
INFO 2024-10-01 17:25:57,304 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:25:57,305 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:25:57,305 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:25:57,305 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:25:57,306 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:25:57,307 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:25:31+03:00
INFO 2024-10-01 17:25:57,725 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57420) on port 8000
INFO 2024-10-01 17:26:09,450 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:25:32,0549069736,7552,,,2024/10/01 14:26:08,Failed,,,Ext.7552,0549069736,0549069736,,,Extension,LineSet,,Prabu Muruganantham,0549069736,
INFO 2024-10-01 17:26:09,450 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:25:32', '0549069736', '7552', '', '', '2024/10/01 14:26:08', 'Failed', '', '', 'Ext.7552', '0549069736', '0549069736', '', '', 'Extension', 'LineSet', '', 'Prabu Muruganantham', '0549069736', '']
INFO 2024-10-01 17:26:09,468 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:09,469 models 570 138242068317888 Initial state: caller=7552, callee=0549069736, duration=None, total_cost=0.0
INFO 2024-10-01 17:26:09,469 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:26:09,469 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0549069736
INFO 2024-10-01 17:26:09,469 utils 570 138242068317888 Original number: 0549069736
INFO 2024-10-01 17:26:09,470 utils 570 138242068317888 Cleaned number: 0549069736
INFO 2024-10-01 17:26:09,470 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:09,470 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:09,470 models 570 138242068317888 Categorizing call for number: 0549069736
INFO 2024-10-01 17:26:09,473 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:09,475 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:09,475 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:09,476 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:09,476 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:09,476 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:09,476 models 570 138242068317888 Match found: 0549069736 matches 05
INFO 2024-10-01 17:26:09,476 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:09,477 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:09,477 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:26:09,477 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:26:09,477 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:09,477 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:09,479 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:09,480 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:09,483 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:26:09,485 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:26:09,488 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:26:09.486556+00:00, Should reset: False
INFO 2024-10-01 17:26:09,488 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:26:09,489 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:26:09,489 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:09,489 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:09,490 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:09,491 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:09,491 models 570 138242068317888 Initial state: caller=7552, callee=0549069736, duration=None, total_cost=0.00
INFO 2024-10-01 17:26:09,493 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:26:09,493 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0549069736
INFO 2024-10-01 17:26:09,494 utils 570 138242068317888 Original number: 0549069736
INFO 2024-10-01 17:26:09,494 utils 570 138242068317888 Cleaned number: 0549069736
INFO 2024-10-01 17:26:09,494 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:09,494 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:09,494 models 570 138242068317888 Categorizing call for number: 0549069736
INFO 2024-10-01 17:26:09,496 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:09,498 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:09,498 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:09,498 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:09,498 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:09,499 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:09,499 models 570 138242068317888 Match found: 0549069736 matches 05
INFO 2024-10-01 17:26:09,499 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:09,499 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:09,499 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:26:09,500 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:26:09,500 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:09,500 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:09,502 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:09,503 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:09,505 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:26:09,507 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:26:09,511 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 14:26:09.508939+00:00, Should reset: False
INFO 2024-10-01 17:26:09,511 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 17:26:09,511 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 17:26:09,512 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:09,512 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:09,513 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:09,514 socket_server 570 138242068317888 Saved call record for company Smasco: 7552 -> 0549069736 at 2024-10-01 14:25:32+03:00
INFO 2024-10-01 17:26:09,911 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57424) on port 8000
INFO 2024-10-01 17:26:36,140 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:25:15,0505645913,7738,00:01:14,2024/10/01 14:25:20,2024/10/01 14:26:35,TerminatedBySrc,,,Ext.7738,0505645913,10001,,,Extension,Line,,Hanaa Alshalwi,0505645913,
INFO 2024-10-01 17:26:36,140 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:25:15', '0505645913', '7738', '00:01:14', '2024/10/01 14:25:20', '2024/10/01 14:26:35', 'TerminatedBySrc', '', '', 'Ext.7738', '0505645913', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0505645913', '']
INFO 2024-10-01 17:26:36,155 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:36,155 models 570 138242068317888 Initial state: caller=7738, callee=0505645913, duration=74, total_cost=0.0
INFO 2024-10-01 17:26:36,155 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:26:36,156 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0505645913
INFO 2024-10-01 17:26:36,156 utils 570 138242068317888 Original number: 0505645913
INFO 2024-10-01 17:26:36,156 utils 570 138242068317888 Cleaned number: 0505645913
INFO 2024-10-01 17:26:36,156 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:36,156 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:36,156 models 570 138242068317888 Categorizing call for number: 0505645913
INFO 2024-10-01 17:26:36,159 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:36,161 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:36,161 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:36,161 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:36,162 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:36,162 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:36,162 models 570 138242068317888 Match found: 0505645913 matches 05
INFO 2024-10-01 17:26:36,162 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:36,162 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 Calculating total cost for call: duration=74 seconds
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:26:36,163 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:36,165 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:36,166 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:36,169 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:26:36,171 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:36,175 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:26:36.173656+00:00, Should reset: False
INFO 2024-10-01 17:26:36,176 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:26:36,176 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:36,176 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:26:36,176 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:26:36,176 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:26:36,177 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 17:26:36,179 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:36,180 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:36,180 models 570 138242068317888 Initial state: caller=7738, callee=0505645913, duration=74, total_cost=0.80
INFO 2024-10-01 17:26:36,182 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:26:36,183 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0505645913
INFO 2024-10-01 17:26:36,183 utils 570 138242068317888 Original number: 0505645913
INFO 2024-10-01 17:26:36,183 utils 570 138242068317888 Cleaned number: 0505645913
INFO 2024-10-01 17:26:36,183 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:36,183 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:36,184 models 570 138242068317888 Categorizing call for number: 0505645913
INFO 2024-10-01 17:26:36,185 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:36,187 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:36,187 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:36,187 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:36,188 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:36,188 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:36,188 models 570 138242068317888 Match found: 0505645913 matches 05
INFO 2024-10-01 17:26:36,188 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:36,189 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:36,189 models 570 138242068317888 Calculating total cost for call: duration=74 seconds
INFO 2024-10-01 17:26:36,189 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:26:36,189 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:26:36,190 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:26:36,190 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:26:36,190 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:36,192 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:36,192 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:26:36,195 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:26:36,196 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:36,200 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:26:36.198679+00:00, Should reset: False
INFO 2024-10-01 17:26:36,201 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:26:36,201 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:36,201 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:36,201 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:36,202 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:36,202 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0505645913 at 2024-10-01 14:25:15+03:00
INFO 2024-10-01 17:26:36,617 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57427) on port 8000
INFO 2024-10-01 17:26:45,067 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:19:54,0547055666,7189,00:06:32,2024/10/01 14:20:11,2024/10/01 14:26:44,TerminatedByDst,,,Ext.7189,0547055666,10001,,,Extension,Line,,Maryam Almutairi,0547055666,
INFO 2024-10-01 17:26:45,067 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:19:54', '0547055666', '7189', '00:06:32', '2024/10/01 14:20:11', '2024/10/01 14:26:44', 'TerminatedByDst', '', '', 'Ext.7189', '0547055666', '10001', '', '', 'Extension', 'Line', '', 'Maryam Almutairi', '0547055666', '']
INFO 2024-10-01 17:26:45,088 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:45,089 models 570 138242068317888 Initial state: caller=7189, callee=0547055666, duration=392, total_cost=0.0
INFO 2024-10-01 17:26:45,089 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:26:45,090 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0547055666
INFO 2024-10-01 17:26:45,090 utils 570 138242068317888 Original number: 0547055666
INFO 2024-10-01 17:26:45,090 utils 570 138242068317888 Cleaned number: 0547055666
INFO 2024-10-01 17:26:45,090 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:45,090 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:45,091 models 570 138242068317888 Categorizing call for number: 0547055666
INFO 2024-10-01 17:26:45,094 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:45,097 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:45,097 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:45,098 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:45,098 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Match found: 0547055666 matches 05
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Calculating total cost for call: duration=392 seconds
INFO 2024-10-01 17:26:45,099 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:26:45,101 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:26:45,101 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:26:45,101 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.80
INFO 2024-10-01 17:26:45,101 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:45,104 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:45,105 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:45,109 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:26:45,112 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:45,117 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 14:26:45.115039+00:00, Should reset: False
INFO 2024-10-01 17:26:45,118 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:26:45,118 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:45,118 models 570 138242068317888 Amount to deduct: 2.80
INFO 2024-10-01 17:26:45,118 models 570 138242068317888 Attempting to deduct 2.80 from balance 0.00
WARNING 2024-10-01 17:26:45,118 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.80
WARNING 2024-10-01 17:26:45,118 models 570 138242068317888 Warning: Quota exceeded for extension 7189
INFO 2024-10-01 17:26:45,121 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:45,122 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:45,122 models 570 138242068317888 Initial state: caller=7189, callee=0547055666, duration=392, total_cost=2.80
INFO 2024-10-01 17:26:45,125 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.80
INFO 2024-10-01 17:26:45,126 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0547055666
INFO 2024-10-01 17:26:45,126 utils 570 138242068317888 Original number: 0547055666
INFO 2024-10-01 17:26:45,127 utils 570 138242068317888 Cleaned number: 0547055666
INFO 2024-10-01 17:26:45,127 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:26:45,128 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:45,128 models 570 138242068317888 Categorizing call for number: 0547055666
INFO 2024-10-01 17:26:45,131 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:45,133 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:45,134 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:26:45,134 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Match found: 0547055666 matches 05
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:45,135 models 570 138242068317888 Calculating total cost for call: duration=392 seconds
INFO 2024-10-01 17:26:45,137 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:26:45,137 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:26:45,138 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:26:45,138 models 570 138242068317888 After cost calculation: old_total_cost=2.80, new_total_cost=2.80
INFO 2024-10-01 17:26:45,138 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:45,141 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:45,141 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.80
INFO 2024-10-01 17:26:45,145 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:26:45,147 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:45,152 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 14:26:45.149914+00:00, Should reset: False
INFO 2024-10-01 17:26:45,152 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:26:45,153 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:26:45,153 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:45,153 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:45,155 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:45,155 socket_server 570 138242068317888 Saved call record for company Smasco: 7189 -> 0547055666 at 2024-10-01 14:19:54+03:00
INFO 2024-10-01 17:26:45,566 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57433) on port 8000
INFO 2024-10-01 17:26:47,467 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:26:18,7446,8477,00:00:07,2024/10/01 14:26:38,2024/10/01 14:26:46,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:26:47,467 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:26:18', '7446', '8477', '00:00:07', '2024/10/01 14:26:38', '2024/10/01 14:26:46', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:26:47,483 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:47,484 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=7, total_cost=0.0
INFO 2024-10-01 17:26:47,484 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:26:47,485 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:26:47,485 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:26:47,485 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:26:47,486 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:26:47,486 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:47,486 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:26:47,488 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:47,517 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:47,517 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:26:47,517 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:26:47,518 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:47,534 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:47,537 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:47,538 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:47,543 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:26:47,546 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:26:47,550 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:26:47.548541+00:00, Should reset: False
INFO 2024-10-01 17:26:47,551 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:26:47,551 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:26:47,552 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:47,552 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:47,554 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:47,555 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:47,555 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=7, total_cost=0.00
INFO 2024-10-01 17:26:47,558 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:26:47,559 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:26:47,559 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:26:47,560 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:26:47,560 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:26:47,560 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:47,561 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:26:47,563 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:47,565 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:47,566 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:26:47,566 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:26:47,567 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:47,567 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 17:26:47,567 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:26:47,567 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:26:47,568 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:26:47,569 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:47,569 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:47,572 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:47,573 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:26:47,576 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:26:47,578 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:26:47,582 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:26:47.580434+00:00, Should reset: False
INFO 2024-10-01 17:26:47,583 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:26:47,583 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:26:47,583 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:26:47,584 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:26:47,586 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:47,586 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:26:18+03:00
INFO 2024-10-01 17:26:47,993 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57437) on port 8000
INFO 2024-10-01 17:26:59,628 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:26:18,8000,10001,00:00:40,2024/10/01 14:26:18,2024/10/01 14:26:58,TerminatedBySrc,,,548050197,Ext.8000,8000,,,Line,Ivr,,548050197:Main Number,WelcomeMessage,
INFO 2024-10-01 17:26:59,628 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:26:18', '8000', '10001', '00:00:40', '2024/10/01 14:26:18', '2024/10/01 14:26:58', 'TerminatedBySrc', '', '', '548050197', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '548050197:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:26:59,648 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:59,648 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=40, total_cost=0.0
INFO 2024-10-01 17:26:59,649 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:26:59,650 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:26:59,650 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:26:59,650 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:26:59,651 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:26:59,651 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:59,652 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:26:59,655 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:59,657 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:59,658 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:26:59,659 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:26:59,659 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:59,660 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 17:26:59,660 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:26:59,660 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:26:59,661 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:26:59,661 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:59,661 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:59,664 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:59,665 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:26:59,668 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:26:59,671 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:59,671 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:26:59,671 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=40, total_cost=0.00
INFO 2024-10-01 17:26:59,675 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:26:59,675 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:26:59,676 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:26:59,676 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:26:59,677 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:26:59,677 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:26:59,677 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:26:59,680 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:26:59,682 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:26:59,683 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:26:59,683 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:26:59,683 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:26:59,684 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 17:26:59,684 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:26:59,684 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:26:59,684 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:26:59,685 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:26:59,686 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:26:59,689 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:26:59,689 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:26:59,692 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:26:59,694 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:26:59,694 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:26:18+03:00
INFO 2024-10-01 17:27:00,089 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57441) on port 8000
INFO 2024-10-01 17:27:16,640 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:21:50,0563307030,7821,00:05:07,2024/10/01 14:22:07,2024/10/01 14:27:15,TerminatedBySrc,,,Ext.7821,0563307030,10001,,,Extension,Line,,Talal Alzahrani,0563307030,
INFO 2024-10-01 17:27:16,644 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:21:50', '0563307030', '7821', '00:05:07', '2024/10/01 14:22:07', '2024/10/01 14:27:15', 'TerminatedBySrc', '', '', 'Ext.7821', '0563307030', '10001', '', '', 'Extension', 'Line', '', 'Talal Alzahrani', '0563307030', '']
INFO 2024-10-01 17:27:16,666 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:16,666 models 570 138242068317888 Initial state: caller=7821, callee=0563307030, duration=307, total_cost=0.0
INFO 2024-10-01 17:27:16,667 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:16,667 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0563307030
INFO 2024-10-01 17:27:16,668 utils 570 138242068317888 Original number: 0563307030
INFO 2024-10-01 17:27:16,668 utils 570 138242068317888 Cleaned number: 0563307030
INFO 2024-10-01 17:27:16,668 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:16,668 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:16,669 models 570 138242068317888 Categorizing call for number: 0563307030
INFO 2024-10-01 17:27:16,672 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:16,675 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:16,676 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:16,677 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:16,677 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:16,677 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:16,678 models 570 138242068317888 Match found: 0563307030 matches 05
INFO 2024-10-01 17:27:16,679 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:16,679 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:16,679 models 570 138242068317888 Calculating total cost for call: duration=307 seconds
INFO 2024-10-01 17:27:16,679 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:27:16,679 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:16,680 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 17:27:16,680 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 17:27:16,680 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:16,683 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:16,684 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:27:16,689 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:27:16,693 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.00
INFO 2024-10-01 17:27:16,705 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:27:16.700314+00:00, Should reset: False
INFO 2024-10-01 17:27:16,706 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:27:16,707 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.00
INFO 2024-10-01 17:27:16,707 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 17:27:16,707 models 570 138242068317888 Attempting to deduct 2.40 from balance 94.00
INFO 2024-10-01 17:27:16,710 models 570 138242068317888 Successfully deducted 2.40. New remaining balance: 91.60
INFO 2024-10-01 17:27:16,711 models 570 138242068317888 Successfully deducted 2.40 from quota. New balance: 91.60
INFO 2024-10-01 17:27:16,714 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:16,715 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:16,715 models 570 138242068317888 Initial state: caller=7821, callee=0563307030, duration=307, total_cost=2.40
INFO 2024-10-01 17:27:16,718 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 17:27:16,719 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0563307030
INFO 2024-10-01 17:27:16,719 utils 570 138242068317888 Original number: 0563307030
INFO 2024-10-01 17:27:16,720 utils 570 138242068317888 Cleaned number: 0563307030
INFO 2024-10-01 17:27:16,720 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:16,720 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:16,720 models 570 138242068317888 Categorizing call for number: 0563307030
INFO 2024-10-01 17:27:16,728 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:16,731 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:16,732 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:16,732 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:16,732 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:16,732 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:16,732 models 570 138242068317888 Match found: 0563307030 matches 05
INFO 2024-10-01 17:27:16,735 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:16,735 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 Calculating total cost for call: duration=307 seconds
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 17:27:16,736 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:16,741 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:16,743 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 17:27:16,747 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:27:16,748 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:27:16,752 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:27:16.750596+00:00, Should reset: False
INFO 2024-10-01 17:27:16,753 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:27:16,753 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:27:16,754 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:27:16,754 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:27:16,756 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:16,756 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> 0563307030 at 2024-10-01 14:21:50+03:00
INFO 2024-10-01 17:27:17,163 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57444) on port 8000
INFO 2024-10-01 17:27:21,463 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:26:09,0556911345,1134,00:00:47,2024/10/01 14:26:33,2024/10/01 14:27:20,TerminatedBySrc,,,Ext.1134,0556911345,10001,,,Extension,Line,,Afrah Almantshri,0556911345,
INFO 2024-10-01 17:27:21,463 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:26:09', '0556911345', '1134', '00:00:47', '2024/10/01 14:26:33', '2024/10/01 14:27:20', 'TerminatedBySrc', '', '', 'Ext.1134', '0556911345', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0556911345', '']
INFO 2024-10-01 17:27:21,484 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:21,485 models 570 138242068317888 Initial state: caller=1134, callee=0556911345, duration=47, total_cost=0.0
INFO 2024-10-01 17:27:21,485 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:21,485 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0556911345
INFO 2024-10-01 17:27:21,486 utils 570 138242068317888 Original number: 0556911345
INFO 2024-10-01 17:27:21,486 utils 570 138242068317888 Cleaned number: 0556911345
INFO 2024-10-01 17:27:21,486 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:21,486 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:21,486 models 570 138242068317888 Categorizing call for number: 0556911345
INFO 2024-10-01 17:27:21,490 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:21,492 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:21,493 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:21,493 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:21,493 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:21,493 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:21,493 models 570 138242068317888 Match found: 0556911345 matches 05
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:21,494 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:27:21,495 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:27:21,495 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:21,499 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:21,499 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:27:21,503 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:27:21,506 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:21,506 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:21,506 models 570 138242068317888 Initial state: caller=1134, callee=0556911345, duration=47, total_cost=0.40
INFO 2024-10-01 17:27:21,510 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:27:21,511 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0556911345
INFO 2024-10-01 17:27:21,511 utils 570 138242068317888 Original number: 0556911345
INFO 2024-10-01 17:27:21,511 utils 570 138242068317888 Cleaned number: 0556911345
INFO 2024-10-01 17:27:21,512 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:21,512 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:21,512 models 570 138242068317888 Categorizing call for number: 0556911345
INFO 2024-10-01 17:27:21,514 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:21,515 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:21,515 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:21,516 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:21,516 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:21,516 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:21,516 models 570 138242068317888 Match found: 0556911345 matches 05
INFO 2024-10-01 17:27:21,517 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:21,517 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:21,517 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 17:27:21,517 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:21,517 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:21,518 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:27:21,518 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:27:21,518 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:21,520 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:21,520 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 17:27:21,522 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:27:21,523 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:21,523 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0556911345 at 2024-10-01 14:26:09+03:00
INFO 2024-10-01 17:27:21,945 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57446) on port 8000
INFO 2024-10-01 17:27:37,415 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:24,8000,10001,00:00:11,2024/10/01 14:27:24,2024/10/01 14:27:36,TerminatedBySrc,,,580021062,Ext.8000,8000,,,Line,Ivr,,580021062:Main Number,WelcomeMessage,
INFO 2024-10-01 17:27:37,415 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:24', '8000', '10001', '00:00:11', '2024/10/01 14:27:24', '2024/10/01 14:27:36', 'TerminatedBySrc', '', '', '580021062', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '580021062:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:27:37,434 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:37,435 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=11, total_cost=0.0
INFO 2024-10-01 17:27:37,435 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:37,436 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:27:37,436 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:27:37,437 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:27:37,437 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:27:37,437 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:37,437 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:27:37,440 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:37,443 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:37,444 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:27:37,444 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:27:37,444 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:37,444 models 570 138242068317888 Calculating total cost for call: duration=11 seconds
INFO 2024-10-01 17:27:37,445 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:37,446 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:27:37,446 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:27:37,446 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:27:37,446 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:37,449 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:37,450 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:27:37,453 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:27:37,455 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:37,456 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:37,456 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=11, total_cost=0.00
INFO 2024-10-01 17:27:37,460 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:27:37,460 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:27:37,461 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:27:37,461 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:27:37,462 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:27:37,462 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:37,463 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:27:37,465 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:37,468 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:37,468 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:27:37,469 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:27:37,469 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:37,470 models 570 138242068317888 Calculating total cost for call: duration=11 seconds
INFO 2024-10-01 17:27:37,470 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:37,471 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:27:37,471 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:27:37,471 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:27:37,471 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:37,474 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:37,475 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:27:37,477 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:27:37,479 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:37,480 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:27:24+03:00
INFO 2024-10-01 17:27:37,907 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57447) on port 8000
INFO 2024-10-01 17:27:56,114 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:17,0555267926,7738,00:00:03,2024/10/01 14:27:52,2024/10/01 14:27:55,TerminatedBySrc,,,Ext.7738,0555267926,10001,,,Extension,Line,,Hanaa Alshalwi,0555267926,
INFO 2024-10-01 17:27:56,114 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:17', '0555267926', '7738', '00:00:03', '2024/10/01 14:27:52', '2024/10/01 14:27:55', 'TerminatedBySrc', '', '', 'Ext.7738', '0555267926', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0555267926', '']
INFO 2024-10-01 17:27:56,135 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:56,140 models 570 138242068317888 Initial state: caller=7738, callee=0555267926, duration=3, total_cost=0.0
INFO 2024-10-01 17:27:56,141 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:56,141 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0555267926
INFO 2024-10-01 17:27:56,144 utils 570 138242068317888 Original number: 0555267926
INFO 2024-10-01 17:27:56,144 utils 570 138242068317888 Cleaned number: 0555267926
INFO 2024-10-01 17:27:56,144 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:56,144 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:56,144 models 570 138242068317888 Categorizing call for number: 0555267926
INFO 2024-10-01 17:27:56,152 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:56,155 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:56,156 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:56,156 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:56,157 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:56,157 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:56,157 models 570 138242068317888 Match found: 0555267926 matches 05
INFO 2024-10-01 17:27:56,158 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:56,158 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:27:56,159 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:56,163 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:56,163 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:27:56,168 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:27:56,170 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:56,175 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:27:56.173082+00:00, Should reset: False
INFO 2024-10-01 17:27:56,176 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:27:56,176 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:56,176 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:27:56,176 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 17:27:56,176 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 17:27:56,176 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 17:27:56,181 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:56,181 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:56,181 models 570 138242068317888 Initial state: caller=7738, callee=0555267926, duration=3, total_cost=0.40
INFO 2024-10-01 17:27:56,184 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:27:56,185 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0555267926
INFO 2024-10-01 17:27:56,187 utils 570 138242068317888 Original number: 0555267926
INFO 2024-10-01 17:27:56,187 utils 570 138242068317888 Cleaned number: 0555267926
INFO 2024-10-01 17:27:56,187 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:56,188 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:56,188 models 570 138242068317888 Categorizing call for number: 0555267926
INFO 2024-10-01 17:27:56,190 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:56,194 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Match found: 0555267926 matches 05
INFO 2024-10-01 17:27:56,195 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:56,196 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:27:56,197 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:56,202 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:56,202 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:27:56,206 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:27:56,209 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:56,213 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:27:56.211437+00:00, Should reset: False
INFO 2024-10-01 17:27:56,216 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:27:56,216 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:56,217 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:27:56,217 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:27:56,218 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:56,219 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0555267926 at 2024-10-01 14:27:17+03:00
INFO 2024-10-01 17:27:56,640 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57454) on port 8000
INFO 2024-10-01 17:27:57,915 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:22:57,0540930859,1159,00:04:46,2024/10/01 14:23:11,2024/10/01 14:27:57,TerminatedByDst,,,Ext.1159,0540930859,10001,,,Extension,Line,,Saad Almasood,0540930859,
INFO 2024-10-01 17:27:57,915 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:22:57', '0540930859', '1159', '00:04:46', '2024/10/01 14:23:11', '2024/10/01 14:27:57', 'TerminatedByDst', '', '', 'Ext.1159', '0540930859', '10001', '', '', 'Extension', 'Line', '', 'Saad Almasood', '0540930859', '']
INFO 2024-10-01 17:27:57,936 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:57,937 models 570 138242068317888 Initial state: caller=1159, callee=0540930859, duration=286, total_cost=0.0
INFO 2024-10-01 17:27:57,937 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:57,937 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0540930859
INFO 2024-10-01 17:27:57,937 utils 570 138242068317888 Original number: 0540930859
INFO 2024-10-01 17:27:57,937 utils 570 138242068317888 Cleaned number: 0540930859
INFO 2024-10-01 17:27:57,938 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:57,938 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:57,938 models 570 138242068317888 Categorizing call for number: 0540930859
INFO 2024-10-01 17:27:57,941 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:57,945 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:57,946 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:57,946 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:57,946 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:57,946 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:57,947 models 570 138242068317888 Match found: 0540930859 matches 05
INFO 2024-10-01 17:27:57,947 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:57,947 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:57,947 models 570 138242068317888 Calculating total cost for call: duration=286 seconds
INFO 2024-10-01 17:27:57,947 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:27:57,948 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:57,948 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:27:57,948 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 17:27:57,948 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:57,950 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:57,951 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:27:57,953 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:27:57,956 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:57,956 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:57,956 models 570 138242068317888 Initial state: caller=1159, callee=0540930859, duration=286, total_cost=2.00
INFO 2024-10-01 17:27:57,959 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 17:27:57,959 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0540930859
INFO 2024-10-01 17:27:57,959 utils 570 138242068317888 Original number: 0540930859
INFO 2024-10-01 17:27:57,960 utils 570 138242068317888 Cleaned number: 0540930859
INFO 2024-10-01 17:27:57,960 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:57,960 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:57,960 models 570 138242068317888 Categorizing call for number: 0540930859
INFO 2024-10-01 17:27:57,963 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:57,965 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:57,965 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:57,965 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Match found: 0540930859 matches 05
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:57,966 models 570 138242068317888 Calculating total cost for call: duration=286 seconds
INFO 2024-10-01 17:27:57,967 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:27:57,967 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:57,967 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:27:57,967 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 17:27:57,967 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:57,969 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:57,969 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
WARNING 2024-10-01 17:27:57,971 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:27:57,972 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:57,974 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0540930859 at 2024-10-01 14:22:57+03:00
INFO 2024-10-01 17:27:58,363 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57455) on port 8000
INFO 2024-10-01 17:27:59,878 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:21:02,0504112593,7174,00:06:50,2024/10/01 14:21:08,2024/10/01 14:27:59,TerminatedBySrc,,,Ext.7174,0504112593,10001,,,Extension,Line,,Munawwarah Muhammad,0504112593,
INFO 2024-10-01 17:27:59,878 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:21:02', '0504112593', '7174', '00:06:50', '2024/10/01 14:21:08', '2024/10/01 14:27:59', 'TerminatedBySrc', '', '', 'Ext.7174', '0504112593', '10001', '', '', 'Extension', 'Line', '', 'Munawwarah Muhammad', '0504112593', '']
INFO 2024-10-01 17:27:59,903 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:59,904 models 570 138242068317888 Initial state: caller=7174, callee=0504112593, duration=410, total_cost=0.0
INFO 2024-10-01 17:27:59,904 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:27:59,904 models 570 138242068317888 Before determining country, Caller: 7174, Callee: 0504112593
INFO 2024-10-01 17:27:59,905 utils 570 138242068317888 Original number: 0504112593
INFO 2024-10-01 17:27:59,906 utils 570 138242068317888 Cleaned number: 0504112593
INFO 2024-10-01 17:27:59,906 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:59,906 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:59,906 models 570 138242068317888 Categorizing call for number: 0504112593
INFO 2024-10-01 17:27:59,909 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:59,912 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:59,912 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:59,912 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:59,913 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:59,913 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:59,913 models 570 138242068317888 Match found: 0504112593 matches 05
INFO 2024-10-01 17:27:59,913 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:59,914 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:59,914 models 570 138242068317888 Calculating total cost for call: duration=410 seconds
INFO 2024-10-01 17:27:59,914 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:27:59,914 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:59,915 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:27:59,915 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.80
INFO 2024-10-01 17:27:59,916 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:59,918 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:59,918 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:27:59,922 models 570 138242068317888 Found extension: 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:27:59,924 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:59,929 models 570 138242068317888 Quota for 7174 - Munawwarah Muhammad (Smasco): Last reset: 2024-09-15 06:34:54.971964+00:00, Next reset: 2024-10-15 06:34:54.971964+00:00, Current time: 2024-10-01 14:27:59.926357+00:00, Should reset: False
INFO 2024-10-01 17:27:59,929 models 570 138242068317888 Quota reset not needed for 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:27:59,929 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:59,930 models 570 138242068317888 Amount to deduct: 2.80
INFO 2024-10-01 17:27:59,930 models 570 138242068317888 Attempting to deduct 2.80 from balance 0.00
WARNING 2024-10-01 17:27:59,930 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.80
WARNING 2024-10-01 17:27:59,930 models 570 138242068317888 Warning: Quota exceeded for extension 7174
INFO 2024-10-01 17:27:59,932 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:59,933 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:27:59,933 models 570 138242068317888 Initial state: caller=7174, callee=0504112593, duration=410, total_cost=2.80
INFO 2024-10-01 17:27:59,936 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.80
INFO 2024-10-01 17:27:59,936 models 570 138242068317888 Before determining country, Caller: 7174, Callee: 0504112593
INFO 2024-10-01 17:27:59,936 utils 570 138242068317888 Original number: 0504112593
INFO 2024-10-01 17:27:59,936 utils 570 138242068317888 Cleaned number: 0504112593
INFO 2024-10-01 17:27:59,936 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:27:59,937 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:27:59,937 models 570 138242068317888 Categorizing call for number: 0504112593
INFO 2024-10-01 17:27:59,939 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:27:59,940 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:27:59,941 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:27:59,941 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:27:59,941 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:27:59,941 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:27:59,942 models 570 138242068317888 Match found: 0504112593 matches 05
INFO 2024-10-01 17:27:59,942 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:27:59,942 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:27:59,943 models 570 138242068317888 Calculating total cost for call: duration=410 seconds
INFO 2024-10-01 17:27:59,943 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:27:59,943 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:27:59,943 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:27:59,944 models 570 138242068317888 After cost calculation: old_total_cost=2.80, new_total_cost=2.80
INFO 2024-10-01 17:27:59,944 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:27:59,946 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:27:59,946 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.80
INFO 2024-10-01 17:27:59,949 models 570 138242068317888 Found extension: 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:27:59,950 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:59,957 models 570 138242068317888 Quota for 7174 - Munawwarah Muhammad (Smasco): Last reset: 2024-09-15 06:34:54.971964+00:00, Next reset: 2024-10-15 06:34:54.971964+00:00, Current time: 2024-10-01 14:27:59.953180+00:00, Should reset: False
INFO 2024-10-01 17:27:59,958 models 570 138242068317888 Quota reset not needed for 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:27:59,959 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:27:59,959 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:27:59,960 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:27:59,961 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:27:59,962 socket_server 570 138242068317888 Saved call record for company Smasco: 7174 -> 0504112593 at 2024-10-01 14:21:02+03:00
INFO 2024-10-01 17:28:00,358 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57456) on port 8000
INFO 2024-10-01 17:28:08,798 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:27,0556394394,1134,00:00:17,2024/10/01 14:27:50,2024/10/01 14:28:07,TerminatedBySrc,,,Ext.1134,0556394394,10001,,,Extension,Line,,Afrah Almantshri,0556394394,
INFO 2024-10-01 17:28:08,798 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:27', '0556394394', '1134', '00:00:17', '2024/10/01 14:27:50', '2024/10/01 14:28:07', 'TerminatedBySrc', '', '', 'Ext.1134', '0556394394', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0556394394', '']
INFO 2024-10-01 17:28:08,819 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:08,819 models 570 138242068317888 Initial state: caller=1134, callee=0556394394, duration=17, total_cost=0.0
INFO 2024-10-01 17:28:08,820 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:28:08,820 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0556394394
INFO 2024-10-01 17:28:08,820 utils 570 138242068317888 Original number: 0556394394
INFO 2024-10-01 17:28:08,820 utils 570 138242068317888 Cleaned number: 0556394394
INFO 2024-10-01 17:28:08,820 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:08,820 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:08,820 models 570 138242068317888 Categorizing call for number: 0556394394
INFO 2024-10-01 17:28:08,823 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:08,826 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:08,827 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:08,827 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:08,828 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:08,828 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:08,829 models 570 138242068317888 Match found: 0556394394 matches 05
INFO 2024-10-01 17:28:08,829 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:08,829 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 Calculating total cost for call: duration=17 seconds
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:28:08,830 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:08,834 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:08,834 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:28:08,837 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:28:08,840 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:08,841 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:08,841 models 570 138242068317888 Initial state: caller=1134, callee=0556394394, duration=17, total_cost=0.40
INFO 2024-10-01 17:28:08,844 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:28:08,844 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0556394394
INFO 2024-10-01 17:28:08,844 utils 570 138242068317888 Original number: 0556394394
INFO 2024-10-01 17:28:08,844 utils 570 138242068317888 Cleaned number: 0556394394
INFO 2024-10-01 17:28:08,845 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:08,845 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:08,845 models 570 138242068317888 Categorizing call for number: 0556394394
INFO 2024-10-01 17:28:08,848 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:08,850 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:08,851 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:08,851 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:08,851 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:08,852 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:08,852 models 570 138242068317888 Match found: 0556394394 matches 05
INFO 2024-10-01 17:28:08,852 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:08,852 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:08,853 models 570 138242068317888 Calculating total cost for call: duration=17 seconds
INFO 2024-10-01 17:28:08,854 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:28:08,854 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:08,854 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:28:08,854 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:28:08,854 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:08,858 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:08,858 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 17:28:08,860 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:28:08,862 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:08,863 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0556394394 at 2024-10-01 14:27:27+03:00
INFO 2024-10-01 17:28:09,264 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57463) on port 8000
INFO 2024-10-01 17:28:39,519 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:26:49,0596818703,7301,00:01:21,2024/10/01 14:27:16,2024/10/01 14:28:38,TerminatedByDst,,,Ext.7301,0596818703,10001,,,Extension,Line,,Muhammed Sahail,0596818703,
INFO 2024-10-01 17:28:39,520 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:26:49', '0596818703', '7301', '00:01:21', '2024/10/01 14:27:16', '2024/10/01 14:28:38', 'TerminatedByDst', '', '', 'Ext.7301', '0596818703', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0596818703', '']
INFO 2024-10-01 17:28:39,538 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:39,538 models 570 138242068317888 Initial state: caller=7301, callee=0596818703, duration=81, total_cost=0.0
INFO 2024-10-01 17:28:39,539 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:28:39,539 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0596818703
INFO 2024-10-01 17:28:39,539 utils 570 138242068317888 Original number: 0596818703
INFO 2024-10-01 17:28:39,539 utils 570 138242068317888 Cleaned number: 0596818703
INFO 2024-10-01 17:28:39,539 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:39,539 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:39,539 models 570 138242068317888 Categorizing call for number: 0596818703
INFO 2024-10-01 17:28:39,543 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:39,545 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:39,546 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:39,546 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Match found: 0596818703 matches 05
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:39,547 models 570 138242068317888 Calculating total cost for call: duration=81 seconds
INFO 2024-10-01 17:28:39,548 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:28:39,549 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:39,549 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:28:39,549 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:28:39,550 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:39,552 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:39,553 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:28:39,557 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:28:39,560 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:28:39,571 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:28:39.564843+00:00, Should reset: False
INFO 2024-10-01 17:28:39,573 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:28:39,573 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:28:39,573 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:28:39,573 models 570 138242068317888 Attempting to deduct 0.80 from balance 61.20
INFO 2024-10-01 17:28:39,576 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 60.40
INFO 2024-10-01 17:28:39,576 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 60.40
INFO 2024-10-01 17:28:39,578 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:39,578 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:39,578 models 570 138242068317888 Initial state: caller=7301, callee=0596818703, duration=81, total_cost=0.80
INFO 2024-10-01 17:28:39,581 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:28:39,581 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0596818703
INFO 2024-10-01 17:28:39,581 utils 570 138242068317888 Original number: 0596818703
INFO 2024-10-01 17:28:39,582 utils 570 138242068317888 Cleaned number: 0596818703
INFO 2024-10-01 17:28:39,582 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:39,582 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:39,582 models 570 138242068317888 Categorizing call for number: 0596818703
INFO 2024-10-01 17:28:39,584 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:39,587 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:39,587 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:39,588 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:39,588 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:39,589 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:39,589 models 570 138242068317888 Match found: 0596818703 matches 05
INFO 2024-10-01 17:28:39,590 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:39,590 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:39,591 models 570 138242068317888 Calculating total cost for call: duration=81 seconds
INFO 2024-10-01 17:28:39,591 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:28:39,592 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:39,592 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:28:39,592 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:28:39,592 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:39,595 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:39,596 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:28:39,600 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:28:39,603 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 39.60
INFO 2024-10-01 17:28:39,608 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:28:39.605224+00:00, Should reset: False
INFO 2024-10-01 17:28:39,608 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:28:39,609 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 39.60
INFO 2024-10-01 17:28:39,610 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:28:39,610 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:28:39,612 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:39,613 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0596818703 at 2024-10-01 14:26:49+03:00
INFO 2024-10-01 17:28:40,014 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57464) on port 8000
INFO 2024-10-01 17:28:44,860 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:29,0582588887,1134,,,2024/10/01 14:28:44,Failed,,,Ext.1134,0582588887,0582588887,,,Extension,LineSet,,Afrah Almantshri,0582588887,
INFO 2024-10-01 17:28:44,860 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:29', '0582588887', '1134', '', '', '2024/10/01 14:28:44', 'Failed', '', '', 'Ext.1134', '0582588887', '0582588887', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0582588887', '']
INFO 2024-10-01 17:28:44,880 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:44,881 models 570 138242068317888 Initial state: caller=1134, callee=0582588887, duration=None, total_cost=0.0
INFO 2024-10-01 17:28:44,881 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:28:44,881 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0582588887
INFO 2024-10-01 17:28:44,881 utils 570 138242068317888 Original number: 0582588887
INFO 2024-10-01 17:28:44,882 utils 570 138242068317888 Cleaned number: 0582588887
INFO 2024-10-01 17:28:44,882 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:44,883 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:44,883 models 570 138242068317888 Categorizing call for number: 0582588887
INFO 2024-10-01 17:28:44,886 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:44,889 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:44,890 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:44,890 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:44,890 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 Match found: 0582588887 matches 05
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:28:44,891 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:28:44,891 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:28:44,893 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:44,896 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:44,896 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:28:44,899 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:28:44,902 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:44,902 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:44,902 models 570 138242068317888 Initial state: caller=1134, callee=0582588887, duration=None, total_cost=0.00
INFO 2024-10-01 17:28:44,906 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:28:44,906 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0582588887
INFO 2024-10-01 17:28:44,906 utils 570 138242068317888 Original number: 0582588887
INFO 2024-10-01 17:28:44,906 utils 570 138242068317888 Cleaned number: 0582588887
INFO 2024-10-01 17:28:44,906 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:44,907 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:44,907 models 570 138242068317888 Categorizing call for number: 0582588887
INFO 2024-10-01 17:28:44,910 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:44,912 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:44,912 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:44,913 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Match found: 0582588887 matches 05
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:44,914 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:28:44,915 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:28:44,916 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:28:44,916 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:44,919 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:44,920 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:28:44,922 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:28:44,924 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:44,924 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0582588887 at 2024-10-01 14:28:29+03:00
INFO 2024-10-01 17:28:45,331 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57468) on port 8000
INFO 2024-10-01 17:28:58,101 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:54,0503720258,8451,00:00:24,2024/10/01 14:28:32,2024/10/01 14:28:57,TerminatedBySrc,,,Ext.8451,0503720258,10001,,,Extension,Line,,Jamil Agbay,0503720258,
INFO 2024-10-01 17:28:58,101 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:54', '0503720258', '8451', '00:00:24', '2024/10/01 14:28:32', '2024/10/01 14:28:57', 'TerminatedBySrc', '', '', 'Ext.8451', '0503720258', '10001', '', '', 'Extension', 'Line', '', 'Jamil Agbay', '0503720258', '']
INFO 2024-10-01 17:28:58,121 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:58,121 models 570 138242068317888 Initial state: caller=8451, callee=0503720258, duration=24, total_cost=0.0
INFO 2024-10-01 17:28:58,121 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:28:58,122 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0503720258
INFO 2024-10-01 17:28:58,122 utils 570 138242068317888 Original number: 0503720258
INFO 2024-10-01 17:28:58,122 utils 570 138242068317888 Cleaned number: 0503720258
INFO 2024-10-01 17:28:58,122 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:58,122 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:58,127 models 570 138242068317888 Categorizing call for number: 0503720258
INFO 2024-10-01 17:28:58,132 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:58,134 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:58,134 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Match found: 0503720258 matches 05
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:58,135 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 Calculating total cost for call: duration=24 seconds
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:28:58,136 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:58,139 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:58,139 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:28:58,143 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:28:58,145 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:28:58,149 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 14:28:58.147125+00:00, Should reset: False
INFO 2024-10-01 17:28:58,149 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:28:58,149 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:28:58,149 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:28:58,150 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 17:28:58,150 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 17:28:58,150 models 570 138242068317888 Warning: Quota exceeded for extension 8451
INFO 2024-10-01 17:28:58,152 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:58,152 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:58,153 models 570 138242068317888 Initial state: caller=8451, callee=0503720258, duration=24, total_cost=0.40
INFO 2024-10-01 17:28:58,155 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:28:58,156 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0503720258
INFO 2024-10-01 17:28:58,156 utils 570 138242068317888 Original number: 0503720258
INFO 2024-10-01 17:28:58,156 utils 570 138242068317888 Cleaned number: 0503720258
INFO 2024-10-01 17:28:58,156 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:58,156 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:58,156 models 570 138242068317888 Categorizing call for number: 0503720258
INFO 2024-10-01 17:28:58,159 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:58,161 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:58,161 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:58,162 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:58,162 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:58,162 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:58,162 models 570 138242068317888 Match found: 0503720258 matches 05
INFO 2024-10-01 17:28:58,163 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:28:58,163 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:58,163 models 570 138242068317888 Calculating total cost for call: duration=24 seconds
INFO 2024-10-01 17:28:58,163 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:28:58,163 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:28:58,164 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:28:58,164 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:28:58,164 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:58,166 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:58,167 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:28:58,170 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:28:58,171 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:28:58,175 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 14:28:58.173557+00:00, Should reset: False
INFO 2024-10-01 17:28:58,175 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:28:58,175 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:28:58,176 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:28:58,176 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:28:58,177 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:58,177 socket_server 570 138242068317888 Saved call record for company Smasco: 8451 -> 0503720258 at 2024-10-01 14:27:54+03:00
INFO 2024-10-01 17:28:58,585 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57476) on port 8000
INFO 2024-10-01 17:28:59,895 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:59,+966533533302,7821,,,2024/10/01 14:28:59,TargetNotFound,,,Ext.7821,,,,,Extension,EndCall,,Talal Alzahrani,+966533533302,
INFO 2024-10-01 17:28:59,895 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:59', '+966533533302', '7821', '', '', '2024/10/01 14:28:59', 'TargetNotFound', '', '', 'Ext.7821', '', '', '', '', 'Extension', 'EndCall', '', 'Talal Alzahrani', '+966533533302', '']
INFO 2024-10-01 17:28:59,911 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:59,912 models 570 138242068317888 Initial state: caller=7821, callee=+966533533302, duration=None, total_cost=0.0
INFO 2024-10-01 17:28:59,912 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:28:59,912 models 570 138242068317888 Before determining country, Caller: 7821, Callee: +966533533302
INFO 2024-10-01 17:28:59,913 utils 570 138242068317888 Original number: +966533533302
INFO 2024-10-01 17:28:59,913 utils 570 138242068317888 Cleaned number: 966533533302
INFO 2024-10-01 17:28:59,913 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:59,913 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:59,913 models 570 138242068317888 Categorizing call for number: +966533533302
INFO 2024-10-01 17:28:59,916 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:59,918 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: 00
INFO 2024-10-01 17:28:59,919 models 570 138242068317888 Checking pattern: +
INFO 2024-10-01 17:28:59,920 models 570 138242068317888 Match found: +966533533302 matches +
INFO 2024-10-01 17:28:59,920 models 570 138242068317888 Set call category to international and rate to 4.00
INFO 2024-10-01 17:28:59,920 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:59,920 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:28:59,920 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:28:59,921 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:28:59,921 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:59,923 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:59,923 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:28:59,927 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:28:59,929 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:28:59,933 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:28:59.931178+00:00, Should reset: False
INFO 2024-10-01 17:28:59,933 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:28:59,933 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:28:59,934 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:28:59,934 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:28:59,935 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:59,936 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:28:59,936 models 570 138242068317888 Initial state: caller=7821, callee=+966533533302, duration=None, total_cost=0.00
INFO 2024-10-01 17:28:59,938 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:28:59,939 models 570 138242068317888 Before determining country, Caller: 7821, Callee: +966533533302
INFO 2024-10-01 17:28:59,939 utils 570 138242068317888 Original number: +966533533302
INFO 2024-10-01 17:28:59,939 utils 570 138242068317888 Cleaned number: 966533533302
INFO 2024-10-01 17:28:59,939 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:28:59,939 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:28:59,939 models 570 138242068317888 Categorizing call for number: +966533533302
INFO 2024-10-01 17:28:59,941 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:28:59,943 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:28:59,943 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:28:59,943 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:28:59,943 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:28:59,943 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Checking pattern: 00
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Checking pattern: +
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Match found: +966533533302 matches +
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Set call category to international and rate to 4.00
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:28:59,944 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:28:59,945 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:28:59,945 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:28:59,945 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:28:59,947 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:28:59,947 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:28:59,950 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:28:59,951 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:28:59,954 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:28:59.952696+00:00, Should reset: False
INFO 2024-10-01 17:28:59,954 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:28:59,955 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:28:59,955 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:28:59,955 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:28:59,956 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:28:59,956 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> +966533533302 at 2024-10-01 14:28:59+03:00
INFO 2024-10-01 17:29:00,347 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57477) on port 8000
INFO 2024-10-01 17:29:01,438 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:44,8000,10001,00:01:15,2024/10/01 14:27:44,2024/10/01 14:29:00,Failed_Cancelled,FailedBXferOfSrc,,580021062,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,580021062:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 17:29:01,438 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:44', '8000', '10001', '00:01:15', '2024/10/01 14:27:44', '2024/10/01 14:29:00', 'Failed_Cancelled', 'FailedBXferOfSrc', '', '580021062', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '580021062:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 17:29:01,458 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:01,458 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=75, total_cost=0.0
INFO 2024-10-01 17:29:01,458 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:29:01,458 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:29:01,458 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:29:01,459 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:29:01,459 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:01,459 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:01,459 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:29:01,463 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:01,466 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:01,466 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:29:01,466 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:01,467 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:01,467 models 570 138242068317888 Calculating total cost for call: duration=75 seconds
INFO 2024-10-01 17:29:01,467 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:29:01,467 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:01,467 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:01,468 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:01,468 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:01,471 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:01,472 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:01,475 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:01,477 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:01,477 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:01,477 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=75, total_cost=0.00
INFO 2024-10-01 17:29:01,480 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:29:01,480 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:29:01,480 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:29:01,481 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:29:01,481 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:01,481 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:01,481 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:29:01,483 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:01,486 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:01,486 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:29:01,486 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:01,486 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:01,486 models 570 138242068317888 Calculating total cost for call: duration=75 seconds
INFO 2024-10-01 17:29:01,489 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:29:01,489 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:01,489 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:01,489 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:01,489 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:01,495 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:01,495 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:01,497 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:01,498 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:01,498 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:27:44+03:00
INFO 2024-10-01 17:29:01,905 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57478) on port 8000
INFO 2024-10-01 17:29:05,265 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:40,7446,8477,00:00:04,2024/10/01 14:29:00,2024/10/01 14:29:04,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:29:05,265 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:40', '7446', '8477', '00:00:04', '2024/10/01 14:29:00', '2024/10/01 14:29:04', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:29:05,283 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:05,284 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=4, total_cost=0.0
INFO 2024-10-01 17:29:05,284 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:29:05,284 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:29:05,284 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:29:05,285 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:29:05,285 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:05,285 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:05,285 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:29:05,289 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:05,291 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:05,291 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:29:05,291 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:05,292 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:05,295 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:05,296 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:29:05,300 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:29:05,302 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:29:05,307 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:29:05.304529+00:00, Should reset: False
INFO 2024-10-01 17:29:05,307 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:29:05,307 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:29:05,308 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:29:05,308 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:29:05,309 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:05,310 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:05,310 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=4, total_cost=0.00
INFO 2024-10-01 17:29:05,312 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:29:05,313 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:29:05,313 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:29:05,314 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:29:05,314 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:05,314 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:05,314 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:29:05,318 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:05,320 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:05,321 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:29:05,321 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:05,321 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:05,322 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:29:05,322 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:05,322 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:05,323 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:05,323 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:05,323 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:05,327 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:05,327 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:29:05,330 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:29:05,332 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:29:05,336 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:29:05.334348+00:00, Should reset: False
INFO 2024-10-01 17:29:05,336 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:29:05,337 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:29:05,337 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:29:05,337 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:29:05,339 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:05,340 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:28:40+03:00
INFO 2024-10-01 17:29:05,749 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57480) on port 8000
INFO 2024-10-01 17:29:50,284 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:29:34,8003,10001,00:00:15,2024/10/01 14:29:34,2024/10/01 14:29:49,TerminatedBySrc,,,506409136,Ext.8003,8003,,,Line,Ivr,,506409136:Addeed Welcome,Added Welcome Message,
INFO 2024-10-01 17:29:50,284 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:29:34', '8003', '10001', '00:00:15', '2024/10/01 14:29:34', '2024/10/01 14:29:49', 'TerminatedBySrc', '', '', '506409136', 'Ext.8003', '8003', '', '', 'Line', 'Ivr', '', '506409136:Addeed Welcome', 'Added Welcome Message', '']
INFO 2024-10-01 17:29:50,313 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:50,313 models 570 138242068317888 Initial state: caller=10001, callee=8003, duration=15, total_cost=0.0
INFO 2024-10-01 17:29:50,313 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:29:50,314 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8003
INFO 2024-10-01 17:29:50,314 utils 570 138242068317888 Original number: 8003
INFO 2024-10-01 17:29:50,314 utils 570 138242068317888 Cleaned number: 8003
INFO 2024-10-01 17:29:50,314 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:50,314 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:50,315 models 570 138242068317888 Categorizing call for number: 8003
INFO 2024-10-01 17:29:50,317 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:50,320 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:50,320 models 570 138242068317888 Match found: 8003 matches ^\d{4}$
INFO 2024-10-01 17:29:50,321 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:50,321 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:50,321 models 570 138242068317888 Calculating total cost for call: duration=15 seconds
INFO 2024-10-01 17:29:50,321 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:50,321 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:50,322 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:50,322 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:50,322 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:50,325 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:50,325 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:50,328 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:50,330 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:50,330 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:50,331 models 570 138242068317888 Initial state: caller=10001, callee=8003, duration=15, total_cost=0.00
INFO 2024-10-01 17:29:50,334 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:29:50,334 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8003
INFO 2024-10-01 17:29:50,334 utils 570 138242068317888 Original number: 8003
INFO 2024-10-01 17:29:50,335 utils 570 138242068317888 Cleaned number: 8003
INFO 2024-10-01 17:29:50,335 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:50,335 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:50,335 models 570 138242068317888 Categorizing call for number: 8003
INFO 2024-10-01 17:29:50,338 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:50,340 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:50,341 models 570 138242068317888 Match found: 8003 matches ^\d{4}$
INFO 2024-10-01 17:29:50,341 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:50,341 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:50,341 models 570 138242068317888 Calculating total cost for call: duration=15 seconds
INFO 2024-10-01 17:29:50,341 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:50,342 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:50,342 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:50,343 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:50,343 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:50,346 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:50,346 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:50,348 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:50,350 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:50,350 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8003 at 2024-10-01 14:29:34+03:00
INFO 2024-10-01 17:29:50,755 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57489) on port 8000
INFO 2024-10-01 17:29:55,704 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:29:42,8000,10001,00:00:12,2024/10/01 14:29:42,2024/10/01 14:29:54,TerminatedBySrc,,,552698598,Ext.8000,8000,,,Line,Ivr,,552698598:Main Number,WelcomeMessage,
INFO 2024-10-01 17:29:55,705 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:29:42', '8000', '10001', '00:00:12', '2024/10/01 14:29:42', '2024/10/01 14:29:54', 'TerminatedBySrc', '', '', '552698598', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '552698598:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:29:55,722 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:55,722 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.0
INFO 2024-10-01 17:29:55,722 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:29:55,723 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:29:55,723 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:29:55,723 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:29:55,723 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:55,724 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:55,724 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:29:55,726 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:55,728 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:55,729 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:29:55,729 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:55,729 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:55,729 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 17:29:55,730 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:55,730 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:55,730 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:55,730 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:55,730 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:55,732 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:55,733 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:55,735 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:55,737 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:55,737 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:29:55,737 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.00
INFO 2024-10-01 17:29:55,739 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:29:55,740 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:29:55,740 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:29:55,740 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:29:55,740 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:29:55,740 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:29:55,740 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:29:55,742 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:29:55,744 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:29:55,744 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:29:55,745 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:29:55,746 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:29:55,746 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:29:55,748 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:29:55,748 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:29:55,749 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:29:55,750 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:29:55,751 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:29:42+03:00
INFO 2024-10-01 17:29:56,175 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57491) on port 8000
INFO 2024-10-01 17:30:03,850 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:41,0570903591,8426,00:01:12,2024/10/01 14:28:51,2024/10/01 14:30:03,TerminatedBySrc,,,Ext.8426,0570903591,10001,,,Extension,Line,,Rehan Khan Mohammed,0570903591,
INFO 2024-10-01 17:30:03,850 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:41', '0570903591', '8426', '00:01:12', '2024/10/01 14:28:51', '2024/10/01 14:30:03', 'TerminatedBySrc', '', '', 'Ext.8426', '0570903591', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0570903591', '']
INFO 2024-10-01 17:30:03,872 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:03,872 models 570 138242068317888 Initial state: caller=8426, callee=0570903591, duration=72, total_cost=0.0
INFO 2024-10-01 17:30:03,872 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:30:03,872 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0570903591
INFO 2024-10-01 17:30:03,873 utils 570 138242068317888 Original number: 0570903591
INFO 2024-10-01 17:30:03,873 utils 570 138242068317888 Cleaned number: 0570903591
INFO 2024-10-01 17:30:03,873 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:03,873 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:03,873 models 570 138242068317888 Categorizing call for number: 0570903591
INFO 2024-10-01 17:30:03,877 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:03,880 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:03,881 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:03,881 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:03,881 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:03,882 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:03,882 models 570 138242068317888 Match found: 0570903591 matches 05
INFO 2024-10-01 17:30:03,882 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:03,882 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 Calculating total cost for call: duration=72 seconds
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:30:03,883 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:03,887 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:03,887 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:30:03,893 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:30:03,896 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:03,901 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:30:03.898650+00:00, Should reset: False
INFO 2024-10-01 17:30:03,901 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:30:03,902 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:03,902 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:30:03,902 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:30:03,902 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:30:03,903 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 17:30:03,904 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:03,905 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:03,906 models 570 138242068317888 Initial state: caller=8426, callee=0570903591, duration=72, total_cost=0.80
INFO 2024-10-01 17:30:03,909 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:30:03,909 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0570903591
INFO 2024-10-01 17:30:03,909 utils 570 138242068317888 Original number: 0570903591
INFO 2024-10-01 17:30:03,909 utils 570 138242068317888 Cleaned number: 0570903591
INFO 2024-10-01 17:30:03,909 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:03,910 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:03,910 models 570 138242068317888 Categorizing call for number: 0570903591
INFO 2024-10-01 17:30:03,912 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:03,914 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:03,915 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:03,915 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:03,915 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:03,915 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:03,916 models 570 138242068317888 Match found: 0570903591 matches 05
INFO 2024-10-01 17:30:03,916 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:03,916 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:03,916 models 570 138242068317888 Calculating total cost for call: duration=72 seconds
INFO 2024-10-01 17:30:03,916 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:30:03,917 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:30:03,917 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:30:03,917 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:30:03,917 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:03,919 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:03,920 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:30:03,922 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:30:03,924 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:03,935 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:30:03.930151+00:00, Should reset: False
INFO 2024-10-01 17:30:03,936 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:30:03,937 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:03,937 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:30:03,937 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:30:03,939 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:03,939 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0570903591 at 2024-10-01 14:28:41+03:00
INFO 2024-10-01 17:30:04,349 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57492) on port 8000
INFO 2024-10-01 17:30:36,584 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:35,0559969663,7789,,,2024/10/01 14:30:35,Failed,,,Ext.7789,0559969663,0559969663,,,Extension,LineSet,,Ahmed Swaidi,0559969663,
INFO 2024-10-01 17:30:36,584 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:35', '0559969663', '7789', '', '', '2024/10/01 14:30:35', 'Failed', '', '', 'Ext.7789', '0559969663', '0559969663', '', '', 'Extension', 'LineSet', '', 'Ahmed Swaidi', '0559969663', '']
INFO 2024-10-01 17:30:36,600 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:36,601 models 570 138242068317888 Initial state: caller=7789, callee=0559969663, duration=None, total_cost=0.0
INFO 2024-10-01 17:30:36,601 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:30:36,601 models 570 138242068317888 Before determining country, Caller: 7789, Callee: 0559969663
INFO 2024-10-01 17:30:36,601 utils 570 138242068317888 Original number: 0559969663
INFO 2024-10-01 17:30:36,601 utils 570 138242068317888 Cleaned number: 0559969663
INFO 2024-10-01 17:30:36,602 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:36,602 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:36,602 models 570 138242068317888 Categorizing call for number: 0559969663
INFO 2024-10-01 17:30:36,604 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:36,606 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:36,607 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:36,607 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:36,607 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:36,607 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:36,607 models 570 138242068317888 Match found: 0559969663 matches 05
INFO 2024-10-01 17:30:36,608 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:36,608 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:36,608 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:30:36,608 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:30:36,608 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:30:36,609 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:36,611 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:36,611 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:30:36,615 models 570 138242068317888 Found extension: 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:30:36,616 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:30:36,620 models 570 138242068317888 Quota for 7789 - Ahmed Swaidi (Smasco): Last reset: 2024-09-15 06:35:25.294700+00:00, Next reset: 2024-10-15 06:35:25.294700+00:00, Current time: 2024-10-01 14:30:36.618299+00:00, Should reset: False
INFO 2024-10-01 17:30:36,620 models 570 138242068317888 Quota reset not needed for 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:30:36,620 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:30:36,620 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:30:36,620 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:30:36,622 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:36,622 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:36,623 models 570 138242068317888 Initial state: caller=7789, callee=0559969663, duration=None, total_cost=0.00
INFO 2024-10-01 17:30:36,625 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:30:36,625 models 570 138242068317888 Before determining country, Caller: 7789, Callee: 0559969663
INFO 2024-10-01 17:30:36,625 utils 570 138242068317888 Original number: 0559969663
INFO 2024-10-01 17:30:36,626 utils 570 138242068317888 Cleaned number: 0559969663
INFO 2024-10-01 17:30:36,626 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:36,626 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:36,626 models 570 138242068317888 Categorizing call for number: 0559969663
INFO 2024-10-01 17:30:36,628 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:36,629 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:36,630 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:36,630 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:36,630 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:36,630 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:36,630 models 570 138242068317888 Match found: 0559969663 matches 05
INFO 2024-10-01 17:30:36,631 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:36,631 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:36,631 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:30:36,631 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:30:36,631 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:30:36,631 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:36,634 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:36,634 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:30:36,637 models 570 138242068317888 Found extension: 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:30:36,639 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:30:36,643 models 570 138242068317888 Quota for 7789 - Ahmed Swaidi (Smasco): Last reset: 2024-09-15 06:35:25.294700+00:00, Next reset: 2024-10-15 06:35:25.294700+00:00, Current time: 2024-10-01 14:30:36.640752+00:00, Should reset: False
INFO 2024-10-01 17:30:36,643 models 570 138242068317888 Quota reset not needed for 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:30:36,643 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:30:36,643 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:30:36,644 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:30:36,645 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:36,645 socket_server 570 138242068317888 Saved call record for company Smasco: 7789 -> 0559969663 at 2024-10-01 14:30:35+03:00
INFO 2024-10-01 17:30:37,061 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57502) on port 8000
INFO 2024-10-01 17:30:50,896 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:35,0558422839,7790,00:02:03,2024/10/01 14:28:46,2024/10/01 14:30:50,TerminatedBySrc,,,Ext.7790,0558422839,10001,,,Extension,Line,,Maram Alharbi,0558422839,
INFO 2024-10-01 17:30:50,896 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:35', '0558422839', '7790', '00:02:03', '2024/10/01 14:28:46', '2024/10/01 14:30:50', 'TerminatedBySrc', '', '', 'Ext.7790', '0558422839', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0558422839', '']
INFO 2024-10-01 17:30:50,916 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:50,916 models 570 138242068317888 Initial state: caller=7790, callee=0558422839, duration=123, total_cost=0.0
INFO 2024-10-01 17:30:50,917 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:30:50,917 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0558422839
INFO 2024-10-01 17:30:50,918 utils 570 138242068317888 Original number: 0558422839
INFO 2024-10-01 17:30:50,918 utils 570 138242068317888 Cleaned number: 0558422839
INFO 2024-10-01 17:30:50,918 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:50,918 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:50,918 models 570 138242068317888 Categorizing call for number: 0558422839
INFO 2024-10-01 17:30:50,922 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:50,925 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:50,926 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:50,926 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:50,926 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:50,927 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:50,927 models 570 138242068317888 Match found: 0558422839 matches 05
INFO 2024-10-01 17:30:50,927 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:50,928 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:50,928 models 570 138242068317888 Calculating total cost for call: duration=123 seconds
INFO 2024-10-01 17:30:50,928 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:30:50,929 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:30:50,929 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:30:50,929 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:30:50,929 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:50,932 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:50,933 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:30:50,938 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:30:50,941 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:50,946 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:30:50.943599+00:00, Should reset: False
INFO 2024-10-01 17:30:50,947 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:30:50,947 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:50,947 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 17:30:50,947 models 570 138242068317888 Attempting to deduct 1.20 from balance 0.00
WARNING 2024-10-01 17:30:50,948 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.20
WARNING 2024-10-01 17:30:50,948 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 17:30:50,950 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:50,951 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:50,951 models 570 138242068317888 Initial state: caller=7790, callee=0558422839, duration=123, total_cost=1.20
INFO 2024-10-01 17:30:50,954 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:30:50,954 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0558422839
INFO 2024-10-01 17:30:50,955 utils 570 138242068317888 Original number: 0558422839
INFO 2024-10-01 17:30:50,955 utils 570 138242068317888 Cleaned number: 0558422839
INFO 2024-10-01 17:30:50,956 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:50,956 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:50,956 models 570 138242068317888 Categorizing call for number: 0558422839
INFO 2024-10-01 17:30:50,959 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:50,961 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:50,961 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:50,962 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:50,962 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:50,962 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:50,962 models 570 138242068317888 Match found: 0558422839 matches 05
INFO 2024-10-01 17:30:50,963 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:50,963 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:50,963 models 570 138242068317888 Calculating total cost for call: duration=123 seconds
INFO 2024-10-01 17:30:50,963 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:30:50,964 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:30:50,964 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:30:50,964 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:30:50,964 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:50,967 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:50,968 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 17:30:50,971 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:30:50,972 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:50,976 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:30:50.974221+00:00, Should reset: False
INFO 2024-10-01 17:30:50,976 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:30:50,976 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:30:50,977 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:30:50,977 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:30:50,978 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:50,978 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0558422839 at 2024-10-01 14:28:35+03:00
INFO 2024-10-01 17:30:51,377 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57506) on port 8000
INFO 2024-10-01 17:30:55,572 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:54,0537737728,1159,,,2024/10/01 14:30:54,Failed,,,Ext.1159,0537737728,0537737728,,,Extension,LineSet,,Saad Almasood,0537737728,
INFO 2024-10-01 17:30:55,573 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:54', '0537737728', '1159', '', '', '2024/10/01 14:30:54', 'Failed', '', '', 'Ext.1159', '0537737728', '0537737728', '', '', 'Extension', 'LineSet', '', 'Saad Almasood', '0537737728', '']
INFO 2024-10-01 17:30:55,589 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:55,590 models 570 138242068317888 Initial state: caller=1159, callee=0537737728, duration=None, total_cost=0.0
INFO 2024-10-01 17:30:55,590 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:30:55,590 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0537737728
INFO 2024-10-01 17:30:55,590 utils 570 138242068317888 Original number: 0537737728
INFO 2024-10-01 17:30:55,590 utils 570 138242068317888 Cleaned number: 0537737728
INFO 2024-10-01 17:30:55,591 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:55,591 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:55,591 models 570 138242068317888 Categorizing call for number: 0537737728
INFO 2024-10-01 17:30:55,594 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:55,597 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:55,597 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:55,597 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:55,597 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:55,598 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:55,598 models 570 138242068317888 Match found: 0537737728 matches 05
INFO 2024-10-01 17:30:55,598 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:55,598 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:55,598 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:30:55,598 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:30:55,599 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:30:55,599 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:55,601 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:55,601 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:30:55,604 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:30:55,606 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:55,606 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:30:55,606 models 570 138242068317888 Initial state: caller=1159, callee=0537737728, duration=None, total_cost=0.00
INFO 2024-10-01 17:30:55,608 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:30:55,609 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0537737728
INFO 2024-10-01 17:30:55,609 utils 570 138242068317888 Original number: 0537737728
INFO 2024-10-01 17:30:55,609 utils 570 138242068317888 Cleaned number: 0537737728
INFO 2024-10-01 17:30:55,609 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:30:55,609 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:30:55,609 models 570 138242068317888 Categorizing call for number: 0537737728
INFO 2024-10-01 17:30:55,612 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:30:55,613 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Match found: 0537737728 matches 05
INFO 2024-10-01 17:30:55,614 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:30:55,615 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:30:55,615 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:30:55,616 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:30:55,616 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:30:55,616 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:30:55,618 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:30:55,618 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:30:55,620 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:30:55,622 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:30:55,622 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0537737728 at 2024-10-01 14:30:54+03:00
INFO 2024-10-01 17:30:56,036 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57509) on port 8000
INFO 2024-10-01 17:31:02,261 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:53,8712,1021,,,2024/10/01 14:31:01,Failed_Cancelled,,,Ext.1021,Ext.8712,8712,,,Extension,Extension,,Mohammed Aquil,Jamseed Chappa Thodika,
INFO 2024-10-01 17:31:02,262 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:53', '8712', '1021', '', '', '2024/10/01 14:31:01', 'Failed_Cancelled', '', '', 'Ext.1021', 'Ext.8712', '8712', '', '', 'Extension', 'Extension', '', 'Mohammed Aquil', 'Jamseed Chappa Thodika', '']
INFO 2024-10-01 17:31:02,287 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:02,287 models 570 138242068317888 Initial state: caller=1021, callee=8712, duration=None, total_cost=0.0
INFO 2024-10-01 17:31:02,288 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:31:02,288 models 570 138242068317888 Before determining country, Caller: 1021, Callee: 8712
INFO 2024-10-01 17:31:02,288 utils 570 138242068317888 Original number: 8712
INFO 2024-10-01 17:31:02,288 utils 570 138242068317888 Cleaned number: 8712
INFO 2024-10-01 17:31:02,288 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:31:02,289 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:02,289 models 570 138242068317888 Categorizing call for number: 8712
INFO 2024-10-01 17:31:02,292 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:02,295 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:02,295 models 570 138242068317888 Match found: 8712 matches ^\d{4}$
INFO 2024-10-01 17:31:02,295 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:31:02,296 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:02,296 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:02,296 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:02,296 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:02,296 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:02,299 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:02,300 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:02,305 models 570 138242068317888 Found extension: 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 17:31:02,307 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 17:31:02,317 models 570 138242068317888 Quota for 1021 - Mohammed Aquil (Smasco): Last reset: 2024-09-15 06:34:08.988366+00:00, Next reset: 2024-10-15 06:34:08.988366+00:00, Current time: 2024-10-01 14:31:02.309820+00:00, Should reset: False
INFO 2024-10-01 17:31:02,317 models 570 138242068317888 Quota reset not needed for 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 17:31:02,318 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 17:31:02,318 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:02,318 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:02,323 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:02,323 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:02,323 models 570 138242068317888 Initial state: caller=1021, callee=8712, duration=None, total_cost=0.00
INFO 2024-10-01 17:31:02,326 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:31:02,327 models 570 138242068317888 Before determining country, Caller: 1021, Callee: 8712
INFO 2024-10-01 17:31:02,327 utils 570 138242068317888 Original number: 8712
INFO 2024-10-01 17:31:02,327 utils 570 138242068317888 Cleaned number: 8712
INFO 2024-10-01 17:31:02,327 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:31:02,327 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:02,328 models 570 138242068317888 Categorizing call for number: 8712
INFO 2024-10-01 17:31:02,330 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:02,332 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:02,332 models 570 138242068317888 Match found: 8712 matches ^\d{4}$
INFO 2024-10-01 17:31:02,332 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:31:02,332 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:02,333 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:02,333 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:02,333 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:02,333 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:02,336 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:02,336 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:02,339 models 570 138242068317888 Found extension: 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 17:31:02,342 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 17:31:02,346 models 570 138242068317888 Quota for 1021 - Mohammed Aquil (Smasco): Last reset: 2024-09-15 06:34:08.988366+00:00, Next reset: 2024-10-15 06:34:08.988366+00:00, Current time: 2024-10-01 14:31:02.343908+00:00, Should reset: False
INFO 2024-10-01 17:31:02,347 models 570 138242068317888 Quota reset not needed for 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 17:31:02,347 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 17:31:02,347 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:02,347 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:02,348 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:02,349 socket_server 570 138242068317888 Saved call record for company Smasco: 1021 -> 8712 at 2024-10-01 14:30:53+03:00
INFO 2024-10-01 17:31:02,766 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57517) on port 8000
INFO 2024-10-01 17:31:04,681 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:26:35,0581314644,7327,00:04:15,2024/10/01 14:26:48,2024/10/01 14:31:03,TerminatedBySrc,,,Ext.7327,0581314644,10001,,,Extension,Line,,Muhammad Hamza Haider,0581314644,
INFO 2024-10-01 17:31:04,681 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:26:35', '0581314644', '7327', '00:04:15', '2024/10/01 14:26:48', '2024/10/01 14:31:03', 'TerminatedBySrc', '', '', 'Ext.7327', '0581314644', '10001', '', '', 'Extension', 'Line', '', 'Muhammad Hamza Haider', '0581314644', '']
INFO 2024-10-01 17:31:04,704 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:04,704 models 570 138242068317888 Initial state: caller=7327, callee=0581314644, duration=255, total_cost=0.0
INFO 2024-10-01 17:31:04,704 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:31:04,705 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0581314644
INFO 2024-10-01 17:31:04,705 utils 570 138242068317888 Original number: 0581314644
INFO 2024-10-01 17:31:04,706 utils 570 138242068317888 Cleaned number: 0581314644
INFO 2024-10-01 17:31:04,706 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:04,706 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:04,706 models 570 138242068317888 Categorizing call for number: 0581314644
INFO 2024-10-01 17:31:04,709 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:04,712 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:04,712 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:04,713 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:04,713 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:04,713 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:04,713 models 570 138242068317888 Match found: 0581314644 matches 05
INFO 2024-10-01 17:31:04,713 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:04,714 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:04,714 models 570 138242068317888 Calculating total cost for call: duration=255 seconds
INFO 2024-10-01 17:31:04,714 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:31:04,714 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:31:04,714 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:31:04,715 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 17:31:04,715 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:04,717 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:04,717 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:04,721 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:04,723 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:04,727 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:31:04.725202+00:00, Should reset: False
INFO 2024-10-01 17:31:04,728 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:04,728 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:04,728 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 17:31:04,729 models 570 138242068317888 Attempting to deduct 2.00 from balance 0.00
WARNING 2024-10-01 17:31:04,729 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.00
WARNING 2024-10-01 17:31:04,729 models 570 138242068317888 Warning: Quota exceeded for extension 7327
INFO 2024-10-01 17:31:04,732 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:04,732 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:04,733 models 570 138242068317888 Initial state: caller=7327, callee=0581314644, duration=255, total_cost=2.00
INFO 2024-10-01 17:31:04,736 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 17:31:04,736 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0581314644
INFO 2024-10-01 17:31:04,736 utils 570 138242068317888 Original number: 0581314644
INFO 2024-10-01 17:31:04,736 utils 570 138242068317888 Cleaned number: 0581314644
INFO 2024-10-01 17:31:04,737 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:04,737 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:04,737 models 570 138242068317888 Categorizing call for number: 0581314644
INFO 2024-10-01 17:31:04,740 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:04,742 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:04,742 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:04,743 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:04,743 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:04,743 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:04,743 models 570 138242068317888 Match found: 0581314644 matches 05
INFO 2024-10-01 17:31:04,744 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:04,744 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:04,744 models 570 138242068317888 Calculating total cost for call: duration=255 seconds
INFO 2024-10-01 17:31:04,744 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:31:04,744 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:31:04,745 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:31:04,745 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 17:31:04,745 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:04,747 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:04,747 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 17:31:04,750 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:04,751 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:04,754 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:31:04.752887+00:00, Should reset: False
INFO 2024-10-01 17:31:04,755 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:04,755 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:04,755 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:04,755 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:04,757 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:04,757 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 0581314644 at 2024-10-01 14:26:35+03:00
INFO 2024-10-01 17:31:05,157 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57519) on port 8000
INFO 2024-10-01 17:31:08,629 autoreload 87310 131704222388352 Watching for file changes with StatReloader
INFO 2024-10-01 17:31:15,632 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:42,0500116106,7174,,,2024/10/01 14:31:14,Failed,,,Ext.7174,0500116106,0500116106,,,Extension,LineSet,,Munawwarah Muhammad,0500116106,
INFO 2024-10-01 17:31:15,633 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:42', '0500116106', '7174', '', '', '2024/10/01 14:31:14', 'Failed', '', '', 'Ext.7174', '0500116106', '0500116106', '', '', 'Extension', 'LineSet', '', 'Munawwarah Muhammad', '0500116106', '']
INFO 2024-10-01 17:31:15,654 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:15,655 models 570 138242068317888 Initial state: caller=7174, callee=0500116106, duration=None, total_cost=0.0
INFO 2024-10-01 17:31:15,655 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:31:15,656 models 570 138242068317888 Before determining country, Caller: 7174, Callee: 0500116106
INFO 2024-10-01 17:31:15,656 utils 570 138242068317888 Original number: 0500116106
INFO 2024-10-01 17:31:15,657 utils 570 138242068317888 Cleaned number: 0500116106
INFO 2024-10-01 17:31:15,657 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:15,658 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:15,658 models 570 138242068317888 Categorizing call for number: 0500116106
INFO 2024-10-01 17:31:15,662 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:15,664 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:15,665 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:15,665 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:15,666 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:15,666 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:15,666 models 570 138242068317888 Match found: 0500116106 matches 05
INFO 2024-10-01 17:31:15,666 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:15,667 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:15,667 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:15,667 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:15,667 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:15,668 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:15,670 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:15,671 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:15,676 models 570 138242068317888 Found extension: 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:31:15,678 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:15,684 models 570 138242068317888 Quota for 7174 - Munawwarah Muhammad (Smasco): Last reset: 2024-09-15 06:34:54.971964+00:00, Next reset: 2024-10-15 06:34:54.971964+00:00, Current time: 2024-10-01 14:31:15.681456+00:00, Should reset: False
INFO 2024-10-01 17:31:15,684 models 570 138242068317888 Quota reset not needed for 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:31:15,684 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:15,684 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:15,685 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:15,687 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:15,687 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:15,688 models 570 138242068317888 Initial state: caller=7174, callee=0500116106, duration=None, total_cost=0.00
INFO 2024-10-01 17:31:15,691 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:31:15,692 models 570 138242068317888 Before determining country, Caller: 7174, Callee: 0500116106
INFO 2024-10-01 17:31:15,693 utils 570 138242068317888 Original number: 0500116106
INFO 2024-10-01 17:31:15,693 utils 570 138242068317888 Cleaned number: 0500116106
INFO 2024-10-01 17:31:15,693 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:15,694 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:15,694 models 570 138242068317888 Categorizing call for number: 0500116106
INFO 2024-10-01 17:31:15,697 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:15,700 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:15,700 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:15,701 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:15,701 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:15,701 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:15,701 models 570 138242068317888 Match found: 0500116106 matches 05
INFO 2024-10-01 17:31:15,702 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:15,702 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:15,702 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:15,703 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:15,703 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:15,703 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:15,705 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:15,706 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:15,708 models 570 138242068317888 Found extension: 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:31:15,712 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:15,716 models 570 138242068317888 Quota for 7174 - Munawwarah Muhammad (Smasco): Last reset: 2024-09-15 06:34:54.971964+00:00, Next reset: 2024-10-15 06:34:54.971964+00:00, Current time: 2024-10-01 14:31:15.714186+00:00, Should reset: False
INFO 2024-10-01 17:31:15,716 models 570 138242068317888 Quota reset not needed for 7174 - Munawwarah Muhammad (Smasco)
INFO 2024-10-01 17:31:15,716 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:15,716 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:15,717 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:15,718 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:15,718 socket_server 570 138242068317888 Saved call record for company Smasco: 7174 -> 0500116106 at 2024-10-01 14:30:42+03:00
INFO 2024-10-01 17:31:16,124 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57521) on port 8000
INFO 2024-10-01 17:31:26,294 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:31:15,0594722690,1159,,,2024/10/01 14:31:25,Failed,,,Ext.1159,0594722690,0594722690,,,Extension,LineSet,,Saad Almasood,0594722690,
INFO 2024-10-01 17:31:26,294 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:31:15', '0594722690', '1159', '', '', '2024/10/01 14:31:25', 'Failed', '', '', 'Ext.1159', '0594722690', '0594722690', '', '', 'Extension', 'LineSet', '', 'Saad Almasood', '0594722690', '']
INFO 2024-10-01 17:31:26,311 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:26,312 models 570 138242068317888 Initial state: caller=1159, callee=0594722690, duration=None, total_cost=0.0
INFO 2024-10-01 17:31:26,312 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:31:26,312 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0594722690
INFO 2024-10-01 17:31:26,312 utils 570 138242068317888 Original number: 0594722690
INFO 2024-10-01 17:31:26,313 utils 570 138242068317888 Cleaned number: 0594722690
INFO 2024-10-01 17:31:26,313 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:26,313 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:26,313 models 570 138242068317888 Categorizing call for number: 0594722690
INFO 2024-10-01 17:31:26,316 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:26,317 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:26,318 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:26,318 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:26,318 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:26,319 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:26,319 models 570 138242068317888 Match found: 0594722690 matches 05
INFO 2024-10-01 17:31:26,319 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:26,319 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:26,319 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:26,320 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:26,320 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:26,320 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:26,322 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:26,323 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:31:26,325 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:31:26,327 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:26,327 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:26,327 models 570 138242068317888 Initial state: caller=1159, callee=0594722690, duration=None, total_cost=0.00
INFO 2024-10-01 17:31:26,329 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:31:26,330 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0594722690
INFO 2024-10-01 17:31:26,330 utils 570 138242068317888 Original number: 0594722690
INFO 2024-10-01 17:31:26,330 utils 570 138242068317888 Cleaned number: 0594722690
INFO 2024-10-01 17:31:26,330 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:31:26,330 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:26,330 models 570 138242068317888 Categorizing call for number: 0594722690
INFO 2024-10-01 17:31:26,332 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:26,333 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:26,334 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:31:26,334 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:31:26,334 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:31:26,334 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:31:26,334 models 570 138242068317888 Match found: 0594722690 matches 05
INFO 2024-10-01 17:31:26,335 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:31:26,335 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:26,335 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:26,335 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:26,335 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:26,335 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:26,337 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:26,337 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:31:26,339 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:31:26,340 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:26,340 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0594722690 at 2024-10-01 14:31:15+03:00
INFO 2024-10-01 17:31:26,739 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57524) on port 8000
INFO 2024-10-01 17:31:35,144 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:31:16,6730,7327,,,2024/10/01 14:31:34,Failed_Cancelled,,,Ext.7327,Ext.6730,6730,,,Extension,Extension,,Muhammad Hamza Haider,Vijaya krishnan,
INFO 2024-10-01 17:31:35,144 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:31:16', '6730', '7327', '', '', '2024/10/01 14:31:34', 'Failed_Cancelled', '', '', 'Ext.7327', 'Ext.6730', '6730', '', '', 'Extension', 'Extension', '', 'Muhammad Hamza Haider', 'Vijaya krishnan', '']
INFO 2024-10-01 17:31:35,172 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:35,173 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=None, total_cost=0.0
INFO 2024-10-01 17:31:35,173 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:31:35,174 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 17:31:35,174 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 17:31:35,174 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 17:31:35,174 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:31:35,175 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:35,175 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 17:31:35,177 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:35,180 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:35,180 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 17:31:35,180 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:31:35,180 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:35,181 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:35,181 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:35,181 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:35,182 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:35,184 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:35,184 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:35,188 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:35,190 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:35,205 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:31:35.195185+00:00, Should reset: False
INFO 2024-10-01 17:31:35,205 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:35,206 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:35,206 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:35,206 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:35,208 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:35,209 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:31:35,209 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=None, total_cost=0.00
INFO 2024-10-01 17:31:35,212 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:31:35,212 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 17:31:35,212 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 17:31:35,213 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 17:31:35,213 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:31:35,213 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:31:35,213 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 17:31:35,215 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:31:35,217 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:31:35,217 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 17:31:35,217 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:31:35,218 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:31:35,218 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:31:35,218 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:31:35,218 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:31:35,218 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:31:35,220 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:31:35,221 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:31:35,225 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:35,226 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:35,230 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:31:35.228158+00:00, Should reset: False
INFO 2024-10-01 17:31:35,230 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:31:35,230 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:31:35,231 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:31:35,231 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:31:35,232 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:31:35,233 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 6730 at 2024-10-01 14:31:16+03:00
INFO 2024-10-01 17:31:35,639 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57527) on port 8000
INFO 2024-10-01 17:32:17,868 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:11,0505665574,1134,00:01:55,2024/10/01 14:30:21,2024/10/01 14:32:17,TerminatedByDst,,,Ext.1134,0505665574,10001,,,Extension,Line,,Afrah Almantshri,0505665574,
INFO 2024-10-01 17:32:17,869 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:11', '0505665574', '1134', '00:01:55', '2024/10/01 14:30:21', '2024/10/01 14:32:17', 'TerminatedByDst', '', '', 'Ext.1134', '0505665574', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0505665574', '']
INFO 2024-10-01 17:32:17,889 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:17,889 models 570 138242068317888 Initial state: caller=1134, callee=0505665574, duration=115, total_cost=0.0
INFO 2024-10-01 17:32:17,890 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:32:17,890 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0505665574
INFO 2024-10-01 17:32:17,891 utils 570 138242068317888 Original number: 0505665574
INFO 2024-10-01 17:32:17,891 utils 570 138242068317888 Cleaned number: 0505665574
INFO 2024-10-01 17:32:17,892 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:32:17,892 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:17,892 models 570 138242068317888 Categorizing call for number: 0505665574
INFO 2024-10-01 17:32:17,895 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:17,898 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:17,899 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:32:17,899 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Match found: 0505665574 matches 05
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:17,900 models 570 138242068317888 Calculating total cost for call: duration=115 seconds
INFO 2024-10-01 17:32:17,901 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:32:17,902 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:32:17,902 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:32:17,903 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:32:17,903 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:17,906 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:17,906 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:32:17,909 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:32:17,911 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:17,912 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:17,913 models 570 138242068317888 Initial state: caller=1134, callee=0505665574, duration=115, total_cost=0.80
INFO 2024-10-01 17:32:17,916 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:32:17,916 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0505665574
INFO 2024-10-01 17:32:17,917 utils 570 138242068317888 Original number: 0505665574
INFO 2024-10-01 17:32:17,917 utils 570 138242068317888 Cleaned number: 0505665574
INFO 2024-10-01 17:32:17,918 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:32:17,918 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:17,918 models 570 138242068317888 Categorizing call for number: 0505665574
INFO 2024-10-01 17:32:17,921 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:17,923 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:17,923 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:32:17,924 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:32:17,924 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:32:17,924 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:32:17,924 models 570 138242068317888 Match found: 0505665574 matches 05
INFO 2024-10-01 17:32:17,924 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:32:17,925 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 Calculating total cost for call: duration=115 seconds
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:32:17,926 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:17,929 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:17,930 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
WARNING 2024-10-01 17:32:17,932 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:32:17,934 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:17,934 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0505665574 at 2024-10-01 14:30:11+03:00
INFO 2024-10-01 17:32:18,330 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57528) on port 8000
INFO 2024-10-01 17:32:22,995 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:29:41,8000,10001,00:02:40,2024/10/01 14:29:41,2024/10/01 14:32:22,TerminatedBySrc,ReplacedDst,,0592915630,Ext.8000,8000,Ext.7842,7842,Line,Ivr,Extension,0592915630:Main Number,WelcomeMessage,Ahmed Ahmed
INFO 2024-10-01 17:32:22,995 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:29:41', '8000', '10001', '00:02:40', '2024/10/01 14:29:41', '2024/10/01 14:32:22', 'TerminatedBySrc', 'ReplacedDst', '', '0592915630', 'Ext.8000', '8000', 'Ext.7842', '7842', 'Line', 'Ivr', 'Extension', '0592915630:Main Number', 'WelcomeMessage', 'Ahmed Ahmed']
INFO 2024-10-01 17:32:23,015 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:23,015 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=160, total_cost=0.0
INFO 2024-10-01 17:32:23,016 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:32:23,016 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:32:23,016 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:32:23,016 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:32:23,016 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:32:23,016 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:23,018 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:32:23,021 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:23,024 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:23,024 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:32:23,024 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:32:23,025 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:23,025 models 570 138242068317888 Calculating total cost for call: duration=160 seconds
INFO 2024-10-01 17:32:23,025 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:32:23,025 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:32:23,025 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:32:23,026 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:32:23,027 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:23,030 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:23,031 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:32:23,034 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:32:23,036 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:23,036 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:23,037 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=160, total_cost=0.00
INFO 2024-10-01 17:32:23,040 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:32:23,040 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:32:23,040 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:32:23,040 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:32:23,041 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:32:23,041 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:23,041 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:32:23,044 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:23,046 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:23,047 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:32:23,048 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:32:23,048 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:23,048 models 570 138242068317888 Calculating total cost for call: duration=160 seconds
INFO 2024-10-01 17:32:23,049 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:32:23,049 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:32:23,049 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:32:23,049 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:32:23,049 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:23,052 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:23,053 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:32:23,055 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:32:23,056 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:23,057 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:29:41+03:00
INFO 2024-10-01 17:32:23,472 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57529) on port 8000
INFO 2024-10-01 17:32:25,537 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:44,0559969663,7789,00:01:05,2024/10/01 14:31:19,2024/10/01 14:32:24,TerminatedBySrc,,,Ext.7789,0559969663,10001,,,Extension,Line,,Ahmed Swaidi,0559969663,
INFO 2024-10-01 17:32:25,537 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:44', '0559969663', '7789', '00:01:05', '2024/10/01 14:31:19', '2024/10/01 14:32:24', 'TerminatedBySrc', '', '', 'Ext.7789', '0559969663', '10001', '', '', 'Extension', 'Line', '', 'Ahmed Swaidi', '0559969663', '']
INFO 2024-10-01 17:32:25,556 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:25,556 models 570 138242068317888 Initial state: caller=7789, callee=0559969663, duration=65, total_cost=0.0
INFO 2024-10-01 17:32:25,556 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:32:25,556 models 570 138242068317888 Before determining country, Caller: 7789, Callee: 0559969663
INFO 2024-10-01 17:32:25,556 utils 570 138242068317888 Original number: 0559969663
INFO 2024-10-01 17:32:25,557 utils 570 138242068317888 Cleaned number: 0559969663
INFO 2024-10-01 17:32:25,557 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:32:25,557 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:25,557 models 570 138242068317888 Categorizing call for number: 0559969663
INFO 2024-10-01 17:32:25,565 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:25,572 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:25,573 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:32:25,573 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:32:25,576 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:32:25,576 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:32:25,577 models 570 138242068317888 Match found: 0559969663 matches 05
INFO 2024-10-01 17:32:25,577 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:32:25,577 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:25,577 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 17:32:25,577 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:32:25,578 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:32:25,578 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:32:25,578 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:32:25,578 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:25,582 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:25,582 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:32:25,587 models 570 138242068317888 Found extension: 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:32:25,589 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:32:25,594 models 570 138242068317888 Quota for 7789 - Ahmed Swaidi (Smasco): Last reset: 2024-09-15 06:35:25.294700+00:00, Next reset: 2024-10-15 06:35:25.294700+00:00, Current time: 2024-10-01 14:32:25.591580+00:00, Should reset: False
INFO 2024-10-01 17:32:25,594 models 570 138242068317888 Quota reset not needed for 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:32:25,594 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 40.40
INFO 2024-10-01 17:32:25,594 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:32:25,594 models 570 138242068317888 Attempting to deduct 0.80 from balance 59.60
INFO 2024-10-01 17:32:25,597 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 58.80
INFO 2024-10-01 17:32:25,597 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 58.80
INFO 2024-10-01 17:32:25,600 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:25,600 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:25,600 models 570 138242068317888 Initial state: caller=7789, callee=0559969663, duration=65, total_cost=0.80
INFO 2024-10-01 17:32:25,603 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:32:25,604 models 570 138242068317888 Before determining country, Caller: 7789, Callee: 0559969663
INFO 2024-10-01 17:32:25,604 utils 570 138242068317888 Original number: 0559969663
INFO 2024-10-01 17:32:25,604 utils 570 138242068317888 Cleaned number: 0559969663
INFO 2024-10-01 17:32:25,604 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:32:25,604 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:25,604 models 570 138242068317888 Categorizing call for number: 0559969663
INFO 2024-10-01 17:32:25,607 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:25,609 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:25,609 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Match found: 0559969663 matches 05
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:32:25,610 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:25,611 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 17:32:25,612 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:32:25,612 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:32:25,612 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:32:25,613 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:32:25,613 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:25,616 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:25,617 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:32:25,620 models 570 138242068317888 Found extension: 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:32:25,622 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 41.20
INFO 2024-10-01 17:32:25,625 models 570 138242068317888 Quota for 7789 - Ahmed Swaidi (Smasco): Last reset: 2024-09-15 06:35:25.294700+00:00, Next reset: 2024-10-15 06:35:25.294700+00:00, Current time: 2024-10-01 14:32:25.623716+00:00, Should reset: False
INFO 2024-10-01 17:32:25,626 models 570 138242068317888 Quota reset not needed for 7789 - Ahmed Swaidi (Smasco)
INFO 2024-10-01 17:32:25,626 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 41.20
INFO 2024-10-01 17:32:25,627 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:32:25,627 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:32:25,628 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:25,629 socket_server 570 138242068317888 Saved call record for company Smasco: 7789 -> 0559969663 at 2024-10-01 14:30:44+03:00
INFO 2024-10-01 17:32:26,041 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57530) on port 8000
INFO 2024-10-01 17:32:31,580 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:31:26,7425,7319,00:00:51,2024/10/01 14:31:39,2024/10/01 14:32:30,TerminatedBySrc,,,Ext.7319,Ext.7425,7425,,,Extension,Extension,,Armand Felisan Estacio,Sadam ali,
INFO 2024-10-01 17:32:31,581 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:31:26', '7425', '7319', '00:00:51', '2024/10/01 14:31:39', '2024/10/01 14:32:30', 'TerminatedBySrc', '', '', 'Ext.7319', 'Ext.7425', '7425', '', '', 'Extension', 'Extension', '', 'Armand Felisan Estacio', 'Sadam ali', '']
INFO 2024-10-01 17:32:31,598 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:31,598 models 570 138242068317888 Initial state: caller=7319, callee=7425, duration=51, total_cost=0.0
INFO 2024-10-01 17:32:31,599 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:32:31,599 models 570 138242068317888 Before determining country, Caller: 7319, Callee: 7425
INFO 2024-10-01 17:32:31,599 utils 570 138242068317888 Original number: 7425
INFO 2024-10-01 17:32:31,599 utils 570 138242068317888 Cleaned number: 7425
INFO 2024-10-01 17:32:31,599 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:32:31,599 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:31,600 models 570 138242068317888 Categorizing call for number: 7425
INFO 2024-10-01 17:32:31,602 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:31,605 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:31,605 models 570 138242068317888 Match found: 7425 matches ^\d{4}$
INFO 2024-10-01 17:32:31,606 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:32:31,606 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:31,606 models 570 138242068317888 Calculating total cost for call: duration=51 seconds
INFO 2024-10-01 17:32:31,606 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:32:31,606 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:32:31,607 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:32:31,607 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:32:31,607 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:31,609 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:31,609 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:32:31,613 models 570 138242068317888 Found extension: 7319 - Armand Felisan Estacio (Smasco)
INFO 2024-10-01 17:32:31,614 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:32:31,618 models 570 138242068317888 Quota for 7319 - Armand Felisan Estacio (Smasco): Last reset: 2024-09-15 06:35:05.659422+00:00, Next reset: 2024-10-15 06:35:05.659422+00:00, Current time: 2024-10-01 14:32:31.616809+00:00, Should reset: False
INFO 2024-10-01 17:32:31,619 models 570 138242068317888 Quota reset not needed for 7319 - Armand Felisan Estacio (Smasco)
INFO 2024-10-01 17:32:31,619 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:32:31,619 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:32:31,619 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:32:31,622 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:31,623 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:32:31,623 models 570 138242068317888 Initial state: caller=7319, callee=7425, duration=51, total_cost=0.00
INFO 2024-10-01 17:32:31,626 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:32:31,626 models 570 138242068317888 Before determining country, Caller: 7319, Callee: 7425
INFO 2024-10-01 17:32:31,626 utils 570 138242068317888 Original number: 7425
INFO 2024-10-01 17:32:31,626 utils 570 138242068317888 Cleaned number: 7425
INFO 2024-10-01 17:32:31,627 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:32:31,627 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:32:31,627 models 570 138242068317888 Categorizing call for number: 7425
INFO 2024-10-01 17:32:31,630 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:32:31,631 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:32:31,632 models 570 138242068317888 Match found: 7425 matches ^\d{4}$
INFO 2024-10-01 17:32:31,632 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:32:31,632 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:32:31,632 models 570 138242068317888 Calculating total cost for call: duration=51 seconds
INFO 2024-10-01 17:32:31,632 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:32:31,633 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:32:31,633 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:32:31,633 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:32:31,633 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:32:31,636 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:32:31,636 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:32:31,640 models 570 138242068317888 Found extension: 7319 - Armand Felisan Estacio (Smasco)
INFO 2024-10-01 17:32:31,644 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:32:31,653 models 570 138242068317888 Quota for 7319 - Armand Felisan Estacio (Smasco): Last reset: 2024-09-15 06:35:05.659422+00:00, Next reset: 2024-10-15 06:35:05.659422+00:00, Current time: 2024-10-01 14:32:31.650813+00:00, Should reset: False
INFO 2024-10-01 17:32:31,653 models 570 138242068317888 Quota reset not needed for 7319 - Armand Felisan Estacio (Smasco)
INFO 2024-10-01 17:32:31,653 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:32:31,654 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:32:31,654 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:32:31,655 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:32:31,656 socket_server 570 138242068317888 Saved call record for company Smasco: 7319 -> 7425 at 2024-10-01 14:31:26+03:00
INFO 2024-10-01 17:32:32,080 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57533) on port 8000
INFO 2024-10-01 17:33:07,205 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:33:01,0570086372,7327,,,2024/10/01 14:33:06,Failed,,,Ext.7327,0570086372,0570086372,,,Extension,LineSet,,Muhammad Hamza Haider,0570086372,
INFO 2024-10-01 17:33:07,205 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:33:01', '0570086372', '7327', '', '', '2024/10/01 14:33:06', 'Failed', '', '', 'Ext.7327', '0570086372', '0570086372', '', '', 'Extension', 'LineSet', '', 'Muhammad Hamza Haider', '0570086372', '']
INFO 2024-10-01 17:33:07,226 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:07,227 models 570 138242068317888 Initial state: caller=7327, callee=0570086372, duration=None, total_cost=0.0
INFO 2024-10-01 17:33:07,227 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:33:07,228 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0570086372
INFO 2024-10-01 17:33:07,228 utils 570 138242068317888 Original number: 0570086372
INFO 2024-10-01 17:33:07,229 utils 570 138242068317888 Cleaned number: 0570086372
INFO 2024-10-01 17:33:07,229 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:07,229 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:07,229 models 570 138242068317888 Categorizing call for number: 0570086372
INFO 2024-10-01 17:33:07,233 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:07,235 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:07,236 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:07,236 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:07,237 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:07,237 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:07,238 models 570 138242068317888 Match found: 0570086372 matches 05
INFO 2024-10-01 17:33:07,238 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:07,238 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:07,239 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:07,239 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:07,239 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:07,239 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:07,243 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:07,243 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:07,248 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:33:07,251 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:07,255 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:33:07.253509+00:00, Should reset: False
INFO 2024-10-01 17:33:07,256 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:33:07,257 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:07,257 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:07,257 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:07,259 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:07,259 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:07,260 models 570 138242068317888 Initial state: caller=7327, callee=0570086372, duration=None, total_cost=0.00
INFO 2024-10-01 17:33:07,263 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:33:07,263 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0570086372
INFO 2024-10-01 17:33:07,264 utils 570 138242068317888 Original number: 0570086372
INFO 2024-10-01 17:33:07,264 utils 570 138242068317888 Cleaned number: 0570086372
INFO 2024-10-01 17:33:07,265 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:07,265 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:07,265 models 570 138242068317888 Categorizing call for number: 0570086372
INFO 2024-10-01 17:33:07,268 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:07,270 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:07,271 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:07,271 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Match found: 0570086372 matches 05
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:07,272 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:07,273 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:07,274 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:07,274 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:07,277 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:07,277 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:07,281 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:33:07,283 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:07,288 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:33:07.285890+00:00, Should reset: False
INFO 2024-10-01 17:33:07,288 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:33:07,289 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:07,289 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:07,290 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:07,291 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:07,291 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 0570086372 at 2024-10-01 14:33:01+03:00
INFO 2024-10-01 17:33:07,714 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57540) on port 8000
INFO 2024-10-01 17:33:09,964 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:31:22,0597677702,7790,00:01:39,2024/10/01 14:31:29,2024/10/01 14:33:09,TerminatedBySrc,,,Ext.7790,0597677702,10001,,,Extension,Line,,Maram Alharbi,0597677702,
INFO 2024-10-01 17:33:09,965 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:31:22', '0597677702', '7790', '00:01:39', '2024/10/01 14:31:29', '2024/10/01 14:33:09', 'TerminatedBySrc', '', '', 'Ext.7790', '0597677702', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0597677702', '']
INFO 2024-10-01 17:33:09,985 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:09,986 models 570 138242068317888 Initial state: caller=7790, callee=0597677702, duration=99, total_cost=0.0
INFO 2024-10-01 17:33:09,987 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:33:09,987 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0597677702
INFO 2024-10-01 17:33:09,987 utils 570 138242068317888 Original number: 0597677702
INFO 2024-10-01 17:33:09,987 utils 570 138242068317888 Cleaned number: 0597677702
INFO 2024-10-01 17:33:09,987 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:09,988 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:09,989 models 570 138242068317888 Categorizing call for number: 0597677702
INFO 2024-10-01 17:33:09,992 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:09,995 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:09,996 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:09,997 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:09,997 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:09,997 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:09,997 models 570 138242068317888 Match found: 0597677702 matches 05
INFO 2024-10-01 17:33:09,997 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:09,998 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:09,999 models 570 138242068317888 Calculating total cost for call: duration=99 seconds
INFO 2024-10-01 17:33:09,999 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:33:09,999 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:33:09,999 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:33:10,000 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:33:10,000 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:10,003 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:10,004 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:10,009 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:33:10,012 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:10,018 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:33:10.015328+00:00, Should reset: False
INFO 2024-10-01 17:33:10,019 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:33:10,019 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:10,019 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:33:10,019 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:33:10,020 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:33:10,020 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 17:33:10,022 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:10,022 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:10,022 models 570 138242068317888 Initial state: caller=7790, callee=0597677702, duration=99, total_cost=0.80
INFO 2024-10-01 17:33:10,025 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:33:10,025 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0597677702
INFO 2024-10-01 17:33:10,025 utils 570 138242068317888 Original number: 0597677702
INFO 2024-10-01 17:33:10,025 utils 570 138242068317888 Cleaned number: 0597677702
INFO 2024-10-01 17:33:10,025 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:10,026 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:10,026 models 570 138242068317888 Categorizing call for number: 0597677702
INFO 2024-10-01 17:33:10,028 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:10,029 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:10,029 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:10,029 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:10,030 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:10,030 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:10,030 models 570 138242068317888 Match found: 0597677702 matches 05
INFO 2024-10-01 17:33:10,030 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:10,030 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 Calculating total cost for call: duration=99 seconds
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:33:10,031 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:10,033 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:10,034 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:33:10,036 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:33:10,037 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:10,040 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:33:10.039097+00:00, Should reset: False
INFO 2024-10-01 17:33:10,041 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:33:10,041 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:33:10,041 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:10,041 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:10,043 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:10,043 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0597677702 at 2024-10-01 14:31:22+03:00
INFO 2024-10-01 17:33:10,455 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57541) on port 8000
INFO 2024-10-01 17:33:40,164 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:33:36,0503557734,7781,,,2024/10/01 14:33:39,Failed,,,Ext.7781,0503557734,0503557734,,,Extension,LineSet,,Abdullah Jabal,0503557734,
INFO 2024-10-01 17:33:40,165 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:33:36', '0503557734', '7781', '', '', '2024/10/01 14:33:39', 'Failed', '', '', 'Ext.7781', '0503557734', '0503557734', '', '', 'Extension', 'LineSet', '', 'Abdullah Jabal', '0503557734', '']
INFO 2024-10-01 17:33:40,183 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:40,184 models 570 138242068317888 Initial state: caller=7781, callee=0503557734, duration=None, total_cost=0.0
INFO 2024-10-01 17:33:40,184 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:33:40,185 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0503557734
INFO 2024-10-01 17:33:40,185 utils 570 138242068317888 Original number: 0503557734
INFO 2024-10-01 17:33:40,185 utils 570 138242068317888 Cleaned number: 0503557734
INFO 2024-10-01 17:33:40,185 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:40,186 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:40,186 models 570 138242068317888 Categorizing call for number: 0503557734
INFO 2024-10-01 17:33:40,189 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:40,192 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:40,192 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:40,193 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:40,193 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:40,193 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:40,194 models 570 138242068317888 Match found: 0503557734 matches 05
INFO 2024-10-01 17:33:40,194 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:40,194 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:40,194 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:40,194 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:40,195 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:40,195 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:40,198 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:40,198 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:40,203 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:33:40,206 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:33:40,211 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 14:33:40.208323+00:00, Should reset: False
INFO 2024-10-01 17:33:40,212 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:33:40,212 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:33:40,212 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:40,212 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:40,214 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:40,215 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:40,215 models 570 138242068317888 Initial state: caller=7781, callee=0503557734, duration=None, total_cost=0.00
INFO 2024-10-01 17:33:40,218 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:33:40,218 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0503557734
INFO 2024-10-01 17:33:40,219 utils 570 138242068317888 Original number: 0503557734
INFO 2024-10-01 17:33:40,219 utils 570 138242068317888 Cleaned number: 0503557734
INFO 2024-10-01 17:33:40,219 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:40,219 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:40,220 models 570 138242068317888 Categorizing call for number: 0503557734
INFO 2024-10-01 17:33:40,222 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:40,224 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:40,224 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:40,224 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:40,225 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:40,225 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:40,225 models 570 138242068317888 Match found: 0503557734 matches 05
INFO 2024-10-01 17:33:40,225 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:40,225 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:40,226 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:40,226 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:40,226 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:40,226 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:40,231 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:40,232 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:40,237 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:33:40,238 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:33:40,250 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 14:33:40.243203+00:00, Should reset: False
INFO 2024-10-01 17:33:40,251 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:33:40,251 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:33:40,251 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:40,251 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:40,255 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:40,255 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0503557734 at 2024-10-01 14:33:36+03:00
INFO 2024-10-01 17:33:40,664 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57548) on port 8000
INFO 2024-10-01 17:33:43,434 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:29:07,0533533302,7821,00:04:30,2024/10/01 14:29:11,2024/10/01 14:33:42,TerminatedBySrc,,,Ext.7821,0533533302,10001,,,Extension,Line,,Talal Alzahrani,0533533302,
INFO 2024-10-01 17:33:43,435 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:29:07', '0533533302', '7821', '00:04:30', '2024/10/01 14:29:11', '2024/10/01 14:33:42', 'TerminatedBySrc', '', '', 'Ext.7821', '0533533302', '10001', '', '', 'Extension', 'Line', '', 'Talal Alzahrani', '0533533302', '']
INFO 2024-10-01 17:33:43,459 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:43,460 models 570 138242068317888 Initial state: caller=7821, callee=0533533302, duration=270, total_cost=0.0
INFO 2024-10-01 17:33:43,460 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:33:43,460 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0533533302
INFO 2024-10-01 17:33:43,460 utils 570 138242068317888 Original number: 0533533302
INFO 2024-10-01 17:33:43,460 utils 570 138242068317888 Cleaned number: 0533533302
INFO 2024-10-01 17:33:43,461 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:43,461 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:43,461 models 570 138242068317888 Categorizing call for number: 0533533302
INFO 2024-10-01 17:33:43,463 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:43,465 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Match found: 0533533302 matches 05
INFO 2024-10-01 17:33:43,466 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:43,467 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:43,467 models 570 138242068317888 Calculating total cost for call: duration=270 seconds
INFO 2024-10-01 17:33:43,467 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:33:43,467 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:33:43,467 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:33:43,468 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 17:33:43,468 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:43,474 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:43,474 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:33:43,479 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:33:43,481 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:33:43,485 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:33:43.483150+00:00, Should reset: False
INFO 2024-10-01 17:33:43,485 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:33:43,485 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 8.40
INFO 2024-10-01 17:33:43,485 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 17:33:43,486 models 570 138242068317888 Attempting to deduct 2.00 from balance 91.60
INFO 2024-10-01 17:33:43,487 models 570 138242068317888 Successfully deducted 2.00. New remaining balance: 89.60
INFO 2024-10-01 17:33:43,487 models 570 138242068317888 Successfully deducted 2.00 from quota. New balance: 89.60
INFO 2024-10-01 17:33:43,489 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:43,490 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:43,490 models 570 138242068317888 Initial state: caller=7821, callee=0533533302, duration=270, total_cost=2.00
INFO 2024-10-01 17:33:43,492 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 17:33:43,493 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0533533302
INFO 2024-10-01 17:33:43,493 utils 570 138242068317888 Original number: 0533533302
INFO 2024-10-01 17:33:43,493 utils 570 138242068317888 Cleaned number: 0533533302
INFO 2024-10-01 17:33:43,493 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:43,494 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:43,494 models 570 138242068317888 Categorizing call for number: 0533533302
INFO 2024-10-01 17:33:43,495 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:43,497 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:43,497 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:43,497 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:43,498 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:43,498 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:43,498 models 570 138242068317888 Match found: 0533533302 matches 05
INFO 2024-10-01 17:33:43,498 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:43,499 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:43,499 models 570 138242068317888 Calculating total cost for call: duration=270 seconds
INFO 2024-10-01 17:33:43,499 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:33:43,499 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:33:43,500 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:33:43,500 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 17:33:43,500 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:43,502 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:43,502 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 17:33:43,505 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:33:43,506 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 10.40
INFO 2024-10-01 17:33:43,509 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 14:33:43.507693+00:00, Should reset: False
INFO 2024-10-01 17:33:43,509 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 17:33:43,510 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 10.40
INFO 2024-10-01 17:33:43,510 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:33:43,510 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:33:43,511 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:43,511 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> 0533533302 at 2024-10-01 14:29:07+03:00
INFO 2024-10-01 17:33:43,904 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57549) on port 8000
INFO 2024-10-01 17:33:51,013 autoreload 87310 131704222388352 /home/ubuntu/3CX/cdr/cdr3cx/views.py changed, reloading.
INFO 2024-10-01 17:33:52,676 autoreload 87756 124522476007552 Watching for file changes with StatReloader
INFO 2024-10-01 17:33:54,451 autoreload 87756 124522476007552 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 17:33:54,964 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:33:30,0590001743,1134,,,2024/10/01 14:33:54,Failed,,,Ext.1134,0590001743,0590001743,,,Extension,LineSet,,Afrah Almantshri,0590001743,
INFO 2024-10-01 17:33:54,964 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:33:30', '0590001743', '1134', '', '', '2024/10/01 14:33:54', 'Failed', '', '', 'Ext.1134', '0590001743', '0590001743', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0590001743', '']
INFO 2024-10-01 17:33:54,983 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:54,983 models 570 138242068317888 Initial state: caller=1134, callee=0590001743, duration=None, total_cost=0.0
INFO 2024-10-01 17:33:54,983 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:33:54,984 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0590001743
INFO 2024-10-01 17:33:54,984 utils 570 138242068317888 Original number: 0590001743
INFO 2024-10-01 17:33:54,984 utils 570 138242068317888 Cleaned number: 0590001743
INFO 2024-10-01 17:33:54,984 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:54,984 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:54,984 models 570 138242068317888 Categorizing call for number: 0590001743
INFO 2024-10-01 17:33:54,987 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:54,990 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:54,990 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:54,991 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:54,991 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:54,991 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:54,991 models 570 138242068317888 Match found: 0590001743 matches 05
INFO 2024-10-01 17:33:54,992 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:54,992 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:54,992 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:54,992 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:54,992 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:54,993 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:54,995 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:54,996 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:33:54,998 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:33:55,001 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:55,001 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:33:55,001 models 570 138242068317888 Initial state: caller=1134, callee=0590001743, duration=None, total_cost=0.00
INFO 2024-10-01 17:33:55,004 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:33:55,005 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0590001743
INFO 2024-10-01 17:33:55,005 utils 570 138242068317888 Original number: 0590001743
INFO 2024-10-01 17:33:55,005 utils 570 138242068317888 Cleaned number: 0590001743
INFO 2024-10-01 17:33:55,005 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:33:55,006 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:33:55,006 models 570 138242068317888 Categorizing call for number: 0590001743
INFO 2024-10-01 17:33:55,008 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:33:55,009 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:33:55,010 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:33:55,010 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:33:55,010 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:33:55,011 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:33:55,011 models 570 138242068317888 Match found: 0590001743 matches 05
INFO 2024-10-01 17:33:55,011 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:33:55,011 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:33:55,012 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:33:55,012 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:33:55,012 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:33:55,012 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:33:55,015 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:33:55,015 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:33:55,017 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:33:55,018 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:33:55,019 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0590001743 at 2024-10-01 14:33:30+03:00
INFO 2024-10-01 17:33:55,424 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57554) on port 8000
INFO 2024-10-01 17:33:55,963 autoreload 87796 128753511510144 Watching for file changes with StatReloader
INFO 2024-10-01 17:34:08,101 autoreload 87796 128753511510144 /home/ubuntu/3CX/cdr/cdr3cx/urls.py changed, reloading.
INFO 2024-10-01 17:34:09,726 autoreload 87871 125082892451968 Watching for file changes with StatReloader
INFO 2024-10-01 17:34:15,104 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:32:33,7446,8477,00:01:20,2024/10/01 14:32:53,2024/10/01 14:34:14,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:34:15,104 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:32:33', '7446', '8477', '00:01:20', '2024/10/01 14:32:53', '2024/10/01 14:34:14', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:34:15,126 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:15,127 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=80, total_cost=0.0
INFO 2024-10-01 17:34:15,127 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:34:15,128 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:34:15,128 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:34:15,128 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:34:15,129 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:34:15,129 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:15,129 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:34:15,132 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:15,134 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:15,134 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:34:15,135 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:34:15,135 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:15,135 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:34:15,135 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:34:15,136 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:34:15,136 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:34:15,136 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:34:15,136 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:15,138 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:15,139 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:34:15,142 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:15,144 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:15,148 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:34:15.146352+00:00, Should reset: False
INFO 2024-10-01 17:34:15,148 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:15,149 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:15,149 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:34:15,149 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:34:15,151 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:15,151 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:15,152 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=80, total_cost=0.00
INFO 2024-10-01 17:34:15,154 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:34:15,154 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:34:15,154 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:34:15,155 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:34:15,155 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:34:15,155 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:15,155 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:34:15,157 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:15,159 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:15,159 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:34:15,159 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:34:15,159 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:15,160 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:34:15,160 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:34:15,160 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:34:15,160 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:34:15,161 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:34:15,161 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:15,163 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:15,163 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:34:15,166 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:15,170 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:15,176 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:34:15.172229+00:00, Should reset: False
INFO 2024-10-01 17:34:15,176 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:15,176 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:15,177 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:34:15,177 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:34:15,179 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:15,179 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:32:33+03:00
INFO 2024-10-01 17:34:15,589 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57565) on port 8000
INFO 2024-10-01 17:34:17,962 autoreload 87871 125082892451968 /home/ubuntu/3CX/cdr/cdr3cx/urls.py changed, reloading.
INFO 2024-10-01 17:34:19,527 autoreload 87954 130390461902976 Watching for file changes with StatReloader
INFO 2024-10-01 17:34:22,650 basehttp 87954 130390262023872 "GET /outgoing_international/ HTTP/1.1" 200 21964
INFO 2024-10-01 17:34:29,965 basehttp 87954 130390262023872 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 21955
INFO 2024-10-01 17:34:39,554 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:30:48,0561185227,7738,00:03:40,2024/10/01 14:30:58,2024/10/01 14:34:38,TerminatedByDst,,,Ext.7738,0561185227,10001,,,Extension,Line,,Hanaa Alshalwi,0561185227,
INFO 2024-10-01 17:34:39,554 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:30:48', '0561185227', '7738', '00:03:40', '2024/10/01 14:30:58', '2024/10/01 14:34:38', 'TerminatedByDst', '', '', 'Ext.7738', '0561185227', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0561185227', '']
INFO 2024-10-01 17:34:39,569 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:39,569 models 570 138242068317888 Initial state: caller=7738, callee=0561185227, duration=220, total_cost=0.0
INFO 2024-10-01 17:34:39,569 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:34:39,569 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0561185227
INFO 2024-10-01 17:34:39,570 utils 570 138242068317888 Original number: 0561185227
INFO 2024-10-01 17:34:39,570 utils 570 138242068317888 Cleaned number: 0561185227
INFO 2024-10-01 17:34:39,570 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:34:39,570 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:39,571 models 570 138242068317888 Categorizing call for number: 0561185227
INFO 2024-10-01 17:34:39,573 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:39,575 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:39,575 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:34:39,575 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Match found: 0561185227 matches 05
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:39,576 models 570 138242068317888 Calculating total cost for call: duration=220 seconds
INFO 2024-10-01 17:34:39,577 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:34:39,577 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:34:39,577 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:34:39,577 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 17:34:39,577 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:39,579 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:39,579 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:34:39,583 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:34:39,584 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:34:39,588 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:34:39.586408+00:00, Should reset: False
INFO 2024-10-01 17:34:39,588 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:34:39,588 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:34:39,588 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 17:34:39,589 models 570 138242068317888 Attempting to deduct 1.60 from balance 0.00
WARNING 2024-10-01 17:34:39,589 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.60
WARNING 2024-10-01 17:34:39,589 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 17:34:39,591 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:39,591 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:39,591 models 570 138242068317888 Initial state: caller=7738, callee=0561185227, duration=220, total_cost=1.60
INFO 2024-10-01 17:34:39,593 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 17:34:39,594 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0561185227
INFO 2024-10-01 17:34:39,594 utils 570 138242068317888 Original number: 0561185227
INFO 2024-10-01 17:34:39,594 utils 570 138242068317888 Cleaned number: 0561185227
INFO 2024-10-01 17:34:39,594 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:34:39,594 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:39,594 models 570 138242068317888 Categorizing call for number: 0561185227
INFO 2024-10-01 17:34:39,597 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:39,598 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:39,599 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:34:39,599 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:34:39,599 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:34:39,600 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:34:39,600 models 570 138242068317888 Match found: 0561185227 matches 05
INFO 2024-10-01 17:34:39,600 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:34:39,600 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:39,601 models 570 138242068317888 Calculating total cost for call: duration=220 seconds
INFO 2024-10-01 17:34:39,601 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:34:39,601 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:34:39,601 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:34:39,602 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 17:34:39,602 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:39,604 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:39,604 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 17:34:39,608 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:34:39,610 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:34:39,614 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:34:39.612023+00:00, Should reset: False
INFO 2024-10-01 17:34:39,614 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:34:39,614 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:34:39,615 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:34:39,615 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:34:39,617 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:39,617 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0561185227 at 2024-10-01 14:30:48+03:00
INFO 2024-10-01 17:34:40,017 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57569) on port 8000
INFO 2024-10-01 17:34:43,247 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:34:19,7446,8477,00:00:02,2024/10/01 14:34:39,2024/10/01 14:34:42,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:34:43,248 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:34:19', '7446', '8477', '00:00:02', '2024/10/01 14:34:39', '2024/10/01 14:34:42', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:34:43,267 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:43,268 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=2, total_cost=0.0
INFO 2024-10-01 17:34:43,268 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:34:43,268 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:34:43,268 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:34:43,268 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:34:43,269 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:34:43,269 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:43,269 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:34:43,271 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:43,273 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:34:43,274 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:34:43,275 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:34:43,275 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:34:43,275 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:43,277 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:43,277 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:34:43,281 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:43,282 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:43,291 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:34:43.285097+00:00, Should reset: False
INFO 2024-10-01 17:34:43,291 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:43,292 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:43,292 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:34:43,292 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:34:43,294 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:43,295 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:34:43,295 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=2, total_cost=0.00
INFO 2024-10-01 17:34:43,297 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:34:43,298 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:34:43,298 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:34:43,298 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:34:43,298 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:34:43,298 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:34:43,298 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:34:43,300 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:34:43,302 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:34:43,302 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:34:43,302 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:34:43,302 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:34:43,303 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 17:34:43,303 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:34:43,303 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:34:43,303 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:34:43,303 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:34:43,304 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:34:43,306 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:34:43,306 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:34:43,309 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:43,310 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:43,313 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:34:43.312078+00:00, Should reset: False
INFO 2024-10-01 17:34:43,314 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:34:43,314 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:34:43,314 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:34:43,314 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:34:43,316 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:34:43,316 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:34:19+03:00
INFO 2024-10-01 17:34:43,725 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57571) on port 8000
INFO 2024-10-01 17:35:22,970 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:32:35,0534610836,8426,00:02:05,2024/10/01 14:33:16,2024/10/01 14:35:22,TerminatedByDst,,,Ext.8426,0534610836,10001,,,Extension,Line,,Rehan Khan Mohammed,0534610836,
INFO 2024-10-01 17:35:22,971 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:32:35', '0534610836', '8426', '00:02:05', '2024/10/01 14:33:16', '2024/10/01 14:35:22', 'TerminatedByDst', '', '', 'Ext.8426', '0534610836', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0534610836', '']
INFO 2024-10-01 17:35:22,992 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:35:22,992 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=125, total_cost=0.0
INFO 2024-10-01 17:35:22,992 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:35:22,993 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:35:22,993 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:35:22,993 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:35:22,993 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:35:22,993 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:35:22,993 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:35:22,997 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:35:23,000 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:35:23,001 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:35:23,001 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:35:23,001 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:35:23,001 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:35:23,001 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:35:23,002 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:35:23,003 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:35:23,003 models 570 138242068317888 Calculating total cost for call: duration=125 seconds
INFO 2024-10-01 17:35:23,004 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:35:23,004 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:35:23,005 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:35:23,005 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:35:23,005 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:35:23,008 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:35:23,009 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:35:23,014 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:35:23,016 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:35:23,021 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:35:23.018931+00:00, Should reset: False
INFO 2024-10-01 17:35:23,022 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:35:23,022 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:35:23,023 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 17:35:23,023 models 570 138242068317888 Attempting to deduct 1.20 from balance 0.00
WARNING 2024-10-01 17:35:23,023 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.20
WARNING 2024-10-01 17:35:23,023 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 17:35:23,026 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:35:23,026 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:35:23,027 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=125, total_cost=1.20
INFO 2024-10-01 17:35:23,030 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:35:23,030 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:35:23,030 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:35:23,031 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:35:23,031 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:35:23,031 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:35:23,031 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:35:23,034 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:35:23,036 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:35:23,037 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:35:23,037 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:35:23,038 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:35:23,038 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:35:23,038 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:35:23,039 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:35:23,039 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:35:23,039 models 570 138242068317888 Calculating total cost for call: duration=125 seconds
INFO 2024-10-01 17:35:23,040 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:35:23,040 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:35:23,040 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:35:23,040 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:35:23,040 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:35:23,043 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:35:23,044 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 17:35:23,048 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:35:23,050 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:35:23,055 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:35:23.053041+00:00, Should reset: False
INFO 2024-10-01 17:35:23,056 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:35:23,056 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:35:23,057 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:35:23,057 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:35:23,059 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:35:23,059 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0534610836 at 2024-10-01 14:32:35+03:00
INFO 2024-10-01 17:35:23,464 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57574) on port 8000
ERROR 2024-10-01 17:35:33,062 log 87954 130390262023872 Internal Server Error: /outgoing_international/excel/
Traceback (most recent call last):
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/cdr/cdr3cx/views_reports.py", line 9, in export_international_calls_excel
    start_date, end_date, time_period, custom_date_range = get_date_range(request)
                                                           ^^^^^^^^^^^^^^
NameError: name 'get_date_range' is not defined
ERROR 2024-10-01 17:35:33,072 basehttp 87954 130390262023872 "GET /outgoing_international/excel/?time_period=7d&custom_date= HTTP/1.1" 500 65842
INFO 2024-10-01 17:35:54,424 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:28:58,0596818703,7301,00:06:43,2024/10/01 14:29:09,2024/10/01 14:35:53,TerminatedBySrc,,,Ext.7301,0596818703,10001,,,Extension,Line,,Muhammed Sahail,0596818703,
INFO 2024-10-01 17:35:54,424 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:28:58', '0596818703', '7301', '00:06:43', '2024/10/01 14:29:09', '2024/10/01 14:35:53', 'TerminatedBySrc', '', '', 'Ext.7301', '0596818703', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0596818703', '']
INFO 2024-10-01 17:35:54,447 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:35:54,448 models 570 138242068317888 Initial state: caller=7301, callee=0596818703, duration=403, total_cost=0.0
INFO 2024-10-01 17:35:54,448 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:35:54,448 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0596818703
INFO 2024-10-01 17:35:54,448 utils 570 138242068317888 Original number: 0596818703
INFO 2024-10-01 17:35:54,449 utils 570 138242068317888 Cleaned number: 0596818703
INFO 2024-10-01 17:35:54,449 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:35:54,449 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:35:54,449 models 570 138242068317888 Categorizing call for number: 0596818703
INFO 2024-10-01 17:35:54,459 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:35:54,462 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:35:54,462 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:35:54,462 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:35:54,462 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:35:54,462 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Match found: 0596818703 matches 05
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Calculating total cost for call: duration=403 seconds
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:35:54,463 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:35:54,464 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:35:54,464 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.80
INFO 2024-10-01 17:35:54,464 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:35:54,466 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:35:54,467 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:35:54,472 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:35:54,475 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 39.60
INFO 2024-10-01 17:35:54,484 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:35:54.477578+00:00, Should reset: False
INFO 2024-10-01 17:35:54,485 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:35:54,485 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 39.60
INFO 2024-10-01 17:35:54,485 models 570 138242068317888 Amount to deduct: 2.80
INFO 2024-10-01 17:35:54,485 models 570 138242068317888 Attempting to deduct 2.80 from balance 60.40
INFO 2024-10-01 17:35:54,487 models 570 138242068317888 Successfully deducted 2.80. New remaining balance: 57.60
INFO 2024-10-01 17:35:54,487 models 570 138242068317888 Successfully deducted 2.80 from quota. New balance: 57.60
INFO 2024-10-01 17:35:54,490 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:35:54,490 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:35:54,491 models 570 138242068317888 Initial state: caller=7301, callee=0596818703, duration=403, total_cost=2.80
INFO 2024-10-01 17:35:54,493 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.80
INFO 2024-10-01 17:35:54,493 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0596818703
INFO 2024-10-01 17:35:54,493 utils 570 138242068317888 Original number: 0596818703
INFO 2024-10-01 17:35:54,494 utils 570 138242068317888 Cleaned number: 0596818703
INFO 2024-10-01 17:35:54,494 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:35:54,494 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:35:54,494 models 570 138242068317888 Categorizing call for number: 0596818703
INFO 2024-10-01 17:35:54,496 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:35:54,498 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:35:54,498 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:35:54,498 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:35:54,498 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:35:54,498 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Match found: 0596818703 matches 05
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Calculating total cost for call: duration=403 seconds
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 17:35:54,499 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:35:54,500 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 17:35:54,500 models 570 138242068317888 After cost calculation: old_total_cost=2.80, new_total_cost=2.80
INFO 2024-10-01 17:35:54,500 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:35:54,502 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:35:54,503 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.80
INFO 2024-10-01 17:35:54,506 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:35:54,509 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:35:54,514 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:35:54.511388+00:00, Should reset: False
INFO 2024-10-01 17:35:54,514 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:35:54,515 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:35:54,515 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:35:54,515 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:35:54,519 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:35:54,520 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0596818703 at 2024-10-01 14:28:58+03:00
INFO 2024-10-01 17:35:54,918 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57580) on port 8000
INFO 2024-10-01 17:36:04,503 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:34:50,0561692257,7781,00:00:58,2024/10/01 14:35:05,2024/10/01 14:36:03,TerminatedBySrc,,,Ext.7781,0561692257,10001,,,Extension,Line,,Abdullah Jabal,0561692257,
INFO 2024-10-01 17:36:04,504 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:34:50', '0561692257', '7781', '00:00:58', '2024/10/01 14:35:05', '2024/10/01 14:36:03', 'TerminatedBySrc', '', '', 'Ext.7781', '0561692257', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0561692257', '']
INFO 2024-10-01 17:36:04,524 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:04,524 models 570 138242068317888 Initial state: caller=7781, callee=0561692257, duration=58, total_cost=0.0
INFO 2024-10-01 17:36:04,524 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:36:04,524 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0561692257
INFO 2024-10-01 17:36:04,525 utils 570 138242068317888 Original number: 0561692257
INFO 2024-10-01 17:36:04,525 utils 570 138242068317888 Cleaned number: 0561692257
INFO 2024-10-01 17:36:04,525 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:04,525 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:04,525 models 570 138242068317888 Categorizing call for number: 0561692257
INFO 2024-10-01 17:36:04,528 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:04,530 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:04,530 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:04,530 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:04,531 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:04,531 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:04,531 models 570 138242068317888 Match found: 0561692257 matches 05
INFO 2024-10-01 17:36:04,531 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:04,531 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 Calculating total cost for call: duration=58 seconds
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:36:04,532 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:04,535 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:04,535 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:36:04,539 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:36:04,541 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:36:04,545 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 14:36:04.542927+00:00, Should reset: False
INFO 2024-10-01 17:36:04,546 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:36:04,546 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 28.80
INFO 2024-10-01 17:36:04,546 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:36:04,546 models 570 138242068317888 Attempting to deduct 0.40 from balance 71.20
INFO 2024-10-01 17:36:04,548 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 70.80
INFO 2024-10-01 17:36:04,548 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 70.80
INFO 2024-10-01 17:36:04,550 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:04,550 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:04,550 models 570 138242068317888 Initial state: caller=7781, callee=0561692257, duration=58, total_cost=0.40
INFO 2024-10-01 17:36:04,553 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:36:04,554 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0561692257
INFO 2024-10-01 17:36:04,554 utils 570 138242068317888 Original number: 0561692257
INFO 2024-10-01 17:36:04,554 utils 570 138242068317888 Cleaned number: 0561692257
INFO 2024-10-01 17:36:04,554 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:04,554 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:04,555 models 570 138242068317888 Categorizing call for number: 0561692257
INFO 2024-10-01 17:36:04,556 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:04,558 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:04,558 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Match found: 0561692257 matches 05
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:04,559 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 Calculating total cost for call: duration=58 seconds
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:36:04,560 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:04,563 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:04,563 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:36:04,566 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:36:04,567 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 17:36:04,572 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 14:36:04.569843+00:00, Should reset: False
INFO 2024-10-01 17:36:04,573 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 17:36:04,573 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 17:36:04,573 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:36:04,573 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:36:04,575 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:04,576 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0561692257 at 2024-10-01 14:34:50+03:00
INFO 2024-10-01 17:36:04,982 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57582) on port 8000
INFO 2024-10-01 17:36:09,700 socket_server 570 138242326267584 Accepted connection from ('205.210.31.154', 63382) on port 8000
INFO 2024-10-01 17:36:10,181 socket_server 570 138242078803648 Received data on port 8000: GET / HTTP/1.1
Host: 52.7.101.147:8000
User-Agent: curl/7.68.0
Accept: */*
INFO 2024-10-01 17:36:10,181 socket_server 570 138242078803648 Parsed CDR data: ['GET / HTTP/1.1\r\nHost: 52.7.101.147:8000\r\nUser-Agent: curl/7.68.0\r\nAccept: */*']
ERROR 2024-10-01 17:36:10,182 socket_server 570 138242078803648 Insufficient data fields
INFO 2024-10-01 17:36:14,457 autoreload 87954 130390461902976 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 17:36:16,024 autoreload 88357 123270411030656 Watching for file changes with StatReloader
ERROR 2024-10-01 17:36:16,827 log 88357 123270219171520 Internal Server Error: /outgoing_international/excel/
Traceback (most recent call last):
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/cdr/cdr3cx/views_reports.py", line 14, in export_international_calls_excel
    Q(callee__regex=r'^\+[^9]') |
    ^
NameError: name 'Q' is not defined
ERROR 2024-10-01 17:36:16,948 basehttp 88357 123270219171520 "GET /outgoing_international/excel/?time_period=7d&custom_date= HTTP/1.1" 500 66605
INFO 2024-10-01 17:36:22,177 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:35:26,0566866997,7790,,,2024/10/01 14:36:21,Failed,,,Ext.7790,0566866997,0566866997,,,Extension,LineSet,,Maram Alharbi,0566866997,
INFO 2024-10-01 17:36:22,177 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:35:26', '0566866997', '7790', '', '', '2024/10/01 14:36:21', 'Failed', '', '', 'Ext.7790', '0566866997', '0566866997', '', '', 'Extension', 'LineSet', '', 'Maram Alharbi', '0566866997', '']
INFO 2024-10-01 17:36:22,207 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:22,208 models 570 138242068317888 Initial state: caller=7790, callee=0566866997, duration=None, total_cost=0.0
INFO 2024-10-01 17:36:22,208 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:36:22,208 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0566866997
INFO 2024-10-01 17:36:22,210 utils 570 138242068317888 Original number: 0566866997
INFO 2024-10-01 17:36:22,210 utils 570 138242068317888 Cleaned number: 0566866997
INFO 2024-10-01 17:36:22,211 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:22,211 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:22,212 models 570 138242068317888 Categorizing call for number: 0566866997
INFO 2024-10-01 17:36:22,218 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:22,223 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:22,223 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:22,224 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:22,225 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:22,226 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:22,227 models 570 138242068317888 Match found: 0566866997 matches 05
INFO 2024-10-01 17:36:22,227 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:22,227 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:22,227 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:22,228 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:22,229 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:22,229 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:22,232 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:22,232 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:36:22,237 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:36:22,240 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:36:22,247 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:36:22.243306+00:00, Should reset: False
INFO 2024-10-01 17:36:22,248 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:36:22,249 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:36:22,249 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:36:22,250 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:36:22,252 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:22,253 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:22,253 models 570 138242068317888 Initial state: caller=7790, callee=0566866997, duration=None, total_cost=0.00
INFO 2024-10-01 17:36:22,257 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:36:22,258 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0566866997
INFO 2024-10-01 17:36:22,258 utils 570 138242068317888 Original number: 0566866997
INFO 2024-10-01 17:36:22,258 utils 570 138242068317888 Cleaned number: 0566866997
INFO 2024-10-01 17:36:22,259 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:22,259 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:22,260 models 570 138242068317888 Categorizing call for number: 0566866997
INFO 2024-10-01 17:36:22,262 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:22,264 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:22,265 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:22,265 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:22,266 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:22,266 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:22,267 models 570 138242068317888 Match found: 0566866997 matches 05
INFO 2024-10-01 17:36:22,267 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:22,267 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:22,267 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:22,267 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:22,269 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:22,269 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:22,271 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:22,272 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:36:22,275 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:36:22,277 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:36:22,280 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:36:22.278765+00:00, Should reset: False
INFO 2024-10-01 17:36:22,281 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:36:22,281 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:36:22,282 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:36:22,282 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:36:22,284 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:22,285 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0566866997 at 2024-10-01 14:35:26+03:00
INFO 2024-10-01 17:36:22,682 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57584) on port 8000
INFO 2024-10-01 17:36:25,902 autoreload 88357 123270411030656 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 17:36:27,502 autoreload 88444 123551012380800 Watching for file changes with StatReloader
INFO 2024-10-01 17:36:40,457 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:34:06,8000,10001,00:02:33,2024/10/01 14:34:06,2024/10/01 14:36:39,TerminatedBySrc,ReplacedDst,,0500116106,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0500116106:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 17:36:40,457 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:34:06', '8000', '10001', '00:02:33', '2024/10/01 14:34:06', '2024/10/01 14:36:39', 'TerminatedBySrc', 'ReplacedDst', '', '0500116106', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0500116106:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 17:36:40,473 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:40,473 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=153, total_cost=0.0
INFO 2024-10-01 17:36:40,474 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:36:40,474 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:36:40,474 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:36:40,475 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:36:40,475 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:36:40,476 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:40,476 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:36:40,479 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:40,481 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:40,482 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:36:40,482 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:36:40,482 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:40,482 models 570 138242068317888 Calculating total cost for call: duration=153 seconds
INFO 2024-10-01 17:36:40,482 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:36:40,483 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:36:40,483 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:36:40,483 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:40,483 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:40,485 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:40,486 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:36:40,488 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:36:40,490 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:40,491 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:40,491 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=153, total_cost=0.00
INFO 2024-10-01 17:36:40,494 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:36:40,494 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:36:40,494 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:36:40,494 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:36:40,494 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:36:40,495 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:40,495 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:36:40,497 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:40,499 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:40,499 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:36:40,499 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:36:40,500 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:40,500 models 570 138242068317888 Calculating total cost for call: duration=153 seconds
INFO 2024-10-01 17:36:40,500 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:36:40,500 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:36:40,500 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:36:40,501 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:40,501 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:40,503 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:40,503 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:36:40,505 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:36:40,507 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:40,507 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:34:06+03:00
INFO 2024-10-01 17:36:40,908 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57586) on port 8000
INFO 2024-10-01 17:36:47,437 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:36:23,0590001743,1134,,,2024/10/01 14:36:46,Failed,,,Ext.1134,0590001743,0590001743,,,Extension,LineSet,,Afrah Almantshri,0590001743,
INFO 2024-10-01 17:36:47,437 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:36:23', '0590001743', '1134', '', '', '2024/10/01 14:36:46', 'Failed', '', '', 'Ext.1134', '0590001743', '0590001743', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0590001743', '']
INFO 2024-10-01 17:36:47,460 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:47,460 models 570 138242068317888 Initial state: caller=1134, callee=0590001743, duration=None, total_cost=0.0
INFO 2024-10-01 17:36:47,460 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:36:47,461 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0590001743
INFO 2024-10-01 17:36:47,462 utils 570 138242068317888 Original number: 0590001743
INFO 2024-10-01 17:36:47,462 utils 570 138242068317888 Cleaned number: 0590001743
INFO 2024-10-01 17:36:47,462 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:47,462 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:47,462 models 570 138242068317888 Categorizing call for number: 0590001743
INFO 2024-10-01 17:36:47,466 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:47,468 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:47,469 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:47,469 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:47,470 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:47,470 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:47,470 models 570 138242068317888 Match found: 0590001743 matches 05
INFO 2024-10-01 17:36:47,470 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:47,470 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:47,471 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:47,471 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:47,471 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:47,471 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:47,474 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:47,474 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:36:47,477 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:36:47,479 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:47,480 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:47,480 models 570 138242068317888 Initial state: caller=1134, callee=0590001743, duration=None, total_cost=0.00
INFO 2024-10-01 17:36:47,483 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:36:47,483 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0590001743
INFO 2024-10-01 17:36:47,483 utils 570 138242068317888 Original number: 0590001743
INFO 2024-10-01 17:36:47,483 utils 570 138242068317888 Cleaned number: 0590001743
INFO 2024-10-01 17:36:47,484 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:47,484 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:47,484 models 570 138242068317888 Categorizing call for number: 0590001743
INFO 2024-10-01 17:36:47,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:47,487 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:47,488 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:47,488 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:47,488 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:47,488 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:47,489 models 570 138242068317888 Match found: 0590001743 matches 05
INFO 2024-10-01 17:36:47,489 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:47,489 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:47,489 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:47,490 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:47,490 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:47,490 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:47,492 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:47,492 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:36:47,494 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:36:47,495 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:47,496 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0590001743 at 2024-10-01 14:36:23+03:00
INFO 2024-10-01 17:36:47,912 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57587) on port 8000
INFO 2024-10-01 17:36:58,682 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:36:22,0573109396,7301,,,2024/10/01 14:36:57,Failed,,,Ext.7301,0573109396,0573109396,,,Extension,LineSet,,Muhammed Sahail,0573109396,
INFO 2024-10-01 17:36:58,682 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:36:22', '0573109396', '7301', '', '', '2024/10/01 14:36:57', 'Failed', '', '', 'Ext.7301', '0573109396', '0573109396', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0573109396', '']
INFO 2024-10-01 17:36:58,701 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:58,702 models 570 138242068317888 Initial state: caller=7301, callee=0573109396, duration=None, total_cost=0.0
INFO 2024-10-01 17:36:58,703 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:36:58,703 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0573109396
INFO 2024-10-01 17:36:58,704 utils 570 138242068317888 Original number: 0573109396
INFO 2024-10-01 17:36:58,704 utils 570 138242068317888 Cleaned number: 0573109396
INFO 2024-10-01 17:36:58,705 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:58,705 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:58,705 models 570 138242068317888 Categorizing call for number: 0573109396
INFO 2024-10-01 17:36:58,708 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:58,711 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:58,712 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:58,713 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:58,713 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:58,713 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:58,713 models 570 138242068317888 Match found: 0573109396 matches 05
INFO 2024-10-01 17:36:58,714 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:58,715 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:58,715 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:58,715 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:58,715 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:58,715 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:58,718 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:58,719 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:36:58,724 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:36:58,726 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:36:58,731 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:36:58.728810+00:00, Should reset: False
INFO 2024-10-01 17:36:58,731 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:36:58,732 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:36:58,732 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:36:58,732 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:36:58,734 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:58,734 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:36:58,734 models 570 138242068317888 Initial state: caller=7301, callee=0573109396, duration=None, total_cost=0.00
INFO 2024-10-01 17:36:58,738 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:36:58,738 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0573109396
INFO 2024-10-01 17:36:58,739 utils 570 138242068317888 Original number: 0573109396
INFO 2024-10-01 17:36:58,739 utils 570 138242068317888 Cleaned number: 0573109396
INFO 2024-10-01 17:36:58,740 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:36:58,740 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:36:58,740 models 570 138242068317888 Categorizing call for number: 0573109396
INFO 2024-10-01 17:36:58,743 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:36:58,745 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:36:58,746 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:36:58,746 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:36:58,746 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:36:58,747 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:36:58,747 models 570 138242068317888 Match found: 0573109396 matches 05
INFO 2024-10-01 17:36:58,748 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:36:58,748 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:36:58,748 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:36:58,748 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:36:58,748 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:36:58,748 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:36:58,751 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:36:58,752 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:36:58,755 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:36:58,757 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:36:58,763 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:36:58.760124+00:00, Should reset: False
INFO 2024-10-01 17:36:58,763 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:36:58,764 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:36:58,764 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:36:58,765 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:36:58,766 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:36:58,767 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0573109396 at 2024-10-01 14:36:22+03:00
INFO 2024-10-01 17:36:59,162 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57595) on port 8000
INFO 2024-10-01 17:37:13,599 basehttp 88444 123550811817664 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=10 HTTP/1.1" 200 27571
INFO 2024-10-01 17:37:26,060 basehttp 88444 123550811817664 "GET /outgoing_international/?time_period=today&custom_date=&search=&per_page=10 HTTP/1.1" 200 25227
INFO 2024-10-01 17:37:28,987 basehttp 88444 123550811817664 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=10 HTTP/1.1" 200 27571
INFO 2024-10-01 17:37:31,020 basehttp 88444 123550811817664 "GET /outgoing_international/?time_period=1m&custom_date=&search=&per_page=10 HTTP/1.1" 200 28852
INFO 2024-10-01 17:37:33,197 basehttp 88444 123550811817664 "GET /outgoing_international/?page=2 HTTP/1.1" 200 25227
INFO 2024-10-01 17:37:37,283 basehttp 88444 123550811817664 "GET /outgoing_international/?time_period=6m&custom_date=&search=&per_page=100 HTTP/1.1" 200 64189
ERROR 2024-10-01 17:37:46,924 log 88444 123550811817664 Internal Server Error: /outgoing_international/pdf/
Traceback (most recent call last):
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/cdr/cdr3cx/views_reports.py", line 71, in export_international_calls_pdf
    str(timedelta(seconds=record.duration)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported type for timedelta seconds component: NoneType
ERROR 2024-10-01 17:37:46,926 basehttp 88444 123550811817664 "GET /outgoing_international/pdf/?time_period=6m&custom_date= HTTP/1.1" 500 69608
INFO 2024-10-01 17:38:00,341 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:37:36,0558201591,7301,,,2024/10/01 14:37:59,Failed,,,Ext.7301,0558201591,0558201591,,,Extension,LineSet,,Muhammed Sahail,0558201591,
INFO 2024-10-01 17:38:00,342 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:37:36', '0558201591', '7301', '', '', '2024/10/01 14:37:59', 'Failed', '', '', 'Ext.7301', '0558201591', '0558201591', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0558201591', '']
INFO 2024-10-01 17:38:00,364 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:38:00,365 models 570 138242068317888 Initial state: caller=7301, callee=0558201591, duration=None, total_cost=0.0
INFO 2024-10-01 17:38:00,365 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:38:00,365 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0558201591
INFO 2024-10-01 17:38:00,365 utils 570 138242068317888 Original number: 0558201591
INFO 2024-10-01 17:38:00,365 utils 570 138242068317888 Cleaned number: 0558201591
INFO 2024-10-01 17:38:00,366 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:38:00,367 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:38:00,367 models 570 138242068317888 Categorizing call for number: 0558201591
INFO 2024-10-01 17:38:00,374 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:38:00,378 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:38:00,378 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Match found: 0558201591 matches 05
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:38:00,379 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:38:00,382 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:38:00,382 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:38:00,382 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:38:00,383 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:38:00,388 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:38:00,389 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:38:00,393 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:38:00,396 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:38:00,400 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:38:00.398344+00:00, Should reset: False
INFO 2024-10-01 17:38:00,401 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:38:00,401 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:38:00,402 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:38:00,402 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:38:00,404 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:38:00,405 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:38:00,405 models 570 138242068317888 Initial state: caller=7301, callee=0558201591, duration=None, total_cost=0.00
INFO 2024-10-01 17:38:00,408 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:38:00,409 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0558201591
INFO 2024-10-01 17:38:00,409 utils 570 138242068317888 Original number: 0558201591
INFO 2024-10-01 17:38:00,410 utils 570 138242068317888 Cleaned number: 0558201591
INFO 2024-10-01 17:38:00,410 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:38:00,410 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:38:00,410 models 570 138242068317888 Categorizing call for number: 0558201591
INFO 2024-10-01 17:38:00,413 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:38:00,415 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:38:00,416 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:38:00,416 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:38:00,417 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:38:00,417 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:38:00,417 models 570 138242068317888 Match found: 0558201591 matches 05
INFO 2024-10-01 17:38:00,418 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:38:00,418 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:38:00,419 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:38:00,419 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:38:00,419 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:38:00,419 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:38:00,423 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:38:00,424 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:38:00,428 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:38:00,431 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:38:00,437 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:38:00.433475+00:00, Should reset: False
INFO 2024-10-01 17:38:00,438 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:38:00,438 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:38:00,438 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:38:00,438 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:38:00,442 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:38:00,442 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0558201591 at 2024-10-01 14:37:36+03:00
INFO 2024-10-01 17:38:00,849 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57602) on port 8000
ERROR 2024-10-01 17:38:18,383 log 88444 123550811817664 Internal Server Error: /outgoing_international/pdf/
Traceback (most recent call last):
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/cdr/cdr3cx/views_reports.py", line 71, in export_international_calls_pdf
    str(timedelta(seconds=record.duration)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported type for timedelta seconds component: NoneType
ERROR 2024-10-01 17:38:18,384 basehttp 88444 123550811817664 "GET /outgoing_international/pdf/?time_period=6m&custom_date= HTTP/1.1" 500 69608
INFO 2024-10-01 17:38:28,119 autoreload 88924 134538665115776 Watching for file changes with StatReloader
INFO 2024-10-01 17:38:38,563 basehttp 88924 134538464331456 "GET /outgoing_international/?time_period=6m&custom_date=&search=&per_page=10 HTTP/1.1" 200 32733
ERROR 2024-10-01 17:38:44,516 log 88924 134538464331456 Internal Server Error: /outgoing_international/pdf/
Traceback (most recent call last):
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/3CX/cdr/cdr3cx/views_reports.py", line 71, in export_international_calls_pdf
    str(timedelta(seconds=record.duration)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported type for timedelta seconds component: NoneType
ERROR 2024-10-01 17:38:44,684 basehttp 88924 134538464331456 "GET /outgoing_international/pdf/?time_period=6m&custom_date= HTTP/1.1" 500 69607
INFO 2024-10-01 17:39:06,348 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:27:08,0594128338,7791,00:11:42,2024/10/01 14:27:22,2024/10/01 14:39:05,TerminatedByDst,,,Ext.7791,0594128338,10001,,,Extension,Line,,Arwa Almagli,0594128338,
INFO 2024-10-01 17:39:06,349 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:27:08', '0594128338', '7791', '00:11:42', '2024/10/01 14:27:22', '2024/10/01 14:39:05', 'TerminatedByDst', '', '', 'Ext.7791', '0594128338', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0594128338', '']
INFO 2024-10-01 17:39:06,367 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:06,367 models 570 138242068317888 Initial state: caller=7791, callee=0594128338, duration=702, total_cost=0.0
INFO 2024-10-01 17:39:06,368 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:39:06,368 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0594128338
INFO 2024-10-01 17:39:06,368 utils 570 138242068317888 Original number: 0594128338
INFO 2024-10-01 17:39:06,368 utils 570 138242068317888 Cleaned number: 0594128338
INFO 2024-10-01 17:39:06,368 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:06,369 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:06,369 models 570 138242068317888 Categorizing call for number: 0594128338
INFO 2024-10-01 17:39:06,373 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:06,376 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:06,376 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:06,377 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:06,377 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:06,377 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:06,377 models 570 138242068317888 Match found: 0594128338 matches 05
INFO 2024-10-01 17:39:06,378 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:06,378 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:06,378 models 570 138242068317888 Calculating total cost for call: duration=702 seconds
INFO 2024-10-01 17:39:06,378 models 570 138242068317888 Duration in minutes: 12
INFO 2024-10-01 17:39:06,379 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:06,379 models 570 138242068317888 Calculated total cost: 4.80
INFO 2024-10-01 17:39:06,379 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=4.80
INFO 2024-10-01 17:39:06,379 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:06,381 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:06,382 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:39:06,385 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:39:06,387 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:06,391 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:39:06.389610+00:00, Should reset: False
INFO 2024-10-01 17:39:06,392 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:39:06,392 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:06,392 models 570 138242068317888 Amount to deduct: 4.80
INFO 2024-10-01 17:39:06,392 models 570 138242068317888 Attempting to deduct 4.80 from balance 0.00
WARNING 2024-10-01 17:39:06,393 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 4.80
WARNING 2024-10-01 17:39:06,393 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 17:39:06,395 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:06,395 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:06,395 models 570 138242068317888 Initial state: caller=7791, callee=0594128338, duration=702, total_cost=4.80
INFO 2024-10-01 17:39:06,398 models 570 138242068317888 This is an existing CallRecord. Old total cost: 4.80
INFO 2024-10-01 17:39:06,398 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0594128338
INFO 2024-10-01 17:39:06,398 utils 570 138242068317888 Original number: 0594128338
INFO 2024-10-01 17:39:06,398 utils 570 138242068317888 Cleaned number: 0594128338
INFO 2024-10-01 17:39:06,398 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:06,399 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:06,399 models 570 138242068317888 Categorizing call for number: 0594128338
INFO 2024-10-01 17:39:06,401 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:06,402 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:06,402 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Match found: 0594128338 matches 05
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:06,403 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:06,404 models 570 138242068317888 Calculating total cost for call: duration=702 seconds
INFO 2024-10-01 17:39:06,404 models 570 138242068317888 Duration in minutes: 12
INFO 2024-10-01 17:39:06,404 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:06,404 models 570 138242068317888 Calculated total cost: 4.80
INFO 2024-10-01 17:39:06,405 models 570 138242068317888 After cost calculation: old_total_cost=4.80, new_total_cost=4.80
INFO 2024-10-01 17:39:06,405 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:06,407 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:06,407 models 570 138242068317888 Starting update_user_quota with old_total_cost=4.80
INFO 2024-10-01 17:39:06,410 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:39:06,411 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:06,414 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:39:06.412796+00:00, Should reset: False
INFO 2024-10-01 17:39:06,415 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:39:06,415 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:06,415 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:39:06,415 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:39:06,417 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:06,417 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0594128338 at 2024-10-01 14:27:08+03:00
INFO 2024-10-01 17:39:06,835 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57614) on port 8000
INFO 2024-10-01 17:39:11,010 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:37:06,0554482763,1134,00:01:51,2024/10/01 14:37:19,2024/10/01 14:39:10,TerminatedBySrc,,,Ext.1134,0554482763,10001,,,Extension,Line,,Afrah Almantshri,0554482763,
INFO 2024-10-01 17:39:11,011 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:37:06', '0554482763', '1134', '00:01:51', '2024/10/01 14:37:19', '2024/10/01 14:39:10', 'TerminatedBySrc', '', '', 'Ext.1134', '0554482763', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0554482763', '']
INFO 2024-10-01 17:39:11,033 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:11,033 models 570 138242068317888 Initial state: caller=1134, callee=0554482763, duration=111, total_cost=0.0
INFO 2024-10-01 17:39:11,033 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:39:11,033 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0554482763
INFO 2024-10-01 17:39:11,033 utils 570 138242068317888 Original number: 0554482763
INFO 2024-10-01 17:39:11,034 utils 570 138242068317888 Cleaned number: 0554482763
INFO 2024-10-01 17:39:11,034 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:11,034 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:11,034 models 570 138242068317888 Categorizing call for number: 0554482763
INFO 2024-10-01 17:39:11,037 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:11,040 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:11,040 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Match found: 0554482763 matches 05
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:11,041 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 Calculating total cost for call: duration=111 seconds
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:39:11,042 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:11,045 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:11,045 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:39:11,047 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:39:11,050 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:11,050 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:11,050 models 570 138242068317888 Initial state: caller=1134, callee=0554482763, duration=111, total_cost=0.80
INFO 2024-10-01 17:39:11,052 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:39:11,053 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0554482763
INFO 2024-10-01 17:39:11,053 utils 570 138242068317888 Original number: 0554482763
INFO 2024-10-01 17:39:11,053 utils 570 138242068317888 Cleaned number: 0554482763
INFO 2024-10-01 17:39:11,053 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:11,053 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:11,054 models 570 138242068317888 Categorizing call for number: 0554482763
INFO 2024-10-01 17:39:11,055 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:11,057 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:11,057 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:11,057 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Match found: 0554482763 matches 05
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:11,058 models 570 138242068317888 Calculating total cost for call: duration=111 seconds
INFO 2024-10-01 17:39:11,059 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:39:11,059 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:11,059 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:39:11,059 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:39:11,059 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:11,061 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:11,061 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
WARNING 2024-10-01 17:39:11,063 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:39:11,064 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:11,065 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0554482763 at 2024-10-01 14:37:06+03:00
INFO 2024-10-01 17:39:11,468 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57615) on port 8000
INFO 2024-10-01 17:39:13,148 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:36:48,0533319799,7189,00:02:12,2024/10/01 14:36:59,2024/10/01 14:39:12,TerminatedBySrc,,,Ext.7189,0533319799,10001,,,Extension,Line,,Maryam Almutairi,0533319799,
INFO 2024-10-01 17:39:13,149 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:36:48', '0533319799', '7189', '00:02:12', '2024/10/01 14:36:59', '2024/10/01 14:39:12', 'TerminatedBySrc', '', '', 'Ext.7189', '0533319799', '10001', '', '', 'Extension', 'Line', '', 'Maryam Almutairi', '0533319799', '']
INFO 2024-10-01 17:39:13,165 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:13,165 models 570 138242068317888 Initial state: caller=7189, callee=0533319799, duration=132, total_cost=0.0
INFO 2024-10-01 17:39:13,165 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:39:13,166 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0533319799
INFO 2024-10-01 17:39:13,166 utils 570 138242068317888 Original number: 0533319799
INFO 2024-10-01 17:39:13,166 utils 570 138242068317888 Cleaned number: 0533319799
INFO 2024-10-01 17:39:13,167 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:13,167 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:13,168 models 570 138242068317888 Categorizing call for number: 0533319799
INFO 2024-10-01 17:39:13,171 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:13,173 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Match found: 0533319799 matches 05
INFO 2024-10-01 17:39:13,174 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 Calculating total cost for call: duration=132 seconds
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:39:13,175 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:39:13,176 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:13,178 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:13,178 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:39:13,182 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:39:13,184 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:13,188 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 14:39:13.186498+00:00, Should reset: False
INFO 2024-10-01 17:39:13,188 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:39:13,188 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:13,189 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 17:39:13,189 models 570 138242068317888 Attempting to deduct 1.20 from balance 0.00
WARNING 2024-10-01 17:39:13,189 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.20
WARNING 2024-10-01 17:39:13,189 models 570 138242068317888 Warning: Quota exceeded for extension 7189
INFO 2024-10-01 17:39:13,191 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:13,191 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:13,191 models 570 138242068317888 Initial state: caller=7189, callee=0533319799, duration=132, total_cost=1.20
INFO 2024-10-01 17:39:13,194 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:39:13,194 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0533319799
INFO 2024-10-01 17:39:13,194 utils 570 138242068317888 Original number: 0533319799
INFO 2024-10-01 17:39:13,195 utils 570 138242068317888 Cleaned number: 0533319799
INFO 2024-10-01 17:39:13,195 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:13,195 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:13,195 models 570 138242068317888 Categorizing call for number: 0533319799
INFO 2024-10-01 17:39:13,197 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:13,199 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:13,199 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:13,199 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:13,199 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:13,200 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:13,200 models 570 138242068317888 Match found: 0533319799 matches 05
INFO 2024-10-01 17:39:13,200 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:13,200 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:13,201 models 570 138242068317888 Calculating total cost for call: duration=132 seconds
INFO 2024-10-01 17:39:13,201 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:39:13,201 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:13,201 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:39:13,202 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:39:13,202 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:13,204 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:13,204 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 17:39:13,207 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:39:13,209 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:13,212 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 14:39:13.210316+00:00, Should reset: False
INFO 2024-10-01 17:39:13,212 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 17:39:13,212 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:39:13,212 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:39:13,212 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:39:13,214 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:13,214 socket_server 570 138242068317888 Saved call record for company Smasco: 7189 -> 0533319799 at 2024-10-01 14:36:48+03:00
INFO 2024-10-01 17:39:13,623 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57616) on port 8000
INFO 2024-10-01 17:39:46,808 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:33:42,0571052914,7213,00:05:48,2024/10/01 14:33:57,2024/10/01 14:39:46,TerminatedBySrc,,,Ext.7213,0571052914,10001,,,Extension,Line,,Fayazz Bora,0571052914,
INFO 2024-10-01 17:39:46,809 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:33:42', '0571052914', '7213', '00:05:48', '2024/10/01 14:33:57', '2024/10/01 14:39:46', 'TerminatedBySrc', '', '', 'Ext.7213', '0571052914', '10001', '', '', 'Extension', 'Line', '', 'Fayazz Bora', '0571052914', '']
INFO 2024-10-01 17:39:46,829 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:46,829 models 570 138242068317888 Initial state: caller=7213, callee=0571052914, duration=348, total_cost=0.0
INFO 2024-10-01 17:39:46,829 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:39:46,830 models 570 138242068317888 Before determining country, Caller: 7213, Callee: 0571052914
INFO 2024-10-01 17:39:46,830 utils 570 138242068317888 Original number: 0571052914
INFO 2024-10-01 17:39:46,830 utils 570 138242068317888 Cleaned number: 0571052914
INFO 2024-10-01 17:39:46,830 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:46,830 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:46,830 models 570 138242068317888 Categorizing call for number: 0571052914
INFO 2024-10-01 17:39:46,834 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:46,837 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:46,837 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Match found: 0571052914 matches 05
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:46,838 models 570 138242068317888 Calculating total cost for call: duration=348 seconds
INFO 2024-10-01 17:39:46,840 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:39:46,840 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:46,841 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 17:39:46,841 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 17:39:46,841 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:46,844 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:46,845 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:39:46,849 models 570 138242068317888 Found extension: 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 17:39:46,851 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 57.60
INFO 2024-10-01 17:39:46,888 models 570 138242068317888 Quota for 7213 - Fayazz Bora (Smasco): Last reset: 2024-09-15 06:34:55.183518+00:00, Next reset: 2024-10-15 06:34:55.183518+00:00, Current time: 2024-10-01 14:39:46.854283+00:00, Should reset: False
INFO 2024-10-01 17:39:46,888 models 570 138242068317888 Quota reset not needed for 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 17:39:46,889 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 57.60
INFO 2024-10-01 17:39:46,889 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 17:39:46,889 models 570 138242068317888 Attempting to deduct 2.40 from balance 42.40
INFO 2024-10-01 17:39:46,897 models 570 138242068317888 Successfully deducted 2.40. New remaining balance: 40.00
INFO 2024-10-01 17:39:46,898 models 570 138242068317888 Successfully deducted 2.40 from quota. New balance: 40.00
INFO 2024-10-01 17:39:46,907 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:46,909 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:46,909 models 570 138242068317888 Initial state: caller=7213, callee=0571052914, duration=348, total_cost=2.40
INFO 2024-10-01 17:39:46,917 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 17:39:46,918 models 570 138242068317888 Before determining country, Caller: 7213, Callee: 0571052914
INFO 2024-10-01 17:39:46,918 utils 570 138242068317888 Original number: 0571052914
INFO 2024-10-01 17:39:46,919 utils 570 138242068317888 Cleaned number: 0571052914
INFO 2024-10-01 17:39:46,919 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:46,919 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:46,919 models 570 138242068317888 Categorizing call for number: 0571052914
INFO 2024-10-01 17:39:46,922 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:46,925 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:46,926 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:46,927 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:46,927 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:46,927 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:46,927 models 570 138242068317888 Match found: 0571052914 matches 05
INFO 2024-10-01 17:39:46,929 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:46,929 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 Calculating total cost for call: duration=348 seconds
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 17:39:46,930 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:46,933 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:46,934 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 17:39:46,937 models 570 138242068317888 Found extension: 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 17:39:46,939 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 17:39:46,945 models 570 138242068317888 Quota for 7213 - Fayazz Bora (Smasco): Last reset: 2024-09-15 06:34:55.183518+00:00, Next reset: 2024-10-15 06:34:55.183518+00:00, Current time: 2024-10-01 14:39:46.941798+00:00, Should reset: False
INFO 2024-10-01 17:39:46,946 models 570 138242068317888 Quota reset not needed for 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 17:39:46,946 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 17:39:46,947 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:39:46,947 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:39:46,949 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:46,950 socket_server 570 138242068317888 Saved call record for company Smasco: 7213 -> 0571052914 at 2024-10-01 14:33:42+03:00
INFO 2024-10-01 17:39:47,355 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57619) on port 8000
INFO 2024-10-01 17:39:57,755 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:39:53,0540711425,7732,,,2024/10/01 14:39:57,Failed,,,Ext.7732,0540711425,0540711425,,,Extension,LineSet,,Annet Nakazibwe,0540711425,
INFO 2024-10-01 17:39:57,755 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:39:53', '0540711425', '7732', '', '', '2024/10/01 14:39:57', 'Failed', '', '', 'Ext.7732', '0540711425', '0540711425', '', '', 'Extension', 'LineSet', '', 'Annet Nakazibwe', '0540711425', '']
INFO 2024-10-01 17:39:57,770 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:57,771 models 570 138242068317888 Initial state: caller=7732, callee=0540711425, duration=None, total_cost=0.0
INFO 2024-10-01 17:39:57,771 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:39:57,771 models 570 138242068317888 Before determining country, Caller: 7732, Callee: 0540711425
INFO 2024-10-01 17:39:57,771 utils 570 138242068317888 Original number: 0540711425
INFO 2024-10-01 17:39:57,771 utils 570 138242068317888 Cleaned number: 0540711425
INFO 2024-10-01 17:39:57,772 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:57,772 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:57,772 models 570 138242068317888 Categorizing call for number: 0540711425
INFO 2024-10-01 17:39:57,775 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:57,777 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:57,777 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:57,778 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:57,778 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:57,778 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:57,778 models 570 138242068317888 Match found: 0540711425 matches 05
INFO 2024-10-01 17:39:57,778 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:57,779 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:57,779 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:39:57,779 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:39:57,779 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:39:57,779 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:57,782 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:57,782 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:39:57,786 models 570 138242068317888 Found extension: 7732 - Annet Nakazibwe (Smasco)
INFO 2024-10-01 17:39:57,787 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 64.40
INFO 2024-10-01 17:39:57,791 models 570 138242068317888 Quota for 7732 - Annet Nakazibwe (Smasco): Last reset: 2024-09-15 06:35:25.225366+00:00, Next reset: 2024-10-15 06:35:25.225366+00:00, Current time: 2024-10-01 14:39:57.789683+00:00, Should reset: False
INFO 2024-10-01 17:39:57,792 models 570 138242068317888 Quota reset not needed for 7732 - Annet Nakazibwe (Smasco)
INFO 2024-10-01 17:39:57,792 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 64.40
INFO 2024-10-01 17:39:57,792 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:39:57,793 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:39:57,795 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:57,795 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:39:57,795 models 570 138242068317888 Initial state: caller=7732, callee=0540711425, duration=None, total_cost=0.00
INFO 2024-10-01 17:39:57,798 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:39:57,798 models 570 138242068317888 Before determining country, Caller: 7732, Callee: 0540711425
INFO 2024-10-01 17:39:57,798 utils 570 138242068317888 Original number: 0540711425
INFO 2024-10-01 17:39:57,798 utils 570 138242068317888 Cleaned number: 0540711425
INFO 2024-10-01 17:39:57,799 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:39:57,799 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:39:57,799 models 570 138242068317888 Categorizing call for number: 0540711425
INFO 2024-10-01 17:39:57,801 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:39:57,802 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:39:57,803 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:39:57,803 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:39:57,803 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:39:57,803 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:39:57,803 models 570 138242068317888 Match found: 0540711425 matches 05
INFO 2024-10-01 17:39:57,804 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:39:57,804 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:39:57,804 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:39:57,804 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:39:57,804 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:39:57,805 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:39:57,806 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:39:57,807 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:39:57,809 models 570 138242068317888 Found extension: 7732 - Annet Nakazibwe (Smasco)
INFO 2024-10-01 17:39:57,811 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 64.40
INFO 2024-10-01 17:39:57,814 models 570 138242068317888 Quota for 7732 - Annet Nakazibwe (Smasco): Last reset: 2024-09-15 06:35:25.225366+00:00, Next reset: 2024-10-15 06:35:25.225366+00:00, Current time: 2024-10-01 14:39:57.812618+00:00, Should reset: False
INFO 2024-10-01 17:39:57,815 models 570 138242068317888 Quota reset not needed for 7732 - Annet Nakazibwe (Smasco)
INFO 2024-10-01 17:39:57,815 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 64.40
INFO 2024-10-01 17:39:57,815 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:39:57,815 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:39:57,817 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:39:57,817 socket_server 570 138242068317888 Saved call record for company Smasco: 7732 -> 0540711425 at 2024-10-01 14:39:53+03:00
INFO 2024-10-01 17:39:58,228 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57624) on port 8000
INFO 2024-10-01 17:40:02,549 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:38:36,0566866997,7790,,,2024/10/01 14:40:01,Failed,,,Ext.7790,0566866997,0566866997,,,Extension,LineSet,,Maram Alharbi,0566866997,
INFO 2024-10-01 17:40:02,549 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:38:36', '0566866997', '7790', '', '', '2024/10/01 14:40:01', 'Failed', '', '', 'Ext.7790', '0566866997', '0566866997', '', '', 'Extension', 'LineSet', '', 'Maram Alharbi', '0566866997', '']
INFO 2024-10-01 17:40:02,565 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:02,565 models 570 138242068317888 Initial state: caller=7790, callee=0566866997, duration=None, total_cost=0.0
INFO 2024-10-01 17:40:02,565 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:40:02,566 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0566866997
INFO 2024-10-01 17:40:02,566 utils 570 138242068317888 Original number: 0566866997
INFO 2024-10-01 17:40:02,566 utils 570 138242068317888 Cleaned number: 0566866997
INFO 2024-10-01 17:40:02,566 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:02,566 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:02,566 models 570 138242068317888 Categorizing call for number: 0566866997
INFO 2024-10-01 17:40:02,569 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:02,571 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:02,571 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:02,572 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:02,572 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:02,572 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:02,572 models 570 138242068317888 Match found: 0566866997 matches 05
INFO 2024-10-01 17:40:02,572 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:02,573 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:02,573 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:40:02,573 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:40:02,573 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:40:02,573 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:02,575 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:02,576 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:40:02,579 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:40:02,581 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:02,586 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:40:02.583746+00:00, Should reset: False
INFO 2024-10-01 17:40:02,587 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:40:02,587 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:02,587 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:40:02,588 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:40:02,590 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:02,591 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:02,591 models 570 138242068317888 Initial state: caller=7790, callee=0566866997, duration=None, total_cost=0.00
INFO 2024-10-01 17:40:02,593 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:40:02,594 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0566866997
INFO 2024-10-01 17:40:02,594 utils 570 138242068317888 Original number: 0566866997
INFO 2024-10-01 17:40:02,594 utils 570 138242068317888 Cleaned number: 0566866997
INFO 2024-10-01 17:40:02,594 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:02,594 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:02,595 models 570 138242068317888 Categorizing call for number: 0566866997
INFO 2024-10-01 17:40:02,596 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:02,598 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:02,598 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:02,598 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:02,598 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:02,599 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:02,599 models 570 138242068317888 Match found: 0566866997 matches 05
INFO 2024-10-01 17:40:02,599 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:02,599 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:02,599 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:40:02,599 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:40:02,600 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:40:02,600 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:02,602 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:02,602 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:40:02,605 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:40:02,607 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:02,614 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:40:02.609413+00:00, Should reset: False
INFO 2024-10-01 17:40:02,614 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:40:02,614 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:02,615 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:40:02,615 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:40:02,616 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:02,617 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0566866997 at 2024-10-01 14:38:36+03:00
INFO 2024-10-01 17:40:03,018 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57625) on port 8000
INFO 2024-10-01 17:40:05,428 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:37:59,0535271099,7738,,,2024/10/01 14:40:04,Failed,,,Ext.7738,0535271099,0535271099,,,Extension,LineSet,,Hanaa Alshalwi,0535271099,
INFO 2024-10-01 17:40:05,429 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:37:59', '0535271099', '7738', '', '', '2024/10/01 14:40:04', 'Failed', '', '', 'Ext.7738', '0535271099', '0535271099', '', '', 'Extension', 'LineSet', '', 'Hanaa Alshalwi', '0535271099', '']
INFO 2024-10-01 17:40:05,445 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:05,445 models 570 138242068317888 Initial state: caller=7738, callee=0535271099, duration=None, total_cost=0.0
INFO 2024-10-01 17:40:05,445 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:40:05,445 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0535271099
INFO 2024-10-01 17:40:05,446 utils 570 138242068317888 Original number: 0535271099
INFO 2024-10-01 17:40:05,446 utils 570 138242068317888 Cleaned number: 0535271099
INFO 2024-10-01 17:40:05,446 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:05,446 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:05,446 models 570 138242068317888 Categorizing call for number: 0535271099
INFO 2024-10-01 17:40:05,449 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:05,450 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:05,451 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:05,451 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:05,451 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:05,451 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:05,451 models 570 138242068317888 Match found: 0535271099 matches 05
INFO 2024-10-01 17:40:05,452 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:05,452 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:05,452 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:40:05,452 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:40:05,452 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:40:05,453 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:05,455 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:05,455 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:40:05,460 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:40:05,462 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:05,466 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:40:05.464885+00:00, Should reset: False
INFO 2024-10-01 17:40:05,467 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:40:05,467 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:05,467 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:40:05,467 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:40:05,469 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:05,469 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:05,470 models 570 138242068317888 Initial state: caller=7738, callee=0535271099, duration=None, total_cost=0.00
INFO 2024-10-01 17:40:05,472 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:40:05,472 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0535271099
INFO 2024-10-01 17:40:05,472 utils 570 138242068317888 Original number: 0535271099
INFO 2024-10-01 17:40:05,473 utils 570 138242068317888 Cleaned number: 0535271099
INFO 2024-10-01 17:40:05,473 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:05,473 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:05,473 models 570 138242068317888 Categorizing call for number: 0535271099
INFO 2024-10-01 17:40:05,475 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:05,477 models 570 138242068317888 Match found: 0535271099 matches 05
INFO 2024-10-01 17:40:05,478 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:05,478 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:05,478 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:40:05,478 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:40:05,478 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:40:05,479 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:05,480 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:05,481 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:40:05,483 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:40:05,485 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:05,488 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:40:05.486488+00:00, Should reset: False
INFO 2024-10-01 17:40:05,488 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:40:05,488 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:40:05,489 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:40:05,489 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:40:05,491 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:05,491 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0535271099 at 2024-10-01 14:37:59+03:00
INFO 2024-10-01 17:40:05,900 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57626) on port 8000
INFO 2024-10-01 17:40:23,115 autoreload 88924 134538665115776 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 17:40:24,845 autoreload 89332 125374924284032 Watching for file changes with StatReloader
INFO 2024-10-01 17:40:28,033 basehttp 89332 125374656677568 "GET /outgoing_international/?time_period=6m&custom_date=&search=&per_page=10 HTTP/1.1" 200 32733
INFO 2024-10-01 17:40:33,295 basehttp 89332 125374656677568 "GET /outgoing_international/pdf/?time_period=6m&custom_date= HTTP/1.1" 200 118561
INFO 2024-10-01 17:40:34,270 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:39:53,0540711425,7436,00:00:31,2024/10/01 14:40:02,2024/10/01 14:40:33,TerminatedBySrc,,,Ext.7436,0540711425,10001,,,Extension,Line,,Nabasitu Ssengendo,0540711425,
INFO 2024-10-01 17:40:34,270 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:39:53', '0540711425', '7436', '00:00:31', '2024/10/01 14:40:02', '2024/10/01 14:40:33', 'TerminatedBySrc', '', '', 'Ext.7436', '0540711425', '10001', '', '', 'Extension', 'Line', '', 'Nabasitu Ssengendo', '0540711425', '']
INFO 2024-10-01 17:40:34,290 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:34,291 models 570 138242068317888 Initial state: caller=7436, callee=0540711425, duration=31, total_cost=0.0
INFO 2024-10-01 17:40:34,291 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:40:34,291 models 570 138242068317888 Before determining country, Caller: 7436, Callee: 0540711425
INFO 2024-10-01 17:40:34,291 utils 570 138242068317888 Original number: 0540711425
INFO 2024-10-01 17:40:34,292 utils 570 138242068317888 Cleaned number: 0540711425
INFO 2024-10-01 17:40:34,292 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:34,292 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:34,292 models 570 138242068317888 Categorizing call for number: 0540711425
INFO 2024-10-01 17:40:34,296 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:34,301 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:34,301 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:34,301 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Match found: 0540711425 matches 05
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:34,302 models 570 138242068317888 Calculating total cost for call: duration=31 seconds
INFO 2024-10-01 17:40:34,303 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:40:34,304 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:40:34,304 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:40:34,304 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:40:34,305 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:34,311 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:34,312 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:40:34,320 models 570 138242068317888 Found extension: 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 17:40:34,323 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 2.40
INFO 2024-10-01 17:40:34,330 models 570 138242068317888 Quota for 7436 - Nabasitu Ssengendo (Smasco): Last reset: 2024-09-15 06:35:06.048112+00:00, Next reset: 2024-10-15 06:35:06.048112+00:00, Current time: 2024-10-01 14:40:34.327936+00:00, Should reset: False
INFO 2024-10-01 17:40:34,333 models 570 138242068317888 Quota reset not needed for 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 17:40:34,333 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 2.40
INFO 2024-10-01 17:40:34,334 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:40:34,334 models 570 138242068317888 Attempting to deduct 0.40 from balance 97.60
INFO 2024-10-01 17:40:34,336 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 97.20
INFO 2024-10-01 17:40:34,337 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 97.20
INFO 2024-10-01 17:40:34,341 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:34,341 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:40:34,341 models 570 138242068317888 Initial state: caller=7436, callee=0540711425, duration=31, total_cost=0.40
INFO 2024-10-01 17:40:34,345 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:40:34,348 models 570 138242068317888 Before determining country, Caller: 7436, Callee: 0540711425
INFO 2024-10-01 17:40:34,351 utils 570 138242068317888 Original number: 0540711425
INFO 2024-10-01 17:40:34,351 utils 570 138242068317888 Cleaned number: 0540711425
INFO 2024-10-01 17:40:34,351 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:40:34,351 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:40:34,351 models 570 138242068317888 Categorizing call for number: 0540711425
INFO 2024-10-01 17:40:34,360 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:40:34,367 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:40:34,370 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:40:34,370 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:40:34,370 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:40:34,370 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:40:34,370 models 570 138242068317888 Match found: 0540711425 matches 05
INFO 2024-10-01 17:40:34,372 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:40:34,372 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:40:34,372 models 570 138242068317888 Calculating total cost for call: duration=31 seconds
INFO 2024-10-01 17:40:34,373 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:40:34,373 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:40:34,373 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:40:34,373 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:40:34,382 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:40:34,385 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:40:34,385 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:40:34,389 models 570 138242068317888 Found extension: 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 17:40:34,391 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 2.80
INFO 2024-10-01 17:40:34,395 models 570 138242068317888 Quota for 7436 - Nabasitu Ssengendo (Smasco): Last reset: 2024-09-15 06:35:06.048112+00:00, Next reset: 2024-10-15 06:35:06.048112+00:00, Current time: 2024-10-01 14:40:34.393403+00:00, Should reset: False
INFO 2024-10-01 17:40:34,396 models 570 138242068317888 Quota reset not needed for 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 17:40:34,396 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 2.80
INFO 2024-10-01 17:40:34,397 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:40:34,397 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:40:34,402 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:40:34,402 socket_server 570 138242068317888 Saved call record for company Smasco: 7436 -> 0540711425 at 2024-10-01 14:39:53+03:00
INFO 2024-10-01 17:40:34,819 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57633) on port 8000
INFO 2024-10-01 17:40:57,846 basehttp 89332 125374656677568 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=10 HTTP/1.1" 200 27571
INFO 2024-10-01 17:41:03,506 basehttp 89332 125374656677568 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 57587
INFO 2024-10-01 17:41:05,101 basehttp 89332 125374656677568 "GET /outgoing_international/?time_period=today&custom_date=&search=&per_page=100 HTTP/1.1" 200 25227
INFO 2024-10-01 17:41:08,548 basehttp 89332 125374656677568 "GET /outgoing_international/pdf/?time_period=today&custom_date= HTTP/1.1" 200 2491
INFO 2024-10-01 17:41:30,444 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:40:09,0535721258,1046,00:01:11,2024/10/01 14:40:18,2024/10/01 14:41:29,TerminatedBySrc,,,Ext.1046,0535721258,10001,,,Extension,Line,,Nadir Ali,0535721258,
INFO 2024-10-01 17:41:30,444 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:40:09', '0535721258', '1046', '00:01:11', '2024/10/01 14:40:18', '2024/10/01 14:41:29', 'TerminatedBySrc', '', '', 'Ext.1046', '0535721258', '10001', '', '', 'Extension', 'Line', '', 'Nadir Ali', '0535721258', '']
INFO 2024-10-01 17:41:30,465 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:30,466 models 570 138242068317888 Initial state: caller=1046, callee=0535721258, duration=71, total_cost=0.0
INFO 2024-10-01 17:41:30,466 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:41:30,467 models 570 138242068317888 Before determining country, Caller: 1046, Callee: 0535721258
INFO 2024-10-01 17:41:30,467 utils 570 138242068317888 Original number: 0535721258
INFO 2024-10-01 17:41:30,467 utils 570 138242068317888 Cleaned number: 0535721258
INFO 2024-10-01 17:41:30,467 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:41:30,467 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:30,468 models 570 138242068317888 Categorizing call for number: 0535721258
INFO 2024-10-01 17:41:30,472 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:30,474 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:30,475 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:41:30,476 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:41:30,476 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:41:30,477 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:41:30,477 models 570 138242068317888 Match found: 0535721258 matches 05
INFO 2024-10-01 17:41:30,478 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:41:30,478 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:30,478 models 570 138242068317888 Calculating total cost for call: duration=71 seconds
INFO 2024-10-01 17:41:30,478 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:41:30,478 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:41:30,479 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:41:30,479 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:41:30,479 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:30,482 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:30,483 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:41:30,488 models 570 138242068317888 Found extension: 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:41:30,490 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:41:30,495 models 570 138242068317888 Quota for 1046 - Nadir Ali (Smasco): Last reset: 2024-09-15 06:34:09.167832+00:00, Next reset: 2024-10-15 06:34:09.167832+00:00, Current time: 2024-10-01 14:41:30.493347+00:00, Should reset: False
INFO 2024-10-01 17:41:30,496 models 570 138242068317888 Quota reset not needed for 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:41:30,496 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 11.20
INFO 2024-10-01 17:41:30,496 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:41:30,496 models 570 138242068317888 Attempting to deduct 0.80 from balance 88.80
INFO 2024-10-01 17:41:30,499 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 88.00
INFO 2024-10-01 17:41:30,499 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 88.00
INFO 2024-10-01 17:41:30,502 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:30,502 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:30,502 models 570 138242068317888 Initial state: caller=1046, callee=0535721258, duration=71, total_cost=0.80
INFO 2024-10-01 17:41:30,506 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:41:30,507 models 570 138242068317888 Before determining country, Caller: 1046, Callee: 0535721258
INFO 2024-10-01 17:41:30,507 utils 570 138242068317888 Original number: 0535721258
INFO 2024-10-01 17:41:30,508 utils 570 138242068317888 Cleaned number: 0535721258
INFO 2024-10-01 17:41:30,508 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:41:30,508 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:30,509 models 570 138242068317888 Categorizing call for number: 0535721258
INFO 2024-10-01 17:41:30,511 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:30,514 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:30,514 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:41:30,515 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:41:30,515 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:41:30,516 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:41:30,516 models 570 138242068317888 Match found: 0535721258 matches 05
INFO 2024-10-01 17:41:30,517 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:41:30,517 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:30,517 models 570 138242068317888 Calculating total cost for call: duration=71 seconds
INFO 2024-10-01 17:41:30,517 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:41:30,518 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:41:30,518 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:41:30,518 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:41:30,518 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:30,522 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:30,522 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:41:30,526 models 570 138242068317888 Found extension: 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:41:30,528 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 12.00
INFO 2024-10-01 17:41:30,533 models 570 138242068317888 Quota for 1046 - Nadir Ali (Smasco): Last reset: 2024-09-15 06:34:09.167832+00:00, Next reset: 2024-10-15 06:34:09.167832+00:00, Current time: 2024-10-01 14:41:30.530902+00:00, Should reset: False
INFO 2024-10-01 17:41:30,534 models 570 138242068317888 Quota reset not needed for 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:41:30,534 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 12.00
INFO 2024-10-01 17:41:30,534 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:41:30,535 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:41:30,537 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:30,537 socket_server 570 138242068317888 Saved call record for company Smasco: 1046 -> 0535721258 at 2024-10-01 14:40:09+03:00
INFO 2024-10-01 17:41:30,958 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57638) on port 8000
INFO 2024-10-01 17:41:46,148 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:41:42,8000,10001,00:00:02,2024/10/01 14:41:42,2024/10/01 14:41:45,TerminatedBySrc,,,566866997,Ext.8000,8000,,,Line,Ivr,,566866997:Main Number,WelcomeMessage,
INFO 2024-10-01 17:41:46,148 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:41:42', '8000', '10001', '00:00:02', '2024/10/01 14:41:42', '2024/10/01 14:41:45', 'TerminatedBySrc', '', '', '566866997', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '566866997:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:41:46,171 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:46,172 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=2, total_cost=0.0
INFO 2024-10-01 17:41:46,177 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:41:46,180 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:41:46,180 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:41:46,181 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:41:46,181 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:41:46,182 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:46,182 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:41:46,187 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:46,192 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:46,193 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:41:46,194 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:41:46,196 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:46,199 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 17:41:46,200 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:41:46,200 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:41:46,200 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:41:46,200 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:46,202 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:46,206 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:46,207 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:41:46,212 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:41:46,215 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:46,216 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:46,216 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=2, total_cost=0.00
INFO 2024-10-01 17:41:46,221 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:41:46,222 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:41:46,223 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:41:46,223 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:41:46,223 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:41:46,224 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:46,225 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:41:46,231 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:46,235 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:46,237 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:41:46,237 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:41:46,237 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:46,238 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 17:41:46,239 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:41:46,239 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:41:46,239 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:41:46,239 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:46,240 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:46,244 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:46,245 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:41:46,248 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:41:46,252 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:46,252 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:41:42+03:00
INFO 2024-10-01 17:41:46,662 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57641) on port 8000
INFO 2024-10-01 17:41:53,492 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:41:49,7327,6730,00:00:03,2024/10/01 14:41:49,2024/10/01 14:41:52,TerminatedBySrc,,,Ext.6730,Ext.6666,7327,,,Extension,VMail,,Vijaya krishnan,,
INFO 2024-10-01 17:41:53,492 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:41:49', '7327', '6730', '00:00:03', '2024/10/01 14:41:49', '2024/10/01 14:41:52', 'TerminatedBySrc', '', '', 'Ext.6730', 'Ext.6666', '7327', '', '', 'Extension', 'VMail', '', 'Vijaya krishnan', '', '']
INFO 2024-10-01 17:41:53,509 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:53,509 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=3, total_cost=0.0
INFO 2024-10-01 17:41:53,510 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:41:53,510 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 17:41:53,510 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 17:41:53,510 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 17:41:53,510 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:41:53,510 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:53,511 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 17:41:53,514 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:53,516 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:53,516 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 17:41:53,516 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:41:53,516 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:53,517 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:53,520 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:53,520 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:41:53,524 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 17:41:53,526 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 17:41:53,530 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 14:41:53.528241+00:00, Should reset: False
INFO 2024-10-01 17:41:53,530 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 17:41:53,531 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 17:41:53,531 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:41:53,531 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:41:53,533 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:53,534 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:53,535 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=3, total_cost=0.00
INFO 2024-10-01 17:41:53,538 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:41:53,538 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 17:41:53,538 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 17:41:53,539 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 17:41:53,539 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:41:53,539 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:53,539 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 17:41:53,541 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:53,543 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:53,543 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 17:41:53,543 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:41:53,544 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:53,545 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:53,547 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:53,547 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:41:53,550 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 17:41:53,551 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 17:41:53,554 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 14:41:53.553053+00:00, Should reset: False
INFO 2024-10-01 17:41:53,555 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 17:41:53,555 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 17:41:53,555 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:41:53,555 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:41:53,557 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:53,557 socket_server 570 138242068317888 Saved call record for company Smasco: 6730 -> 7327 at 2024-10-01 14:41:49+03:00
INFO 2024-10-01 17:41:53,975 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57644) on port 8000
INFO 2024-10-01 17:41:54,420 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:40:15,0559916644,1134,,,2024/10/01 14:41:53,Failed,,,Ext.1134,0559916644,0559916644,,,Extension,LineSet,,Afrah Almantshri,0559916644,
INFO 2024-10-01 17:41:54,420 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:40:15', '0559916644', '1134', '', '', '2024/10/01 14:41:53', 'Failed', '', '', 'Ext.1134', '0559916644', '0559916644', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0559916644', '']
INFO 2024-10-01 17:41:54,444 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:54,445 models 570 138242068317888 Initial state: caller=1134, callee=0559916644, duration=None, total_cost=0.0
INFO 2024-10-01 17:41:54,445 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:41:54,445 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0559916644
INFO 2024-10-01 17:41:54,446 utils 570 138242068317888 Original number: 0559916644
INFO 2024-10-01 17:41:54,446 utils 570 138242068317888 Cleaned number: 0559916644
INFO 2024-10-01 17:41:54,446 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:41:54,446 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:54,446 models 570 138242068317888 Categorizing call for number: 0559916644
INFO 2024-10-01 17:41:54,449 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:54,451 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:54,452 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:41:54,452 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:41:54,452 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:41:54,452 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:41:54,453 models 570 138242068317888 Match found: 0559916644 matches 05
INFO 2024-10-01 17:41:54,453 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:41:54,453 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:54,453 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:41:54,453 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:41:54,453 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:54,454 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:54,456 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:54,457 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:41:54,459 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:41:54,461 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:54,461 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:41:54,462 models 570 138242068317888 Initial state: caller=1134, callee=0559916644, duration=None, total_cost=0.00
INFO 2024-10-01 17:41:54,464 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:41:54,464 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0559916644
INFO 2024-10-01 17:41:54,465 utils 570 138242068317888 Original number: 0559916644
INFO 2024-10-01 17:41:54,465 utils 570 138242068317888 Cleaned number: 0559916644
INFO 2024-10-01 17:41:54,465 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:41:54,465 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:41:54,465 models 570 138242068317888 Categorizing call for number: 0559916644
INFO 2024-10-01 17:41:54,467 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:41:54,471 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:41:54,473 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:41:54,473 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:41:54,473 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:41:54,473 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:41:54,473 models 570 138242068317888 Match found: 0559916644 matches 05
INFO 2024-10-01 17:41:54,476 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:41:54,476 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:41:54,476 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:41:54,476 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:41:54,477 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:41:54,477 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:41:54,481 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:41:54,481 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:41:54,483 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:41:54,484 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:41:54,485 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0559916644 at 2024-10-01 14:40:15+03:00
INFO 2024-10-01 17:41:54,893 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57647) on port 8000
INFO 2024-10-01 17:42:26,243 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:42:24,0537285813,1091,,,2024/10/01 14:42:25,Failed,,,Ext.1091,0537285813,0537285813,,,Extension,LineSet,,Nasser Alatawi,0537285813,
INFO 2024-10-01 17:42:26,243 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:42:24', '0537285813', '1091', '', '', '2024/10/01 14:42:25', 'Failed', '', '', 'Ext.1091', '0537285813', '0537285813', '', '', 'Extension', 'LineSet', '', 'Nasser Alatawi', '0537285813', '']
INFO 2024-10-01 17:42:26,259 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:42:26,259 models 570 138242068317888 Initial state: caller=1091, callee=0537285813, duration=None, total_cost=0.0
INFO 2024-10-01 17:42:26,260 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:42:26,260 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0537285813
INFO 2024-10-01 17:42:26,260 utils 570 138242068317888 Original number: 0537285813
INFO 2024-10-01 17:42:26,260 utils 570 138242068317888 Cleaned number: 0537285813
INFO 2024-10-01 17:42:26,261 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:42:26,261 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:42:26,261 models 570 138242068317888 Categorizing call for number: 0537285813
INFO 2024-10-01 17:42:26,263 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:42:26,266 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:42:26,267 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:42:26,267 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:42:26,267 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:42:26,268 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:42:26,268 models 570 138242068317888 Match found: 0537285813 matches 05
INFO 2024-10-01 17:42:26,269 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:42:26,269 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:42:26,270 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:42:26,270 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:42:26,270 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:42:26,270 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:42:26,274 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:42:26,274 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:42:26,279 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:42:26,281 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:42:26,287 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:42:26.284756+00:00, Should reset: False
INFO 2024-10-01 17:42:26,287 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:42:26,287 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:42:26,289 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:42:26,289 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:42:26,291 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:42:26,292 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:42:26,292 models 570 138242068317888 Initial state: caller=1091, callee=0537285813, duration=None, total_cost=0.00
INFO 2024-10-01 17:42:26,295 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:42:26,295 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0537285813
INFO 2024-10-01 17:42:26,296 utils 570 138242068317888 Original number: 0537285813
INFO 2024-10-01 17:42:26,296 utils 570 138242068317888 Cleaned number: 0537285813
INFO 2024-10-01 17:42:26,296 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:42:26,296 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:42:26,296 models 570 138242068317888 Categorizing call for number: 0537285813
INFO 2024-10-01 17:42:26,299 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:42:26,301 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:42:26,302 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:42:26,302 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:42:26,303 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:42:26,303 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:42:26,304 models 570 138242068317888 Match found: 0537285813 matches 05
INFO 2024-10-01 17:42:26,304 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:42:26,305 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:42:26,305 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:42:26,306 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:42:26,306 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:42:26,306 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:42:26,309 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:42:26,310 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:42:26,313 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:42:26,315 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:42:26,322 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:42:26.317148+00:00, Should reset: False
INFO 2024-10-01 17:42:26,322 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:42:26,322 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:42:26,322 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:42:26,322 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:42:26,325 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:42:26,325 socket_server 570 138242068317888 Saved call record for company Smasco: 1091 -> 0537285813 at 2024-10-01 14:42:24+03:00
INFO 2024-10-01 17:42:26,723 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57659) on port 8000
INFO 2024-10-01 17:43:02,348 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:38:43,0542420873,7783,00:04:10,2024/10/01 14:38:50,2024/10/01 14:43:01,TerminatedByDst,,,Ext.7783,0542420873,10001,,,Extension,Line,,Majd Alshehri,0542420873,
INFO 2024-10-01 17:43:02,348 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:38:43', '0542420873', '7783', '00:04:10', '2024/10/01 14:38:50', '2024/10/01 14:43:01', 'TerminatedByDst', '', '', 'Ext.7783', '0542420873', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0542420873', '']
INFO 2024-10-01 17:43:02,368 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:02,368 models 570 138242068317888 Initial state: caller=7783, callee=0542420873, duration=250, total_cost=0.0
INFO 2024-10-01 17:43:02,369 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:43:02,369 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0542420873
INFO 2024-10-01 17:43:02,369 utils 570 138242068317888 Original number: 0542420873
INFO 2024-10-01 17:43:02,370 utils 570 138242068317888 Cleaned number: 0542420873
INFO 2024-10-01 17:43:02,370 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:02,370 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:02,370 models 570 138242068317888 Categorizing call for number: 0542420873
INFO 2024-10-01 17:43:02,373 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:02,375 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:02,376 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:02,376 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:02,376 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:02,377 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:02,377 models 570 138242068317888 Match found: 0542420873 matches 05
INFO 2024-10-01 17:43:02,377 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:02,377 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:02,377 models 570 138242068317888 Calculating total cost for call: duration=250 seconds
INFO 2024-10-01 17:43:02,378 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:43:02,378 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:02,378 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:43:02,378 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 17:43:02,378 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:02,381 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:02,381 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:43:02,385 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 17:43:02,387 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 15.20
INFO 2024-10-01 17:43:02,391 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 14:43:02.389069+00:00, Should reset: False
INFO 2024-10-01 17:43:02,391 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 17:43:02,392 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 15.20
INFO 2024-10-01 17:43:02,392 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 17:43:02,392 models 570 138242068317888 Attempting to deduct 2.00 from balance 84.80
INFO 2024-10-01 17:43:02,394 models 570 138242068317888 Successfully deducted 2.00. New remaining balance: 82.80
INFO 2024-10-01 17:43:02,394 models 570 138242068317888 Successfully deducted 2.00 from quota. New balance: 82.80
INFO 2024-10-01 17:43:02,397 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:02,397 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:02,398 models 570 138242068317888 Initial state: caller=7783, callee=0542420873, duration=250, total_cost=2.00
INFO 2024-10-01 17:43:02,400 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 17:43:02,401 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0542420873
INFO 2024-10-01 17:43:02,401 utils 570 138242068317888 Original number: 0542420873
INFO 2024-10-01 17:43:02,401 utils 570 138242068317888 Cleaned number: 0542420873
INFO 2024-10-01 17:43:02,401 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:02,401 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:02,401 models 570 138242068317888 Categorizing call for number: 0542420873
INFO 2024-10-01 17:43:02,403 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:02,410 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:02,411 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:02,411 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:02,411 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:02,412 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:02,412 models 570 138242068317888 Match found: 0542420873 matches 05
INFO 2024-10-01 17:43:02,412 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:02,412 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:02,412 models 570 138242068317888 Calculating total cost for call: duration=250 seconds
INFO 2024-10-01 17:43:02,413 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:43:02,413 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:02,413 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:43:02,413 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 17:43:02,413 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:02,415 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:02,416 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 17:43:02,421 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 17:43:02,422 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 17.20
INFO 2024-10-01 17:43:02,426 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 14:43:02.424336+00:00, Should reset: False
INFO 2024-10-01 17:43:02,427 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 17:43:02,427 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 17.20
INFO 2024-10-01 17:43:02,427 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:43:02,427 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:43:02,431 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:02,432 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0542420873 at 2024-10-01 14:38:43+03:00
INFO 2024-10-01 17:43:02,828 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57660) on port 8000
INFO 2024-10-01 17:43:08,448 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:42:30,0565637551,1134,00:00:30,2024/10/01 14:42:37,2024/10/01 14:43:07,TerminatedByDst,,,Ext.1134,0565637551,10001,,,Extension,Line,,Afrah Almantshri,0565637551,
INFO 2024-10-01 17:43:08,449 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:42:30', '0565637551', '1134', '00:00:30', '2024/10/01 14:42:37', '2024/10/01 14:43:07', 'TerminatedByDst', '', '', 'Ext.1134', '0565637551', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0565637551', '']
INFO 2024-10-01 17:43:08,465 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:08,465 models 570 138242068317888 Initial state: caller=1134, callee=0565637551, duration=30, total_cost=0.0
INFO 2024-10-01 17:43:08,466 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:43:08,466 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0565637551
INFO 2024-10-01 17:43:08,466 utils 570 138242068317888 Original number: 0565637551
INFO 2024-10-01 17:43:08,466 utils 570 138242068317888 Cleaned number: 0565637551
INFO 2024-10-01 17:43:08,466 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:08,467 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:08,467 models 570 138242068317888 Categorizing call for number: 0565637551
INFO 2024-10-01 17:43:08,469 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:08,471 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:08,472 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:08,472 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:08,472 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:08,472 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:08,472 models 570 138242068317888 Match found: 0565637551 matches 05
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:08,473 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:43:08,474 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:43:08,474 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:08,476 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:08,476 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:43:08,478 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:43:08,480 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:08,481 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:08,481 models 570 138242068317888 Initial state: caller=1134, callee=0565637551, duration=30, total_cost=0.40
INFO 2024-10-01 17:43:08,483 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:43:08,483 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0565637551
INFO 2024-10-01 17:43:08,484 utils 570 138242068317888 Original number: 0565637551
INFO 2024-10-01 17:43:08,484 utils 570 138242068317888 Cleaned number: 0565637551
INFO 2024-10-01 17:43:08,484 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:08,484 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:08,484 models 570 138242068317888 Categorizing call for number: 0565637551
INFO 2024-10-01 17:43:08,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:08,488 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:08,488 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:08,488 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:08,488 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:08,489 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:08,489 models 570 138242068317888 Match found: 0565637551 matches 05
INFO 2024-10-01 17:43:08,489 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:08,489 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:08,489 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 17:43:08,490 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:43:08,490 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:08,490 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:43:08,490 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:43:08,490 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:08,492 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:08,492 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 17:43:08,494 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:43:08,495 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:08,496 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0565637551 at 2024-10-01 14:42:30+03:00
INFO 2024-10-01 17:43:08,899 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57662) on port 8000
INFO 2024-10-01 17:43:09,549 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:41:13,0542370232,7738,00:01:19,2024/10/01 14:41:49,2024/10/01 14:43:08,TerminatedByDst,,,Ext.7738,0542370232,10001,,,Extension,Line,,Hanaa Alshalwi,0542370232,
INFO 2024-10-01 17:43:09,550 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:41:13', '0542370232', '7738', '00:01:19', '2024/10/01 14:41:49', '2024/10/01 14:43:08', 'TerminatedByDst', '', '', 'Ext.7738', '0542370232', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0542370232', '']
INFO 2024-10-01 17:43:09,569 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:09,570 models 570 138242068317888 Initial state: caller=7738, callee=0542370232, duration=79, total_cost=0.0
INFO 2024-10-01 17:43:09,571 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:43:09,571 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0542370232
INFO 2024-10-01 17:43:09,571 utils 570 138242068317888 Original number: 0542370232
INFO 2024-10-01 17:43:09,571 utils 570 138242068317888 Cleaned number: 0542370232
INFO 2024-10-01 17:43:09,571 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:09,571 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:09,572 models 570 138242068317888 Categorizing call for number: 0542370232
INFO 2024-10-01 17:43:09,576 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:09,579 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:09,579 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:09,580 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:09,580 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:09,580 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:09,580 models 570 138242068317888 Match found: 0542370232 matches 05
INFO 2024-10-01 17:43:09,580 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 Calculating total cost for call: duration=79 seconds
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:43:09,581 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:43:09,582 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:09,586 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:09,586 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:43:09,592 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:43:09,595 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:09,602 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:43:09.597080+00:00, Should reset: False
INFO 2024-10-01 17:43:09,602 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:43:09,602 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:09,604 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:43:09,604 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:43:09,604 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:43:09,604 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 17:43:09,608 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:09,608 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:09,608 models 570 138242068317888 Initial state: caller=7738, callee=0542370232, duration=79, total_cost=0.80
INFO 2024-10-01 17:43:09,611 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:43:09,611 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0542370232
INFO 2024-10-01 17:43:09,611 utils 570 138242068317888 Original number: 0542370232
INFO 2024-10-01 17:43:09,612 utils 570 138242068317888 Cleaned number: 0542370232
INFO 2024-10-01 17:43:09,612 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:09,612 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:09,612 models 570 138242068317888 Categorizing call for number: 0542370232
INFO 2024-10-01 17:43:09,614 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:09,616 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:09,617 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:09,617 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:09,618 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:09,618 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:09,618 models 570 138242068317888 Match found: 0542370232 matches 05
INFO 2024-10-01 17:43:09,619 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:09,619 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:09,619 models 570 138242068317888 Calculating total cost for call: duration=79 seconds
INFO 2024-10-01 17:43:09,620 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:43:09,620 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:43:09,620 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:43:09,620 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:43:09,621 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:09,623 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:09,624 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:43:09,627 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:43:09,629 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:09,632 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 14:43:09.630424+00:00, Should reset: False
INFO 2024-10-01 17:43:09,632 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 17:43:09,632 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:09,632 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:43:09,633 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:43:09,634 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:09,635 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0542370232 at 2024-10-01 14:41:13+03:00
INFO 2024-10-01 17:43:10,044 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57663) on port 8000
INFO 2024-10-01 17:43:54,618 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:43:43,0543387734,1091,,,2024/10/01 14:43:53,Failed,,,Ext.1091,0543387734,0543387734,,,Extension,LineSet,,Nasser Alatawi,0543387734,
INFO 2024-10-01 17:43:54,618 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:43:43', '0543387734', '1091', '', '', '2024/10/01 14:43:53', 'Failed', '', '', 'Ext.1091', '0543387734', '0543387734', '', '', 'Extension', 'LineSet', '', 'Nasser Alatawi', '0543387734', '']
INFO 2024-10-01 17:43:54,651 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:54,651 models 570 138242068317888 Initial state: caller=1091, callee=0543387734, duration=None, total_cost=0.0
INFO 2024-10-01 17:43:54,652 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:43:54,652 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0543387734
INFO 2024-10-01 17:43:54,652 utils 570 138242068317888 Original number: 0543387734
INFO 2024-10-01 17:43:54,652 utils 570 138242068317888 Cleaned number: 0543387734
INFO 2024-10-01 17:43:54,652 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:54,653 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:54,653 models 570 138242068317888 Categorizing call for number: 0543387734
INFO 2024-10-01 17:43:54,657 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:54,660 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:54,660 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:54,661 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:54,661 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:54,661 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:54,662 models 570 138242068317888 Match found: 0543387734 matches 05
INFO 2024-10-01 17:43:54,662 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:54,662 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:54,662 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:43:54,663 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:43:54,663 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:43:54,665 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:54,668 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:54,668 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:43:54,674 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:43:54,677 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:54,681 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:43:54.679402+00:00, Should reset: False
INFO 2024-10-01 17:43:54,682 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:43:54,682 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:54,682 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:43:54,682 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:43:54,684 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:54,685 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:43:54,685 models 570 138242068317888 Initial state: caller=1091, callee=0543387734, duration=None, total_cost=0.00
INFO 2024-10-01 17:43:54,689 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:43:54,689 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0543387734
INFO 2024-10-01 17:43:54,689 utils 570 138242068317888 Original number: 0543387734
INFO 2024-10-01 17:43:54,689 utils 570 138242068317888 Cleaned number: 0543387734
INFO 2024-10-01 17:43:54,690 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:43:54,690 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:43:54,690 models 570 138242068317888 Categorizing call for number: 0543387734
INFO 2024-10-01 17:43:54,692 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:43:54,694 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:43:54,694 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:43:54,694 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:43:54,694 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:43:54,694 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:43:54,695 models 570 138242068317888 Match found: 0543387734 matches 05
INFO 2024-10-01 17:43:54,695 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:43:54,695 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:43:54,695 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:43:54,695 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:43:54,696 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:43:54,696 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:43:54,698 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:43:54,699 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:43:54,701 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:43:54,703 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:54,707 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:43:54.704702+00:00, Should reset: False
INFO 2024-10-01 17:43:54,707 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:43:54,707 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:43:54,708 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:43:54,708 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:43:54,709 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:43:54,709 socket_server 570 138242068317888 Saved call record for company Smasco: 1091 -> 0543387734 at 2024-10-01 14:43:43+03:00
INFO 2024-10-01 17:43:55,113 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57671) on port 8000
INFO 2024-10-01 17:44:15,438 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:43:16,0540006622,1134,00:00:47,2024/10/01 14:43:26,2024/10/01 14:44:14,TerminatedByDst,,,Ext.1134,0540006622,10001,,,Extension,Line,,Afrah Almantshri,0540006622,
INFO 2024-10-01 17:44:15,438 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:43:16', '0540006622', '1134', '00:00:47', '2024/10/01 14:43:26', '2024/10/01 14:44:14', 'TerminatedByDst', '', '', 'Ext.1134', '0540006622', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0540006622', '']
INFO 2024-10-01 17:44:15,454 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:15,455 models 570 138242068317888 Initial state: caller=1134, callee=0540006622, duration=47, total_cost=0.0
INFO 2024-10-01 17:44:15,455 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:44:15,455 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0540006622
INFO 2024-10-01 17:44:15,455 utils 570 138242068317888 Original number: 0540006622
INFO 2024-10-01 17:44:15,455 utils 570 138242068317888 Cleaned number: 0540006622
INFO 2024-10-01 17:44:15,456 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:15,456 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:15,456 models 570 138242068317888 Categorizing call for number: 0540006622
INFO 2024-10-01 17:44:15,458 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:15,461 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:15,461 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:15,461 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:15,461 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:15,461 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Match found: 0540006622 matches 05
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:44:15,462 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:44:15,463 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:44:15,463 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:44:15,463 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:15,465 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:15,466 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:44:15,470 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:44:15,472 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:15,472 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:15,472 models 570 138242068317888 Initial state: caller=1134, callee=0540006622, duration=47, total_cost=0.40
INFO 2024-10-01 17:44:15,475 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:44:15,476 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0540006622
INFO 2024-10-01 17:44:15,476 utils 570 138242068317888 Original number: 0540006622
INFO 2024-10-01 17:44:15,476 utils 570 138242068317888 Cleaned number: 0540006622
INFO 2024-10-01 17:44:15,477 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:15,477 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:15,477 models 570 138242068317888 Categorizing call for number: 0540006622
INFO 2024-10-01 17:44:15,479 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:15,481 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:15,482 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:15,482 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:15,482 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:15,482 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:15,483 models 570 138242068317888 Match found: 0540006622 matches 05
INFO 2024-10-01 17:44:15,483 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:15,483 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:15,483 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 17:44:15,483 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:44:15,484 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:44:15,484 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:44:15,484 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:44:15,484 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:15,486 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:15,487 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 17:44:15,489 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:44:15,490 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:15,491 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0540006622 at 2024-10-01 14:43:16+03:00
INFO 2024-10-01 17:44:15,893 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57674) on port 8000
INFO 2024-10-01 17:44:23,263 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:42:22,0563699992,7195,,,2024/10/01 14:44:22,Failed,,,Ext.7195,0563699992,0563699992,,,Extension,LineSet,,Abdulaziz Alenzi,0563699992,
INFO 2024-10-01 17:44:23,263 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:42:22', '0563699992', '7195', '', '', '2024/10/01 14:44:22', 'Failed', '', '', 'Ext.7195', '0563699992', '0563699992', '', '', 'Extension', 'LineSet', '', 'Abdulaziz Alenzi', '0563699992', '']
INFO 2024-10-01 17:44:23,283 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:23,284 models 570 138242068317888 Initial state: caller=7195, callee=0563699992, duration=None, total_cost=0.0
INFO 2024-10-01 17:44:23,284 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:44:23,284 models 570 138242068317888 Before determining country, Caller: 7195, Callee: 0563699992
INFO 2024-10-01 17:44:23,284 utils 570 138242068317888 Original number: 0563699992
INFO 2024-10-01 17:44:23,284 utils 570 138242068317888 Cleaned number: 0563699992
INFO 2024-10-01 17:44:23,285 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:23,285 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:23,285 models 570 138242068317888 Categorizing call for number: 0563699992
INFO 2024-10-01 17:44:23,288 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:23,290 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:23,290 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:23,290 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:23,291 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:23,291 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:23,291 models 570 138242068317888 Match found: 0563699992 matches 05
INFO 2024-10-01 17:44:23,292 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:23,292 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:23,292 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:44:23,292 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:44:23,292 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:23,293 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:23,295 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:23,295 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:44:23,299 models 570 138242068317888 Found extension: 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 17:44:23,300 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 17:44:23,304 models 570 138242068317888 Quota for 7195 - Abdulaziz Alenzi (Smasco): Last reset: 2024-09-15 06:34:55.101966+00:00, Next reset: 2024-10-15 06:34:55.101966+00:00, Current time: 2024-10-01 14:44:23.302516+00:00, Should reset: False
INFO 2024-10-01 17:44:23,304 models 570 138242068317888 Quota reset not needed for 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 17:44:23,305 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 17:44:23,305 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:44:23,305 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:44:23,306 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:23,307 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:23,307 models 570 138242068317888 Initial state: caller=7195, callee=0563699992, duration=None, total_cost=0.00
INFO 2024-10-01 17:44:23,309 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:44:23,309 models 570 138242068317888 Before determining country, Caller: 7195, Callee: 0563699992
INFO 2024-10-01 17:44:23,310 utils 570 138242068317888 Original number: 0563699992
INFO 2024-10-01 17:44:23,310 utils 570 138242068317888 Cleaned number: 0563699992
INFO 2024-10-01 17:44:23,310 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:23,310 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:23,310 models 570 138242068317888 Categorizing call for number: 0563699992
INFO 2024-10-01 17:44:23,312 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:23,313 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:23,314 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:23,314 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:23,314 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:23,314 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:23,315 models 570 138242068317888 Match found: 0563699992 matches 05
INFO 2024-10-01 17:44:23,315 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:23,315 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:23,315 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:44:23,315 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:44:23,315 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:23,316 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:23,317 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:23,318 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:44:23,321 models 570 138242068317888 Found extension: 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 17:44:23,322 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 17:44:23,325 models 570 138242068317888 Quota for 7195 - Abdulaziz Alenzi (Smasco): Last reset: 2024-09-15 06:34:55.101966+00:00, Next reset: 2024-10-15 06:34:55.101966+00:00, Current time: 2024-10-01 14:44:23.323774+00:00, Should reset: False
INFO 2024-10-01 17:44:23,326 models 570 138242068317888 Quota reset not needed for 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 17:44:23,326 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 17:44:23,326 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:44:23,326 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:44:23,327 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:23,328 socket_server 570 138242068317888 Saved call record for company Smasco: 7195 -> 0563699992 at 2024-10-01 14:42:22+03:00
INFO 2024-10-01 17:44:23,738 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57675) on port 8000
INFO 2024-10-01 17:44:41,723 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:44:36,0505616167,1091,,,2024/10/01 14:44:41,Failed,,,Ext.1091,0505616167,0505616167,,,Extension,LineSet,,Nasser Alatawi,0505616167,
INFO 2024-10-01 17:44:41,723 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:44:36', '0505616167', '1091', '', '', '2024/10/01 14:44:41', 'Failed', '', '', 'Ext.1091', '0505616167', '0505616167', '', '', 'Extension', 'LineSet', '', 'Nasser Alatawi', '0505616167', '']
INFO 2024-10-01 17:44:41,742 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:41,742 models 570 138242068317888 Initial state: caller=1091, callee=0505616167, duration=None, total_cost=0.0
INFO 2024-10-01 17:44:41,742 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:44:41,743 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0505616167
INFO 2024-10-01 17:44:41,743 utils 570 138242068317888 Original number: 0505616167
INFO 2024-10-01 17:44:41,743 utils 570 138242068317888 Cleaned number: 0505616167
INFO 2024-10-01 17:44:41,743 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:41,743 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:41,743 models 570 138242068317888 Categorizing call for number: 0505616167
INFO 2024-10-01 17:44:41,747 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:41,750 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:41,750 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:41,750 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:41,750 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:41,751 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:41,751 models 570 138242068317888 Match found: 0505616167 matches 05
INFO 2024-10-01 17:44:41,751 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:41,751 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:41,751 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:44:41,751 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:44:41,752 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:41,753 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:41,755 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:41,756 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:44:41,759 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:44:41,760 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:44:41,770 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:44:41.763171+00:00, Should reset: False
INFO 2024-10-01 17:44:41,771 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:44:41,771 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:44:41,771 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:44:41,771 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:44:41,773 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:41,773 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:41,773 models 570 138242068317888 Initial state: caller=1091, callee=0505616167, duration=None, total_cost=0.00
INFO 2024-10-01 17:44:41,775 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:44:41,775 models 570 138242068317888 Before determining country, Caller: 1091, Callee: 0505616167
INFO 2024-10-01 17:44:41,776 utils 570 138242068317888 Original number: 0505616167
INFO 2024-10-01 17:44:41,776 utils 570 138242068317888 Cleaned number: 0505616167
INFO 2024-10-01 17:44:41,776 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:44:41,776 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:41,776 models 570 138242068317888 Categorizing call for number: 0505616167
INFO 2024-10-01 17:44:41,778 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:41,779 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:41,779 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:44:41,780 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:44:41,780 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:44:41,780 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:44:41,780 models 570 138242068317888 Match found: 0505616167 matches 05
INFO 2024-10-01 17:44:41,780 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:44:41,781 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:41,781 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:44:41,781 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:44:41,781 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:41,781 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:41,783 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:41,783 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:44:41,785 models 570 138242068317888 Found extension: 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:44:41,787 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:44:41,789 models 570 138242068317888 Quota for 1091 - Nasser Alatawi (Smasco): Last reset: 2024-09-15 06:34:09.499165+00:00, Next reset: 2024-10-15 06:34:09.499165+00:00, Current time: 2024-10-01 14:44:41.788254+00:00, Should reset: False
INFO 2024-10-01 17:44:41,790 models 570 138242068317888 Quota reset not needed for 1091 - Nasser Alatawi (Smasco)
INFO 2024-10-01 17:44:41,790 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:44:41,790 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:44:41,790 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:44:41,791 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:41,792 socket_server 570 138242068317888 Saved call record for company Smasco: 1091 -> 0505616167 at 2024-10-01 14:44:36+03:00
INFO 2024-10-01 17:44:42,208 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57679) on port 8000
INFO 2024-10-01 17:44:53,763 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:44:46,8000,10001,00:00:06,2024/10/01 14:44:46,2024/10/01 14:44:53,TerminatedBySrc,,,0505616167,Ext.8000,8000,,,Line,Ivr,,0505616167:Main Number,WelcomeMessage,
INFO 2024-10-01 17:44:53,764 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:44:46', '8000', '10001', '00:00:06', '2024/10/01 14:44:46', '2024/10/01 14:44:53', 'TerminatedBySrc', '', '', '0505616167', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0505616167:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:44:53,784 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:53,784 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.0
INFO 2024-10-01 17:44:53,785 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:44:53,785 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:44:53,786 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:44:53,786 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:44:53,786 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:44:53,786 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:53,786 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:44:53,790 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:53,794 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:53,794 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:44:53,794 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:44:53,794 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:53,794 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 17:44:53,795 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:44:53,795 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:44:53,795 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:44:53,795 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:53,795 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:53,798 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:53,798 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:44:53,801 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:44:53,802 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:53,803 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:44:53,803 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.00
INFO 2024-10-01 17:44:53,806 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:44:53,806 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:44:53,806 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:44:53,806 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:44:53,806 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:44:53,807 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:44:53,807 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:44:53,809 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:44:53,810 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:44:53,810 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:44:53,811 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:44:53,812 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:44:53,812 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:44:53,814 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:44:53,814 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:44:53,816 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:44:53,817 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:44:53,818 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:44:46+03:00
INFO 2024-10-01 17:44:54,233 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57683) on port 8000
INFO 2024-10-01 17:45:19,848 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:41:56,0567836021,1046,00:03:15,2024/10/01 14:42:03,2024/10/01 14:45:18,TerminatedByDst,,,Ext.1046,0567836021,10001,,,Extension,Line,,Nadir Ali,0567836021,
INFO 2024-10-01 17:45:19,849 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:41:56', '0567836021', '1046', '00:03:15', '2024/10/01 14:42:03', '2024/10/01 14:45:18', 'TerminatedByDst', '', '', 'Ext.1046', '0567836021', '10001', '', '', 'Extension', 'Line', '', 'Nadir Ali', '0567836021', '']
INFO 2024-10-01 17:45:19,866 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:45:19,866 models 570 138242068317888 Initial state: caller=1046, callee=0567836021, duration=195, total_cost=0.0
INFO 2024-10-01 17:45:19,866 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:45:19,866 models 570 138242068317888 Before determining country, Caller: 1046, Callee: 0567836021
INFO 2024-10-01 17:45:19,867 utils 570 138242068317888 Original number: 0567836021
INFO 2024-10-01 17:45:19,867 utils 570 138242068317888 Cleaned number: 0567836021
INFO 2024-10-01 17:45:19,867 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:45:19,868 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:45:19,868 models 570 138242068317888 Categorizing call for number: 0567836021
INFO 2024-10-01 17:45:19,870 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:45:19,872 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:45:19,873 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:45:19,873 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:45:19,873 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:45:19,873 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:45:19,874 models 570 138242068317888 Match found: 0567836021 matches 05
INFO 2024-10-01 17:45:19,874 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:45:19,874 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:45:19,874 models 570 138242068317888 Calculating total cost for call: duration=195 seconds
INFO 2024-10-01 17:45:19,875 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:45:19,875 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:45:19,875 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:45:19,875 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 17:45:19,876 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:45:19,878 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:45:19,878 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:45:19,882 models 570 138242068317888 Found extension: 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:45:19,884 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 12.00
INFO 2024-10-01 17:45:19,889 models 570 138242068317888 Quota for 1046 - Nadir Ali (Smasco): Last reset: 2024-09-15 06:34:09.167832+00:00, Next reset: 2024-10-15 06:34:09.167832+00:00, Current time: 2024-10-01 14:45:19.886464+00:00, Should reset: False
INFO 2024-10-01 17:45:19,889 models 570 138242068317888 Quota reset not needed for 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:45:19,889 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 12.00
INFO 2024-10-01 17:45:19,889 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 17:45:19,889 models 570 138242068317888 Attempting to deduct 1.60 from balance 88.00
INFO 2024-10-01 17:45:19,891 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 86.40
INFO 2024-10-01 17:45:19,892 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 86.40
INFO 2024-10-01 17:45:19,893 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:45:19,894 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:45:19,894 models 570 138242068317888 Initial state: caller=1046, callee=0567836021, duration=195, total_cost=1.60
INFO 2024-10-01 17:45:19,897 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 17:45:19,897 models 570 138242068317888 Before determining country, Caller: 1046, Callee: 0567836021
INFO 2024-10-01 17:45:19,897 utils 570 138242068317888 Original number: 0567836021
INFO 2024-10-01 17:45:19,897 utils 570 138242068317888 Cleaned number: 0567836021
INFO 2024-10-01 17:45:19,897 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:45:19,898 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:45:19,898 models 570 138242068317888 Categorizing call for number: 0567836021
INFO 2024-10-01 17:45:19,900 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:45:19,901 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:45:19,902 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:45:19,902 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:45:19,902 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:45:19,902 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:45:19,902 models 570 138242068317888 Match found: 0567836021 matches 05
INFO 2024-10-01 17:45:19,903 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:45:19,903 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:45:19,903 models 570 138242068317888 Calculating total cost for call: duration=195 seconds
INFO 2024-10-01 17:45:19,903 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:45:19,903 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:45:19,904 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:45:19,904 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 17:45:19,904 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:45:19,906 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:45:19,906 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 17:45:19,909 models 570 138242068317888 Found extension: 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:45:19,910 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 13.60
INFO 2024-10-01 17:45:19,914 models 570 138242068317888 Quota for 1046 - Nadir Ali (Smasco): Last reset: 2024-09-15 06:34:09.167832+00:00, Next reset: 2024-10-15 06:34:09.167832+00:00, Current time: 2024-10-01 14:45:19.912306+00:00, Should reset: False
INFO 2024-10-01 17:45:19,914 models 570 138242068317888 Quota reset not needed for 1046 - Nadir Ali (Smasco)
INFO 2024-10-01 17:45:19,914 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 13.60
INFO 2024-10-01 17:45:19,914 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:45:19,915 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:45:19,916 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:45:19,916 socket_server 570 138242068317888 Saved call record for company Smasco: 1046 -> 0567836021 at 2024-10-01 14:41:56+03:00
INFO 2024-10-01 17:45:20,336 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57689) on port 8000
INFO 2024-10-01 17:45:20,461 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:44:54,7446,1095,00:00:05,2024/10/01 14:45:14,2024/10/01 14:45:19,TerminatedBySrc,,,Ext.1095,Ext.6666,7446,,,Extension,VMail,,Raha Madina Al Aridh,,
INFO 2024-10-01 17:45:20,462 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:44:54', '7446', '1095', '00:00:05', '2024/10/01 14:45:14', '2024/10/01 14:45:19', 'TerminatedBySrc', '', '', 'Ext.1095', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Raha Madina Al Aridh', '', '']
INFO 2024-10-01 17:45:20,483 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:45:20,484 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=5, total_cost=0.0
INFO 2024-10-01 17:45:20,484 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:45:20,484 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 17:45:20,484 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:45:20,485 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:45:20,485 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:45:20,485 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:45:20,485 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:45:20,489 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:45:20,492 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:45:20,493 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:45:20,494 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:45:20,494 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:45:20,494 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:45:20,497 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:45:20,497 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:45:20,502 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 17:45:20,504 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:45:20,508 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 14:45:20.506596+00:00, Should reset: False
INFO 2024-10-01 17:45:20,509 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 17:45:20,509 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:45:20,509 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:45:20,509 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:45:20,512 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:45:20,512 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:45:20,513 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=5, total_cost=0.00
INFO 2024-10-01 17:45:20,516 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:45:20,517 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 17:45:20,517 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:45:20,517 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:45:20,517 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:45:20,517 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:45:20,517 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:45:20,519 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:45:20,521 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:45:20,521 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:45:20,521 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:45:20,522 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:45:20,522 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 17:45:20,522 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:45:20,522 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:45:20,522 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:45:20,523 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:45:20,523 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:45:20,525 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:45:20,525 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:45:20,527 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 17:45:20,529 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:45:20,533 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 14:45:20.531079+00:00, Should reset: False
INFO 2024-10-01 17:45:20,533 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 17:45:20,533 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:45:20,533 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:45:20,534 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:45:20,535 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:45:20,535 socket_server 570 138242068317888 Saved call record for company Smasco: 1095 -> 7446 at 2024-10-01 14:44:54+03:00
INFO 2024-10-01 17:45:20,950 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57691) on port 8000
INFO 2024-10-01 17:47:14,249 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:47:13,8000,10001,00:00:00,2024/10/01 14:47:13,2024/10/01 14:47:13,TerminatedBySrc,,,563699992,Ext.8000,8000,,,Line,Ivr,,563699992:Main Number,WelcomeMessage,
INFO 2024-10-01 17:47:14,250 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:47:13', '8000', '10001', '00:00:00', '2024/10/01 14:47:13', '2024/10/01 14:47:13', 'TerminatedBySrc', '', '', '563699992', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '563699992:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:47:14,270 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:14,270 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=0, total_cost=0.0
INFO 2024-10-01 17:47:14,270 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:47:14,271 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:47:14,271 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:47:14,271 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:47:14,271 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:47:14,271 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:14,272 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:47:14,274 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:14,277 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:14,277 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:47:14,277 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:47:14,278 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:14,278 models 570 138242068317888 Calculating total cost for call: duration=0 seconds
WARNING 2024-10-01 17:47:14,278 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:47:14,279 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:47:14,279 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:14,281 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:14,282 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:47:14,285 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:47:14,287 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:14,287 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:14,287 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=0, total_cost=0.00
INFO 2024-10-01 17:47:14,290 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:47:14,291 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:47:14,291 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:47:14,291 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:47:14,292 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:47:14,292 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:14,292 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:47:14,295 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:14,300 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:14,300 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:47:14,300 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:47:14,300 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:14,302 models 570 138242068317888 Calculating total cost for call: duration=0 seconds
WARNING 2024-10-01 17:47:14,302 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:47:14,302 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:47:14,302 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:14,307 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:14,308 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:47:14,309 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:47:14,313 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:14,314 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:47:13+03:00
INFO 2024-10-01 17:47:14,732 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57711) on port 8000
INFO 2024-10-01 17:47:41,632 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:47:13,0555749966,7846,,,2024/10/01 14:47:40,Failed,,,Ext.7846,0555749966,0555749966,,,Extension,LineSet,,Ahmed asiri,0555749966,
INFO 2024-10-01 17:47:41,633 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:47:13', '0555749966', '7846', '', '', '2024/10/01 14:47:40', 'Failed', '', '', 'Ext.7846', '0555749966', '0555749966', '', '', 'Extension', 'LineSet', '', 'Ahmed asiri', '0555749966', '']
INFO 2024-10-01 17:47:41,648 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:41,649 models 570 138242068317888 Initial state: caller=7846, callee=0555749966, duration=None, total_cost=0.0
INFO 2024-10-01 17:47:41,649 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:47:41,649 models 570 138242068317888 Before determining country, Caller: 7846, Callee: 0555749966
INFO 2024-10-01 17:47:41,649 utils 570 138242068317888 Original number: 0555749966
INFO 2024-10-01 17:47:41,649 utils 570 138242068317888 Cleaned number: 0555749966
INFO 2024-10-01 17:47:41,650 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:47:41,650 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:41,650 models 570 138242068317888 Categorizing call for number: 0555749966
INFO 2024-10-01 17:47:41,653 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:41,655 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:41,655 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:47:41,655 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:47:41,656 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:47:41,656 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:47:41,656 models 570 138242068317888 Match found: 0555749966 matches 05
INFO 2024-10-01 17:47:41,656 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:47:41,656 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:41,657 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:47:41,657 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:47:41,657 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:47:41,657 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:41,659 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:41,660 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:47:41,663 models 570 138242068317888 Found extension: 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:47:41,665 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:47:41,668 models 570 138242068317888 Quota for 7846 - Ahmed asiri (Smasco): Last reset: 2024-09-15 06:35:25.500389+00:00, Next reset: 2024-10-15 06:35:25.500389+00:00, Current time: 2024-10-01 14:47:41.666598+00:00, Should reset: False
INFO 2024-10-01 17:47:41,668 models 570 138242068317888 Quota reset not needed for 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:47:41,669 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:47:41,669 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:47:41,669 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:47:41,671 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:41,671 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:41,671 models 570 138242068317888 Initial state: caller=7846, callee=0555749966, duration=None, total_cost=0.00
INFO 2024-10-01 17:47:41,674 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:47:41,674 models 570 138242068317888 Before determining country, Caller: 7846, Callee: 0555749966
INFO 2024-10-01 17:47:41,674 utils 570 138242068317888 Original number: 0555749966
INFO 2024-10-01 17:47:41,674 utils 570 138242068317888 Cleaned number: 0555749966
INFO 2024-10-01 17:47:41,675 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:47:41,675 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:41,675 models 570 138242068317888 Categorizing call for number: 0555749966
INFO 2024-10-01 17:47:41,678 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:41,680 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:41,681 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:47:41,681 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:47:41,681 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:47:41,681 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:47:41,682 models 570 138242068317888 Match found: 0555749966 matches 05
INFO 2024-10-01 17:47:41,682 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:47:41,682 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:41,683 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:47:41,683 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:47:41,683 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:47:41,683 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:41,685 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:41,686 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:47:41,689 models 570 138242068317888 Found extension: 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:47:41,690 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:47:41,693 models 570 138242068317888 Quota for 7846 - Ahmed asiri (Smasco): Last reset: 2024-09-15 06:35:25.500389+00:00, Next reset: 2024-10-15 06:35:25.500389+00:00, Current time: 2024-10-01 14:47:41.691744+00:00, Should reset: False
INFO 2024-10-01 17:47:41,694 models 570 138242068317888 Quota reset not needed for 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:47:41,694 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:47:41,694 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:47:41,694 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:47:41,696 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:41,696 socket_server 570 138242068317888 Saved call record for company Smasco: 7846 -> 0555749966 at 2024-10-01 14:47:13+03:00
INFO 2024-10-01 17:47:42,098 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57712) on port 8000
INFO 2024-10-01 17:47:50,418 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:44:22,0503475552,1134,00:03:00,2024/10/01 14:44:49,2024/10/01 14:47:49,TerminatedBySrc,,,Ext.1134,0503475552,10001,,,Extension,Line,,Afrah Almantshri,0503475552,
INFO 2024-10-01 17:47:50,418 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:44:22', '0503475552', '1134', '00:03:00', '2024/10/01 14:44:49', '2024/10/01 14:47:49', 'TerminatedBySrc', '', '', 'Ext.1134', '0503475552', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0503475552', '']
INFO 2024-10-01 17:47:50,437 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:50,438 models 570 138242068317888 Initial state: caller=1134, callee=0503475552, duration=180, total_cost=0.0
INFO 2024-10-01 17:47:50,438 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:47:50,438 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0503475552
INFO 2024-10-01 17:47:50,438 utils 570 138242068317888 Original number: 0503475552
INFO 2024-10-01 17:47:50,439 utils 570 138242068317888 Cleaned number: 0503475552
INFO 2024-10-01 17:47:50,439 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:47:50,439 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:50,439 models 570 138242068317888 Categorizing call for number: 0503475552
INFO 2024-10-01 17:47:50,442 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:50,444 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:50,445 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:47:50,445 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:47:50,445 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:47:50,446 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:47:50,446 models 570 138242068317888 Match found: 0503475552 matches 05
INFO 2024-10-01 17:47:50,446 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:47:50,446 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:50,446 models 570 138242068317888 Calculating total cost for call: duration=180 seconds
INFO 2024-10-01 17:47:50,447 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:47:50,447 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:47:50,447 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:47:50,447 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:47:50,447 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:50,449 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:50,450 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:47:50,453 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:47:50,454 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:50,455 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:47:50,455 models 570 138242068317888 Initial state: caller=1134, callee=0503475552, duration=180, total_cost=1.20
INFO 2024-10-01 17:47:50,458 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:47:50,458 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0503475552
INFO 2024-10-01 17:47:50,458 utils 570 138242068317888 Original number: 0503475552
INFO 2024-10-01 17:47:50,458 utils 570 138242068317888 Cleaned number: 0503475552
INFO 2024-10-01 17:47:50,458 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:47:50,459 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:47:50,459 models 570 138242068317888 Categorizing call for number: 0503475552
INFO 2024-10-01 17:47:50,461 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:47:50,462 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:47:50,463 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:47:50,463 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:47:50,463 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:47:50,464 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:47:50,464 models 570 138242068317888 Match found: 0503475552 matches 05
INFO 2024-10-01 17:47:50,465 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:47:50,465 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:47:50,465 models 570 138242068317888 Calculating total cost for call: duration=180 seconds
INFO 2024-10-01 17:47:50,465 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:47:50,466 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:47:50,466 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:47:50,466 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:47:50,466 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:47:50,468 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:47:50,469 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
WARNING 2024-10-01 17:47:50,470 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:47:50,472 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:47:50,472 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0503475552 at 2024-10-01 14:44:22+03:00
INFO 2024-10-01 17:47:50,872 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57713) on port 8000
INFO 2024-10-01 17:49:12,572 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:48:49,8000,10001,00:00:21,2024/10/01 14:48:49,2024/10/01 14:49:11,TerminatedBySrc,,,0509906257,Ext.8000,8000,,,Line,Ivr,,0509906257:Main Number,WelcomeMessage,
INFO 2024-10-01 17:49:12,574 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:48:49', '8000', '10001', '00:00:21', '2024/10/01 14:48:49', '2024/10/01 14:49:11', 'TerminatedBySrc', '', '', '0509906257', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0509906257:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:49:12,596 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:49:12,597 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=21, total_cost=0.0
INFO 2024-10-01 17:49:12,598 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:49:12,598 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:49:12,598 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:49:12,599 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:49:12,599 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:49:12,599 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:49:12,600 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:49:12,604 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:49:12,607 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:49:12,608 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:49:12,608 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:49:12,608 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:49:12,608 models 570 138242068317888 Calculating total cost for call: duration=21 seconds
INFO 2024-10-01 17:49:12,609 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:49:12,610 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:49:12,610 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:49:12,611 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:49:12,612 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:49:12,615 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:49:12,616 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:49:12,625 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:49:12,630 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:49:12,630 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:49:12,631 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=21, total_cost=0.00
INFO 2024-10-01 17:49:12,635 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:49:12,636 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:49:12,637 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:49:12,637 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:49:12,637 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:49:12,637 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:49:12,637 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:49:12,640 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:49:12,642 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Calculating total cost for call: duration=21 seconds
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:49:12,643 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:49:12,644 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:49:12,645 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:49:12,645 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:49:12,648 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:49:12,649 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:49:12,651 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:49:12,653 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:49:12,653 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:48:49+03:00
INFO 2024-10-01 17:49:13,067 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57725) on port 8000
INFO 2024-10-01 17:49:41,347 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:46:54,0537737728,1159,00:02:41,2024/10/01 14:46:59,2024/10/01 14:49:40,TerminatedBySrc,,,Ext.1159,0537737728,10001,,,Extension,Line,,Saad Almasood,0537737728,
INFO 2024-10-01 17:49:41,348 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:46:54', '0537737728', '1159', '00:02:41', '2024/10/01 14:46:59', '2024/10/01 14:49:40', 'TerminatedBySrc', '', '', 'Ext.1159', '0537737728', '10001', '', '', 'Extension', 'Line', '', 'Saad Almasood', '0537737728', '']
INFO 2024-10-01 17:49:41,367 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:49:41,367 models 570 138242068317888 Initial state: caller=1159, callee=0537737728, duration=161, total_cost=0.0
INFO 2024-10-01 17:49:41,368 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:49:41,368 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0537737728
INFO 2024-10-01 17:49:41,368 utils 570 138242068317888 Original number: 0537737728
INFO 2024-10-01 17:49:41,368 utils 570 138242068317888 Cleaned number: 0537737728
INFO 2024-10-01 17:49:41,368 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:49:41,368 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:49:41,370 models 570 138242068317888 Categorizing call for number: 0537737728
INFO 2024-10-01 17:49:41,373 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:49:41,376 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:49:41,376 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:49:41,377 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:49:41,377 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:49:41,377 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:49:41,377 models 570 138242068317888 Match found: 0537737728 matches 05
INFO 2024-10-01 17:49:41,378 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:49:41,379 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:49:41,379 models 570 138242068317888 Calculating total cost for call: duration=161 seconds
INFO 2024-10-01 17:49:41,379 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:49:41,379 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:49:41,380 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:49:41,381 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:49:41,381 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:49:41,384 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:49:41,385 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:49:41,388 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:49:41,390 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:49:41,390 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:49:41,390 models 570 138242068317888 Initial state: caller=1159, callee=0537737728, duration=161, total_cost=1.20
INFO 2024-10-01 17:49:41,394 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:49:41,394 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0537737728
INFO 2024-10-01 17:49:41,395 utils 570 138242068317888 Original number: 0537737728
INFO 2024-10-01 17:49:41,395 utils 570 138242068317888 Cleaned number: 0537737728
INFO 2024-10-01 17:49:41,396 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:49:41,396 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:49:41,397 models 570 138242068317888 Categorizing call for number: 0537737728
INFO 2024-10-01 17:49:41,399 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:49:41,401 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:49:41,402 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:49:41,402 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:49:41,402 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Match found: 0537737728 matches 05
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Calculating total cost for call: duration=161 seconds
INFO 2024-10-01 17:49:41,403 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:49:41,404 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:49:41,405 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:49:41,405 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:49:41,406 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:49:41,408 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:49:41,409 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
WARNING 2024-10-01 17:49:41,411 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 17:49:41,412 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:49:41,413 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0537737728 at 2024-10-01 14:46:54+03:00
INFO 2024-10-01 17:49:41,818 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57731) on port 8000
INFO 2024-10-01 17:50:00,528 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:49:15,0530959278,8451,00:00:32,2024/10/01 14:49:26,2024/10/01 14:49:59,TerminatedBySrc,,,Ext.8451,0530959278,10001,,,Extension,Line,,Jamil Agbay,0530959278,
INFO 2024-10-01 17:50:00,529 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:49:15', '0530959278', '8451', '00:00:32', '2024/10/01 14:49:26', '2024/10/01 14:49:59', 'TerminatedBySrc', '', '', 'Ext.8451', '0530959278', '10001', '', '', 'Extension', 'Line', '', 'Jamil Agbay', '0530959278', '']
INFO 2024-10-01 17:50:00,550 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:00,555 models 570 138242068317888 Initial state: caller=8451, callee=0530959278, duration=32, total_cost=0.0
INFO 2024-10-01 17:50:00,556 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:50:00,556 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0530959278
INFO 2024-10-01 17:50:00,557 utils 570 138242068317888 Original number: 0530959278
INFO 2024-10-01 17:50:00,557 utils 570 138242068317888 Cleaned number: 0530959278
INFO 2024-10-01 17:50:00,557 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:00,560 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:00,560 models 570 138242068317888 Categorizing call for number: 0530959278
INFO 2024-10-01 17:50:00,567 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:00,570 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:00,570 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:00,571 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:00,571 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:00,572 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:00,572 models 570 138242068317888 Match found: 0530959278 matches 05
INFO 2024-10-01 17:50:00,573 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:00,573 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:00,574 models 570 138242068317888 Calculating total cost for call: duration=32 seconds
INFO 2024-10-01 17:50:00,574 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:50:00,574 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:00,574 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:50:00,575 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:50:00,575 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:00,578 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:00,579 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:00,583 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:50:00,586 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:00,590 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 14:50:00.588226+00:00, Should reset: False
INFO 2024-10-01 17:50:00,591 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:50:00,591 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:00,592 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 17:50:00,592 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 17:50:00,592 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 17:50:00,593 models 570 138242068317888 Warning: Quota exceeded for extension 8451
INFO 2024-10-01 17:50:00,594 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:00,595 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:00,596 models 570 138242068317888 Initial state: caller=8451, callee=0530959278, duration=32, total_cost=0.40
INFO 2024-10-01 17:50:00,599 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:50:00,599 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0530959278
INFO 2024-10-01 17:50:00,600 utils 570 138242068317888 Original number: 0530959278
INFO 2024-10-01 17:50:00,600 utils 570 138242068317888 Cleaned number: 0530959278
INFO 2024-10-01 17:50:00,600 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:00,600 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:00,600 models 570 138242068317888 Categorizing call for number: 0530959278
INFO 2024-10-01 17:50:00,603 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:00,606 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:00,607 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:00,607 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:00,607 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:00,607 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:00,608 models 570 138242068317888 Match found: 0530959278 matches 05
INFO 2024-10-01 17:50:00,609 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:00,609 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:00,609 models 570 138242068317888 Calculating total cost for call: duration=32 seconds
INFO 2024-10-01 17:50:00,609 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:50:00,610 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:00,610 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:50:00,610 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:50:00,610 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:00,613 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:00,614 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 17:50:00,617 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:50:00,619 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:00,623 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 14:50:00.621395+00:00, Should reset: False
INFO 2024-10-01 17:50:00,624 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 17:50:00,624 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:00,624 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:00,625 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:00,626 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:00,627 socket_server 570 138242068317888 Saved call record for company Smasco: 8451 -> 0530959278 at 2024-10-01 14:49:15+03:00
INFO 2024-10-01 17:50:01,032 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57733) on port 8000
INFO 2024-10-01 17:50:25,468 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:48:18,0598714700,7790,00:01:18,2024/10/01 14:49:05,2024/10/01 14:50:24,TerminatedBySrc,,,Ext.7790,0598714700,10001,,,Extension,Line,,Maram Alharbi,0598714700,
INFO 2024-10-01 17:50:25,468 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:48:18', '0598714700', '7790', '00:01:18', '2024/10/01 14:49:05', '2024/10/01 14:50:24', 'TerminatedBySrc', '', '', 'Ext.7790', '0598714700', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0598714700', '']
INFO 2024-10-01 17:50:25,489 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:25,489 models 570 138242068317888 Initial state: caller=7790, callee=0598714700, duration=78, total_cost=0.0
INFO 2024-10-01 17:50:25,489 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:50:25,489 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0598714700
INFO 2024-10-01 17:50:25,489 utils 570 138242068317888 Original number: 0598714700
INFO 2024-10-01 17:50:25,490 utils 570 138242068317888 Cleaned number: 0598714700
INFO 2024-10-01 17:50:25,490 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:25,490 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:25,490 models 570 138242068317888 Categorizing call for number: 0598714700
INFO 2024-10-01 17:50:25,494 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:25,497 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:25,498 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:25,498 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:25,498 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:25,498 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Match found: 0598714700 matches 05
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Calculating total cost for call: duration=78 seconds
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:50:25,499 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:25,501 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:50:25,501 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:50:25,502 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:25,505 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:25,505 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:25,510 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:50:25,512 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:25,517 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:50:25.515440+00:00, Should reset: False
INFO 2024-10-01 17:50:25,518 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:50:25,519 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:25,519 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:50:25,519 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:50:25,519 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:50:25,519 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 17:50:25,521 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:25,521 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:25,522 models 570 138242068317888 Initial state: caller=7790, callee=0598714700, duration=78, total_cost=0.80
INFO 2024-10-01 17:50:25,525 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:50:25,525 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0598714700
INFO 2024-10-01 17:50:25,526 utils 570 138242068317888 Original number: 0598714700
INFO 2024-10-01 17:50:25,526 utils 570 138242068317888 Cleaned number: 0598714700
INFO 2024-10-01 17:50:25,527 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:25,527 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:25,527 models 570 138242068317888 Categorizing call for number: 0598714700
INFO 2024-10-01 17:50:25,530 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:25,531 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:25,532 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:25,532 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:25,533 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:25,533 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Match found: 0598714700 matches 05
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Calculating total cost for call: duration=78 seconds
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:50:25,534 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:25,535 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:50:25,536 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:50:25,536 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:25,539 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:25,539 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:50:25,542 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:50:25,544 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:25,548 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:50:25.545845+00:00, Should reset: False
INFO 2024-10-01 17:50:25,548 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:50:25,549 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:25,549 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:25,549 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:25,550 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:25,550 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0598714700 at 2024-10-01 14:48:18+03:00
INFO 2024-10-01 17:50:25,963 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57741) on port 8000
INFO 2024-10-01 17:50:31,303 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:33:33,0593798764,7327,00:16:38,2024/10/01 14:33:52,2024/10/01 14:50:30,TerminatedBySrc,,,Ext.7327,0593798764,10001,,,Extension,Line,,Muhammad Hamza Haider,0593798764,
INFO 2024-10-01 17:50:31,303 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:33:33', '0593798764', '7327', '00:16:38', '2024/10/01 14:33:52', '2024/10/01 14:50:30', 'TerminatedBySrc', '', '', 'Ext.7327', '0593798764', '10001', '', '', 'Extension', 'Line', '', 'Muhammad Hamza Haider', '0593798764', '']
INFO 2024-10-01 17:50:31,318 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:31,318 models 570 138242068317888 Initial state: caller=7327, callee=0593798764, duration=998, total_cost=0.0
INFO 2024-10-01 17:50:31,319 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:50:31,319 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0593798764
INFO 2024-10-01 17:50:31,319 utils 570 138242068317888 Original number: 0593798764
INFO 2024-10-01 17:50:31,320 utils 570 138242068317888 Cleaned number: 0593798764
INFO 2024-10-01 17:50:31,320 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:31,320 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:31,320 models 570 138242068317888 Categorizing call for number: 0593798764
INFO 2024-10-01 17:50:31,323 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:31,325 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:31,325 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:31,325 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Match found: 0593798764 matches 05
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:31,326 models 570 138242068317888 Calculating total cost for call: duration=998 seconds
INFO 2024-10-01 17:50:31,327 models 570 138242068317888 Duration in minutes: 17
INFO 2024-10-01 17:50:31,327 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:31,327 models 570 138242068317888 Calculated total cost: 6.80
INFO 2024-10-01 17:50:31,327 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=6.80
INFO 2024-10-01 17:50:31,327 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:31,329 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:31,330 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:31,334 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:31,335 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:31,339 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:50:31.337618+00:00, Should reset: False
INFO 2024-10-01 17:50:31,339 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:31,340 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:31,340 models 570 138242068317888 Amount to deduct: 6.80
INFO 2024-10-01 17:50:31,340 models 570 138242068317888 Attempting to deduct 6.80 from balance 0.00
WARNING 2024-10-01 17:50:31,340 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 6.80
WARNING 2024-10-01 17:50:31,340 models 570 138242068317888 Warning: Quota exceeded for extension 7327
INFO 2024-10-01 17:50:31,342 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:31,342 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:31,342 models 570 138242068317888 Initial state: caller=7327, callee=0593798764, duration=998, total_cost=6.80
INFO 2024-10-01 17:50:31,345 models 570 138242068317888 This is an existing CallRecord. Old total cost: 6.80
INFO 2024-10-01 17:50:31,345 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0593798764
INFO 2024-10-01 17:50:31,345 utils 570 138242068317888 Original number: 0593798764
INFO 2024-10-01 17:50:31,345 utils 570 138242068317888 Cleaned number: 0593798764
INFO 2024-10-01 17:50:31,346 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:31,346 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:31,346 models 570 138242068317888 Categorizing call for number: 0593798764
INFO 2024-10-01 17:50:31,348 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:31,349 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:31,350 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:31,350 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:31,350 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:31,350 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:31,351 models 570 138242068317888 Match found: 0593798764 matches 05
INFO 2024-10-01 17:50:31,351 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:31,351 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:31,351 models 570 138242068317888 Calculating total cost for call: duration=998 seconds
INFO 2024-10-01 17:50:31,351 models 570 138242068317888 Duration in minutes: 17
INFO 2024-10-01 17:50:31,352 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:31,352 models 570 138242068317888 Calculated total cost: 6.80
INFO 2024-10-01 17:50:31,352 models 570 138242068317888 After cost calculation: old_total_cost=6.80, new_total_cost=6.80
INFO 2024-10-01 17:50:31,352 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:31,354 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:31,354 models 570 138242068317888 Starting update_user_quota with old_total_cost=6.80
INFO 2024-10-01 17:50:31,357 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:31,358 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:31,361 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:50:31.359977+00:00, Should reset: False
INFO 2024-10-01 17:50:31,362 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:31,362 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:31,362 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:31,362 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:31,363 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:31,363 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 0593798764 at 2024-10-01 14:33:33+03:00
INFO 2024-10-01 17:50:31,773 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57742) on port 8000
INFO 2024-10-01 17:50:41,743 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:48:30,0538870420,8426,00:02:02,2024/10/01 14:48:38,2024/10/01 14:50:40,TerminatedBySrc,ReplacedSrc,,Ext.8426,0538870420,10001,Ext.7000,7000,Extension,Line,ConfPlace,Rehan Khan Mohammed,0538870420,
INFO 2024-10-01 17:50:41,744 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:48:30', '0538870420', '8426', '00:02:02', '2024/10/01 14:48:38', '2024/10/01 14:50:40', 'TerminatedBySrc', 'ReplacedSrc', '', 'Ext.8426', '0538870420', '10001', 'Ext.7000', '7000', 'Extension', 'Line', 'ConfPlace', 'Rehan Khan Mohammed', '0538870420', '']
INFO 2024-10-01 17:50:41,760 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:41,760 models 570 138242068317888 Initial state: caller=8426, callee=0538870420, duration=122, total_cost=0.0
INFO 2024-10-01 17:50:41,761 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:50:41,761 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0538870420
INFO 2024-10-01 17:50:41,761 utils 570 138242068317888 Original number: 0538870420
INFO 2024-10-01 17:50:41,762 utils 570 138242068317888 Cleaned number: 0538870420
INFO 2024-10-01 17:50:41,762 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:41,762 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:41,762 models 570 138242068317888 Categorizing call for number: 0538870420
INFO 2024-10-01 17:50:41,766 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:41,768 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:41,769 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:41,769 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:41,769 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:41,769 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:41,770 models 570 138242068317888 Match found: 0538870420 matches 05
INFO 2024-10-01 17:50:41,770 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:41,770 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:41,770 models 570 138242068317888 Calculating total cost for call: duration=122 seconds
INFO 2024-10-01 17:50:41,771 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:50:41,771 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:41,771 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:50:41,771 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:50:41,772 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:41,774 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:41,774 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:41,779 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:50:41,781 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:41,785 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:50:41.783187+00:00, Should reset: False
INFO 2024-10-01 17:50:41,786 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:50:41,786 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:41,786 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 17:50:41,787 models 570 138242068317888 Attempting to deduct 1.20 from balance 0.00
WARNING 2024-10-01 17:50:41,787 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.20
WARNING 2024-10-01 17:50:41,787 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 17:50:41,789 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:41,790 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:41,790 models 570 138242068317888 Initial state: caller=8426, callee=0538870420, duration=122, total_cost=1.20
INFO 2024-10-01 17:50:41,793 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:50:41,793 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0538870420
INFO 2024-10-01 17:50:41,794 utils 570 138242068317888 Original number: 0538870420
INFO 2024-10-01 17:50:41,794 utils 570 138242068317888 Cleaned number: 0538870420
INFO 2024-10-01 17:50:41,794 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:50:41,794 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:41,794 models 570 138242068317888 Categorizing call for number: 0538870420
INFO 2024-10-01 17:50:41,796 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:41,798 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:41,798 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:41,799 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:41,799 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:41,799 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:41,799 models 570 138242068317888 Match found: 0538870420 matches 05
INFO 2024-10-01 17:50:41,799 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 Calculating total cost for call: duration=122 seconds
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:50:41,800 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:50:41,801 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:41,802 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:41,803 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 17:50:41,805 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:50:41,806 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:41,809 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:50:41.808080+00:00, Should reset: False
INFO 2024-10-01 17:50:41,810 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:50:41,810 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:41,810 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:41,810 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:41,811 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:41,811 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0538870420 at 2024-10-01 14:48:30+03:00
INFO 2024-10-01 17:50:42,218 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57746) on port 8000
INFO 2024-10-01 17:50:57,368 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:50:56,0593798764554859724,7327,,,2024/10/01 14:50:56,TargetNotFound,,,Ext.7327,,,,,Extension,EndCall,,Muhammad Hamza Haider,0593798764554859724,
INFO 2024-10-01 17:50:57,368 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:50:56', '0593798764554859724', '7327', '', '', '2024/10/01 14:50:56', 'TargetNotFound', '', '', 'Ext.7327', '', '', '', '', 'Extension', 'EndCall', '', 'Muhammad Hamza Haider', '0593798764554859724', '']
INFO 2024-10-01 17:50:57,383 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:57,384 models 570 138242068317888 Initial state: caller=7327, callee=0593798764554859724, duration=None, total_cost=0.0
INFO 2024-10-01 17:50:57,384 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:50:57,384 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0593798764554859724
INFO 2024-10-01 17:50:57,385 utils 570 138242068317888 Original number: 0593798764554859724
INFO 2024-10-01 17:50:57,385 utils 570 138242068317888 Cleaned number: 0593798764554859724
INFO 2024-10-01 17:50:57,385 models 570 138242068317888 Determined country for callee number: Unknown
INFO 2024-10-01 17:50:57,385 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:57,385 models 570 138242068317888 Categorizing call for number: 0593798764554859724
INFO 2024-10-01 17:50:57,388 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:57,395 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:57,395 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:57,395 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Match found: 0593798764554859724 matches 05
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:57,396 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:50:57,396 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:50:57,397 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:50:57,397 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:57,399 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:57,400 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:57,403 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:57,405 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:57,409 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:50:57.407150+00:00, Should reset: False
INFO 2024-10-01 17:50:57,409 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:57,409 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:57,409 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:57,409 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:57,411 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:57,411 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:50:57,411 models 570 138242068317888 Initial state: caller=7327, callee=0593798764554859724, duration=None, total_cost=0.00
INFO 2024-10-01 17:50:57,414 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:50:57,414 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0593798764554859724
INFO 2024-10-01 17:50:57,414 utils 570 138242068317888 Original number: 0593798764554859724
INFO 2024-10-01 17:50:57,414 utils 570 138242068317888 Cleaned number: 0593798764554859724
INFO 2024-10-01 17:50:57,415 models 570 138242068317888 Determined country for callee number: Unknown
INFO 2024-10-01 17:50:57,415 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:50:57,415 models 570 138242068317888 Categorizing call for number: 0593798764554859724
INFO 2024-10-01 17:50:57,417 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:50:57,418 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:50:57,418 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Match found: 0593798764554859724 matches 05
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:50:57,419 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:50:57,420 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:50:57,420 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:50:57,420 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:50:57,420 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:50:57,422 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:50:57,422 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:50:57,425 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:57,426 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:57,429 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:50:57.427841+00:00, Should reset: False
INFO 2024-10-01 17:50:57,430 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:50:57,430 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:50:57,430 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:50:57,430 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:50:57,431 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:50:57,431 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 0593798764554859724 at 2024-10-01 14:50:56+03:00
INFO 2024-10-01 17:50:57,843 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57754) on port 8000
INFO 2024-10-01 17:51:05,293 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:48:19,0505599894,7791,00:02:39,2024/10/01 14:48:24,2024/10/01 14:51:04,TerminatedBySrc,,,Ext.7791,0505599894,10001,,,Extension,Line,,Arwa Almagli,0505599894,
INFO 2024-10-01 17:51:05,293 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:48:19', '0505599894', '7791', '00:02:39', '2024/10/01 14:48:24', '2024/10/01 14:51:04', 'TerminatedBySrc', '', '', 'Ext.7791', '0505599894', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0505599894', '']
INFO 2024-10-01 17:51:05,314 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:51:05,315 models 570 138242068317888 Initial state: caller=7791, callee=0505599894, duration=159, total_cost=0.0
INFO 2024-10-01 17:51:05,315 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:51:05,315 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0505599894
INFO 2024-10-01 17:51:05,315 utils 570 138242068317888 Original number: 0505599894
INFO 2024-10-01 17:51:05,316 utils 570 138242068317888 Cleaned number: 0505599894
INFO 2024-10-01 17:51:05,316 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:51:05,316 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:51:05,316 models 570 138242068317888 Categorizing call for number: 0505599894
INFO 2024-10-01 17:51:05,319 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:51:05,321 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:51:05,322 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:51:05,322 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:51:05,322 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:51:05,322 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:51:05,322 models 570 138242068317888 Match found: 0505599894 matches 05
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Calculating total cost for call: duration=159 seconds
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:51:05,323 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:51:05,324 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 17:51:05,324 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:51:05,326 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:51:05,327 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:51:05,331 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:51:05,333 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:05,337 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:51:05.335159+00:00, Should reset: False
INFO 2024-10-01 17:51:05,337 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:51:05,338 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:05,338 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 17:51:05,338 models 570 138242068317888 Attempting to deduct 1.20 from balance 0.00
WARNING 2024-10-01 17:51:05,338 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.20
WARNING 2024-10-01 17:51:05,338 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 17:51:05,340 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:51:05,341 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:51:05,341 models 570 138242068317888 Initial state: caller=7791, callee=0505599894, duration=159, total_cost=1.20
INFO 2024-10-01 17:51:05,343 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 17:51:05,344 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0505599894
INFO 2024-10-01 17:51:05,344 utils 570 138242068317888 Original number: 0505599894
INFO 2024-10-01 17:51:05,344 utils 570 138242068317888 Cleaned number: 0505599894
INFO 2024-10-01 17:51:05,344 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:51:05,344 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:51:05,345 models 570 138242068317888 Categorizing call for number: 0505599894
INFO 2024-10-01 17:51:05,346 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:51:05,348 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:51:05,348 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Match found: 0505599894 matches 05
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:51:05,349 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 Calculating total cost for call: duration=159 seconds
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 17:51:05,350 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:51:05,353 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:51:05,353 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 17:51:05,359 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:51:05,361 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:05,370 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:51:05.363610+00:00, Should reset: False
INFO 2024-10-01 17:51:05,370 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:51:05,370 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:05,370 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:51:05,371 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:51:05,372 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:51:05,373 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0505599894 at 2024-10-01 14:48:19+03:00
INFO 2024-10-01 17:51:05,770 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57755) on port 8000
INFO 2024-10-01 17:51:43,530 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:46:08,8449,8426,00:05:30,2024/10/01 14:46:12,2024/10/01 14:51:42,TerminatedBySrc,ReplacedSrc,,Ext.8426,Ext.8449,8449,Ext.7000,7000,Extension,Extension,ConfPlace,Rehan Khan Mohammed,Mohammed Aasif,
INFO 2024-10-01 17:51:43,531 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:46:08', '8449', '8426', '00:05:30', '2024/10/01 14:46:12', '2024/10/01 14:51:42', 'TerminatedBySrc', 'ReplacedSrc', '', 'Ext.8426', 'Ext.8449', '8449', 'Ext.7000', '7000', 'Extension', 'Extension', 'ConfPlace', 'Rehan Khan Mohammed', 'Mohammed Aasif', '']
INFO 2024-10-01 17:51:43,547 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:51:43,547 models 570 138242068317888 Initial state: caller=8426, callee=8449, duration=330, total_cost=0.0
INFO 2024-10-01 17:51:43,548 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:51:43,548 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 8449
INFO 2024-10-01 17:51:43,548 utils 570 138242068317888 Original number: 8449
INFO 2024-10-01 17:51:43,548 utils 570 138242068317888 Cleaned number: 8449
INFO 2024-10-01 17:51:43,548 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:51:43,548 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:51:43,549 models 570 138242068317888 Categorizing call for number: 8449
INFO 2024-10-01 17:51:43,551 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:51:43,553 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:51:43,554 models 570 138242068317888 Match found: 8449 matches ^\d{4}$
INFO 2024-10-01 17:51:43,554 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:51:43,554 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:51:43,554 models 570 138242068317888 Calculating total cost for call: duration=330 seconds
INFO 2024-10-01 17:51:43,554 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:51:43,555 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:51:43,555 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:51:43,555 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:51:43,555 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:51:43,558 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:51:43,558 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:51:43,562 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:51:43,563 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:43,567 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:51:43.565695+00:00, Should reset: False
INFO 2024-10-01 17:51:43,567 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:51:43,568 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:43,568 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:51:43,568 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:51:43,570 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:51:43,570 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:51:43,570 models 570 138242068317888 Initial state: caller=8426, callee=8449, duration=330, total_cost=0.00
INFO 2024-10-01 17:51:43,572 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:51:43,573 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 8449
INFO 2024-10-01 17:51:43,573 utils 570 138242068317888 Original number: 8449
INFO 2024-10-01 17:51:43,573 utils 570 138242068317888 Cleaned number: 8449
INFO 2024-10-01 17:51:43,573 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:51:43,573 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:51:43,574 models 570 138242068317888 Categorizing call for number: 8449
INFO 2024-10-01 17:51:43,575 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:51:43,577 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:51:43,577 models 570 138242068317888 Match found: 8449 matches ^\d{4}$
INFO 2024-10-01 17:51:43,577 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:51:43,577 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 Calculating total cost for call: duration=330 seconds
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:51:43,578 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:51:43,580 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:51:43,581 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:51:43,583 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:51:43,584 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:43,587 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:51:43.586156+00:00, Should reset: False
INFO 2024-10-01 17:51:43,588 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:51:43,588 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:51:43,588 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:51:43,588 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:51:43,589 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:51:43,590 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 8449 at 2024-10-01 14:46:08+03:00
INFO 2024-10-01 17:51:43,980 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57763) on port 8000
INFO 2024-10-01 17:52:08,145 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:50:54,0502629904,8426,00:01:04,2024/10/01 14:51:03,2024/10/01 14:52:07,TerminatedBySrc,,,Ext.8426,0502629904,10001,,,Extension,Line,,Rehan Khan Mohammed,0502629904,
INFO 2024-10-01 17:52:08,146 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:50:54', '0502629904', '8426', '00:01:04', '2024/10/01 14:51:03', '2024/10/01 14:52:07', 'TerminatedBySrc', '', '', 'Ext.8426', '0502629904', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0502629904', '']
INFO 2024-10-01 17:52:08,164 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:08,164 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=64, total_cost=0.0
INFO 2024-10-01 17:52:08,164 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:52:08,164 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 17:52:08,165 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 17:52:08,165 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 17:52:08,165 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:08,165 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:08,165 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 17:52:08,168 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:08,170 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:08,170 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:08,171 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 Calculating total cost for call: duration=64 seconds
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:52:08,172 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:08,175 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:08,175 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:52:08,178 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:52:08,180 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:08,183 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:52:08.182036+00:00, Should reset: False
INFO 2024-10-01 17:52:08,184 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:52:08,184 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:08,184 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:52:08,184 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:52:08,184 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:52:08,185 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 17:52:08,186 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:08,187 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:08,187 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=64, total_cost=0.80
INFO 2024-10-01 17:52:08,190 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:52:08,193 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 17:52:08,194 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 17:52:08,194 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 17:52:08,194 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:08,194 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:08,194 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 17:52:08,196 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:08,198 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:08,198 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:08,198 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:08,198 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Calculating total cost for call: duration=64 seconds
INFO 2024-10-01 17:52:08,199 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:52:08,200 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:52:08,200 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:52:08,200 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:52:08,200 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:08,202 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:08,202 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:52:08,205 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:52:08,207 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:08,210 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:52:08.208457+00:00, Should reset: False
INFO 2024-10-01 17:52:08,210 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:52:08,210 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:08,211 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:52:08,211 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:52:08,212 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:08,212 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0502629904 at 2024-10-01 14:50:54+03:00
INFO 2024-10-01 17:52:08,602 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57769) on port 8000
INFO 2024-10-01 17:52:21,887 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:50:34,0535022332,7846,00:01:41,2024/10/01 14:50:39,2024/10/01 14:52:20,TerminatedByDst,,,Ext.7846,0535022332,10001,,,Extension,Line,,Ahmed asiri,0535022332,
INFO 2024-10-01 17:52:21,887 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:50:34', '0535022332', '7846', '00:01:41', '2024/10/01 14:50:39', '2024/10/01 14:52:20', 'TerminatedByDst', '', '', 'Ext.7846', '0535022332', '10001', '', '', 'Extension', 'Line', '', 'Ahmed asiri', '0535022332', '']
INFO 2024-10-01 17:52:21,902 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:21,902 models 570 138242068317888 Initial state: caller=7846, callee=0535022332, duration=101, total_cost=0.0
INFO 2024-10-01 17:52:21,903 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:52:21,903 models 570 138242068317888 Before determining country, Caller: 7846, Callee: 0535022332
INFO 2024-10-01 17:52:21,903 utils 570 138242068317888 Original number: 0535022332
INFO 2024-10-01 17:52:21,903 utils 570 138242068317888 Cleaned number: 0535022332
INFO 2024-10-01 17:52:21,903 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:21,904 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:21,904 models 570 138242068317888 Categorizing call for number: 0535022332
INFO 2024-10-01 17:52:21,906 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:21,909 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:21,909 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:21,912 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:21,912 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:21,912 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:21,912 models 570 138242068317888 Match found: 0535022332 matches 05
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Calculating total cost for call: duration=101 seconds
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:52:21,913 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:52:21,916 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:52:21,916 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:21,920 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:21,920 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:52:21,923 models 570 138242068317888 Found extension: 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:52:21,925 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:52:21,929 models 570 138242068317888 Quota for 7846 - Ahmed asiri (Smasco): Last reset: 2024-09-15 06:35:25.500389+00:00, Next reset: 2024-10-15 06:35:25.500389+00:00, Current time: 2024-10-01 14:52:21.927181+00:00, Should reset: False
INFO 2024-10-01 17:52:21,929 models 570 138242068317888 Quota reset not needed for 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:52:21,930 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 54.80
INFO 2024-10-01 17:52:21,930 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:52:21,930 models 570 138242068317888 Attempting to deduct 0.80 from balance 45.20
INFO 2024-10-01 17:52:21,932 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 44.40
INFO 2024-10-01 17:52:21,933 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 44.40
INFO 2024-10-01 17:52:21,934 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:21,935 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:21,935 models 570 138242068317888 Initial state: caller=7846, callee=0535022332, duration=101, total_cost=0.80
INFO 2024-10-01 17:52:21,938 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:52:21,938 models 570 138242068317888 Before determining country, Caller: 7846, Callee: 0535022332
INFO 2024-10-01 17:52:21,938 utils 570 138242068317888 Original number: 0535022332
INFO 2024-10-01 17:52:21,938 utils 570 138242068317888 Cleaned number: 0535022332
INFO 2024-10-01 17:52:21,939 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:21,939 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:21,939 models 570 138242068317888 Categorizing call for number: 0535022332
INFO 2024-10-01 17:52:21,941 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:21,942 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:21,942 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:21,943 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:21,943 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:21,943 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:21,943 models 570 138242068317888 Match found: 0535022332 matches 05
INFO 2024-10-01 17:52:21,943 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 Calculating total cost for call: duration=101 seconds
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:52:21,944 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:52:21,945 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:21,946 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:21,947 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:52:21,949 models 570 138242068317888 Found extension: 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:52:21,950 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 55.60
INFO 2024-10-01 17:52:21,953 models 570 138242068317888 Quota for 7846 - Ahmed asiri (Smasco): Last reset: 2024-09-15 06:35:25.500389+00:00, Next reset: 2024-10-15 06:35:25.500389+00:00, Current time: 2024-10-01 14:52:21.951855+00:00, Should reset: False
INFO 2024-10-01 17:52:21,953 models 570 138242068317888 Quota reset not needed for 7846 - Ahmed asiri (Smasco)
INFO 2024-10-01 17:52:21,953 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 55.60
INFO 2024-10-01 17:52:21,954 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:52:21,954 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:52:21,955 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:21,955 socket_server 570 138242068317888 Saved call record for company Smasco: 7846 -> 0535022332 at 2024-10-01 14:50:34+03:00
INFO 2024-10-01 17:52:22,357 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57772) on port 8000
INFO 2024-10-01 17:52:34,291 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:50:28,0595822253,7790,,,2024/10/01 14:52:33,Failed,,,Ext.7790,0595822253,0595822253,,,Extension,LineSet,,Maram Alharbi,0595822253,
INFO 2024-10-01 17:52:34,292 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:50:28', '0595822253', '7790', '', '', '2024/10/01 14:52:33', 'Failed', '', '', 'Ext.7790', '0595822253', '0595822253', '', '', 'Extension', 'LineSet', '', 'Maram Alharbi', '0595822253', '']
INFO 2024-10-01 17:52:34,310 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:34,310 models 570 138242068317888 Initial state: caller=7790, callee=0595822253, duration=None, total_cost=0.0
INFO 2024-10-01 17:52:34,310 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:52:34,310 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0595822253
INFO 2024-10-01 17:52:34,311 utils 570 138242068317888 Original number: 0595822253
INFO 2024-10-01 17:52:34,311 utils 570 138242068317888 Cleaned number: 0595822253
INFO 2024-10-01 17:52:34,311 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:34,311 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:34,311 models 570 138242068317888 Categorizing call for number: 0595822253
INFO 2024-10-01 17:52:34,315 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:34,317 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:34,318 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:34,318 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:34,318 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 Match found: 0595822253 matches 05
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:52:34,319 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:52:34,319 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:52:34,320 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:34,323 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:34,323 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:52:34,328 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:52:34,330 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:34,334 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:52:34.332702+00:00, Should reset: False
INFO 2024-10-01 17:52:34,335 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:52:34,335 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:34,335 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:52:34,335 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:52:34,337 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:34,338 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:52:34,338 models 570 138242068317888 Initial state: caller=7790, callee=0595822253, duration=None, total_cost=0.00
INFO 2024-10-01 17:52:34,341 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:52:34,341 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0595822253
INFO 2024-10-01 17:52:34,342 utils 570 138242068317888 Original number: 0595822253
INFO 2024-10-01 17:52:34,342 utils 570 138242068317888 Cleaned number: 0595822253
INFO 2024-10-01 17:52:34,342 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:52:34,343 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:52:34,343 models 570 138242068317888 Categorizing call for number: 0595822253
INFO 2024-10-01 17:52:34,345 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:52:34,347 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:52:34,347 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:52:34,348 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:52:34,348 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:52:34,348 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:52:34,348 models 570 138242068317888 Match found: 0595822253 matches 05
INFO 2024-10-01 17:52:34,349 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:52:34,349 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:52:34,349 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:52:34,350 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:52:34,350 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:52:34,350 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:52:34,353 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:52:34,353 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:52:34,356 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:52:34,357 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:34,361 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 14:52:34.359434+00:00, Should reset: False
INFO 2024-10-01 17:52:34,362 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 17:52:34,362 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:52:34,362 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:52:34,362 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:52:34,364 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:52:34,365 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0595822253 at 2024-10-01 14:50:28+03:00
INFO 2024-10-01 17:52:34,760 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57774) on port 8000
INFO 2024-10-01 17:53:38,960 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:49:09,0531189908,1134,00:03:32,2024/10/01 14:50:05,2024/10/01 14:53:38,TerminatedBySrc,,,Ext.1134,0531189908,10001,,,Extension,Line,,Afrah Almantshri,0531189908,
INFO 2024-10-01 17:53:38,961 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:49:09', '0531189908', '1134', '00:03:32', '2024/10/01 14:50:05', '2024/10/01 14:53:38', 'TerminatedBySrc', '', '', 'Ext.1134', '0531189908', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0531189908', '']
INFO 2024-10-01 17:53:38,983 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:53:38,983 models 570 138242068317888 Initial state: caller=1134, callee=0531189908, duration=212, total_cost=0.0
INFO 2024-10-01 17:53:38,984 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:53:38,984 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0531189908
INFO 2024-10-01 17:53:38,984 utils 570 138242068317888 Original number: 0531189908
INFO 2024-10-01 17:53:38,985 utils 570 138242068317888 Cleaned number: 0531189908
INFO 2024-10-01 17:53:38,985 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:53:38,985 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:53:38,986 models 570 138242068317888 Categorizing call for number: 0531189908
INFO 2024-10-01 17:53:38,988 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:53:38,990 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:53:38,991 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:53:38,991 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:53:38,991 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:53:38,992 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:53:38,992 models 570 138242068317888 Match found: 0531189908 matches 05
INFO 2024-10-01 17:53:38,992 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:53:38,992 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:53:38,992 models 570 138242068317888 Calculating total cost for call: duration=212 seconds
INFO 2024-10-01 17:53:38,993 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:53:38,993 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:53:38,993 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:53:38,993 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 17:53:38,993 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:53:38,995 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:53:38,996 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:53:38,998 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:53:39,000 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:53:39,000 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:53:39,000 models 570 138242068317888 Initial state: caller=1134, callee=0531189908, duration=212, total_cost=1.60
INFO 2024-10-01 17:53:39,003 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 17:53:39,004 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0531189908
INFO 2024-10-01 17:53:39,004 utils 570 138242068317888 Original number: 0531189908
INFO 2024-10-01 17:53:39,004 utils 570 138242068317888 Cleaned number: 0531189908
INFO 2024-10-01 17:53:39,004 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:53:39,005 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:53:39,005 models 570 138242068317888 Categorizing call for number: 0531189908
INFO 2024-10-01 17:53:39,008 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:53:39,010 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:53:39,010 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:53:39,010 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:53:39,011 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:53:39,011 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:53:39,011 models 570 138242068317888 Match found: 0531189908 matches 05
INFO 2024-10-01 17:53:39,011 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:53:39,011 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:53:39,012 models 570 138242068317888 Calculating total cost for call: duration=212 seconds
INFO 2024-10-01 17:53:39,012 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 17:53:39,012 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:53:39,012 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 17:53:39,012 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 17:53:39,013 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:53:39,015 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:53:39,015 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
WARNING 2024-10-01 17:53:39,017 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:53:39,018 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:53:39,019 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0531189908 at 2024-10-01 14:49:09+03:00
INFO 2024-10-01 17:53:39,430 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57789) on port 8000
INFO 2024-10-01 17:53:55,315 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:53:26,8426,7451,00:00:23,2024/10/01 14:53:30,2024/10/01 14:53:54,TerminatedBySrc,,,Ext.7451,Ext.8426,8426,,,Extension,Extension,,Aminah Bdhaifi,Rehan Khan Mohammed,
INFO 2024-10-01 17:53:55,316 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:53:26', '8426', '7451', '00:00:23', '2024/10/01 14:53:30', '2024/10/01 14:53:54', 'TerminatedBySrc', '', '', 'Ext.7451', 'Ext.8426', '8426', '', '', 'Extension', 'Extension', '', 'Aminah Bdhaifi', 'Rehan Khan Mohammed', '']
INFO 2024-10-01 17:53:55,332 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:53:55,332 models 570 138242068317888 Initial state: caller=7451, callee=8426, duration=23, total_cost=0.0
INFO 2024-10-01 17:53:55,333 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:53:55,333 models 570 138242068317888 Before determining country, Caller: 7451, Callee: 8426
INFO 2024-10-01 17:53:55,333 utils 570 138242068317888 Original number: 8426
INFO 2024-10-01 17:53:55,334 utils 570 138242068317888 Cleaned number: 8426
INFO 2024-10-01 17:53:55,334 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:53:55,334 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:53:55,334 models 570 138242068317888 Categorizing call for number: 8426
INFO 2024-10-01 17:53:55,337 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:53:55,340 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:53:55,340 models 570 138242068317888 Match found: 8426 matches ^\d{4}$
INFO 2024-10-01 17:53:55,340 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:53:55,341 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:53:55,342 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:53:55,344 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:53:55,344 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:53:55,348 models 570 138242068317888 Found extension: 7451 - Aminah Bdhaifi (Smasco)
INFO 2024-10-01 17:53:55,350 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:53:55,354 models 570 138242068317888 Quota for 7451 - Aminah Bdhaifi (Smasco): Last reset: 2024-09-15 06:35:06.190066+00:00, Next reset: 2024-10-15 06:35:06.190066+00:00, Current time: 2024-10-01 14:53:55.352831+00:00, Should reset: False
INFO 2024-10-01 17:53:55,355 models 570 138242068317888 Quota reset not needed for 7451 - Aminah Bdhaifi (Smasco)
INFO 2024-10-01 17:53:55,355 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:53:55,355 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:53:55,355 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:53:55,357 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:53:55,357 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:53:55,358 models 570 138242068317888 Initial state: caller=7451, callee=8426, duration=23, total_cost=0.00
INFO 2024-10-01 17:53:55,360 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:53:55,360 models 570 138242068317888 Before determining country, Caller: 7451, Callee: 8426
INFO 2024-10-01 17:53:55,361 utils 570 138242068317888 Original number: 8426
INFO 2024-10-01 17:53:55,361 utils 570 138242068317888 Cleaned number: 8426
INFO 2024-10-01 17:53:55,361 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:53:55,361 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:53:55,361 models 570 138242068317888 Categorizing call for number: 8426
INFO 2024-10-01 17:53:55,365 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:53:55,367 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:53:55,367 models 570 138242068317888 Match found: 8426 matches ^\d{4}$
INFO 2024-10-01 17:53:55,368 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:53:55,368 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:53:55,368 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 17:53:55,368 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:53:55,368 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:53:55,369 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:53:55,369 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:53:55,369 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:53:55,371 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:53:55,371 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:53:55,374 models 570 138242068317888 Found extension: 7451 - Aminah Bdhaifi (Smasco)
INFO 2024-10-01 17:53:55,376 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:53:55,383 models 570 138242068317888 Quota for 7451 - Aminah Bdhaifi (Smasco): Last reset: 2024-09-15 06:35:06.190066+00:00, Next reset: 2024-10-15 06:35:06.190066+00:00, Current time: 2024-10-01 14:53:55.379652+00:00, Should reset: False
INFO 2024-10-01 17:53:55,384 models 570 138242068317888 Quota reset not needed for 7451 - Aminah Bdhaifi (Smasco)
INFO 2024-10-01 17:53:55,384 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:53:55,385 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:53:55,385 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:53:55,388 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:53:55,389 socket_server 570 138242068317888 Saved call record for company Smasco: 7451 -> 8426 at 2024-10-01 14:53:26+03:00
INFO 2024-10-01 17:53:55,797 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57794) on port 8000
INFO 2024-10-01 17:54:20,187 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:38:09,0556721083,7301,00:15:58,2024/10/01 14:38:21,2024/10/01 14:54:19,TerminatedBySrc,,,Ext.7301,0556721083,10001,,,Extension,Line,,Muhammed Sahail,0556721083,
INFO 2024-10-01 17:54:20,187 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:38:09', '0556721083', '7301', '00:15:58', '2024/10/01 14:38:21', '2024/10/01 14:54:19', 'TerminatedBySrc', '', '', 'Ext.7301', '0556721083', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0556721083', '']
INFO 2024-10-01 17:54:20,204 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:20,205 models 570 138242068317888 Initial state: caller=7301, callee=0556721083, duration=958, total_cost=0.0
INFO 2024-10-01 17:54:20,205 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:54:20,205 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0556721083
INFO 2024-10-01 17:54:20,206 utils 570 138242068317888 Original number: 0556721083
INFO 2024-10-01 17:54:20,206 utils 570 138242068317888 Cleaned number: 0556721083
INFO 2024-10-01 17:54:20,206 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:54:20,206 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:20,206 models 570 138242068317888 Categorizing call for number: 0556721083
INFO 2024-10-01 17:54:20,209 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:20,211 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:20,211 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:54:20,212 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:54:20,212 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:54:20,212 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:54:20,212 models 570 138242068317888 Match found: 0556721083 matches 05
INFO 2024-10-01 17:54:20,212 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 Calculating total cost for call: duration=958 seconds
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 Duration in minutes: 16
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 Calculated total cost: 6.40
INFO 2024-10-01 17:54:20,213 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=6.40
INFO 2024-10-01 17:54:20,214 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:20,216 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:20,216 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:54:20,219 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:54:20,222 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:54:20,234 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:54:20.226339+00:00, Should reset: False
INFO 2024-10-01 17:54:20,234 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:54:20,234 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 42.40
INFO 2024-10-01 17:54:20,234 models 570 138242068317888 Amount to deduct: 6.40
INFO 2024-10-01 17:54:20,234 models 570 138242068317888 Attempting to deduct 6.40 from balance 57.60
INFO 2024-10-01 17:54:20,236 models 570 138242068317888 Successfully deducted 6.40. New remaining balance: 51.20
INFO 2024-10-01 17:54:20,236 models 570 138242068317888 Successfully deducted 6.40 from quota. New balance: 51.20
INFO 2024-10-01 17:54:20,238 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:20,238 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:20,238 models 570 138242068317888 Initial state: caller=7301, callee=0556721083, duration=958, total_cost=6.40
INFO 2024-10-01 17:54:20,241 models 570 138242068317888 This is an existing CallRecord. Old total cost: 6.40
INFO 2024-10-01 17:54:20,241 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0556721083
INFO 2024-10-01 17:54:20,241 utils 570 138242068317888 Original number: 0556721083
INFO 2024-10-01 17:54:20,241 utils 570 138242068317888 Cleaned number: 0556721083
INFO 2024-10-01 17:54:20,242 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:54:20,242 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:20,242 models 570 138242068317888 Categorizing call for number: 0556721083
INFO 2024-10-01 17:54:20,244 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:20,245 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:20,246 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:54:20,246 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:54:20,246 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:54:20,246 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Match found: 0556721083 matches 05
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Calculating total cost for call: duration=958 seconds
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Duration in minutes: 16
INFO 2024-10-01 17:54:20,247 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:54:20,248 models 570 138242068317888 Calculated total cost: 6.40
INFO 2024-10-01 17:54:20,248 models 570 138242068317888 After cost calculation: old_total_cost=6.40, new_total_cost=6.40
INFO 2024-10-01 17:54:20,248 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:20,250 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:20,250 models 570 138242068317888 Starting update_user_quota with old_total_cost=6.40
INFO 2024-10-01 17:54:20,253 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:54:20,254 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:54:20,258 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:54:20.256394+00:00, Should reset: False
INFO 2024-10-01 17:54:20,258 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:54:20,258 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:54:20,259 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:54:20,259 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:54:20,260 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:20,260 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0556721083 at 2024-10-01 14:38:09+03:00
INFO 2024-10-01 17:54:20,664 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57799) on port 8000
INFO 2024-10-01 17:54:54,434 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:54:45,8811,8800,,,2024/10/01 14:54:53,Failed_Cancelled,,,Ext.8800,Ext.8811,8811,,,Extension,Extension,,Ali Almutairi,Saad Alqahtani,
INFO 2024-10-01 17:54:54,434 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:54:45', '8811', '8800', '', '', '2024/10/01 14:54:53', 'Failed_Cancelled', '', '', 'Ext.8800', 'Ext.8811', '8811', '', '', 'Extension', 'Extension', '', 'Ali Almutairi', 'Saad Alqahtani', '']
INFO 2024-10-01 17:54:54,454 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:54,455 models 570 138242068317888 Initial state: caller=8800, callee=8811, duration=None, total_cost=0.0
INFO 2024-10-01 17:54:54,455 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:54:54,456 models 570 138242068317888 Before determining country, Caller: 8800, Callee: 8811
INFO 2024-10-01 17:54:54,456 utils 570 138242068317888 Original number: 8811
INFO 2024-10-01 17:54:54,457 utils 570 138242068317888 Cleaned number: 8811
INFO 2024-10-01 17:54:54,457 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:54:54,457 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:54,457 models 570 138242068317888 Categorizing call for number: 8811
INFO 2024-10-01 17:54:54,460 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:54,463 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:54,464 models 570 138242068317888 Match found: 8811 matches ^\d{4}$
INFO 2024-10-01 17:54:54,464 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:54:54,464 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:54,464 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:54:54,464 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:54:54,465 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:54:54,466 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:54,468 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:54,468 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:54:54,478 models 570 138242068317888 Found extension: 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 17:54:54,481 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:54:54,486 models 570 138242068317888 Quota for 8800 - Ali Almutairi (Smasco): Last reset: 2024-09-15 06:35:35.284916+00:00, Next reset: 2024-10-15 06:35:35.284916+00:00, Current time: 2024-10-01 14:54:54.483795+00:00, Should reset: False
INFO 2024-10-01 17:54:54,487 models 570 138242068317888 Quota reset not needed for 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 17:54:54,487 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:54:54,487 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:54:54,488 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:54:54,489 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:54,490 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:54,491 models 570 138242068317888 Initial state: caller=8800, callee=8811, duration=None, total_cost=0.00
INFO 2024-10-01 17:54:54,494 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:54:54,494 models 570 138242068317888 Before determining country, Caller: 8800, Callee: 8811
INFO 2024-10-01 17:54:54,497 utils 570 138242068317888 Original number: 8811
INFO 2024-10-01 17:54:54,497 utils 570 138242068317888 Cleaned number: 8811
INFO 2024-10-01 17:54:54,497 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:54:54,497 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:54,497 models 570 138242068317888 Categorizing call for number: 8811
INFO 2024-10-01 17:54:54,503 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:54,507 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:54,508 models 570 138242068317888 Match found: 8811 matches ^\d{4}$
INFO 2024-10-01 17:54:54,508 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:54:54,508 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:54,508 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:54:54,508 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:54:54,509 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:54:54,509 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:54,516 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:54,516 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:54:54,521 models 570 138242068317888 Found extension: 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 17:54:54,523 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:54:54,528 models 570 138242068317888 Quota for 8800 - Ali Almutairi (Smasco): Last reset: 2024-09-15 06:35:35.284916+00:00, Next reset: 2024-10-15 06:35:35.284916+00:00, Current time: 2024-10-01 14:54:54.525814+00:00, Should reset: False
INFO 2024-10-01 17:54:54,529 models 570 138242068317888 Quota reset not needed for 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 17:54:54,529 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:54:54,529 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:54:54,529 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:54:54,530 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:54,531 socket_server 570 138242068317888 Saved call record for company Smasco: 8800 -> 8811 at 2024-10-01 14:54:45+03:00
INFO 2024-10-01 17:54:54,938 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57807) on port 8000
INFO 2024-10-01 17:54:55,058 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:53:59,8000,10001,00:00:55,2024/10/01 14:53:59,2024/10/01 14:54:54,TerminatedBySrc,ReplacedDst,,0557831409,Ext.8000,8000,Ext.7446,7446,Line,Ivr,Extension,0557831409:Main Number,WelcomeMessage,Alex George
INFO 2024-10-01 17:54:55,058 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:53:59', '8000', '10001', '00:00:55', '2024/10/01 14:53:59', '2024/10/01 14:54:54', 'TerminatedBySrc', 'ReplacedDst', '', '0557831409', 'Ext.8000', '8000', 'Ext.7446', '7446', 'Line', 'Ivr', 'Extension', '0557831409:Main Number', 'WelcomeMessage', 'Alex George']
INFO 2024-10-01 17:54:55,075 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:55,075 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=55, total_cost=0.0
INFO 2024-10-01 17:54:55,076 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:54:55,076 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:54:55,076 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:54:55,076 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:54:55,077 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:54:55,077 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:55,077 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:54:55,080 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:55,082 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:55,082 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:54:55,082 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:54:55,082 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:55,082 models 570 138242068317888 Calculating total cost for call: duration=55 seconds
INFO 2024-10-01 17:54:55,083 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:54:55,083 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:54:55,083 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:54:55,083 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:54:55,083 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:55,085 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:55,086 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:54:55,088 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:54:55,090 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:55,090 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:55,090 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=55, total_cost=0.00
INFO 2024-10-01 17:54:55,093 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:54:55,093 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:54:55,093 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:54:55,093 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:54:55,094 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:54:55,094 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:55,094 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:54:55,096 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:55,097 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:55,097 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Calculating total cost for call: duration=55 seconds
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:54:55,098 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:54:55,099 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:54:55,099 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:55,101 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:55,101 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:54:55,102 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:54:55,104 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:55,104 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:53:59+03:00
INFO 2024-10-01 17:54:55,507 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57813) on port 8000
INFO 2024-10-01 17:54:56,462 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:54:11,0537363559,1134,00:00:34,2024/10/01 14:54:21,2024/10/01 14:54:55,TerminatedBySrc,,,Ext.1134,0537363559,10001,,,Extension,Line,,Afrah Almantshri,0537363559,
INFO 2024-10-01 17:54:56,462 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:54:11', '0537363559', '1134', '00:00:34', '2024/10/01 14:54:21', '2024/10/01 14:54:55', 'TerminatedBySrc', '', '', 'Ext.1134', '0537363559', '10001', '', '', 'Extension', 'Line', '', 'Afrah Almantshri', '0537363559', '']
INFO 2024-10-01 17:54:56,483 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:56,484 models 570 138242068317888 Initial state: caller=1134, callee=0537363559, duration=34, total_cost=0.0
INFO 2024-10-01 17:54:56,484 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:54:56,484 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537363559
INFO 2024-10-01 17:54:56,484 utils 570 138242068317888 Original number: 0537363559
INFO 2024-10-01 17:54:56,484 utils 570 138242068317888 Cleaned number: 0537363559
INFO 2024-10-01 17:54:56,485 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:54:56,485 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:56,485 models 570 138242068317888 Categorizing call for number: 0537363559
INFO 2024-10-01 17:54:56,488 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:56,490 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:56,490 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:54:56,490 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:54:56,491 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:54:56,491 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:54:56,491 models 570 138242068317888 Match found: 0537363559 matches 05
INFO 2024-10-01 17:54:56,491 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 Calculating total cost for call: duration=34 seconds
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:54:56,492 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 17:54:56,493 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:56,495 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:56,495 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:54:56,498 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:54:56,500 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:56,501 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:54:56,501 models 570 138242068317888 Initial state: caller=1134, callee=0537363559, duration=34, total_cost=0.40
INFO 2024-10-01 17:54:56,506 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 17:54:56,507 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537363559
INFO 2024-10-01 17:54:56,507 utils 570 138242068317888 Original number: 0537363559
INFO 2024-10-01 17:54:56,507 utils 570 138242068317888 Cleaned number: 0537363559
INFO 2024-10-01 17:54:56,507 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:54:56,507 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:54:56,507 models 570 138242068317888 Categorizing call for number: 0537363559
INFO 2024-10-01 17:54:56,509 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:54:56,511 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:54:56,512 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:54:56,513 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:54:56,513 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:54:56,513 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Match found: 0537363559 matches 05
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Calculating total cost for call: duration=34 seconds
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:54:56,514 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:54:56,515 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 17:54:56,515 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 17:54:56,515 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:54:56,517 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:54:56,518 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 17:54:56,520 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:54:56,522 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:54:56,522 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0537363559 at 2024-10-01 14:54:11+03:00
INFO 2024-10-01 17:54:56,922 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57814) on port 8000
INFO 2024-10-01 17:55:13,642 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:54:23,0565377803,7301,,,2024/10/01 14:55:12,Failed,,,Ext.7301,0565377803,0565377803,,,Extension,LineSet,,Muhammed Sahail,0565377803,
INFO 2024-10-01 17:55:13,642 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:54:23', '0565377803', '7301', '', '', '2024/10/01 14:55:12', 'Failed', '', '', 'Ext.7301', '0565377803', '0565377803', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0565377803', '']
INFO 2024-10-01 17:55:13,662 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:13,662 models 570 138242068317888 Initial state: caller=7301, callee=0565377803, duration=None, total_cost=0.0
INFO 2024-10-01 17:55:13,663 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:55:13,663 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0565377803
INFO 2024-10-01 17:55:13,663 utils 570 138242068317888 Original number: 0565377803
INFO 2024-10-01 17:55:13,664 utils 570 138242068317888 Cleaned number: 0565377803
INFO 2024-10-01 17:55:13,664 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:13,664 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:13,665 models 570 138242068317888 Categorizing call for number: 0565377803
INFO 2024-10-01 17:55:13,668 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:13,671 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:13,671 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:13,671 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:13,672 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:13,672 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:13,672 models 570 138242068317888 Match found: 0565377803 matches 05
INFO 2024-10-01 17:55:13,672 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:13,672 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:13,673 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:13,673 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:13,673 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:13,673 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:13,675 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:13,676 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:55:13,680 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:55:13,682 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:55:13,686 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:55:13.684547+00:00, Should reset: False
INFO 2024-10-01 17:55:13,687 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:55:13,687 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:55:13,687 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:55:13,687 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:55:13,689 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:13,690 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:13,690 models 570 138242068317888 Initial state: caller=7301, callee=0565377803, duration=None, total_cost=0.00
INFO 2024-10-01 17:55:13,692 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:55:13,693 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0565377803
INFO 2024-10-01 17:55:13,693 utils 570 138242068317888 Original number: 0565377803
INFO 2024-10-01 17:55:13,693 utils 570 138242068317888 Cleaned number: 0565377803
INFO 2024-10-01 17:55:13,694 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:13,694 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:13,694 models 570 138242068317888 Categorizing call for number: 0565377803
INFO 2024-10-01 17:55:13,696 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:13,697 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:13,698 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:13,698 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:13,698 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:13,699 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:13,699 models 570 138242068317888 Match found: 0565377803 matches 05
INFO 2024-10-01 17:55:13,699 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:13,699 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:13,699 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:13,700 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:13,700 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:13,700 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:13,702 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:13,702 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:55:13,705 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:55:13,706 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:55:13,717 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:55:13.711033+00:00, Should reset: False
INFO 2024-10-01 17:55:13,718 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:55:13,718 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:55:13,719 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:55:13,719 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:55:13,720 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:13,720 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0565377803 at 2024-10-01 14:54:23+03:00
INFO 2024-10-01 17:55:14,118 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57820) on port 8000
INFO 2024-10-01 17:55:22,593 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:54:00,8000,10001,00:01:20,2024/10/01 14:54:00,2024/10/01 14:55:21,TerminatedByDst,ReplacedDst,,583586046,Ext.8000,8000,Ext.7842,7842,Line,Ivr,Extension,583586046:Main Number,WelcomeMessage,Ahmed Ahmed
INFO 2024-10-01 17:55:22,594 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:54:00', '8000', '10001', '00:01:20', '2024/10/01 14:54:00', '2024/10/01 14:55:21', 'TerminatedByDst', 'ReplacedDst', '', '583586046', 'Ext.8000', '8000', 'Ext.7842', '7842', 'Line', 'Ivr', 'Extension', '583586046:Main Number', 'WelcomeMessage', 'Ahmed Ahmed']
INFO 2024-10-01 17:55:22,609 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:22,609 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=80, total_cost=0.0
INFO 2024-10-01 17:55:22,610 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:55:22,610 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:55:22,610 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:55:22,610 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:55:22,611 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:55:22,611 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:22,611 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:55:22,615 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:22,617 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:22,617 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:55:22,618 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:55:22,618 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:22,618 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:55:22,618 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:55:22,619 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:55:22,619 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:55:22,619 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:22,619 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:22,622 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:22,623 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:22,626 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:55:22,628 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:22,629 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:22,629 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=80, total_cost=0.00
INFO 2024-10-01 17:55:22,631 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:55:22,632 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:55:22,632 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:55:22,632 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:55:22,632 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:55:22,632 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:22,633 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:55:22,636 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:22,638 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:22,639 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:55:22,639 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:55:22,639 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:22,639 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:55:22,640 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:55:22,640 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:55:22,640 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:55:22,640 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:22,640 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:22,643 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:22,643 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:22,645 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:55:22,648 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:22,648 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:54:00+03:00
INFO 2024-10-01 17:55:23,055 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57821) on port 8000
INFO 2024-10-01 17:55:24,465 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:55:17,0537085298,1134,,,2024/10/01 14:55:23,Failed,,,Ext.1134,0537085298,0537085298,,,Extension,LineSet,,Afrah Almantshri,0537085298,
INFO 2024-10-01 17:55:24,466 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:55:17', '0537085298', '1134', '', '', '2024/10/01 14:55:23', 'Failed', '', '', 'Ext.1134', '0537085298', '0537085298', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0537085298', '']
INFO 2024-10-01 17:55:24,487 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:24,488 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.0
INFO 2024-10-01 17:55:24,489 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:55:24,489 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 17:55:24,489 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 17:55:24,489 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 17:55:24,489 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:24,490 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:24,491 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 17:55:24,494 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:24,497 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:24,498 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:24,498 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:24,499 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:24,499 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:24,500 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 17:55:24,500 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:24,500 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:24,500 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:24,501 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:24,502 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:24,502 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:24,505 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:24,506 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:24,509 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:55:24,511 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:24,512 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:24,512 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.00
INFO 2024-10-01 17:55:24,516 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:55:24,516 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 17:55:24,517 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 17:55:24,518 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 17:55:24,518 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:24,518 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:24,519 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 17:55:24,522 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:24,524 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:24,525 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:24,525 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:24,526 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:24,526 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:24,526 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 17:55:24,527 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:24,527 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:24,528 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:24,528 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:24,528 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:24,528 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:24,531 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:24,532 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:24,534 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:55:24,536 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:24,537 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0537085298 at 2024-10-01 14:55:17+03:00
INFO 2024-10-01 17:55:24,950 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57822) on port 8000
INFO 2024-10-01 17:55:39,464 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:55:09,0534610836,8426,,,2024/10/01 14:55:38,Failed,,,Ext.8426,0534610836,0534610836,,,Extension,LineSet,,Rehan Khan Mohammed,0534610836,
INFO 2024-10-01 17:55:39,465 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:55:09', '0534610836', '8426', '', '', '2024/10/01 14:55:38', 'Failed', '', '', 'Ext.8426', '0534610836', '0534610836', '', '', 'Extension', 'LineSet', '', 'Rehan Khan Mohammed', '0534610836', '']
INFO 2024-10-01 17:55:39,481 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:39,482 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=None, total_cost=0.0
INFO 2024-10-01 17:55:39,483 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:55:39,483 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:55:39,484 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:55:39,484 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:55:39,485 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:39,485 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:39,486 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:55:39,489 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:39,491 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:39,492 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:39,492 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:39,492 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:39,493 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:39,493 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:55:39,493 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:39,493 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:39,493 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:39,494 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:39,494 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:39,494 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:39,496 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:39,497 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:55:39,501 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:55:39,504 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:55:39,512 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:55:39.508272+00:00, Should reset: False
INFO 2024-10-01 17:55:39,513 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:55:39,515 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:55:39,516 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:55:39,516 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:55:39,518 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:39,518 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:39,519 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=None, total_cost=0.00
INFO 2024-10-01 17:55:39,522 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:55:39,523 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:55:39,523 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:55:39,523 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:55:39,524 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:55:39,524 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:39,524 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:55:39,526 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:39,528 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:39,528 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:55:39,529 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:39,530 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:55:39,530 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:55:39,530 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:39,530 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:39,533 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:39,533 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:55:39,536 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:55:39,538 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:55:39,541 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:55:39.539580+00:00, Should reset: False
INFO 2024-10-01 17:55:39,542 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:55:39,542 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:55:39,542 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:55:39,542 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:55:39,544 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:39,544 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0534610836 at 2024-10-01 14:55:09+03:00
INFO 2024-10-01 17:55:39,948 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57824) on port 8000
INFO 2024-10-01 17:55:52,763 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:55:40,8000,10001,00:00:11,2024/10/01 14:55:40,2024/10/01 14:55:52,TerminatedBySrc,,,0553057559,Ext.8000,8000,,,Line,Ivr,,0553057559:Main Number,WelcomeMessage,
INFO 2024-10-01 17:55:52,764 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:55:40', '8000', '10001', '00:00:11', '2024/10/01 14:55:40', '2024/10/01 14:55:52', 'TerminatedBySrc', '', '', '0553057559', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0553057559:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 17:55:52,791 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:52,792 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=11, total_cost=0.0
INFO 2024-10-01 17:55:52,792 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:55:52,792 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:55:52,792 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:55:52,793 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:55:52,793 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:55:52,793 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:52,793 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:55:52,796 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:52,800 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:52,801 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:55:52,801 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:55:52,801 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:52,802 models 570 138242068317888 Calculating total cost for call: duration=11 seconds
INFO 2024-10-01 17:55:52,802 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:55:52,802 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:55:52,802 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:55:52,803 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:52,803 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:52,806 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:52,806 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:52,809 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:55:52,813 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:52,814 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:55:52,814 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=11, total_cost=0.00
INFO 2024-10-01 17:55:52,817 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:55:52,817 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 17:55:52,818 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 17:55:52,818 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 17:55:52,818 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:55:52,818 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:55:52,819 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 17:55:52,821 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:55:52,823 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:55:52,823 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 17:55:52,823 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:55:52,824 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:55:52,824 models 570 138242068317888 Calculating total cost for call: duration=11 seconds
INFO 2024-10-01 17:55:52,824 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:55:52,824 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:55:52,824 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:55:52,825 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:55:52,825 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:55:52,830 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:55:52,831 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:55:52,834 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:55:52,836 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:55:52,837 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 14:55:40+03:00
INFO 2024-10-01 17:55:53,225 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57827) on port 8000
INFO 2024-10-01 17:56:10,955 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:56:07,0571843126,7301,,,2024/10/01 14:56:10,Failed,,,Ext.7301,0571843126,0571843126,,,Extension,LineSet,,Muhammed Sahail,0571843126,
INFO 2024-10-01 17:56:10,955 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:56:07', '0571843126', '7301', '', '', '2024/10/01 14:56:10', 'Failed', '', '', 'Ext.7301', '0571843126', '0571843126', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0571843126', '']
INFO 2024-10-01 17:56:10,972 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:10,978 models 570 138242068317888 Initial state: caller=7301, callee=0571843126, duration=None, total_cost=0.0
INFO 2024-10-01 17:56:10,978 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:56:10,978 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0571843126
INFO 2024-10-01 17:56:10,978 utils 570 138242068317888 Original number: 0571843126
INFO 2024-10-01 17:56:10,978 utils 570 138242068317888 Cleaned number: 0571843126
INFO 2024-10-01 17:56:10,979 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:10,979 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:10,979 models 570 138242068317888 Categorizing call for number: 0571843126
INFO 2024-10-01 17:56:10,984 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:10,987 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:10,988 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:10,988 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:10,988 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:10,988 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:10,989 models 570 138242068317888 Match found: 0571843126 matches 05
INFO 2024-10-01 17:56:10,989 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:10,989 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:10,990 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:56:10,990 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:56:10,990 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:10,990 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:10,992 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:10,992 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:56:10,996 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:56:10,997 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:56:11,001 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:56:10.999559+00:00, Should reset: False
INFO 2024-10-01 17:56:11,001 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:56:11,002 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:56:11,002 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:56:11,002 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:56:11,004 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:11,004 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:11,004 models 570 138242068317888 Initial state: caller=7301, callee=0571843126, duration=None, total_cost=0.00
INFO 2024-10-01 17:56:11,007 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:56:11,008 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0571843126
INFO 2024-10-01 17:56:11,008 utils 570 138242068317888 Original number: 0571843126
INFO 2024-10-01 17:56:11,008 utils 570 138242068317888 Cleaned number: 0571843126
INFO 2024-10-01 17:56:11,009 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:11,009 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:11,009 models 570 138242068317888 Categorizing call for number: 0571843126
INFO 2024-10-01 17:56:11,011 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:11,013 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:11,013 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:11,014 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:11,014 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:11,014 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:11,015 models 570 138242068317888 Match found: 0571843126 matches 05
INFO 2024-10-01 17:56:11,015 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:11,015 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:11,015 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:56:11,016 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:56:11,016 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:11,016 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:11,019 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:11,019 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:56:11,022 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:56:11,023 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:56:11,027 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:56:11.025504+00:00, Should reset: False
INFO 2024-10-01 17:56:11,028 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:56:11,028 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:56:11,028 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:56:11,029 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:56:11,030 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:11,030 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0571843126 at 2024-10-01 14:56:07+03:00
INFO 2024-10-01 17:56:11,427 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57828) on port 8000
INFO 2024-10-01 17:56:16,682 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:51:08,0554859724,7327,00:04:45,2024/10/01 14:51:30,2024/10/01 14:56:15,TerminatedByDst,,,Ext.7327,0554859724,10001,,,Extension,Line,,Muhammad Hamza Haider,0554859724,
INFO 2024-10-01 17:56:16,682 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:51:08', '0554859724', '7327', '00:04:45', '2024/10/01 14:51:30', '2024/10/01 14:56:15', 'TerminatedByDst', '', '', 'Ext.7327', '0554859724', '10001', '', '', 'Extension', 'Line', '', 'Muhammad Hamza Haider', '0554859724', '']
INFO 2024-10-01 17:56:16,702 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:16,703 models 570 138242068317888 Initial state: caller=7327, callee=0554859724, duration=285, total_cost=0.0
INFO 2024-10-01 17:56:16,703 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:56:16,704 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0554859724
INFO 2024-10-01 17:56:16,704 utils 570 138242068317888 Original number: 0554859724
INFO 2024-10-01 17:56:16,705 utils 570 138242068317888 Cleaned number: 0554859724
INFO 2024-10-01 17:56:16,705 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:16,706 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:16,706 models 570 138242068317888 Categorizing call for number: 0554859724
INFO 2024-10-01 17:56:16,709 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:16,712 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:16,712 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:16,713 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:16,713 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:16,713 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:16,713 models 570 138242068317888 Match found: 0554859724 matches 05
INFO 2024-10-01 17:56:16,714 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:16,714 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:16,714 models 570 138242068317888 Calculating total cost for call: duration=285 seconds
INFO 2024-10-01 17:56:16,714 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:56:16,715 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:56:16,715 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:56:16,716 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 17:56:16,716 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:16,719 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:16,719 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:56:16,724 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:56:16,726 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:16,731 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:56:16.728693+00:00, Should reset: False
INFO 2024-10-01 17:56:16,731 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:56:16,732 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:16,732 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 17:56:16,732 models 570 138242068317888 Attempting to deduct 2.00 from balance 0.00
WARNING 2024-10-01 17:56:16,733 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.00
WARNING 2024-10-01 17:56:16,733 models 570 138242068317888 Warning: Quota exceeded for extension 7327
INFO 2024-10-01 17:56:16,736 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:16,736 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:16,736 models 570 138242068317888 Initial state: caller=7327, callee=0554859724, duration=285, total_cost=2.00
INFO 2024-10-01 17:56:16,741 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 17:56:16,742 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 0554859724
INFO 2024-10-01 17:56:16,742 utils 570 138242068317888 Original number: 0554859724
INFO 2024-10-01 17:56:16,743 utils 570 138242068317888 Cleaned number: 0554859724
INFO 2024-10-01 17:56:16,743 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:16,743 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:16,743 models 570 138242068317888 Categorizing call for number: 0554859724
INFO 2024-10-01 17:56:16,746 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:16,747 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:16,748 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:16,748 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:16,748 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:16,749 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:16,749 models 570 138242068317888 Match found: 0554859724 matches 05
INFO 2024-10-01 17:56:16,749 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:16,750 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:16,750 models 570 138242068317888 Calculating total cost for call: duration=285 seconds
INFO 2024-10-01 17:56:16,750 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 17:56:16,750 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:56:16,751 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 17:56:16,751 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 17:56:16,751 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:16,753 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:16,754 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 17:56:16,757 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:56:16,759 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:16,764 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:56:16.762163+00:00, Should reset: False
INFO 2024-10-01 17:56:16,765 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:56:16,765 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:16,765 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:56:16,765 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:56:16,767 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:16,767 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 0554859724 at 2024-10-01 14:51:08+03:00
INFO 2024-10-01 17:56:17,184 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57829) on port 8000
INFO 2024-10-01 17:56:48,969 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:55:27,8003,10001,00:01:20,2024/10/01 14:55:27,2024/10/01 14:56:48,TerminatedBySrc,ReplacedDst,,546091500,Ext.8003,8003,Ext.7930,7930,Line,Ivr,Extension,546091500:Addeed Welcome,Added Welcome Message,Adeed Care Center
INFO 2024-10-01 17:56:48,969 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:55:27', '8003', '10001', '00:01:20', '2024/10/01 14:55:27', '2024/10/01 14:56:48', 'TerminatedBySrc', 'ReplacedDst', '', '546091500', 'Ext.8003', '8003', 'Ext.7930', '7930', 'Line', 'Ivr', 'Extension', '546091500:Addeed Welcome', 'Added Welcome Message', 'Adeed Care Center']
INFO 2024-10-01 17:56:48,986 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:48,986 models 570 138242068317888 Initial state: caller=10001, callee=8003, duration=80, total_cost=0.0
INFO 2024-10-01 17:56:48,986 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:56:48,987 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8003
INFO 2024-10-01 17:56:48,987 utils 570 138242068317888 Original number: 8003
INFO 2024-10-01 17:56:48,987 utils 570 138242068317888 Cleaned number: 8003
INFO 2024-10-01 17:56:48,987 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:56:48,987 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:48,987 models 570 138242068317888 Categorizing call for number: 8003
INFO 2024-10-01 17:56:48,990 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:48,992 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:48,992 models 570 138242068317888 Match found: 8003 matches ^\d{4}$
INFO 2024-10-01 17:56:48,992 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:56:48,992 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:48,993 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:48,996 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:48,996 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:56:48,998 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:56:49,000 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:49,000 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:49,001 models 570 138242068317888 Initial state: caller=10001, callee=8003, duration=80, total_cost=0.00
INFO 2024-10-01 17:56:49,003 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:56:49,004 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8003
INFO 2024-10-01 17:56:49,004 utils 570 138242068317888 Original number: 8003
INFO 2024-10-01 17:56:49,004 utils 570 138242068317888 Cleaned number: 8003
INFO 2024-10-01 17:56:49,004 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:56:49,004 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:49,005 models 570 138242068317888 Categorizing call for number: 8003
INFO 2024-10-01 17:56:49,007 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:49,008 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Match found: 8003 matches ^\d{4}$
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Calculating total cost for call: duration=80 seconds
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:56:49,009 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:56:49,010 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:56:49,010 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:49,010 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:49,012 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:49,012 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:56:49,014 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 17:56:49,015 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:49,015 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8003 at 2024-10-01 14:55:27+03:00
INFO 2024-10-01 17:56:49,421 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57840) on port 8000
INFO 2024-10-01 17:56:58,115 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:55:39,0534610836,8426,,,2024/10/01 14:56:57,Failed,,,Ext.8426,0534610836,0534610836,,,Extension,LineSet,,Rehan Khan Mohammed,0534610836,
INFO 2024-10-01 17:56:58,115 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:55:39', '0534610836', '8426', '', '', '2024/10/01 14:56:57', 'Failed', '', '', 'Ext.8426', '0534610836', '0534610836', '', '', 'Extension', 'LineSet', '', 'Rehan Khan Mohammed', '0534610836', '']
INFO 2024-10-01 17:56:58,134 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:58,135 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=None, total_cost=0.0
INFO 2024-10-01 17:56:58,135 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:56:58,136 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:56:58,136 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:56:58,136 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:56:58,136 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:58,136 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:58,137 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:56:58,140 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:58,142 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:58,142 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:58,143 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:58,143 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:58,143 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:58,143 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:56:58,144 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:58,144 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:58,144 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:56:58,144 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:56:58,144 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:58,144 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:58,147 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:58,147 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:56:58,151 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:56:58,153 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:58,156 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:56:58.154852+00:00, Should reset: False
INFO 2024-10-01 17:56:58,157 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:56:58,157 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:58,157 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:56:58,158 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:56:58,159 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:58,159 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:56:58,160 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=None, total_cost=0.00
INFO 2024-10-01 17:56:58,162 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:56:58,162 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:56:58,163 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:56:58,163 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:56:58,163 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:56:58,163 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:56:58,163 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:56:58,165 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:56:58,166 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:56:58,167 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:56:58,168 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:56:58,168 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:56:58,168 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:56:58,168 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:56:58,168 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:56:58,170 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:56:58,171 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:56:58,173 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:56:58,175 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:58,178 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:56:58.176663+00:00, Should reset: False
INFO 2024-10-01 17:56:58,179 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:56:58,179 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:56:58,179 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:56:58,179 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:56:58,180 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:56:58,181 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0534610836 at 2024-10-01 14:55:39+03:00
INFO 2024-10-01 17:56:58,577 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57841) on port 8000
INFO 2024-10-01 17:57:32,457 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:57:22,0543501516,8818,,,2024/10/01 14:57:31,Failed,,,Ext.8818,0543501516,0543501516,,,Extension,LineSet,,Mohannad Baghlaf,0543501516,
INFO 2024-10-01 17:57:32,457 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:57:22', '0543501516', '8818', '', '', '2024/10/01 14:57:31', 'Failed', '', '', 'Ext.8818', '0543501516', '0543501516', '', '', 'Extension', 'LineSet', '', 'Mohannad Baghlaf', '0543501516', '']
INFO 2024-10-01 17:57:32,479 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:57:32,480 models 570 138242068317888 Initial state: caller=8818, callee=0543501516, duration=None, total_cost=0.0
INFO 2024-10-01 17:57:32,480 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:57:32,481 models 570 138242068317888 Before determining country, Caller: 8818, Callee: 0543501516
INFO 2024-10-01 17:57:32,481 utils 570 138242068317888 Original number: 0543501516
INFO 2024-10-01 17:57:32,481 utils 570 138242068317888 Cleaned number: 0543501516
INFO 2024-10-01 17:57:32,481 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:57:32,481 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:57:32,482 models 570 138242068317888 Categorizing call for number: 0543501516
INFO 2024-10-01 17:57:32,485 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:57:32,488 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:57:32,488 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:57:32,489 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:57:32,489 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:57:32,489 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:57:32,489 models 570 138242068317888 Match found: 0543501516 matches 05
INFO 2024-10-01 17:57:32,490 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:57:32,490 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:57:32,490 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:57:32,490 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:57:32,491 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:57:32,491 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:57:32,494 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:57:32,494 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:57:32,499 models 570 138242068317888 Found extension: 8818 - Mohannad Baghlaf (Smasco)
INFO 2024-10-01 17:57:32,511 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:57:32,533 models 570 138242068317888 Quota for 8818 - Mohannad Baghlaf (Smasco): Last reset: 2024-09-15 06:35:35.387247+00:00, Next reset: 2024-10-15 06:35:35.387247+00:00, Current time: 2024-10-01 14:57:32.531047+00:00, Should reset: False
INFO 2024-10-01 17:57:32,534 models 570 138242068317888 Quota reset not needed for 8818 - Mohannad Baghlaf (Smasco)
INFO 2024-10-01 17:57:32,534 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:57:32,535 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:57:32,535 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:57:32,537 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:57:32,537 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:57:32,537 models 570 138242068317888 Initial state: caller=8818, callee=0543501516, duration=None, total_cost=0.00
INFO 2024-10-01 17:57:32,540 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:57:32,540 models 570 138242068317888 Before determining country, Caller: 8818, Callee: 0543501516
INFO 2024-10-01 17:57:32,540 utils 570 138242068317888 Original number: 0543501516
INFO 2024-10-01 17:57:32,541 utils 570 138242068317888 Cleaned number: 0543501516
INFO 2024-10-01 17:57:32,541 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:57:32,541 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:57:32,541 models 570 138242068317888 Categorizing call for number: 0543501516
INFO 2024-10-01 17:57:32,543 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:57:32,545 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:57:32,545 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:57:32,545 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:57:32,545 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:57:32,545 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:57:32,546 models 570 138242068317888 Match found: 0543501516 matches 05
INFO 2024-10-01 17:57:32,546 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:57:32,546 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:57:32,546 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:57:32,546 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:57:32,546 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:57:32,547 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:57:32,548 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:57:32,549 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:57:32,551 models 570 138242068317888 Found extension: 8818 - Mohannad Baghlaf (Smasco)
INFO 2024-10-01 17:57:32,552 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:57:32,555 models 570 138242068317888 Quota for 8818 - Mohannad Baghlaf (Smasco): Last reset: 2024-09-15 06:35:35.387247+00:00, Next reset: 2024-10-15 06:35:35.387247+00:00, Current time: 2024-10-01 14:57:32.554077+00:00, Should reset: False
INFO 2024-10-01 17:57:32,556 models 570 138242068317888 Quota reset not needed for 8818 - Mohannad Baghlaf (Smasco)
INFO 2024-10-01 17:57:32,556 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 38.80
INFO 2024-10-01 17:57:32,556 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:57:32,556 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:57:32,558 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:57:32,558 socket_server 570 138242068317888 Saved call record for company Smasco: 8818 -> 0543501516 at 2024-10-01 14:57:22+03:00
INFO 2024-10-01 17:57:32,972 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57850) on port 8000
INFO 2024-10-01 17:57:43,572 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:56:29,0576990829,7301,,,2024/10/01 14:57:42,Failed,,,Ext.7301,0576990829,0576990829,,,Extension,LineSet,,Muhammed Sahail,0576990829,
INFO 2024-10-01 17:57:43,573 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:56:29', '0576990829', '7301', '', '', '2024/10/01 14:57:42', 'Failed', '', '', 'Ext.7301', '0576990829', '0576990829', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0576990829', '']
INFO 2024-10-01 17:57:43,593 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:57:43,593 models 570 138242068317888 Initial state: caller=7301, callee=0576990829, duration=None, total_cost=0.0
INFO 2024-10-01 17:57:43,593 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:57:43,593 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0576990829
INFO 2024-10-01 17:57:43,594 utils 570 138242068317888 Original number: 0576990829
INFO 2024-10-01 17:57:43,594 utils 570 138242068317888 Cleaned number: 0576990829
INFO 2024-10-01 17:57:43,594 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:57:43,594 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:57:43,595 models 570 138242068317888 Categorizing call for number: 0576990829
INFO 2024-10-01 17:57:43,597 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:57:43,599 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:57:43,599 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:57:43,599 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:57:43,599 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:57:43,600 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:57:43,600 models 570 138242068317888 Match found: 0576990829 matches 05
INFO 2024-10-01 17:57:43,600 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:57:43,600 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:57:43,601 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:57:43,601 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:57:43,601 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:57:43,601 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:57:43,603 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:57:43,603 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:57:43,607 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:57:43,609 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:57:43,612 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:57:43.610839+00:00, Should reset: False
INFO 2024-10-01 17:57:43,613 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:57:43,613 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:57:43,613 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:57:43,613 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:57:43,619 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:57:43,619 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:57:43,619 models 570 138242068317888 Initial state: caller=7301, callee=0576990829, duration=None, total_cost=0.00
INFO 2024-10-01 17:57:43,622 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:57:43,622 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0576990829
INFO 2024-10-01 17:57:43,622 utils 570 138242068317888 Original number: 0576990829
INFO 2024-10-01 17:57:43,622 utils 570 138242068317888 Cleaned number: 0576990829
INFO 2024-10-01 17:57:43,622 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:57:43,623 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:57:43,623 models 570 138242068317888 Categorizing call for number: 0576990829
INFO 2024-10-01 17:57:43,625 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:57:43,626 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:57:43,627 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:57:43,627 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:57:43,628 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:57:43,628 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:57:43,628 models 570 138242068317888 Match found: 0576990829 matches 05
INFO 2024-10-01 17:57:43,628 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:57:43,628 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:57:43,629 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:57:43,629 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:57:43,629 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:57:43,629 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:57:43,633 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:57:43,634 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:57:43,640 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:57:43,643 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:57:43,648 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:57:43.645601+00:00, Should reset: False
INFO 2024-10-01 17:57:43,649 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:57:43,649 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:57:43,650 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:57:43,650 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:57:43,651 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:57:43,652 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0576990829 at 2024-10-01 14:56:29+03:00
INFO 2024-10-01 17:57:44,056 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57853) on port 8000
INFO 2024-10-01 17:58:31,602 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:30,6370,7327,,,2024/10/01 14:58:30,TargetNotFound,,,Ext.7327,,,,,Extension,EndCall,,Muhammad Hamza Haider,6370,
INFO 2024-10-01 17:58:31,602 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:30', '6370', '7327', '', '', '2024/10/01 14:58:30', 'TargetNotFound', '', '', 'Ext.7327', '', '', '', '', 'Extension', 'EndCall', '', 'Muhammad Hamza Haider', '6370', '']
INFO 2024-10-01 17:58:31,621 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:31,621 models 570 138242068317888 Initial state: caller=7327, callee=6370, duration=None, total_cost=0.0
INFO 2024-10-01 17:58:31,622 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:58:31,622 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6370
INFO 2024-10-01 17:58:31,622 utils 570 138242068317888 Original number: 6370
INFO 2024-10-01 17:58:31,622 utils 570 138242068317888 Cleaned number: 6370
INFO 2024-10-01 17:58:31,623 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:31,623 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:31,623 models 570 138242068317888 Categorizing call for number: 6370
INFO 2024-10-01 17:58:31,626 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:31,628 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:31,628 models 570 138242068317888 Match found: 6370 matches ^\d{4}$
INFO 2024-10-01 17:58:31,628 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:31,629 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:31,629 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:58:31,629 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:58:31,629 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:31,629 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:31,632 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:31,632 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:31,636 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:31,639 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:31,644 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:58:31.642158+00:00, Should reset: False
INFO 2024-10-01 17:58:31,645 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:31,645 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:31,645 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:31,645 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:31,647 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:31,648 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:31,648 models 570 138242068317888 Initial state: caller=7327, callee=6370, duration=None, total_cost=0.00
INFO 2024-10-01 17:58:31,651 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:58:31,651 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6370
INFO 2024-10-01 17:58:31,652 utils 570 138242068317888 Original number: 6370
INFO 2024-10-01 17:58:31,652 utils 570 138242068317888 Cleaned number: 6370
INFO 2024-10-01 17:58:31,652 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:31,653 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:31,653 models 570 138242068317888 Categorizing call for number: 6370
INFO 2024-10-01 17:58:31,655 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:31,657 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:31,658 models 570 138242068317888 Match found: 6370 matches ^\d{4}$
INFO 2024-10-01 17:58:31,659 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:31,659 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:31,660 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:58:31,660 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:58:31,660 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:31,661 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:31,664 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:31,664 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:31,667 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:31,670 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:31,674 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:58:31.672104+00:00, Should reset: False
INFO 2024-10-01 17:58:31,674 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:31,675 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:31,675 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:31,676 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:31,677 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:31,678 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 6370 at 2024-10-01 14:58:30+03:00
INFO 2024-10-01 17:58:32,076 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57858) on port 8000
INFO 2024-10-01 17:58:34,457 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:28,1066,1107,00:00:04,2024/10/01 14:58:28,2024/10/01 14:58:33,TerminatedBySrc,,,Ext.1107,Ext.6666,1066,,,Extension,VMail,,Raha Sakaka,,
INFO 2024-10-01 17:58:34,457 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:28', '1066', '1107', '00:00:04', '2024/10/01 14:58:28', '2024/10/01 14:58:33', 'TerminatedBySrc', '', '', 'Ext.1107', 'Ext.6666', '1066', '', '', 'Extension', 'VMail', '', 'Raha Sakaka', '', '']
INFO 2024-10-01 17:58:34,479 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:34,480 models 570 138242068317888 Initial state: caller=1107, callee=1066, duration=4, total_cost=0.0
INFO 2024-10-01 17:58:34,480 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:58:34,480 models 570 138242068317888 Before determining country, Caller: 1107, Callee: 1066
INFO 2024-10-01 17:58:34,480 utils 570 138242068317888 Original number: 1066
INFO 2024-10-01 17:58:34,482 utils 570 138242068317888 Cleaned number: 1066
INFO 2024-10-01 17:58:34,482 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:34,483 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:34,483 models 570 138242068317888 Categorizing call for number: 1066
INFO 2024-10-01 17:58:34,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:34,489 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:34,490 models 570 138242068317888 Match found: 1066 matches ^\d{4}$
INFO 2024-10-01 17:58:34,491 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:34,492 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:34,492 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:58:34,492 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:34,493 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:34,493 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:34,493 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:34,493 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:34,496 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:34,497 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:34,503 models 570 138242068317888 Found extension: 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:34,506 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:34,511 models 570 138242068317888 Quota for 1107 - Raha Sakaka (Smasco): Last reset: 2024-09-15 06:34:33.264563+00:00, Next reset: 2024-10-15 06:34:33.264563+00:00, Current time: 2024-10-01 14:58:34.508799+00:00, Should reset: False
INFO 2024-10-01 17:58:34,511 models 570 138242068317888 Quota reset not needed for 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:34,512 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:34,512 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:34,512 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:34,514 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:34,515 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:34,515 models 570 138242068317888 Initial state: caller=1107, callee=1066, duration=4, total_cost=0.00
INFO 2024-10-01 17:58:34,518 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:58:34,519 models 570 138242068317888 Before determining country, Caller: 1107, Callee: 1066
INFO 2024-10-01 17:58:34,520 utils 570 138242068317888 Original number: 1066
INFO 2024-10-01 17:58:34,520 utils 570 138242068317888 Cleaned number: 1066
INFO 2024-10-01 17:58:34,521 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:34,521 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:34,521 models 570 138242068317888 Categorizing call for number: 1066
INFO 2024-10-01 17:58:34,523 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:34,526 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:34,528 models 570 138242068317888 Match found: 1066 matches ^\d{4}$
INFO 2024-10-01 17:58:34,529 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:34,530 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:34,530 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 17:58:34,530 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:34,530 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:34,531 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:34,532 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:34,532 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:34,536 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:34,537 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:34,541 models 570 138242068317888 Found extension: 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:34,543 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:34,547 models 570 138242068317888 Quota for 1107 - Raha Sakaka (Smasco): Last reset: 2024-09-15 06:34:33.264563+00:00, Next reset: 2024-10-15 06:34:33.264563+00:00, Current time: 2024-10-01 14:58:34.545233+00:00, Should reset: False
INFO 2024-10-01 17:58:34,548 models 570 138242068317888 Quota reset not needed for 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:34,548 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:34,549 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:34,549 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:34,550 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:34,550 socket_server 570 138242068317888 Saved call record for company Smasco: 1107 -> 1066 at 2024-10-01 14:58:28+03:00
INFO 2024-10-01 17:58:34,955 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57861) on port 8000
INFO 2024-10-01 17:58:37,910 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:37,6370,7327,,,2024/10/01 14:58:37,TargetNotFound,,,Ext.7327,,,,,Extension,EndCall,,Muhammad Hamza Haider,6370,
INFO 2024-10-01 17:58:37,910 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:37', '6370', '7327', '', '', '2024/10/01 14:58:37', 'TargetNotFound', '', '', 'Ext.7327', '', '', '', '', 'Extension', 'EndCall', '', 'Muhammad Hamza Haider', '6370', '']
INFO 2024-10-01 17:58:37,928 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:37,928 models 570 138242068317888 Initial state: caller=7327, callee=6370, duration=None, total_cost=0.0
INFO 2024-10-01 17:58:37,928 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:58:37,929 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6370
INFO 2024-10-01 17:58:37,929 utils 570 138242068317888 Original number: 6370
INFO 2024-10-01 17:58:37,929 utils 570 138242068317888 Cleaned number: 6370
INFO 2024-10-01 17:58:37,929 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:37,929 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:37,930 models 570 138242068317888 Categorizing call for number: 6370
INFO 2024-10-01 17:58:37,933 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:37,938 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:37,938 models 570 138242068317888 Match found: 6370 matches ^\d{4}$
INFO 2024-10-01 17:58:37,938 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:37,939 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:37,939 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:58:37,939 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:58:37,939 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:37,939 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:37,945 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:37,945 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:37,950 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:37,952 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:37,956 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:58:37.954172+00:00, Should reset: False
INFO 2024-10-01 17:58:37,956 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:37,956 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:37,956 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:37,956 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:37,958 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:37,958 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:37,959 models 570 138242068317888 Initial state: caller=7327, callee=6370, duration=None, total_cost=0.00
INFO 2024-10-01 17:58:37,961 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:58:37,961 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6370
INFO 2024-10-01 17:58:37,962 utils 570 138242068317888 Original number: 6370
INFO 2024-10-01 17:58:37,962 utils 570 138242068317888 Cleaned number: 6370
INFO 2024-10-01 17:58:37,962 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:37,962 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:37,962 models 570 138242068317888 Categorizing call for number: 6370
INFO 2024-10-01 17:58:37,964 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:37,966 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:37,966 models 570 138242068317888 Match found: 6370 matches ^\d{4}$
INFO 2024-10-01 17:58:37,966 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:37,966 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:37,966 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:58:37,967 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:58:37,967 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:37,967 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:37,969 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:37,970 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:37,972 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:37,974 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:37,978 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:58:37.976120+00:00, Should reset: False
INFO 2024-10-01 17:58:37,978 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:58:37,979 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:58:37,979 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:37,979 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:37,980 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:37,980 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 6370 at 2024-10-01 14:58:37+03:00
INFO 2024-10-01 17:58:38,382 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57862) on port 8000
INFO 2024-10-01 17:58:52,097 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:47,1066,1107,00:00:03,2024/10/01 14:58:47,2024/10/01 14:58:51,TerminatedBySrc,,,Ext.1107,Ext.6666,1066,,,Extension,VMail,,Raha Sakaka,,
INFO 2024-10-01 17:58:52,098 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:47', '1066', '1107', '00:00:03', '2024/10/01 14:58:47', '2024/10/01 14:58:51', 'TerminatedBySrc', '', '', 'Ext.1107', 'Ext.6666', '1066', '', '', 'Extension', 'VMail', '', 'Raha Sakaka', '', '']
INFO 2024-10-01 17:58:52,114 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:52,114 models 570 138242068317888 Initial state: caller=1107, callee=1066, duration=3, total_cost=0.0
INFO 2024-10-01 17:58:52,114 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:58:52,115 models 570 138242068317888 Before determining country, Caller: 1107, Callee: 1066
INFO 2024-10-01 17:58:52,115 utils 570 138242068317888 Original number: 1066
INFO 2024-10-01 17:58:52,115 utils 570 138242068317888 Cleaned number: 1066
INFO 2024-10-01 17:58:52,115 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:52,115 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:52,116 models 570 138242068317888 Categorizing call for number: 1066
INFO 2024-10-01 17:58:52,118 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:52,121 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:52,121 models 570 138242068317888 Match found: 1066 matches ^\d{4}$
INFO 2024-10-01 17:58:52,121 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:52,121 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:52,122 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:52,126 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:52,126 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:52,131 models 570 138242068317888 Found extension: 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:52,133 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:52,137 models 570 138242068317888 Quota for 1107 - Raha Sakaka (Smasco): Last reset: 2024-09-15 06:34:33.264563+00:00, Next reset: 2024-10-15 06:34:33.264563+00:00, Current time: 2024-10-01 14:58:52.135024+00:00, Should reset: False
INFO 2024-10-01 17:58:52,137 models 570 138242068317888 Quota reset not needed for 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:52,137 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:52,137 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:52,137 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:52,139 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:52,139 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:52,139 models 570 138242068317888 Initial state: caller=1107, callee=1066, duration=3, total_cost=0.00
INFO 2024-10-01 17:58:52,142 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:58:52,142 models 570 138242068317888 Before determining country, Caller: 1107, Callee: 1066
INFO 2024-10-01 17:58:52,142 utils 570 138242068317888 Original number: 1066
INFO 2024-10-01 17:58:52,142 utils 570 138242068317888 Cleaned number: 1066
INFO 2024-10-01 17:58:52,142 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:52,143 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:52,143 models 570 138242068317888 Categorizing call for number: 1066
INFO 2024-10-01 17:58:52,145 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:52,146 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Match found: 1066 matches ^\d{4}$
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:52,147 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:52,148 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:52,148 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:52,148 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:52,150 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:52,150 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:52,153 models 570 138242068317888 Found extension: 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:52,154 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:52,158 models 570 138242068317888 Quota for 1107 - Raha Sakaka (Smasco): Last reset: 2024-09-15 06:34:33.264563+00:00, Next reset: 2024-10-15 06:34:33.264563+00:00, Current time: 2024-10-01 14:58:52.155936+00:00, Should reset: False
INFO 2024-10-01 17:58:52,158 models 570 138242068317888 Quota reset not needed for 1107 - Raha Sakaka (Smasco)
INFO 2024-10-01 17:58:52,158 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:52,158 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:52,158 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:52,159 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:52,160 socket_server 570 138242068317888 Saved call record for company Smasco: 1107 -> 1066 at 2024-10-01 14:58:47+03:00
INFO 2024-10-01 17:58:52,562 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57874) on port 8000
INFO 2024-10-01 17:58:56,937 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:32,7446,8477,00:00:03,2024/10/01 14:58:52,2024/10/01 14:58:56,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:58:56,937 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:32', '7446', '8477', '00:00:03', '2024/10/01 14:58:52', '2024/10/01 14:58:56', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:58:56,955 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:56,955 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=3, total_cost=0.0
INFO 2024-10-01 17:58:56,955 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:58:56,956 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:58:56,956 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:58:56,956 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:58:56,956 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:56,956 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:56,957 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:58:56,959 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:56,961 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:56,962 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:56,963 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:56,963 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:56,963 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:56,965 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:56,965 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:56,970 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:58:56,972 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:56,976 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:58:56.974509+00:00, Should reset: False
INFO 2024-10-01 17:58:56,977 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:58:56,977 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:56,977 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:56,977 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:56,979 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:56,980 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:58:56,980 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=3, total_cost=0.00
INFO 2024-10-01 17:58:56,983 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:58:56,983 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:58:56,983 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:58:56,984 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:58:56,984 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:58:56,984 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:58:56,984 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:58:56,986 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:58:56,987 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:58:56,987 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:58:56,988 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:58:56,988 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:58:56,988 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:58:56,988 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:58:56,988 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:58:56,989 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:58:56,989 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:58:56,989 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:58:56,991 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:58:56,991 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:58:56,993 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:58:56,995 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:56,998 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:58:56.996363+00:00, Should reset: False
INFO 2024-10-01 17:58:56,998 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:58:56,998 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:58:56,998 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:58:56,999 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:58:57,000 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:58:57,000 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:58:32+03:00
INFO 2024-10-01 17:58:57,395 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57878) on port 8000
INFO 2024-10-01 17:59:12,630 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:48,6730,7327,00:00:03,2024/10/01 14:59:08,2024/10/01 14:59:11,TerminatedBySrc,,,Ext.7327,Ext.6666,6730,,,Extension,VMail,,Muhammad Hamza Haider,,
INFO 2024-10-01 17:59:12,630 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:48', '6730', '7327', '00:00:03', '2024/10/01 14:59:08', '2024/10/01 14:59:11', 'TerminatedBySrc', '', '', 'Ext.7327', 'Ext.6666', '6730', '', '', 'Extension', 'VMail', '', 'Muhammad Hamza Haider', '', '']
INFO 2024-10-01 17:59:12,651 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:12,651 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=3, total_cost=0.0
INFO 2024-10-01 17:59:12,651 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:12,651 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 17:59:12,652 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 17:59:12,653 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 17:59:12,653 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:59:12,653 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:12,653 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 17:59:12,657 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:12,660 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:12,660 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 17:59:12,660 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:59:12,660 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:12,661 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:12,665 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:12,666 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:12,671 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:59:12,678 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:12,684 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:59:12.681382+00:00, Should reset: False
INFO 2024-10-01 17:59:12,685 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:59:12,685 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:12,686 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:12,687 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:12,690 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:12,690 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:12,691 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=3, total_cost=0.00
INFO 2024-10-01 17:59:12,694 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:12,695 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 17:59:12,695 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 17:59:12,696 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 17:59:12,696 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:59:12,697 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:12,697 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 17:59:12,700 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:12,703 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:12,703 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 17:59:12,704 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:59:12,704 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:12,704 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 17:59:12,704 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:59:12,705 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:59:12,706 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:59:12,706 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:12,706 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:12,710 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:12,711 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:12,715 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:59:12,718 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:12,723 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 14:59:12.720665+00:00, Should reset: False
INFO 2024-10-01 17:59:12,724 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 17:59:12,724 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:12,724 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:12,724 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:12,725 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:12,727 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 6730 at 2024-10-01 14:58:48+03:00
INFO 2024-10-01 17:59:13,120 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57880) on port 8000
INFO 2024-10-01 17:59:13,265 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:57:05,0544156688,7791,,,2024/10/01 14:59:12,Failed,,,Ext.7791,0544156688,0544156688,,,Extension,LineSet,,Arwa Almagli,0544156688,
INFO 2024-10-01 17:59:13,265 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:57:05', '0544156688', '7791', '', '', '2024/10/01 14:59:12', 'Failed', '', '', 'Ext.7791', '0544156688', '0544156688', '', '', 'Extension', 'LineSet', '', 'Arwa Almagli', '0544156688', '']
INFO 2024-10-01 17:59:13,280 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:13,280 models 570 138242068317888 Initial state: caller=7791, callee=0544156688, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:13,281 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:13,281 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0544156688
INFO 2024-10-01 17:59:13,281 utils 570 138242068317888 Original number: 0544156688
INFO 2024-10-01 17:59:13,281 utils 570 138242068317888 Cleaned number: 0544156688
INFO 2024-10-01 17:59:13,281 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:13,282 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:13,282 models 570 138242068317888 Categorizing call for number: 0544156688
INFO 2024-10-01 17:59:13,284 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:13,287 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:13,287 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:13,290 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:13,290 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:13,290 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:13,290 models 570 138242068317888 Match found: 0544156688 matches 05
INFO 2024-10-01 17:59:13,291 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:13,291 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:13,291 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:13,291 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:13,291 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:13,294 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:13,297 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:13,298 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:13,301 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:59:13,303 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:13,306 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:59:13.304961+00:00, Should reset: False
INFO 2024-10-01 17:59:13,307 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:59:13,307 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:13,307 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:13,307 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:13,309 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:13,309 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:13,309 models 570 138242068317888 Initial state: caller=7791, callee=0544156688, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:13,311 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:13,312 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0544156688
INFO 2024-10-01 17:59:13,312 utils 570 138242068317888 Original number: 0544156688
INFO 2024-10-01 17:59:13,312 utils 570 138242068317888 Cleaned number: 0544156688
INFO 2024-10-01 17:59:13,312 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:13,312 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:13,312 models 570 138242068317888 Categorizing call for number: 0544156688
INFO 2024-10-01 17:59:13,314 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:13,316 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:13,316 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:13,316 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:13,316 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:13,316 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:13,317 models 570 138242068317888 Match found: 0544156688 matches 05
INFO 2024-10-01 17:59:13,317 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:13,317 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:13,317 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:13,317 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:13,317 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:13,318 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:13,320 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:13,320 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:13,322 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:59:13,324 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:13,327 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 14:59:13.325396+00:00, Should reset: False
INFO 2024-10-01 17:59:13,327 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 17:59:13,327 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:13,327 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:13,328 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:13,329 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:13,329 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0544156688 at 2024-10-01 14:57:05+03:00
INFO 2024-10-01 17:59:13,732 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57881) on port 8000
INFO 2024-10-01 17:59:14,191 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:58:02,0536059132,7438,,,2024/10/01 14:59:13,Failed,,,Ext.7438,0536059132,0536059132,,,Extension,LineSet,,Milly Rebecca,0536059132,
INFO 2024-10-01 17:59:14,192 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:58:02', '0536059132', '7438', '', '', '2024/10/01 14:59:13', 'Failed', '', '', 'Ext.7438', '0536059132', '0536059132', '', '', 'Extension', 'LineSet', '', 'Milly Rebecca', '0536059132', '']
INFO 2024-10-01 17:59:14,207 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:14,207 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:14,208 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:14,208 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 17:59:14,208 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 17:59:14,208 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 17:59:14,208 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:14,208 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:14,209 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 17:59:14,211 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:14,213 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:14,213 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:14,214 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:14,214 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:14,214 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:14,214 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 17:59:14,214 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:14,215 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:14,215 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:14,215 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:14,215 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:14,215 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:14,217 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:14,217 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:14,221 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:14,222 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:14,225 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 14:59:14.224199+00:00, Should reset: False
INFO 2024-10-01 17:59:14,226 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:14,226 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:14,226 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:14,226 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:14,228 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:14,228 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:14,228 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:14,231 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:14,231 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 17:59:14,231 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 17:59:14,231 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 17:59:14,231 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:14,231 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:14,232 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 17:59:14,233 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:14,235 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:14,235 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:14,235 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:14,235 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:14,235 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:14,236 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 17:59:14,236 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:14,236 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:14,236 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:14,236 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:14,236 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:14,237 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:14,238 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:14,239 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:14,241 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:14,242 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:14,245 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 14:59:14.243912+00:00, Should reset: False
INFO 2024-10-01 17:59:14,246 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:14,246 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:14,246 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:14,246 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:14,247 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:14,247 socket_server 570 138242068317888 Saved call record for company Smasco: 7438 -> 0536059132 at 2024-10-01 14:58:02+03:00
INFO 2024-10-01 17:59:14,640 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57882) on port 8000
INFO 2024-10-01 17:59:15,215 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:56:58,0534610836,8426,00:01:52,2024/10/01 14:57:22,2024/10/01 14:59:14,TerminatedByDst,,,Ext.8426,0534610836,10001,,,Extension,Line,,Rehan Khan Mohammed,0534610836,
INFO 2024-10-01 17:59:15,215 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:56:58', '0534610836', '8426', '00:01:52', '2024/10/01 14:57:22', '2024/10/01 14:59:14', 'TerminatedByDst', '', '', 'Ext.8426', '0534610836', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0534610836', '']
INFO 2024-10-01 17:59:15,234 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:15,235 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=112, total_cost=0.0
INFO 2024-10-01 17:59:15,235 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:15,235 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:59:15,235 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:59:15,236 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:59:15,236 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:15,237 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:15,237 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:59:15,240 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:15,242 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:15,243 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:15,243 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Calculating total cost for call: duration=112 seconds
INFO 2024-10-01 17:59:15,244 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:59:15,246 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:59:15,246 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:59:15,246 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 17:59:15,247 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:15,249 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:15,249 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:15,254 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:59:15,256 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:15,260 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:59:15.258304+00:00, Should reset: False
INFO 2024-10-01 17:59:15,260 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:59:15,261 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:15,261 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 17:59:15,261 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 17:59:15,261 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 17:59:15,262 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 17:59:15,264 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:15,264 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:15,265 models 570 138242068317888 Initial state: caller=8426, callee=0534610836, duration=112, total_cost=0.80
INFO 2024-10-01 17:59:15,267 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 17:59:15,268 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0534610836
INFO 2024-10-01 17:59:15,268 utils 570 138242068317888 Original number: 0534610836
INFO 2024-10-01 17:59:15,268 utils 570 138242068317888 Cleaned number: 0534610836
INFO 2024-10-01 17:59:15,268 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:15,268 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:15,268 models 570 138242068317888 Categorizing call for number: 0534610836
INFO 2024-10-01 17:59:15,271 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:15,273 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:15,273 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Match found: 0534610836 matches 05
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:15,274 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:15,275 models 570 138242068317888 Calculating total cost for call: duration=112 seconds
INFO 2024-10-01 17:59:15,276 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 17:59:15,276 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 17:59:15,276 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 17:59:15,277 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 17:59:15,277 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:15,279 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:15,280 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 17:59:15,283 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:59:15,285 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:15,288 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 14:59:15.286824+00:00, Should reset: False
INFO 2024-10-01 17:59:15,289 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 17:59:15,289 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 17:59:15,289 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:15,290 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:15,291 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:15,292 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0534610836 at 2024-10-01 14:56:58+03:00
INFO 2024-10-01 17:59:15,696 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57883) on port 8000
INFO 2024-10-01 17:59:20,546 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:57:30,0557201225,7849,,,2024/10/01 14:59:19,Failed,,,Ext.7849,0557201225,0557201225,,,Extension,LineSet,,Hamed Muhayawi,0557201225,
INFO 2024-10-01 17:59:20,547 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:57:30', '0557201225', '7849', '', '', '2024/10/01 14:59:19', 'Failed', '', '', 'Ext.7849', '0557201225', '0557201225', '', '', 'Extension', 'LineSet', '', 'Hamed Muhayawi', '0557201225', '']
INFO 2024-10-01 17:59:20,566 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:20,567 models 570 138242068317888 Initial state: caller=7849, callee=0557201225, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:20,567 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:20,567 models 570 138242068317888 Before determining country, Caller: 7849, Callee: 0557201225
INFO 2024-10-01 17:59:20,567 utils 570 138242068317888 Original number: 0557201225
INFO 2024-10-01 17:59:20,567 utils 570 138242068317888 Cleaned number: 0557201225
INFO 2024-10-01 17:59:20,569 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:20,569 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:20,570 models 570 138242068317888 Categorizing call for number: 0557201225
INFO 2024-10-01 17:59:20,573 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:20,576 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:20,576 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:20,577 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:20,577 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:20,577 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:20,577 models 570 138242068317888 Match found: 0557201225 matches 05
INFO 2024-10-01 17:59:20,577 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:20,578 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:20,579 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:20,579 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:20,580 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:20,580 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:20,583 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:20,584 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:20,588 models 570 138242068317888 Found extension: 7849 - Hamed Muhayawi (Smasco)
INFO 2024-10-01 17:59:20,591 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 41.60
INFO 2024-10-01 17:59:20,595 models 570 138242068317888 Quota for 7849 - Hamed Muhayawi (Smasco): Last reset: 2024-09-15 06:35:25.508396+00:00, Next reset: 2024-10-15 06:35:25.508396+00:00, Current time: 2024-10-01 14:59:20.593476+00:00, Should reset: False
INFO 2024-10-01 17:59:20,596 models 570 138242068317888 Quota reset not needed for 7849 - Hamed Muhayawi (Smasco)
INFO 2024-10-01 17:59:20,596 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 41.60
INFO 2024-10-01 17:59:20,596 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:20,597 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:20,599 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:20,599 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:20,600 models 570 138242068317888 Initial state: caller=7849, callee=0557201225, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:20,603 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:20,603 models 570 138242068317888 Before determining country, Caller: 7849, Callee: 0557201225
INFO 2024-10-01 17:59:20,604 utils 570 138242068317888 Original number: 0557201225
INFO 2024-10-01 17:59:20,604 utils 570 138242068317888 Cleaned number: 0557201225
INFO 2024-10-01 17:59:20,605 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:20,605 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:20,606 models 570 138242068317888 Categorizing call for number: 0557201225
INFO 2024-10-01 17:59:20,609 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:20,612 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:20,612 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:20,613 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Match found: 0557201225 matches 05
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:20,614 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:20,615 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:20,615 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:20,615 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:20,618 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:20,618 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:20,622 models 570 138242068317888 Found extension: 7849 - Hamed Muhayawi (Smasco)
INFO 2024-10-01 17:59:20,624 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 41.60
INFO 2024-10-01 17:59:20,628 models 570 138242068317888 Quota for 7849 - Hamed Muhayawi (Smasco): Last reset: 2024-09-15 06:35:25.508396+00:00, Next reset: 2024-10-15 06:35:25.508396+00:00, Current time: 2024-10-01 14:59:20.625930+00:00, Should reset: False
INFO 2024-10-01 17:59:20,628 models 570 138242068317888 Quota reset not needed for 7849 - Hamed Muhayawi (Smasco)
INFO 2024-10-01 17:59:20,628 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 41.60
INFO 2024-10-01 17:59:20,629 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:20,629 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:20,630 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:20,630 socket_server 570 138242068317888 Saved call record for company Smasco: 7849 -> 0557201225 at 2024-10-01 14:57:30+03:00
INFO 2024-10-01 17:59:21,038 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57888) on port 8000
INFO 2024-10-01 17:59:38,843 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:02,7446,8477,00:00:15,2024/10/01 14:59:22,2024/10/01 14:59:38,TerminatedBySrc,,,Ext.8477,Ext.6666,7446,,,Extension,VMail,,Felmban Dana,,
INFO 2024-10-01 17:59:38,843 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:02', '7446', '8477', '00:00:15', '2024/10/01 14:59:22', '2024/10/01 14:59:38', 'TerminatedBySrc', '', '', 'Ext.8477', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Felmban Dana', '', '']
INFO 2024-10-01 17:59:38,864 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:38,865 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=15, total_cost=0.0
INFO 2024-10-01 17:59:38,865 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:38,865 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:59:38,865 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:59:38,866 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:59:38,866 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:59:38,866 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:38,866 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:59:38,868 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:38,871 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Calculating total cost for call: duration=15 seconds
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:59:38,872 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:59:38,877 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:59:38,877 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:38,877 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:38,882 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:38,882 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:38,886 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:59:38,887 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:59:38,891 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:59:38.889774+00:00, Should reset: False
INFO 2024-10-01 17:59:38,891 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:59:38,892 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:59:38,892 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:38,892 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:38,894 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:38,894 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:38,894 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=15, total_cost=0.00
INFO 2024-10-01 17:59:38,897 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:38,897 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 17:59:38,897 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 17:59:38,897 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 17:59:38,897 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 17:59:38,897 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:38,898 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 17:59:38,899 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:38,901 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:38,901 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 17:59:38,901 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 17:59:38,901 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 Calculating total cost for call: duration=15 seconds
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:38,902 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:38,904 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:38,905 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:38,907 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:59:38,908 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:59:38,911 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 14:59:38.910082+00:00, Should reset: False
INFO 2024-10-01 17:59:38,912 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 17:59:38,912 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 17:59:38,912 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:38,912 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:38,913 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:38,914 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:59:02+03:00
INFO 2024-10-01 17:59:39,307 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57892) on port 8000
INFO 2024-10-01 17:59:47,356 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:16,0536059132,7438,,,2024/10/01 14:59:46,Failed,,,Ext.7438,0536059132,0536059132,,,Extension,LineSet,,Milly Rebecca,0536059132,
INFO 2024-10-01 17:59:47,356 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:16', '0536059132', '7438', '', '', '2024/10/01 14:59:46', 'Failed', '', '', 'Ext.7438', '0536059132', '0536059132', '', '', 'Extension', 'LineSet', '', 'Milly Rebecca', '0536059132', '']
INFO 2024-10-01 17:59:47,374 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:47,374 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:47,374 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:47,375 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 17:59:47,375 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 17:59:47,375 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 17:59:47,375 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:47,375 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:47,376 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 17:59:47,378 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:47,380 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:47,380 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:47,380 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:47,381 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:47,382 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:47,382 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:47,382 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:47,384 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:47,384 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:47,388 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:47,389 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:47,393 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 14:59:47.391271+00:00, Should reset: False
INFO 2024-10-01 17:59:47,393 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:47,393 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:47,394 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:47,394 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:47,396 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:47,396 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:47,396 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:47,398 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:47,399 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 17:59:47,399 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 17:59:47,399 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 17:59:47,399 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:47,399 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:47,400 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 17:59:47,402 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:47,403 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:47,403 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:47,404 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:47,404 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:47,404 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:47,404 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 17:59:47,404 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:47,405 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:47,405 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:47,405 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:47,405 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:47,406 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:47,408 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:47,409 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:47,412 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:47,413 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:47,416 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 14:59:47.414825+00:00, Should reset: False
INFO 2024-10-01 17:59:47,416 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 17:59:47,417 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 17:59:47,417 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:47,417 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:47,418 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:47,419 socket_server 570 138242068317888 Saved call record for company Smasco: 7438 -> 0536059132 at 2024-10-01 14:59:16+03:00
INFO 2024-10-01 17:59:47,816 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57896) on port 8000
INFO 2024-10-01 17:59:54,301 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:48,0537085298,1134,,,2024/10/01 14:59:53,Failed,,,Ext.1134,0537085298,0537085298,,,Extension,LineSet,,Afrah Almantshri,0537085298,
INFO 2024-10-01 17:59:54,302 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:48', '0537085298', '1134', '', '', '2024/10/01 14:59:53', 'Failed', '', '', 'Ext.1134', '0537085298', '0537085298', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0537085298', '']
INFO 2024-10-01 17:59:54,320 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:54,321 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:54,321 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:54,321 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 17:59:54,322 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 17:59:54,322 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 17:59:54,322 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:54,323 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:54,323 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 17:59:54,327 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:54,330 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:54,330 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:54,330 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:54,331 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:54,331 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:54,331 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 17:59:54,331 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:54,332 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:54,332 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:54,332 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:54,332 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:54,333 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:54,336 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:54,336 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:59:54,340 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:59:54,343 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:54,344 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:54,344 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:54,348 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:54,348 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 17:59:54,349 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 17:59:54,349 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 17:59:54,349 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:54,350 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:54,350 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 17:59:54,353 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:54,355 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:54,356 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:54,356 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:54,357 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:54,357 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:54,357 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 17:59:54,357 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:54,358 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:54,358 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:54,358 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:54,358 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:54,359 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:54,362 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:54,362 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 17:59:54,364 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 17:59:54,366 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:54,367 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0537085298 at 2024-10-01 14:59:48+03:00
INFO 2024-10-01 17:59:54,777 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57897) on port 8000
INFO 2024-10-01 17:59:57,082 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:05,0571678029,7301,,,2024/10/01 14:59:56,Failed,,,Ext.7301,0571678029,0571678029,,,Extension,LineSet,,Muhammed Sahail,0571678029,
INFO 2024-10-01 17:59:57,082 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:05', '0571678029', '7301', '', '', '2024/10/01 14:59:56', 'Failed', '', '', 'Ext.7301', '0571678029', '0571678029', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0571678029', '']
INFO 2024-10-01 17:59:57,107 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:57,107 models 570 138242068317888 Initial state: caller=7301, callee=0571678029, duration=None, total_cost=0.0
INFO 2024-10-01 17:59:57,108 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 17:59:57,109 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0571678029
INFO 2024-10-01 17:59:57,109 utils 570 138242068317888 Original number: 0571678029
INFO 2024-10-01 17:59:57,110 utils 570 138242068317888 Cleaned number: 0571678029
INFO 2024-10-01 17:59:57,110 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:57,110 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:57,111 models 570 138242068317888 Categorizing call for number: 0571678029
INFO 2024-10-01 17:59:57,114 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:57,117 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:57,117 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:57,118 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:57,118 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:57,119 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:57,119 models 570 138242068317888 Match found: 0571678029 matches 05
INFO 2024-10-01 17:59:57,120 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:57,120 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:57,121 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:57,121 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:57,122 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:57,122 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:57,125 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:57,126 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:57,130 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:59:57,133 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:59:57,138 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:59:57.135421+00:00, Should reset: False
INFO 2024-10-01 17:59:57,138 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:59:57,138 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:59:57,138 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:57,138 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:57,141 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:57,142 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 17:59:57,142 models 570 138242068317888 Initial state: caller=7301, callee=0571678029, duration=None, total_cost=0.00
INFO 2024-10-01 17:59:57,146 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 17:59:57,147 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0571678029
INFO 2024-10-01 17:59:57,147 utils 570 138242068317888 Original number: 0571678029
INFO 2024-10-01 17:59:57,148 utils 570 138242068317888 Cleaned number: 0571678029
INFO 2024-10-01 17:59:57,148 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 17:59:57,149 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 17:59:57,149 models 570 138242068317888 Categorizing call for number: 0571678029
INFO 2024-10-01 17:59:57,152 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 17:59:57,154 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 17:59:57,154 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 17:59:57,154 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Match found: 0571678029 matches 05
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 17:59:57,155 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 17:59:57,156 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 17:59:57,156 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 17:59:57,156 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 17:59:57,159 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 17:59:57,159 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 17:59:57,163 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:59:57,164 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:59:57,170 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 14:59:57.167793+00:00, Should reset: False
INFO 2024-10-01 17:59:57,171 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 17:59:57,171 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 17:59:57,171 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 17:59:57,171 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 17:59:57,173 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 17:59:57,173 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0571678029 at 2024-10-01 14:59:05+03:00
INFO 2024-10-01 17:59:57,586 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57899) on port 8000
INFO 2024-10-01 18:00:02,791 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:56,0537085298,1134,,,2024/10/01 15:00:02,Failed,,,Ext.1134,0537085298,0537085298,,,Extension,LineSet,,Afrah Almantshri,0537085298,
INFO 2024-10-01 18:00:02,792 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:56', '0537085298', '1134', '', '', '2024/10/01 15:00:02', 'Failed', '', '', 'Ext.1134', '0537085298', '0537085298', '', '', 'Extension', 'LineSet', '', 'Afrah Almantshri', '0537085298', '']
INFO 2024-10-01 18:00:02,808 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:02,808 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.0
INFO 2024-10-01 18:00:02,809 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:00:02,809 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 18:00:02,809 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 18:00:02,809 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 18:00:02,810 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:02,810 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:02,810 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 18:00:02,813 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:02,815 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:02,815 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:02,816 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:02,816 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:02,816 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:02,816 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 18:00:02,817 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:02,817 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:02,817 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:00:02,817 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:00:02,817 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:00:02,818 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:02,820 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:02,820 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:00:02,822 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 18:00:02,824 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:02,825 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:02,825 models 570 138242068317888 Initial state: caller=1134, callee=0537085298, duration=None, total_cost=0.00
INFO 2024-10-01 18:00:02,828 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:00:02,828 models 570 138242068317888 Before determining country, Caller: 1134, Callee: 0537085298
INFO 2024-10-01 18:00:02,828 utils 570 138242068317888 Original number: 0537085298
INFO 2024-10-01 18:00:02,828 utils 570 138242068317888 Cleaned number: 0537085298
INFO 2024-10-01 18:00:02,828 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:02,829 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:02,829 models 570 138242068317888 Categorizing call for number: 0537085298
INFO 2024-10-01 18:00:02,831 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:02,834 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:02,834 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:02,834 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:02,837 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:02,837 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:02,837 models 570 138242068317888 Match found: 0537085298 matches 05
INFO 2024-10-01 18:00:02,837 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:02,838 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:02,838 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:00:02,838 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:00:02,838 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:00:02,838 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:02,844 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:02,845 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:00:02,847 models 570 138242068317888 Warning: No extension found for 1134
INFO 2024-10-01 18:00:02,848 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:02,848 socket_server 570 138242068317888 Saved call record for company Smasco: 1134 -> 0537085298 at 2024-10-01 14:59:56+03:00
INFO 2024-10-01 18:00:03,252 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57903) on port 8000
INFO 2024-10-01 18:00:23,142 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:00:10,0504933490,7189,00:00:05,2024/10/01 15:00:16,2024/10/01 15:00:22,TerminatedByDst,,,Ext.7189,0504933490,10001,,,Extension,Line,,Maryam Almutairi,0504933490,
INFO 2024-10-01 18:00:23,142 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:00:10', '0504933490', '7189', '00:00:05', '2024/10/01 15:00:16', '2024/10/01 15:00:22', 'TerminatedByDst', '', '', 'Ext.7189', '0504933490', '10001', '', '', 'Extension', 'Line', '', 'Maryam Almutairi', '0504933490', '']
INFO 2024-10-01 18:00:23,165 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:23,165 models 570 138242068317888 Initial state: caller=7189, callee=0504933490, duration=5, total_cost=0.0
INFO 2024-10-01 18:00:23,166 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:00:23,166 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0504933490
INFO 2024-10-01 18:00:23,166 utils 570 138242068317888 Original number: 0504933490
INFO 2024-10-01 18:00:23,166 utils 570 138242068317888 Cleaned number: 0504933490
INFO 2024-10-01 18:00:23,166 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:23,166 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:23,167 models 570 138242068317888 Categorizing call for number: 0504933490
INFO 2024-10-01 18:00:23,172 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:23,175 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:23,176 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:23,176 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:23,176 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Match found: 0504933490 matches 05
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:00:23,177 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:23,178 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:23,178 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:23,178 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:00:23,178 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:23,181 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:23,182 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:00:23,187 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:00:23,190 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:23,195 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 15:00:23.193182+00:00, Should reset: False
INFO 2024-10-01 18:00:23,196 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:00:23,196 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:23,196 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:00:23,196 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:00:23,196 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:00:23,196 models 570 138242068317888 Warning: Quota exceeded for extension 7189
INFO 2024-10-01 18:00:23,199 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:23,200 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:23,200 models 570 138242068317888 Initial state: caller=7189, callee=0504933490, duration=5, total_cost=0.40
INFO 2024-10-01 18:00:23,203 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:00:23,203 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0504933490
INFO 2024-10-01 18:00:23,204 utils 570 138242068317888 Original number: 0504933490
INFO 2024-10-01 18:00:23,204 utils 570 138242068317888 Cleaned number: 0504933490
INFO 2024-10-01 18:00:23,204 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:23,205 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:23,205 models 570 138242068317888 Categorizing call for number: 0504933490
INFO 2024-10-01 18:00:23,207 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:23,209 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:23,209 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:23,210 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:23,210 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:23,210 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:23,210 models 570 138242068317888 Match found: 0504933490 matches 05
INFO 2024-10-01 18:00:23,210 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:23,211 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:23,211 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:00:23,211 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:23,211 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:23,211 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:23,212 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:00:23,212 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:23,215 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:23,215 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:00:23,218 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:00:23,221 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:23,225 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 15:00:23.223393+00:00, Should reset: False
INFO 2024-10-01 18:00:23,226 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:00:23,227 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:23,227 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:00:23,227 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:00:23,230 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:23,230 socket_server 570 138242068317888 Saved call record for company Smasco: 7189 -> 0504933490 at 2024-10-01 15:00:10+03:00
INFO 2024-10-01 18:00:23,638 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57906) on port 8000
INFO 2024-10-01 18:00:31,508 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:58,0536059132,7438,00:00:23,2024/10/01 15:00:06,2024/10/01 15:00:30,TerminatedBySrc,,,Ext.7438,0536059132,10001,,,Extension,Line,,Milly Rebecca,0536059132,
INFO 2024-10-01 18:00:31,509 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:58', '0536059132', '7438', '00:00:23', '2024/10/01 15:00:06', '2024/10/01 15:00:30', 'TerminatedBySrc', '', '', 'Ext.7438', '0536059132', '10001', '', '', 'Extension', 'Line', '', 'Milly Rebecca', '0536059132', '']
INFO 2024-10-01 18:00:31,531 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:31,531 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=23, total_cost=0.0
INFO 2024-10-01 18:00:31,532 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:00:31,532 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 18:00:31,532 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 18:00:31,532 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 18:00:31,533 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:31,533 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:31,533 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 18:00:31,538 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:31,540 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:31,541 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:31,542 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:31,542 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:31,542 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:31,542 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 18:00:31,543 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:31,543 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:31,543 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 18:00:31,543 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:31,543 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:31,544 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:31,544 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:00:31,544 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:31,546 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:31,547 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:00:31,550 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 18:00:31,552 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 18:00:31,556 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 15:00:31.554492+00:00, Should reset: False
INFO 2024-10-01 18:00:31,557 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 18:00:31,557 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 18:00:31,557 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:00:31,557 models 570 138242068317888 Attempting to deduct 0.40 from balance 18.80
INFO 2024-10-01 18:00:31,559 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 18.40
INFO 2024-10-01 18:00:31,559 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 18.40
INFO 2024-10-01 18:00:31,561 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:31,562 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:31,562 models 570 138242068317888 Initial state: caller=7438, callee=0536059132, duration=23, total_cost=0.40
INFO 2024-10-01 18:00:31,564 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:00:31,565 models 570 138242068317888 Before determining country, Caller: 7438, Callee: 0536059132
INFO 2024-10-01 18:00:31,565 utils 570 138242068317888 Original number: 0536059132
INFO 2024-10-01 18:00:31,565 utils 570 138242068317888 Cleaned number: 0536059132
INFO 2024-10-01 18:00:31,565 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:31,565 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:31,566 models 570 138242068317888 Categorizing call for number: 0536059132
INFO 2024-10-01 18:00:31,567 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:31,569 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:31,569 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:31,569 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:31,570 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:31,570 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:31,570 models 570 138242068317888 Match found: 0536059132 matches 05
INFO 2024-10-01 18:00:31,570 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:31,570 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:31,571 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 18:00:31,571 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:31,571 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:31,571 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:31,571 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:00:31,572 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:31,574 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:31,574 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:00:31,576 models 570 138242068317888 Found extension: 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 18:00:31,578 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:00:31,581 models 570 138242068317888 Quota for 7438 - Milly Rebecca (Smasco): Last reset: 2024-09-15 06:35:06.066130+00:00, Next reset: 2024-10-15 06:35:06.066130+00:00, Current time: 2024-10-01 15:00:31.579653+00:00, Should reset: False
INFO 2024-10-01 18:00:31,582 models 570 138242068317888 Quota reset not needed for 7438 - Milly Rebecca (Smasco)
INFO 2024-10-01 18:00:31,582 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:00:31,582 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:00:31,582 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:00:31,584 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:31,585 socket_server 570 138242068317888 Saved call record for company Smasco: 7438 -> 0536059132 at 2024-10-01 14:59:58+03:00
INFO 2024-10-01 18:00:32,007 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57907) on port 8000
INFO 2024-10-01 18:00:39,552 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:21,0531675403,8426,00:00:59,2024/10/01 14:59:39,2024/10/01 15:00:38,TerminatedByDst,,,Ext.8426,0531675403,10001,,,Extension,Line,,Rehan Khan Mohammed,0531675403,
INFO 2024-10-01 18:00:39,553 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:21', '0531675403', '8426', '00:00:59', '2024/10/01 14:59:39', '2024/10/01 15:00:38', 'TerminatedByDst', '', '', 'Ext.8426', '0531675403', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0531675403', '']
INFO 2024-10-01 18:00:39,573 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:39,574 models 570 138242068317888 Initial state: caller=8426, callee=0531675403, duration=59, total_cost=0.0
INFO 2024-10-01 18:00:39,574 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:00:39,574 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0531675403
INFO 2024-10-01 18:00:39,575 utils 570 138242068317888 Original number: 0531675403
INFO 2024-10-01 18:00:39,575 utils 570 138242068317888 Cleaned number: 0531675403
INFO 2024-10-01 18:00:39,575 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:39,575 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:39,576 models 570 138242068317888 Categorizing call for number: 0531675403
INFO 2024-10-01 18:00:39,579 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:39,581 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:39,582 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:39,582 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:39,582 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Match found: 0531675403 matches 05
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Calculating total cost for call: duration=59 seconds
INFO 2024-10-01 18:00:39,583 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:39,584 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:39,584 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:39,584 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:00:39,584 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:39,586 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:39,586 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:00:39,590 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:00:39,591 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:39,595 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:00:39.593473+00:00, Should reset: False
INFO 2024-10-01 18:00:39,596 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:00:39,596 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:39,596 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:00:39,596 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:00:39,597 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:00:39,597 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 18:00:39,599 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:39,600 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:00:39,600 models 570 138242068317888 Initial state: caller=8426, callee=0531675403, duration=59, total_cost=0.40
INFO 2024-10-01 18:00:39,603 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:00:39,603 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0531675403
INFO 2024-10-01 18:00:39,604 utils 570 138242068317888 Original number: 0531675403
INFO 2024-10-01 18:00:39,604 utils 570 138242068317888 Cleaned number: 0531675403
INFO 2024-10-01 18:00:39,604 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:00:39,604 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:00:39,605 models 570 138242068317888 Categorizing call for number: 0531675403
INFO 2024-10-01 18:00:39,607 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:00:39,609 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:00:39,609 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Match found: 0531675403 matches 05
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:00:39,610 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 Calculating total cost for call: duration=59 seconds
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:00:39,611 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:00:39,613 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:00:39,614 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:00:39,617 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:00:39,618 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:39,625 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:00:39.621791+00:00, Should reset: False
INFO 2024-10-01 18:00:39,626 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:00:39,626 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:00:39,626 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:00:39,626 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:00:39,628 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:00:39,629 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0531675403 at 2024-10-01 14:59:21+03:00
INFO 2024-10-01 18:00:40,038 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57908) on port 8000
INFO 2024-10-01 18:01:34,059 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:00:45,0540909955,7783,00:00:40,2024/10/01 15:00:52,2024/10/01 15:01:33,TerminatedByDst,,,Ext.7783,0540909955,10001,,,Extension,Line,,Majd Alshehri,0540909955,
INFO 2024-10-01 18:01:34,060 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:00:45', '0540909955', '7783', '00:00:40', '2024/10/01 15:00:52', '2024/10/01 15:01:33', 'TerminatedByDst', '', '', 'Ext.7783', '0540909955', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0540909955', '']
INFO 2024-10-01 18:01:34,077 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:34,077 models 570 138242068317888 Initial state: caller=7783, callee=0540909955, duration=40, total_cost=0.0
INFO 2024-10-01 18:01:34,078 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:01:34,078 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0540909955
INFO 2024-10-01 18:01:34,078 utils 570 138242068317888 Original number: 0540909955
INFO 2024-10-01 18:01:34,078 utils 570 138242068317888 Cleaned number: 0540909955
INFO 2024-10-01 18:01:34,078 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:01:34,079 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:34,079 models 570 138242068317888 Categorizing call for number: 0540909955
INFO 2024-10-01 18:01:34,082 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:34,084 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:34,084 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:01:34,084 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:01:34,085 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:01:34,085 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:01:34,085 models 570 138242068317888 Match found: 0540909955 matches 05
INFO 2024-10-01 18:01:34,085 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:01:34,086 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:34,086 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 18:01:34,086 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:01:34,086 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:01:34,086 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:01:34,087 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:01:34,087 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:34,094 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:34,094 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:01:34,102 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:01:34,104 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 17.20
INFO 2024-10-01 18:01:34,108 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:01:34.105901+00:00, Should reset: False
INFO 2024-10-01 18:01:34,108 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:01:34,108 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 17.20
INFO 2024-10-01 18:01:34,109 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:01:34,109 models 570 138242068317888 Attempting to deduct 0.40 from balance 82.80
INFO 2024-10-01 18:01:34,111 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 82.40
INFO 2024-10-01 18:01:34,111 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 82.40
INFO 2024-10-01 18:01:34,113 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:34,113 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:34,114 models 570 138242068317888 Initial state: caller=7783, callee=0540909955, duration=40, total_cost=0.40
INFO 2024-10-01 18:01:34,116 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:01:34,117 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0540909955
INFO 2024-10-01 18:01:34,117 utils 570 138242068317888 Original number: 0540909955
INFO 2024-10-01 18:01:34,117 utils 570 138242068317888 Cleaned number: 0540909955
INFO 2024-10-01 18:01:34,117 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:01:34,118 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:34,118 models 570 138242068317888 Categorizing call for number: 0540909955
INFO 2024-10-01 18:01:34,120 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:34,122 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:34,123 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:01:34,123 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:01:34,123 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:01:34,123 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:01:34,124 models 570 138242068317888 Match found: 0540909955 matches 05
INFO 2024-10-01 18:01:34,124 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:01:34,124 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:34,124 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 18:01:34,124 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:01:34,125 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:01:34,125 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:01:34,125 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:01:34,125 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:34,127 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:34,128 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:01:34,131 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:01:34,133 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 17.60
INFO 2024-10-01 18:01:34,137 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:01:34.134688+00:00, Should reset: False
INFO 2024-10-01 18:01:34,137 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:01:34,137 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 17.60
INFO 2024-10-01 18:01:34,138 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:01:34,138 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:01:34,140 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:34,140 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0540909955 at 2024-10-01 15:00:45+03:00
INFO 2024-10-01 18:01:34,540 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57924) on port 8000
INFO 2024-10-01 18:01:36,649 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:00:09,0502431053,1159,,,2024/10/01 15:01:35,Failed,,,Ext.1159,0502431053,0502431053,,,Extension,LineSet,,Saad Almasood,0502431053,
INFO 2024-10-01 18:01:36,650 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:00:09', '0502431053', '1159', '', '', '2024/10/01 15:01:35', 'Failed', '', '', 'Ext.1159', '0502431053', '0502431053', '', '', 'Extension', 'LineSet', '', 'Saad Almasood', '0502431053', '']
INFO 2024-10-01 18:01:36,668 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:36,668 models 570 138242068317888 Initial state: caller=1159, callee=0502431053, duration=None, total_cost=0.0
INFO 2024-10-01 18:01:36,669 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:01:36,669 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0502431053
INFO 2024-10-01 18:01:36,669 utils 570 138242068317888 Original number: 0502431053
INFO 2024-10-01 18:01:36,669 utils 570 138242068317888 Cleaned number: 0502431053
INFO 2024-10-01 18:01:36,670 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:01:36,670 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:36,670 models 570 138242068317888 Categorizing call for number: 0502431053
INFO 2024-10-01 18:01:36,673 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:36,675 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:36,675 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:01:36,675 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:01:36,676 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:01:36,676 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:01:36,676 models 570 138242068317888 Match found: 0502431053 matches 05
INFO 2024-10-01 18:01:36,676 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:01:36,676 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:36,677 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:01:36,677 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:01:36,677 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:01:36,677 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:36,680 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:36,680 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:01:36,682 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 18:01:36,685 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:36,685 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:36,685 models 570 138242068317888 Initial state: caller=1159, callee=0502431053, duration=None, total_cost=0.00
INFO 2024-10-01 18:01:36,688 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:01:36,688 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0502431053
INFO 2024-10-01 18:01:36,688 utils 570 138242068317888 Original number: 0502431053
INFO 2024-10-01 18:01:36,689 utils 570 138242068317888 Cleaned number: 0502431053
INFO 2024-10-01 18:01:36,689 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:01:36,689 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:36,689 models 570 138242068317888 Categorizing call for number: 0502431053
INFO 2024-10-01 18:01:36,691 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:36,693 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:36,693 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:01:36,693 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:01:36,694 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:01:36,694 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:01:36,694 models 570 138242068317888 Match found: 0502431053 matches 05
INFO 2024-10-01 18:01:36,695 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:01:36,695 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:36,695 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:01:36,695 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:01:36,696 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:01:36,696 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:36,698 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:36,698 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:01:36,700 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 18:01:36,703 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:36,703 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0502431053 at 2024-10-01 15:00:09+03:00
INFO 2024-10-01 18:01:37,101 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57925) on port 8000
INFO 2024-10-01 18:01:41,887 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:01:18,7484,7495,00:00:02,2024/10/01 15:01:38,2024/10/01 15:01:41,TerminatedBySrc,,,Ext.7495,Ext.6666,7484,,,Extension,VMail,,NOLY MANALO,,
INFO 2024-10-01 18:01:41,887 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:01:18', '7484', '7495', '00:00:02', '2024/10/01 15:01:38', '2024/10/01 15:01:41', 'TerminatedBySrc', '', '', 'Ext.7495', 'Ext.6666', '7484', '', '', 'Extension', 'VMail', '', 'NOLY MANALO', '', '']
INFO 2024-10-01 18:01:41,902 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:41,903 models 570 138242068317888 Initial state: caller=7495, callee=7484, duration=2, total_cost=0.0
INFO 2024-10-01 18:01:41,903 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:01:41,903 models 570 138242068317888 Before determining country, Caller: 7495, Callee: 7484
INFO 2024-10-01 18:01:41,903 utils 570 138242068317888 Original number: 7484
INFO 2024-10-01 18:01:41,904 utils 570 138242068317888 Cleaned number: 7484
INFO 2024-10-01 18:01:41,904 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:01:41,904 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:41,904 models 570 138242068317888 Categorizing call for number: 7484
INFO 2024-10-01 18:01:41,907 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:41,909 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:41,909 models 570 138242068317888 Match found: 7484 matches ^\d{4}$
INFO 2024-10-01 18:01:41,910 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:01:41,910 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:41,910 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:01:41,911 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:01:41,911 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:01:41,911 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:01:41,911 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:01:41,911 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:41,914 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:41,914 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:01:41,918 models 570 138242068317888 Found extension: 7495 - NOLY MANALO (Smasco)
INFO 2024-10-01 18:01:41,919 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:01:41,923 models 570 138242068317888 Quota for 7495 - NOLY MANALO (Smasco): Last reset: 2024-09-15 06:35:15.499896+00:00, Next reset: 2024-10-15 06:35:15.499896+00:00, Current time: 2024-10-01 15:01:41.921539+00:00, Should reset: False
INFO 2024-10-01 18:01:41,923 models 570 138242068317888 Quota reset not needed for 7495 - NOLY MANALO (Smasco)
INFO 2024-10-01 18:01:41,924 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:01:41,924 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:01:41,924 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:01:41,926 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:41,926 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:01:41,926 models 570 138242068317888 Initial state: caller=7495, callee=7484, duration=2, total_cost=0.00
INFO 2024-10-01 18:01:41,929 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:01:41,929 models 570 138242068317888 Before determining country, Caller: 7495, Callee: 7484
INFO 2024-10-01 18:01:41,929 utils 570 138242068317888 Original number: 7484
INFO 2024-10-01 18:01:41,929 utils 570 138242068317888 Cleaned number: 7484
INFO 2024-10-01 18:01:41,930 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:01:41,930 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:01:41,930 models 570 138242068317888 Categorizing call for number: 7484
INFO 2024-10-01 18:01:41,932 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:01:41,933 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:01:41,934 models 570 138242068317888 Match found: 7484 matches ^\d{4}$
INFO 2024-10-01 18:01:41,934 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:01:41,934 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:01:41,934 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:01:41,934 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:01:41,935 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:01:41,935 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:01:41,935 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:01:41,935 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:01:41,937 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:01:41,937 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:01:41,940 models 570 138242068317888 Found extension: 7495 - NOLY MANALO (Smasco)
INFO 2024-10-01 18:01:41,942 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:01:41,945 models 570 138242068317888 Quota for 7495 - NOLY MANALO (Smasco): Last reset: 2024-09-15 06:35:15.499896+00:00, Next reset: 2024-10-15 06:35:15.499896+00:00, Current time: 2024-10-01 15:01:41.943471+00:00, Should reset: False
INFO 2024-10-01 18:01:41,945 models 570 138242068317888 Quota reset not needed for 7495 - NOLY MANALO (Smasco)
INFO 2024-10-01 18:01:41,946 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:01:41,946 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:01:41,946 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:01:41,947 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:01:41,948 socket_server 570 138242068317888 Saved call record for company Smasco: 7495 -> 7484 at 2024-10-01 15:01:18+03:00
INFO 2024-10-01 18:01:42,351 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57927) on port 8000
INFO 2024-10-01 18:02:05,916 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:01:04,8000,10001,00:01:00,2024/10/01 15:01:04,2024/10/01 15:02:05,TerminatedBySrc,,,0558201591,Ext.8000,8000,,,Line,Ivr,,0558201591:Main Number,WelcomeMessage,
INFO 2024-10-01 18:02:05,917 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:01:04', '8000', '10001', '00:01:00', '2024/10/01 15:01:04', '2024/10/01 15:02:05', 'TerminatedBySrc', '', '', '0558201591', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0558201591:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:02:05,932 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:02:05,932 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=60, total_cost=0.0
INFO 2024-10-01 18:02:05,933 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:02:05,933 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:02:05,933 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:02:05,934 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:02:05,934 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:02:05,934 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:02:05,934 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:02:05,937 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:02:05,939 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:02:05,939 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:02:05,939 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:02:05,940 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:02:05,940 models 570 138242068317888 Calculating total cost for call: duration=60 seconds
INFO 2024-10-01 18:02:05,940 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:02:05,940 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:02:05,940 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:02:05,941 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:02:05,941 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:02:05,943 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:02:05,943 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:02:05,946 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:02:05,948 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:02:05,949 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:02:05,949 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=60, total_cost=0.00
INFO 2024-10-01 18:02:05,953 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:02:05,953 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:02:05,954 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:02:05,954 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:02:05,954 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:02:05,954 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:02:05,954 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:02:05,956 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:02:05,958 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:02:05,958 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:02:05,958 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:02:05,958 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:02:05,958 models 570 138242068317888 Calculating total cost for call: duration=60 seconds
INFO 2024-10-01 18:02:05,959 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:02:05,959 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:02:05,959 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:02:05,959 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:02:05,959 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:02:05,961 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:02:05,961 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:02:05,963 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:02:05,965 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:02:05,965 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:01:04+03:00
INFO 2024-10-01 18:02:06,385 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57929) on port 8000
INFO 2024-10-01 18:03:23,434 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:03:16,8000,10001,00:00:05,2024/10/01 15:03:16,2024/10/01 15:03:22,TerminatedBySrc,,,0558201591,Ext.8000,8000,,,Line,Ivr,,0558201591:Main Number,WelcomeMessage,
INFO 2024-10-01 18:03:23,435 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:03:16', '8000', '10001', '00:00:05', '2024/10/01 15:03:16', '2024/10/01 15:03:22', 'TerminatedBySrc', '', '', '0558201591', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0558201591:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:03:23,450 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:23,450 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=5, total_cost=0.0
INFO 2024-10-01 18:03:23,451 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:03:23,451 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:03:23,451 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:03:23,452 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:03:23,452 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:03:23,452 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:23,452 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:03:23,454 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:23,457 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:23,457 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:03:23,457 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:03:23,457 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:23,457 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:03:23,458 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:03:23,458 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:03:23,458 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:03:23,458 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:23,458 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:23,460 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:23,461 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:03:23,463 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:03:23,465 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:23,465 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:23,465 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=5, total_cost=0.00
INFO 2024-10-01 18:03:23,468 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:03:23,468 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:03:23,468 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:03:23,468 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:03:23,468 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:03:23,469 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:23,469 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:03:23,470 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:23,472 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:23,472 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:03:23,472 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:03:23,472 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:23,473 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:23,475 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:23,476 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:03:23,477 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:03:23,479 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:23,479 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:03:16+03:00
INFO 2024-10-01 18:03:23,893 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57946) on port 8000
INFO 2024-10-01 18:03:30,553 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:01:36,0595822253,7790,,,2024/10/01 15:03:29,Failed,,,Ext.7790,0595822253,0595822253,,,Extension,LineSet,,Maram Alharbi,0595822253,
INFO 2024-10-01 18:03:30,554 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:01:36', '0595822253', '7790', '', '', '2024/10/01 15:03:29', 'Failed', '', '', 'Ext.7790', '0595822253', '0595822253', '', '', 'Extension', 'LineSet', '', 'Maram Alharbi', '0595822253', '']
INFO 2024-10-01 18:03:30,592 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:30,593 models 570 138242068317888 Initial state: caller=7790, callee=0595822253, duration=None, total_cost=0.0
INFO 2024-10-01 18:03:30,594 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:03:30,595 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0595822253
INFO 2024-10-01 18:03:30,595 utils 570 138242068317888 Original number: 0595822253
INFO 2024-10-01 18:03:30,595 utils 570 138242068317888 Cleaned number: 0595822253
INFO 2024-10-01 18:03:30,595 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:03:30,595 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:30,595 models 570 138242068317888 Categorizing call for number: 0595822253
INFO 2024-10-01 18:03:30,599 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:30,603 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:30,603 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Match found: 0595822253 matches 05
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:03:30,604 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:30,606 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:03:30,606 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:03:30,607 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:30,607 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:30,610 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:30,611 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:03:30,616 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:03:30,619 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:03:30,629 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:03:30.623548+00:00, Should reset: False
INFO 2024-10-01 18:03:30,630 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:03:30,631 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:03:30,632 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:03:30,633 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:03:30,637 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:30,639 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:30,640 models 570 138242068317888 Initial state: caller=7790, callee=0595822253, duration=None, total_cost=0.00
INFO 2024-10-01 18:03:30,648 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:03:30,649 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0595822253
INFO 2024-10-01 18:03:30,649 utils 570 138242068317888 Original number: 0595822253
INFO 2024-10-01 18:03:30,650 utils 570 138242068317888 Cleaned number: 0595822253
INFO 2024-10-01 18:03:30,651 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:03:30,651 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:30,652 models 570 138242068317888 Categorizing call for number: 0595822253
INFO 2024-10-01 18:03:30,654 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:30,656 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:30,657 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:03:30,658 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:03:30,658 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:03:30,658 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:03:30,658 models 570 138242068317888 Match found: 0595822253 matches 05
INFO 2024-10-01 18:03:30,659 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:03:30,659 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:30,659 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:03:30,659 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:03:30,659 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:30,660 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:30,663 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:30,664 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:03:30,667 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:03:30,670 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:03:30,675 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:03:30.672586+00:00, Should reset: False
INFO 2024-10-01 18:03:30,675 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:03:30,676 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:03:30,676 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:03:30,676 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:03:30,678 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:30,679 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0595822253 at 2024-10-01 15:01:36+03:00
INFO 2024-10-01 18:03:31,087 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57948) on port 8000
INFO 2024-10-01 18:03:39,107 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:02:30,7327,6730,00:01:00,2024/10/01 15:02:37,2024/10/01 15:03:38,TerminatedBySrc,,,Ext.6730,Ext.7327,7327,,,Extension,Extension,,Vijaya krishnan,Muhammad Hamza Haider,
INFO 2024-10-01 18:03:39,107 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:02:30', '7327', '6730', '00:01:00', '2024/10/01 15:02:37', '2024/10/01 15:03:38', 'TerminatedBySrc', '', '', 'Ext.6730', 'Ext.7327', '7327', '', '', 'Extension', 'Extension', '', 'Vijaya krishnan', 'Muhammad Hamza Haider', '']
INFO 2024-10-01 18:03:39,130 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:39,131 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=60, total_cost=0.0
INFO 2024-10-01 18:03:39,131 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:03:39,131 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 18:03:39,132 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:03:39,132 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:03:39,132 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:03:39,132 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:39,132 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:03:39,137 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:39,140 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:39,140 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:03:39,140 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:03:39,141 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:39,141 models 570 138242068317888 Calculating total cost for call: duration=60 seconds
INFO 2024-10-01 18:03:39,141 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:03:39,141 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:03:39,141 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:03:39,142 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:39,142 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:39,144 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:39,145 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:03:39,149 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:03:39,151 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:03:39,154 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 15:03:39.152754+00:00, Should reset: False
INFO 2024-10-01 18:03:39,155 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:03:39,155 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:03:39,155 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:03:39,155 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:03:39,157 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:39,158 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:39,158 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=60, total_cost=0.00
INFO 2024-10-01 18:03:39,161 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:03:39,161 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 18:03:39,161 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:03:39,162 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:03:39,162 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:03:39,162 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:39,162 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:03:39,165 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:39,167 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:39,167 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:03:39,167 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 Calculating total cost for call: duration=60 seconds
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:03:39,168 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:03:39,169 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:39,171 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:39,171 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:03:39,174 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:03:39,176 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:03:39,182 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 15:03:39.178642+00:00, Should reset: False
INFO 2024-10-01 18:03:39,182 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:03:39,182 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:03:39,182 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:03:39,183 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:03:39,184 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:39,184 socket_server 570 138242068317888 Saved call record for company Smasco: 6730 -> 7327 at 2024-10-01 15:02:30+03:00
INFO 2024-10-01 18:03:39,603 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57949) on port 8000
INFO 2024-10-01 18:03:49,028 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:53:28,0590747410,7821,00:10:06,2024/10/01 14:53:41,2024/10/01 15:03:48,TerminatedBySrc,,,Ext.7821,0590747410,10001,,,Extension,Line,,Talal Alzahrani,0590747410,
INFO 2024-10-01 18:03:49,029 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:53:28', '0590747410', '7821', '00:10:06', '2024/10/01 14:53:41', '2024/10/01 15:03:48', 'TerminatedBySrc', '', '', 'Ext.7821', '0590747410', '10001', '', '', 'Extension', 'Line', '', 'Talal Alzahrani', '0590747410', '']
INFO 2024-10-01 18:03:49,048 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:49,049 models 570 138242068317888 Initial state: caller=7821, callee=0590747410, duration=606, total_cost=0.0
INFO 2024-10-01 18:03:49,049 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:03:49,050 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0590747410
INFO 2024-10-01 18:03:49,050 utils 570 138242068317888 Original number: 0590747410
INFO 2024-10-01 18:03:49,051 utils 570 138242068317888 Cleaned number: 0590747410
INFO 2024-10-01 18:03:49,051 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:03:49,051 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:49,051 models 570 138242068317888 Categorizing call for number: 0590747410
INFO 2024-10-01 18:03:49,054 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:49,057 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:49,058 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:03:49,058 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:03:49,059 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:03:49,059 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:03:49,059 models 570 138242068317888 Match found: 0590747410 matches 05
INFO 2024-10-01 18:03:49,059 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:03:49,060 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 Calculating total cost for call: duration=606 seconds
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 Duration in minutes: 11
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 Calculated total cost: 4.40
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=4.40
INFO 2024-10-01 18:03:49,061 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:49,064 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:49,065 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:03:49,069 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:03:49,072 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 10.40
INFO 2024-10-01 18:03:49,076 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:03:49.074206+00:00, Should reset: False
INFO 2024-10-01 18:03:49,077 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:03:49,077 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 10.40
INFO 2024-10-01 18:03:49,077 models 570 138242068317888 Amount to deduct: 4.40
INFO 2024-10-01 18:03:49,078 models 570 138242068317888 Attempting to deduct 4.40 from balance 89.60
INFO 2024-10-01 18:03:49,080 models 570 138242068317888 Successfully deducted 4.40. New remaining balance: 85.20
INFO 2024-10-01 18:03:49,081 models 570 138242068317888 Successfully deducted 4.40 from quota. New balance: 85.20
INFO 2024-10-01 18:03:49,083 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:49,083 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:03:49,083 models 570 138242068317888 Initial state: caller=7821, callee=0590747410, duration=606, total_cost=4.40
INFO 2024-10-01 18:03:49,086 models 570 138242068317888 This is an existing CallRecord. Old total cost: 4.40
INFO 2024-10-01 18:03:49,086 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0590747410
INFO 2024-10-01 18:03:49,087 utils 570 138242068317888 Original number: 0590747410
INFO 2024-10-01 18:03:49,087 utils 570 138242068317888 Cleaned number: 0590747410
INFO 2024-10-01 18:03:49,088 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:03:49,088 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:03:49,088 models 570 138242068317888 Categorizing call for number: 0590747410
INFO 2024-10-01 18:03:49,091 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:03:49,093 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:03:49,093 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Match found: 0590747410 matches 05
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:03:49,094 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:03:49,096 models 570 138242068317888 Calculating total cost for call: duration=606 seconds
INFO 2024-10-01 18:03:49,096 models 570 138242068317888 Duration in minutes: 11
INFO 2024-10-01 18:03:49,097 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:03:49,097 models 570 138242068317888 Calculated total cost: 4.40
INFO 2024-10-01 18:03:49,097 models 570 138242068317888 After cost calculation: old_total_cost=4.40, new_total_cost=4.40
INFO 2024-10-01 18:03:49,097 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:03:49,100 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:03:49,100 models 570 138242068317888 Starting update_user_quota with old_total_cost=4.40
INFO 2024-10-01 18:03:49,103 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:03:49,105 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 14.80
INFO 2024-10-01 18:03:49,109 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:03:49.107312+00:00, Should reset: False
INFO 2024-10-01 18:03:49,110 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:03:49,110 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 14.80
INFO 2024-10-01 18:03:49,111 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:03:49,111 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:03:49,113 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:03:49,113 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> 0590747410 at 2024-10-01 14:53:28+03:00
INFO 2024-10-01 18:03:49,513 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57951) on port 8000
INFO 2024-10-01 18:04:09,988 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:00:17,0573249673,7301,00:03:28,2024/10/01 15:00:41,2024/10/01 15:04:09,TerminatedBySrc,,,Ext.7301,0573249673,10001,,,Extension,Line,,Muhammed Sahail,0573249673,
INFO 2024-10-01 18:04:09,988 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:00:17', '0573249673', '7301', '00:03:28', '2024/10/01 15:00:41', '2024/10/01 15:04:09', 'TerminatedBySrc', '', '', 'Ext.7301', '0573249673', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0573249673', '']
INFO 2024-10-01 18:04:10,007 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:04:10,008 models 570 138242068317888 Initial state: caller=7301, callee=0573249673, duration=208, total_cost=0.0
INFO 2024-10-01 18:04:10,008 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:04:10,008 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0573249673
INFO 2024-10-01 18:04:10,008 utils 570 138242068317888 Original number: 0573249673
INFO 2024-10-01 18:04:10,009 utils 570 138242068317888 Cleaned number: 0573249673
INFO 2024-10-01 18:04:10,009 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:04:10,009 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:04:10,009 models 570 138242068317888 Categorizing call for number: 0573249673
INFO 2024-10-01 18:04:10,012 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:04:10,028 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:04:10,029 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:04:10,029 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:04:10,029 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:04:10,029 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:04:10,030 models 570 138242068317888 Match found: 0573249673 matches 05
INFO 2024-10-01 18:04:10,030 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:04:10,030 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:04:10,030 models 570 138242068317888 Calculating total cost for call: duration=208 seconds
INFO 2024-10-01 18:04:10,030 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:04:10,031 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:04:10,031 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:04:10,031 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:04:10,031 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:04:10,039 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:04:10,039 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:04:10,043 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:04:10,045 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 18:04:10,050 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:04:10.047470+00:00, Should reset: False
INFO 2024-10-01 18:04:10,050 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:04:10,050 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 48.80
INFO 2024-10-01 18:04:10,051 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:04:10,051 models 570 138242068317888 Attempting to deduct 1.60 from balance 51.20
INFO 2024-10-01 18:04:10,053 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 49.60
INFO 2024-10-01 18:04:10,054 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 49.60
INFO 2024-10-01 18:04:10,057 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:04:10,058 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:04:10,058 models 570 138242068317888 Initial state: caller=7301, callee=0573249673, duration=208, total_cost=1.60
INFO 2024-10-01 18:04:10,062 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:04:10,063 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0573249673
INFO 2024-10-01 18:04:10,063 utils 570 138242068317888 Original number: 0573249673
INFO 2024-10-01 18:04:10,063 utils 570 138242068317888 Cleaned number: 0573249673
INFO 2024-10-01 18:04:10,063 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:04:10,064 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:04:10,064 models 570 138242068317888 Categorizing call for number: 0573249673
INFO 2024-10-01 18:04:10,067 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:04:10,069 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:04:10,069 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:04:10,069 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Match found: 0573249673 matches 05
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:04:10,070 models 570 138242068317888 Calculating total cost for call: duration=208 seconds
INFO 2024-10-01 18:04:10,071 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:04:10,071 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:04:10,071 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:04:10,071 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:04:10,071 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:04:10,074 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:04:10,074 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:04:10,077 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:04:10,079 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 50.40
INFO 2024-10-01 18:04:10,083 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:04:10.081033+00:00, Should reset: False
INFO 2024-10-01 18:04:10,083 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:04:10,084 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 50.40
INFO 2024-10-01 18:04:10,084 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:04:10,084 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:04:10,086 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:04:10,086 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0573249673 at 2024-10-01 15:00:17+03:00
INFO 2024-10-01 18:04:10,479 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57952) on port 8000
INFO 2024-10-01 18:04:38,944 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:04:37,0560010629,1170,,,2024/10/01 15:04:38,Failed,,,Ext.1170,0560010629,0560010629,,,Extension,LineSet,,Lena Aldhidan,0560010629,
INFO 2024-10-01 18:04:38,945 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:04:37', '0560010629', '1170', '', '', '2024/10/01 15:04:38', 'Failed', '', '', 'Ext.1170', '0560010629', '0560010629', '', '', 'Extension', 'LineSet', '', 'Lena Aldhidan', '0560010629', '']
INFO 2024-10-01 18:04:38,960 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:04:38,961 models 570 138242068317888 Initial state: caller=1170, callee=0560010629, duration=None, total_cost=0.0
INFO 2024-10-01 18:04:38,961 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:04:38,961 models 570 138242068317888 Before determining country, Caller: 1170, Callee: 0560010629
INFO 2024-10-01 18:04:38,962 utils 570 138242068317888 Original number: 0560010629
INFO 2024-10-01 18:04:38,962 utils 570 138242068317888 Cleaned number: 0560010629
INFO 2024-10-01 18:04:38,962 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:04:38,962 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:04:38,962 models 570 138242068317888 Categorizing call for number: 0560010629
INFO 2024-10-01 18:04:38,970 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:04:38,972 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:04:38,972 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:04:38,973 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:04:38,973 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:04:38,973 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:04:38,973 models 570 138242068317888 Match found: 0560010629 matches 05
INFO 2024-10-01 18:04:38,973 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:04:38,974 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:04:38,974 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:04:38,974 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:04:38,974 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:04:38,974 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:04:38,976 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:04:38,977 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:04:38,979 models 570 138242068317888 Warning: No extension found for 1170
INFO 2024-10-01 18:04:38,981 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:04:38,982 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:04:38,982 models 570 138242068317888 Initial state: caller=1170, callee=0560010629, duration=None, total_cost=0.00
INFO 2024-10-01 18:04:38,984 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:04:38,985 models 570 138242068317888 Before determining country, Caller: 1170, Callee: 0560010629
INFO 2024-10-01 18:04:38,985 utils 570 138242068317888 Original number: 0560010629
INFO 2024-10-01 18:04:38,985 utils 570 138242068317888 Cleaned number: 0560010629
INFO 2024-10-01 18:04:38,985 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:04:38,985 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:04:38,986 models 570 138242068317888 Categorizing call for number: 0560010629
INFO 2024-10-01 18:04:38,987 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:04:38,989 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:04:38,989 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:04:38,989 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Match found: 0560010629 matches 05
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:04:38,990 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:04:38,991 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:04:38,991 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:04:38,991 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:04:38,993 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:04:38,993 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:04:38,995 models 570 138242068317888 Warning: No extension found for 1170
INFO 2024-10-01 18:04:38,996 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:04:38,997 socket_server 570 138242068317888 Saved call record for company Smasco: 1170 -> 0560010629 at 2024-10-01 15:04:37+03:00
INFO 2024-10-01 18:04:39,402 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57958) on port 8000
INFO 2024-10-01 18:05:12,882 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:04:17,8000,10001,00:00:54,2024/10/01 15:04:17,2024/10/01 15:05:12,TerminatedBySrc,,,571678029,Ext.8000,8000,,,Line,Ivr,,571678029:Main Number,WelcomeMessage,
INFO 2024-10-01 18:05:12,883 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:04:17', '8000', '10001', '00:00:54', '2024/10/01 15:04:17', '2024/10/01 15:05:12', 'TerminatedBySrc', '', '', '571678029', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '571678029:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:05:12,898 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:12,898 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=54, total_cost=0.0
INFO 2024-10-01 18:05:12,898 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:05:12,899 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:05:12,899 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:05:12,899 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:05:12,900 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:05:12,900 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:12,900 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:05:12,902 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:12,904 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:12,905 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:05:12,905 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:05:12,905 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:12,905 models 570 138242068317888 Calculating total cost for call: duration=54 seconds
INFO 2024-10-01 18:05:12,906 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:12,906 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:05:12,906 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:05:12,906 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:12,906 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:12,908 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:12,909 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:05:12,911 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:05:12,913 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:12,913 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:12,914 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=54, total_cost=0.00
INFO 2024-10-01 18:05:12,916 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:05:12,916 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:05:12,916 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:05:12,916 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:05:12,917 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:05:12,917 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:12,917 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:05:12,919 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:12,920 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Calculating total cost for call: duration=54 seconds
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:12,921 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:05:12,922 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:05:12,922 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:12,922 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:12,924 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:12,924 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:05:12,925 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:05:12,927 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:12,927 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:04:17+03:00
INFO 2024-10-01 18:05:13,326 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57961) on port 8000
INFO 2024-10-01 18:05:13,466 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:03:06,0544156688,7791,,,2024/10/01 15:05:12,Failed,,,Ext.7791,0544156688,0544156688,,,Extension,LineSet,,Arwa Almagli,0544156688,
INFO 2024-10-01 18:05:13,466 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:03:06', '0544156688', '7791', '', '', '2024/10/01 15:05:12', 'Failed', '', '', 'Ext.7791', '0544156688', '0544156688', '', '', 'Extension', 'LineSet', '', 'Arwa Almagli', '0544156688', '']
INFO 2024-10-01 18:05:13,490 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:13,490 models 570 138242068317888 Initial state: caller=7791, callee=0544156688, duration=None, total_cost=0.0
INFO 2024-10-01 18:05:13,491 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:05:13,491 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0544156688
INFO 2024-10-01 18:05:13,491 utils 570 138242068317888 Original number: 0544156688
INFO 2024-10-01 18:05:13,491 utils 570 138242068317888 Cleaned number: 0544156688
INFO 2024-10-01 18:05:13,492 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:13,493 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:13,493 models 570 138242068317888 Categorizing call for number: 0544156688
INFO 2024-10-01 18:05:13,496 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:13,499 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:13,500 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:13,501 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:13,501 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:13,501 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:13,501 models 570 138242068317888 Match found: 0544156688 matches 05
INFO 2024-10-01 18:05:13,501 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:13,502 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:13,503 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:05:13,503 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:05:13,503 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:13,503 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:13,508 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:13,509 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:05:13,518 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:13,522 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:13,530 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:05:13.525142+00:00, Should reset: False
INFO 2024-10-01 18:05:13,530 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:13,530 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:13,530 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:05:13,530 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:05:13,532 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:13,533 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:13,533 models 570 138242068317888 Initial state: caller=7791, callee=0544156688, duration=None, total_cost=0.00
INFO 2024-10-01 18:05:13,536 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:05:13,537 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0544156688
INFO 2024-10-01 18:05:13,537 utils 570 138242068317888 Original number: 0544156688
INFO 2024-10-01 18:05:13,537 utils 570 138242068317888 Cleaned number: 0544156688
INFO 2024-10-01 18:05:13,538 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:13,538 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:13,538 models 570 138242068317888 Categorizing call for number: 0544156688
INFO 2024-10-01 18:05:13,540 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:13,542 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:13,543 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:13,543 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:13,544 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:13,544 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:13,544 models 570 138242068317888 Match found: 0544156688 matches 05
INFO 2024-10-01 18:05:13,544 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:13,545 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:13,545 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:05:13,545 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:05:13,545 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:13,545 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:13,548 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:13,549 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:05:13,552 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:13,554 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:13,558 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:05:13.556046+00:00, Should reset: False
INFO 2024-10-01 18:05:13,558 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:13,559 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:13,559 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:05:13,559 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:05:13,561 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:13,561 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0544156688 at 2024-10-01 15:03:06+03:00
INFO 2024-10-01 18:05:13,975 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57962) on port 8000
INFO 2024-10-01 18:05:28,869 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:27,0555718101,7791,,,2024/10/01 15:05:28,Failed,,,Ext.7791,0555718101,0555718101,,,Extension,LineSet,,Arwa Almagli,0555718101,
INFO 2024-10-01 18:05:28,869 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:27', '0555718101', '7791', '', '', '2024/10/01 15:05:28', 'Failed', '', '', 'Ext.7791', '0555718101', '0555718101', '', '', 'Extension', 'LineSet', '', 'Arwa Almagli', '0555718101', '']
INFO 2024-10-01 18:05:28,886 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:28,887 models 570 138242068317888 Initial state: caller=7791, callee=0555718101, duration=None, total_cost=0.0
INFO 2024-10-01 18:05:28,887 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:05:28,887 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0555718101
INFO 2024-10-01 18:05:28,887 utils 570 138242068317888 Original number: 0555718101
INFO 2024-10-01 18:05:28,888 utils 570 138242068317888 Cleaned number: 0555718101
INFO 2024-10-01 18:05:28,888 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:28,888 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:28,888 models 570 138242068317888 Categorizing call for number: 0555718101
INFO 2024-10-01 18:05:28,891 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:28,893 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:28,893 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:28,893 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:28,894 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:28,894 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:28,894 models 570 138242068317888 Match found: 0555718101 matches 05
INFO 2024-10-01 18:05:28,894 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:28,895 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:28,895 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:05:28,895 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:05:28,895 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:28,896 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:28,900 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:28,901 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:05:28,905 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:28,906 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:28,910 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:05:28.908497+00:00, Should reset: False
INFO 2024-10-01 18:05:28,910 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:28,911 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:28,911 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:05:28,911 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:05:28,913 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:28,913 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:28,914 models 570 138242068317888 Initial state: caller=7791, callee=0555718101, duration=None, total_cost=0.00
INFO 2024-10-01 18:05:28,917 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:05:28,917 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0555718101
INFO 2024-10-01 18:05:28,917 utils 570 138242068317888 Original number: 0555718101
INFO 2024-10-01 18:05:28,917 utils 570 138242068317888 Cleaned number: 0555718101
INFO 2024-10-01 18:05:28,917 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:28,918 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:28,918 models 570 138242068317888 Categorizing call for number: 0555718101
INFO 2024-10-01 18:05:28,919 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:28,921 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:28,921 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Match found: 0555718101 matches 05
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:28,922 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:28,923 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:05:28,923 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:05:28,923 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:28,923 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:28,925 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:28,925 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:05:28,928 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:28,930 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:28,934 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:05:28.932145+00:00, Should reset: False
INFO 2024-10-01 18:05:28,935 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:05:28,935 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:28,935 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:05:28,935 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:05:28,937 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:28,937 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0555718101 at 2024-10-01 15:05:27+03:00
INFO 2024-10-01 18:05:29,340 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57964) on port 8000
INFO 2024-10-01 18:05:40,860 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:33,8000,10001,00:00:06,2024/10/01 15:05:33,2024/10/01 15:05:40,TerminatedBySrc,,,576990829,Ext.8000,8000,,,Line,Ivr,,576990829:Main Number,WelcomeMessage,
INFO 2024-10-01 18:05:40,860 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:33', '8000', '10001', '00:00:06', '2024/10/01 15:05:33', '2024/10/01 15:05:40', 'TerminatedBySrc', '', '', '576990829', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '576990829:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:05:40,876 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:40,876 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.0
INFO 2024-10-01 18:05:40,877 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:05:40,877 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:05:40,877 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:05:40,877 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:05:40,877 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:05:40,877 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:40,878 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:05:40,880 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:40,883 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:40,883 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:05:40,883 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:05:40,883 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:40,883 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 18:05:40,884 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:40,884 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:05:40,884 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:05:40,884 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:40,884 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:40,887 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:40,887 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:05:40,890 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:05:40,893 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:40,893 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:40,893 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.00
INFO 2024-10-01 18:05:40,896 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:05:40,896 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:05:40,896 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:05:40,896 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:05:40,897 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:05:40,897 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:40,897 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:05:40,899 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:40,900 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:40,901 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:05:40,901 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:05:40,901 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:40,901 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 18:05:40,901 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:40,902 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:05:40,902 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:05:40,902 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:05:40,902 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:40,904 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:40,904 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:05:40,907 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:05:40,909 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:40,911 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:05:33+03:00
INFO 2024-10-01 18:05:41,302 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57967) on port 8000
INFO 2024-10-01 18:05:43,447 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:02,0555006022,7790,00:00:27,2024/10/01 15:05:14,2024/10/01 15:05:42,TerminatedByDst,,,Ext.7790,0555006022,10001,,,Extension,Line,,Maram Alharbi,0555006022,
INFO 2024-10-01 18:05:43,448 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:02', '0555006022', '7790', '00:00:27', '2024/10/01 15:05:14', '2024/10/01 15:05:42', 'TerminatedByDst', '', '', 'Ext.7790', '0555006022', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0555006022', '']
INFO 2024-10-01 18:05:43,463 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:43,463 models 570 138242068317888 Initial state: caller=7790, callee=0555006022, duration=27, total_cost=0.0
INFO 2024-10-01 18:05:43,463 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:05:43,464 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0555006022
INFO 2024-10-01 18:05:43,464 utils 570 138242068317888 Original number: 0555006022
INFO 2024-10-01 18:05:43,464 utils 570 138242068317888 Cleaned number: 0555006022
INFO 2024-10-01 18:05:43,464 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:43,465 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:43,465 models 570 138242068317888 Categorizing call for number: 0555006022
INFO 2024-10-01 18:05:43,467 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:43,469 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:43,470 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:43,470 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:43,470 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:43,470 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:43,470 models 570 138242068317888 Match found: 0555006022 matches 05
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Calculating total cost for call: duration=27 seconds
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:05:43,471 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:05:43,472 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:05:43,472 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:43,474 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:43,474 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:05:43,478 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:05:43,480 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:43,485 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:05:43.482725+00:00, Should reset: False
INFO 2024-10-01 18:05:43,485 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:05:43,485 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:43,485 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:05:43,486 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:05:43,486 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:05:43,486 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:05:43,488 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:43,488 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:05:43,488 models 570 138242068317888 Initial state: caller=7790, callee=0555006022, duration=27, total_cost=0.40
INFO 2024-10-01 18:05:43,491 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:05:43,491 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0555006022
INFO 2024-10-01 18:05:43,491 utils 570 138242068317888 Original number: 0555006022
INFO 2024-10-01 18:05:43,492 utils 570 138242068317888 Cleaned number: 0555006022
INFO 2024-10-01 18:05:43,492 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:05:43,492 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:05:43,492 models 570 138242068317888 Categorizing call for number: 0555006022
INFO 2024-10-01 18:05:43,494 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:05:43,496 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:05:43,496 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:05:43,496 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:05:43,496 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:05:43,496 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Match found: 0555006022 matches 05
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Calculating total cost for call: duration=27 seconds
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:05:43,497 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:05:43,498 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:05:43,498 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:05:43,498 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:05:43,500 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:05:43,500 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:05:43,503 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:05:43,504 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:43,509 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:05:43.506217+00:00, Should reset: False
INFO 2024-10-01 18:05:43,509 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:05:43,510 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:05:43,510 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:05:43,510 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:05:43,512 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:05:43,512 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0555006022 at 2024-10-01 15:05:02+03:00
INFO 2024-10-01 18:05:43,917 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57968) on port 8000
INFO 2024-10-01 18:06:36,057 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:19,0531675403,8426,00:01:08,2024/10/01 15:05:26,2024/10/01 15:06:35,TerminatedByDst,,,Ext.8426,0531675403,10001,,,Extension,Line,,Rehan Khan Mohammed,0531675403,
INFO 2024-10-01 18:06:36,058 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:19', '0531675403', '8426', '00:01:08', '2024/10/01 15:05:26', '2024/10/01 15:06:35', 'TerminatedByDst', '', '', 'Ext.8426', '0531675403', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0531675403', '']
INFO 2024-10-01 18:06:36,075 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:06:36,076 models 570 138242068317888 Initial state: caller=8426, callee=0531675403, duration=68, total_cost=0.0
INFO 2024-10-01 18:06:36,076 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:06:36,076 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0531675403
INFO 2024-10-01 18:06:36,077 utils 570 138242068317888 Original number: 0531675403
INFO 2024-10-01 18:06:36,077 utils 570 138242068317888 Cleaned number: 0531675403
INFO 2024-10-01 18:06:36,077 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:06:36,077 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:06:36,077 models 570 138242068317888 Categorizing call for number: 0531675403
INFO 2024-10-01 18:06:36,080 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:06:36,083 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:06:36,084 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:06:36,084 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:06:36,085 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:06:36,085 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:06:36,085 models 570 138242068317888 Match found: 0531675403 matches 05
INFO 2024-10-01 18:06:36,086 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:06:36,086 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:06:36,086 models 570 138242068317888 Calculating total cost for call: duration=68 seconds
INFO 2024-10-01 18:06:36,087 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:06:36,087 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:06:36,087 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:06:36,087 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:06:36,088 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:06:36,090 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:06:36,091 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:06:36,095 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:06:36,097 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:06:36,102 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:06:36.099805+00:00, Should reset: False
INFO 2024-10-01 18:06:36,102 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:06:36,102 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:06:36,102 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:06:36,103 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 18:06:36,103 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 18:06:36,103 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 18:06:36,105 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:06:36,106 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:06:36,106 models 570 138242068317888 Initial state: caller=8426, callee=0531675403, duration=68, total_cost=0.80
INFO 2024-10-01 18:06:36,109 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:06:36,109 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0531675403
INFO 2024-10-01 18:06:36,110 utils 570 138242068317888 Original number: 0531675403
INFO 2024-10-01 18:06:36,110 utils 570 138242068317888 Cleaned number: 0531675403
INFO 2024-10-01 18:06:36,110 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:06:36,110 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:06:36,110 models 570 138242068317888 Categorizing call for number: 0531675403
INFO 2024-10-01 18:06:36,113 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:06:36,116 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:06:36,116 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:06:36,116 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:06:36,117 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:06:36,118 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:06:36,118 models 570 138242068317888 Match found: 0531675403 matches 05
INFO 2024-10-01 18:06:36,118 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:06:36,118 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:06:36,118 models 570 138242068317888 Calculating total cost for call: duration=68 seconds
INFO 2024-10-01 18:06:36,119 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:06:36,119 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:06:36,119 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:06:36,119 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:06:36,120 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:06:36,123 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:06:36,123 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:06:36,126 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:06:36,128 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:06:36,132 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:06:36.130064+00:00, Should reset: False
INFO 2024-10-01 18:06:36,132 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:06:36,132 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:06:36,133 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:06:36,133 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:06:36,135 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:06:36,135 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0531675403 at 2024-10-01 15:05:19+03:00
INFO 2024-10-01 18:06:36,536 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57986) on port 8000
INFO 2024-10-01 18:07:04,546 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:24,8000,10001,00:01:39,2024/10/01 15:05:24,2024/10/01 15:07:03,TerminatedBySrc,ReplacedDst,,0558201591,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0558201591:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:07:04,546 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:24', '8000', '10001', '00:01:39', '2024/10/01 15:05:24', '2024/10/01 15:07:03', 'TerminatedBySrc', 'ReplacedDst', '', '0558201591', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0558201591:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:07:04,561 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:04,561 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=99, total_cost=0.0
INFO 2024-10-01 18:07:04,562 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:04,562 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:04,562 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:04,562 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:04,563 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:04,563 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:04,563 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:04,565 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:04,567 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:04,568 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:04,568 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:04,568 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:04,568 models 570 138242068317888 Calculating total cost for call: duration=99 seconds
INFO 2024-10-01 18:07:04,568 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:07:04,569 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:04,569 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:04,569 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:04,569 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:04,571 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:04,572 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:04,574 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:04,576 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:04,576 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:04,577 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=99, total_cost=0.00
INFO 2024-10-01 18:07:04,579 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:07:04,579 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:04,579 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:04,579 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:04,580 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:04,580 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:04,580 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:04,582 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:04,583 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:04,583 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:04,583 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 Calculating total cost for call: duration=99 seconds
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:04,584 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:04,585 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:04,587 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:04,587 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:04,588 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:04,590 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:04,590 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:05:24+03:00
INFO 2024-10-01 18:07:04,979 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57991) on port 8000
INFO 2024-10-01 18:07:12,969 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:06:41,0504464495,7790,00:00:23,2024/10/01 15:06:48,2024/10/01 15:07:12,TerminatedByDst,,,Ext.7790,0504464495,10001,,,Extension,Line,,Maram Alharbi,0504464495,
INFO 2024-10-01 18:07:12,969 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:06:41', '0504464495', '7790', '00:00:23', '2024/10/01 15:06:48', '2024/10/01 15:07:12', 'TerminatedByDst', '', '', 'Ext.7790', '0504464495', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0504464495', '']
INFO 2024-10-01 18:07:12,984 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:12,985 models 570 138242068317888 Initial state: caller=7790, callee=0504464495, duration=23, total_cost=0.0
INFO 2024-10-01 18:07:12,985 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:12,985 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0504464495
INFO 2024-10-01 18:07:12,986 utils 570 138242068317888 Original number: 0504464495
INFO 2024-10-01 18:07:12,986 utils 570 138242068317888 Cleaned number: 0504464495
INFO 2024-10-01 18:07:12,986 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:07:12,986 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:12,986 models 570 138242068317888 Categorizing call for number: 0504464495
INFO 2024-10-01 18:07:12,989 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:12,991 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:12,991 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:07:12,991 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:07:12,992 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:07:12,992 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:07:12,992 models 570 138242068317888 Match found: 0504464495 matches 05
INFO 2024-10-01 18:07:12,992 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:07:12,992 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:07:12,993 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:12,996 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:12,996 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:07:12,999 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:07:13,001 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:07:13,011 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:07:13.003606+00:00, Should reset: False
INFO 2024-10-01 18:07:13,011 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:07:13,011 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:07:13,012 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:07:13,012 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:07:13,012 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:07:13,012 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:07:13,015 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:13,015 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:13,015 models 570 138242068317888 Initial state: caller=7790, callee=0504464495, duration=23, total_cost=0.40
INFO 2024-10-01 18:07:13,018 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:07:13,018 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0504464495
INFO 2024-10-01 18:07:13,018 utils 570 138242068317888 Original number: 0504464495
INFO 2024-10-01 18:07:13,019 utils 570 138242068317888 Cleaned number: 0504464495
INFO 2024-10-01 18:07:13,019 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:07:13,019 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:13,019 models 570 138242068317888 Categorizing call for number: 0504464495
INFO 2024-10-01 18:07:13,021 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:13,023 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:13,023 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:07:13,023 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:07:13,023 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:07:13,024 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:07:13,024 models 570 138242068317888 Match found: 0504464495 matches 05
INFO 2024-10-01 18:07:13,024 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:07:13,024 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:13,024 models 570 138242068317888 Calculating total cost for call: duration=23 seconds
INFO 2024-10-01 18:07:13,025 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:13,025 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:07:13,025 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:07:13,025 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:07:13,025 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:13,027 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:13,028 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:07:13,030 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:07:13,032 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:07:13,035 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:07:13.033644+00:00, Should reset: False
INFO 2024-10-01 18:07:13,036 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:07:13,036 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:07:13,036 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:07:13,036 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:07:13,038 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:13,038 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0504464495 at 2024-10-01 15:06:41+03:00
INFO 2024-10-01 18:07:13,437 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57992) on port 8000
INFO 2024-10-01 18:07:32,692 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:06:31,7495,7484,00:00:55,2024/10/01 15:06:36,2024/10/01 15:07:31,TerminatedBySrc,,,Ext.7484,Ext.7495,7495,,,Extension,Extension,,Arsi Abdurahman,NOLY MANALO,
INFO 2024-10-01 18:07:32,693 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:06:31', '7495', '7484', '00:00:55', '2024/10/01 15:06:36', '2024/10/01 15:07:31', 'TerminatedBySrc', '', '', 'Ext.7484', 'Ext.7495', '7495', '', '', 'Extension', 'Extension', '', 'Arsi Abdurahman', 'NOLY MANALO', '']
INFO 2024-10-01 18:07:32,710 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:32,711 models 570 138242068317888 Initial state: caller=7484, callee=7495, duration=55, total_cost=0.0
INFO 2024-10-01 18:07:32,711 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:32,712 models 570 138242068317888 Before determining country, Caller: 7484, Callee: 7495
INFO 2024-10-01 18:07:32,712 utils 570 138242068317888 Original number: 7495
INFO 2024-10-01 18:07:32,712 utils 570 138242068317888 Cleaned number: 7495
INFO 2024-10-01 18:07:32,712 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:32,713 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:32,713 models 570 138242068317888 Categorizing call for number: 7495
INFO 2024-10-01 18:07:32,716 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:32,718 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:32,718 models 570 138242068317888 Match found: 7495 matches ^\d{4}$
INFO 2024-10-01 18:07:32,718 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:32,719 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:32,719 models 570 138242068317888 Calculating total cost for call: duration=55 seconds
INFO 2024-10-01 18:07:32,719 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:32,719 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:32,720 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:32,720 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:32,720 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:32,723 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:32,723 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:07:32,727 models 570 138242068317888 Found extension: 7484 - Arsi Abdurahman (Smasco)
INFO 2024-10-01 18:07:32,729 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.40
INFO 2024-10-01 18:07:32,735 models 570 138242068317888 Quota for 7484 - Arsi Abdurahman (Smasco): Last reset: 2024-09-15 06:35:15.418495+00:00, Next reset: 2024-10-15 06:35:15.418495+00:00, Current time: 2024-10-01 15:07:32.731801+00:00, Should reset: False
INFO 2024-10-01 18:07:32,735 models 570 138242068317888 Quota reset not needed for 7484 - Arsi Abdurahman (Smasco)
INFO 2024-10-01 18:07:32,735 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.40
INFO 2024-10-01 18:07:32,735 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:07:32,736 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:07:32,738 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:32,738 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:32,738 models 570 138242068317888 Initial state: caller=7484, callee=7495, duration=55, total_cost=0.00
INFO 2024-10-01 18:07:32,742 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:07:32,742 models 570 138242068317888 Before determining country, Caller: 7484, Callee: 7495
INFO 2024-10-01 18:07:32,742 utils 570 138242068317888 Original number: 7495
INFO 2024-10-01 18:07:32,742 utils 570 138242068317888 Cleaned number: 7495
INFO 2024-10-01 18:07:32,743 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:32,743 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:32,743 models 570 138242068317888 Categorizing call for number: 7495
INFO 2024-10-01 18:07:32,746 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:32,748 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:32,748 models 570 138242068317888 Match found: 7495 matches ^\d{4}$
INFO 2024-10-01 18:07:32,749 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:32,749 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:32,749 models 570 138242068317888 Calculating total cost for call: duration=55 seconds
INFO 2024-10-01 18:07:32,750 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:32,750 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:32,750 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:32,751 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:32,751 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:32,754 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:32,754 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:07:32,758 models 570 138242068317888 Found extension: 7484 - Arsi Abdurahman (Smasco)
INFO 2024-10-01 18:07:32,760 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.40
INFO 2024-10-01 18:07:32,765 models 570 138242068317888 Quota for 7484 - Arsi Abdurahman (Smasco): Last reset: 2024-09-15 06:35:15.418495+00:00, Next reset: 2024-10-15 06:35:15.418495+00:00, Current time: 2024-10-01 15:07:32.762575+00:00, Should reset: False
INFO 2024-10-01 18:07:32,765 models 570 138242068317888 Quota reset not needed for 7484 - Arsi Abdurahman (Smasco)
INFO 2024-10-01 18:07:32,766 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.40
INFO 2024-10-01 18:07:32,766 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:07:32,767 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:07:32,768 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:32,769 socket_server 570 138242068317888 Saved call record for company Smasco: 7484 -> 7495 at 2024-10-01 15:06:31+03:00
INFO 2024-10-01 18:07:33,179 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57993) on port 8000
INFO 2024-10-01 18:07:34,499 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:07:33,8000,10001,00:00:00,2024/10/01 15:07:33,2024/10/01 15:07:33,TerminatedBySrc,,,555395655,Ext.8000,8000,,,Line,Ivr,,555395655:Main Number,WelcomeMessage,
INFO 2024-10-01 18:07:34,500 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:07:33', '8000', '10001', '00:00:00', '2024/10/01 15:07:33', '2024/10/01 15:07:33', 'TerminatedBySrc', '', '', '555395655', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '555395655:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:07:34,515 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:34,515 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=0, total_cost=0.0
INFO 2024-10-01 18:07:34,515 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:34,516 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:34,516 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:34,516 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:34,516 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:34,516 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:34,517 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:34,519 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:34,521 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:34,521 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:34,521 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:34,522 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:34,522 models 570 138242068317888 Calculating total cost for call: duration=0 seconds
WARNING 2024-10-01 18:07:34,522 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:07:34,522 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:34,522 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:34,524 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:34,525 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:34,527 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:34,529 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:34,529 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:34,530 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=0, total_cost=0.00
INFO 2024-10-01 18:07:34,532 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:07:34,532 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:34,533 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:34,533 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:34,533 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:34,533 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:34,533 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:34,535 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:34,537 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:34,537 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:34,537 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:34,537 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:34,537 models 570 138242068317888 Calculating total cost for call: duration=0 seconds
WARNING 2024-10-01 18:07:34,537 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:07:34,538 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:34,538 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:34,540 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:34,540 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:34,542 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:34,544 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:34,545 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:07:33+03:00
INFO 2024-10-01 18:07:34,961 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57994) on port 8000
INFO 2024-10-01 18:07:55,346 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:07:51,8000,10001,00:00:02,2024/10/01 15:07:51,2024/10/01 15:07:54,TerminatedBySrc,,,0558194029,Ext.8000,8000,,,Line,Ivr,,0558194029:Main Number,WelcomeMessage,
INFO 2024-10-01 18:07:55,346 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:07:51', '8000', '10001', '00:00:02', '2024/10/01 15:07:51', '2024/10/01 15:07:54', 'TerminatedBySrc', '', '', '0558194029', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0558194029:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:07:55,365 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:55,366 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=2, total_cost=0.0
INFO 2024-10-01 18:07:55,366 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:55,366 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:55,367 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:55,367 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:55,367 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:55,367 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:55,367 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:55,370 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:55,373 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:55,373 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:55,374 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:55,374 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:55,374 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:07:55,374 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:55,375 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:55,375 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:55,375 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:55,375 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:55,378 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:55,378 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:55,381 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:55,383 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:55,384 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:55,384 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=2, total_cost=0.00
INFO 2024-10-01 18:07:55,387 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:07:55,387 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:55,388 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:55,388 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:55,388 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:55,389 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:55,389 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:55,391 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:55,393 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:55,393 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:55,393 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:55,393 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:55,394 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:55,397 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:55,397 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:55,399 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:55,401 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:55,401 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:07:51+03:00
INFO 2024-10-01 18:07:55,800 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57995) on port 8000
INFO 2024-10-01 18:07:57,046 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:07:15,8000,10001,00:00:40,2024/10/01 15:07:15,2024/10/01 15:07:56,TerminatedBySrc,,,571678029,Ext.8000,8000,,,Line,Ivr,,571678029:Main Number,WelcomeMessage,
INFO 2024-10-01 18:07:57,046 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:07:15', '8000', '10001', '00:00:40', '2024/10/01 15:07:15', '2024/10/01 15:07:56', 'TerminatedBySrc', '', '', '571678029', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '571678029:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:07:57,062 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:57,063 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=40, total_cost=0.0
INFO 2024-10-01 18:07:57,063 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:07:57,063 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:57,064 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:57,064 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:57,064 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:57,064 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:57,065 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:57,068 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:57,070 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:57,070 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:57,071 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:57,071 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:57,071 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 18:07:57,071 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:57,072 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:57,072 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:57,072 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:57,072 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:57,075 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:57,075 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:57,078 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:57,080 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:57,080 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:07:57,081 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=40, total_cost=0.00
INFO 2024-10-01 18:07:57,083 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:07:57,084 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:07:57,084 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:07:57,084 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:07:57,085 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:07:57,085 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:07:57,085 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:07:57,087 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:07:57,088 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Calculating total cost for call: duration=40 seconds
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:07:57,089 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:07:57,090 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:07:57,090 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:07:57,090 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:07:57,092 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:07:57,092 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:07:57,093 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:07:57,095 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:07:57,095 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:07:15+03:00
INFO 2024-10-01 18:07:57,509 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57996) on port 8000
INFO 2024-10-01 18:08:11,403 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:08:06,8000,10001,00:00:03,2024/10/01 15:08:06,2024/10/01 15:08:10,TerminatedBySrc,,,0502431053,Ext.8000,8000,,,Line,Ivr,,0502431053:Main Number,WelcomeMessage,
INFO 2024-10-01 18:08:11,404 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:08:06', '8000', '10001', '00:00:03', '2024/10/01 15:08:06', '2024/10/01 15:08:10', 'TerminatedBySrc', '', '', '0502431053', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0502431053:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:08:11,421 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:08:11,426 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.0
INFO 2024-10-01 18:08:11,426 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:08:11,427 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:08:11,427 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:08:11,427 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:08:11,430 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:08:11,431 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:08:11,431 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:08:11,434 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:08:11,436 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:08:11,436 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:08:11,436 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:08:11,437 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:08:11,437 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:08:11,437 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:08:11,437 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:08:11,437 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:08:11,438 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:08:11,438 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:08:11,440 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:08:11,440 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:08:11,443 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:08:11,445 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:08:11,446 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:08:11,446 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.00
INFO 2024-10-01 18:08:11,448 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:08:11,449 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:08:11,449 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:08:11,449 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:08:11,449 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:08:11,450 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:08:11,450 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:08:11,452 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:08:11,453 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:08:11,454 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:08:11,454 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:08:11,454 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:08:11,454 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:08:11,455 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:08:11,455 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:08:11,455 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:08:11,455 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:08:11,456 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:08:11,458 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:08:11,458 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:08:11,460 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:08:11,461 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:08:11,461 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:08:06+03:00
INFO 2024-10-01 18:08:11,860 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 57997) on port 8000
INFO 2024-10-01 18:09:52,405 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:09:27,7327,6730,00:00:04,2024/10/01 15:09:47,2024/10/01 15:09:51,TerminatedBySrc,,,Ext.6730,Ext.6666,7327,,,Extension,VMail,,Vijaya krishnan,,
INFO 2024-10-01 18:09:52,406 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:09:27', '7327', '6730', '00:00:04', '2024/10/01 15:09:47', '2024/10/01 15:09:51', 'TerminatedBySrc', '', '', 'Ext.6730', 'Ext.6666', '7327', '', '', 'Extension', 'VMail', '', 'Vijaya krishnan', '', '']
INFO 2024-10-01 18:09:52,421 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:09:52,421 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=4, total_cost=0.0
INFO 2024-10-01 18:09:52,422 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:09:52,422 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 18:09:52,422 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:09:52,423 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:09:52,423 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:09:52,423 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:09:52,423 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:09:52,426 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:09:52,428 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:09:52,428 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:09:52,429 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:09:52,429 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:09:52,429 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 18:09:52,429 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:09:52,430 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:09:52,430 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:09:52,430 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:09:52,430 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:09:52,432 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:09:52,433 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:09:52,436 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:09:52,438 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:09:52,442 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 15:09:52.440252+00:00, Should reset: False
INFO 2024-10-01 18:09:52,442 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:09:52,443 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:09:52,443 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:09:52,443 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:09:52,447 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:09:52,447 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:09:52,448 models 570 138242068317888 Initial state: caller=6730, callee=7327, duration=4, total_cost=0.00
INFO 2024-10-01 18:09:52,450 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:09:52,450 models 570 138242068317888 Before determining country, Caller: 6730, Callee: 7327
INFO 2024-10-01 18:09:52,451 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:09:52,451 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:09:52,451 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:09:52,451 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:09:52,451 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:09:52,453 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:09:52,454 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:09:52,455 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:09:52,455 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:09:52,455 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:09:52,455 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 18:09:52,456 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:09:52,456 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:09:52,456 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:09:52,456 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:09:52,456 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:09:52,458 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:09:52,458 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:09:52,464 models 570 138242068317888 Found extension: 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:09:52,465 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:09:52,469 models 570 138242068317888 Quota for 6730 - Vijaya krishnan (Smasco): Last reset: 2024-09-15 06:34:45.070830+00:00, Next reset: 2024-10-15 06:34:45.070830+00:00, Current time: 2024-10-01 15:09:52.467254+00:00, Should reset: False
INFO 2024-10-01 18:09:52,469 models 570 138242068317888 Quota reset not needed for 6730 - Vijaya krishnan (Smasco)
INFO 2024-10-01 18:09:52,470 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 6.80
INFO 2024-10-01 18:09:52,470 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:09:52,470 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:09:52,472 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:09:52,473 socket_server 570 138242068317888 Saved call record for company Smasco: 6730 -> 7327 at 2024-10-01 15:09:27+03:00
INFO 2024-10-01 18:09:52,875 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58017) on port 8000
INFO 2024-10-01 18:10:20,565 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:08:23,8000,10001,00:01:56,2024/10/01 15:08:23,2024/10/01 15:10:19,TerminatedBySrc,ReplacedDst,,0502430439,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0502430439:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:10:20,566 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:08:23', '8000', '10001', '00:01:56', '2024/10/01 15:08:23', '2024/10/01 15:10:19', 'TerminatedBySrc', 'ReplacedDst', '', '0502430439', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0502430439:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:10:20,585 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:10:20,585 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=116, total_cost=0.0
INFO 2024-10-01 18:10:20,586 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:10:20,587 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:10:20,587 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:10:20,587 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:10:20,587 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:10:20,587 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:10:20,587 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:10:20,591 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:10:20,594 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:10:20,594 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:10:20,595 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:10:20,595 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:10:20,595 models 570 138242068317888 Calculating total cost for call: duration=116 seconds
INFO 2024-10-01 18:10:20,596 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:10:20,596 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:10:20,596 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:10:20,596 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:10:20,596 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:10:20,600 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:10:20,601 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:10:20,605 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:10:20,607 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:10:20,608 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:10:20,608 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=116, total_cost=0.00
INFO 2024-10-01 18:10:20,612 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:10:20,612 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:10:20,612 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:10:20,612 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:10:20,612 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:10:20,613 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:10:20,613 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:10:20,615 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:10:20,618 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Calculating total cost for call: duration=116 seconds
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:10:20,619 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:10:20,620 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:10:20,620 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:10:20,620 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:10:20,622 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:10:20,622 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:10:20,624 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:10:20,626 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:10:20,626 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:08:23+03:00
INFO 2024-10-01 18:10:21,035 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58023) on port 8000
INFO 2024-10-01 18:10:22,595 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:06:53,0590747410,7821,00:03:17,2024/10/01 15:07:04,2024/10/01 15:10:21,TerminatedBySrc,,,Ext.7821,0590747410,10001,,,Extension,Line,,Talal Alzahrani,0590747410,
INFO 2024-10-01 18:10:22,596 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:06:53', '0590747410', '7821', '00:03:17', '2024/10/01 15:07:04', '2024/10/01 15:10:21', 'TerminatedBySrc', '', '', 'Ext.7821', '0590747410', '10001', '', '', 'Extension', 'Line', '', 'Talal Alzahrani', '0590747410', '']
INFO 2024-10-01 18:10:22,620 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:10:22,620 models 570 138242068317888 Initial state: caller=7821, callee=0590747410, duration=197, total_cost=0.0
INFO 2024-10-01 18:10:22,621 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:10:22,621 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0590747410
INFO 2024-10-01 18:10:22,622 utils 570 138242068317888 Original number: 0590747410
INFO 2024-10-01 18:10:22,622 utils 570 138242068317888 Cleaned number: 0590747410
INFO 2024-10-01 18:10:22,622 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:10:22,624 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:10:22,624 models 570 138242068317888 Categorizing call for number: 0590747410
INFO 2024-10-01 18:10:22,628 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:10:22,631 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:10:22,631 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Match found: 0590747410 matches 05
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:10:22,632 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:10:22,633 models 570 138242068317888 Calculating total cost for call: duration=197 seconds
INFO 2024-10-01 18:10:22,633 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:10:22,633 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:10:22,633 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:10:22,634 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:10:22,634 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:10:22,636 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:10:22,637 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:10:22,640 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:10:22,642 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 14.80
INFO 2024-10-01 18:10:22,646 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:10:22.644705+00:00, Should reset: False
INFO 2024-10-01 18:10:22,647 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:10:22,647 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 14.80
INFO 2024-10-01 18:10:22,647 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:10:22,648 models 570 138242068317888 Attempting to deduct 1.60 from balance 85.20
INFO 2024-10-01 18:10:22,649 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 83.60
INFO 2024-10-01 18:10:22,650 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 83.60
INFO 2024-10-01 18:10:22,652 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:10:22,652 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:10:22,652 models 570 138242068317888 Initial state: caller=7821, callee=0590747410, duration=197, total_cost=1.60
INFO 2024-10-01 18:10:22,655 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:10:22,655 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0590747410
INFO 2024-10-01 18:10:22,655 utils 570 138242068317888 Original number: 0590747410
INFO 2024-10-01 18:10:22,655 utils 570 138242068317888 Cleaned number: 0590747410
INFO 2024-10-01 18:10:22,656 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:10:22,656 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:10:22,656 models 570 138242068317888 Categorizing call for number: 0590747410
INFO 2024-10-01 18:10:22,658 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:10:22,659 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:10:22,660 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:10:22,660 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:10:22,660 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:10:22,661 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:10:22,661 models 570 138242068317888 Match found: 0590747410 matches 05
INFO 2024-10-01 18:10:22,661 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:10:22,661 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 Calculating total cost for call: duration=197 seconds
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:10:22,662 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:10:22,664 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:10:22,665 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:10:22,668 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:10:22,669 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:10:22,673 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:10:22.671228+00:00, Should reset: False
INFO 2024-10-01 18:10:22,673 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:10:22,674 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:10:22,674 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:10:22,674 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:10:22,676 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:10:22,678 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> 0590747410 at 2024-10-01 15:06:53+03:00
INFO 2024-10-01 18:10:23,080 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58024) on port 8000
INFO 2024-10-01 18:11:01,496 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:10:25,0560937501,8451,00:00:24,2024/10/01 15:10:36,2024/10/01 15:11:00,TerminatedBySrc,,,Ext.8451,0560937501,10001,,,Extension,Line,,Jamil Agbay,0560937501,
INFO 2024-10-01 18:11:01,496 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:10:25', '0560937501', '8451', '00:00:24', '2024/10/01 15:10:36', '2024/10/01 15:11:00', 'TerminatedBySrc', '', '', 'Ext.8451', '0560937501', '10001', '', '', 'Extension', 'Line', '', 'Jamil Agbay', '0560937501', '']
INFO 2024-10-01 18:11:01,513 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:01,514 models 570 138242068317888 Initial state: caller=8451, callee=0560937501, duration=24, total_cost=0.0
INFO 2024-10-01 18:11:01,514 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:11:01,514 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0560937501
INFO 2024-10-01 18:11:01,514 utils 570 138242068317888 Original number: 0560937501
INFO 2024-10-01 18:11:01,515 utils 570 138242068317888 Cleaned number: 0560937501
INFO 2024-10-01 18:11:01,515 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:01,515 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:01,516 models 570 138242068317888 Categorizing call for number: 0560937501
INFO 2024-10-01 18:11:01,518 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:01,521 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:01,521 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:01,521 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:01,521 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:01,522 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:01,522 models 570 138242068317888 Match found: 0560937501 matches 05
INFO 2024-10-01 18:11:01,522 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:01,522 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:01,522 models 570 138242068317888 Calculating total cost for call: duration=24 seconds
INFO 2024-10-01 18:11:01,523 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:11:01,523 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:01,523 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:11:01,523 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:11:01,523 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:01,526 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:01,526 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:11:01,529 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:11:01,531 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:01,542 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 15:11:01.534526+00:00, Should reset: False
INFO 2024-10-01 18:11:01,542 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:11:01,543 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:01,543 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:11:01,543 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:11:01,543 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:11:01,543 models 570 138242068317888 Warning: Quota exceeded for extension 8451
INFO 2024-10-01 18:11:01,545 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:01,545 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:01,546 models 570 138242068317888 Initial state: caller=8451, callee=0560937501, duration=24, total_cost=0.40
INFO 2024-10-01 18:11:01,548 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:11:01,549 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0560937501
INFO 2024-10-01 18:11:01,549 utils 570 138242068317888 Original number: 0560937501
INFO 2024-10-01 18:11:01,549 utils 570 138242068317888 Cleaned number: 0560937501
INFO 2024-10-01 18:11:01,549 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:01,549 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:01,549 models 570 138242068317888 Categorizing call for number: 0560937501
INFO 2024-10-01 18:11:01,551 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:01,552 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:01,553 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:01,553 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:01,553 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:01,553 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:01,553 models 570 138242068317888 Match found: 0560937501 matches 05
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Calculating total cost for call: duration=24 seconds
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:01,554 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:11:01,555 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:11:01,555 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:01,557 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:01,557 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:11:01,559 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:11:01,561 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:01,566 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 15:11:01.564085+00:00, Should reset: False
INFO 2024-10-01 18:11:01,566 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:11:01,566 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:01,566 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:11:01,567 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:11:01,568 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:01,568 socket_server 570 138242068317888 Saved call record for company Smasco: 8451 -> 0560937501 at 2024-10-01 15:10:25+03:00
INFO 2024-10-01 18:11:01,972 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58026) on port 8000
INFO 2024-10-01 18:11:07,366 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:07:46,0505368225,7790,00:03:11,2024/10/01 15:07:55,2024/10/01 15:11:06,TerminatedByDst,,,Ext.7790,0505368225,10001,,,Extension,Line,,Maram Alharbi,0505368225,
INFO 2024-10-01 18:11:07,367 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:07:46', '0505368225', '7790', '00:03:11', '2024/10/01 15:07:55', '2024/10/01 15:11:06', 'TerminatedByDst', '', '', 'Ext.7790', '0505368225', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0505368225', '']
INFO 2024-10-01 18:11:07,384 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:07,385 models 570 138242068317888 Initial state: caller=7790, callee=0505368225, duration=191, total_cost=0.0
INFO 2024-10-01 18:11:07,385 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:11:07,385 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505368225
INFO 2024-10-01 18:11:07,385 utils 570 138242068317888 Original number: 0505368225
INFO 2024-10-01 18:11:07,386 utils 570 138242068317888 Cleaned number: 0505368225
INFO 2024-10-01 18:11:07,386 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:07,386 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:07,386 models 570 138242068317888 Categorizing call for number: 0505368225
INFO 2024-10-01 18:11:07,389 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:07,391 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:07,391 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:07,391 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:07,391 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:07,392 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:07,392 models 570 138242068317888 Match found: 0505368225 matches 05
INFO 2024-10-01 18:11:07,392 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:07,392 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:07,392 models 570 138242068317888 Calculating total cost for call: duration=191 seconds
INFO 2024-10-01 18:11:07,393 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:11:07,393 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:07,393 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:11:07,393 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:11:07,393 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:07,395 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:07,396 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:11:07,399 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:11:07,401 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:07,405 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:11:07.403081+00:00, Should reset: False
INFO 2024-10-01 18:11:07,406 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:11:07,406 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:07,406 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:11:07,406 models 570 138242068317888 Attempting to deduct 1.60 from balance 0.00
WARNING 2024-10-01 18:11:07,406 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.60
WARNING 2024-10-01 18:11:07,406 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:11:07,408 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:07,408 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:07,409 models 570 138242068317888 Initial state: caller=7790, callee=0505368225, duration=191, total_cost=1.60
INFO 2024-10-01 18:11:07,412 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:11:07,412 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505368225
INFO 2024-10-01 18:11:07,412 utils 570 138242068317888 Original number: 0505368225
INFO 2024-10-01 18:11:07,413 utils 570 138242068317888 Cleaned number: 0505368225
INFO 2024-10-01 18:11:07,413 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:07,413 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:07,413 models 570 138242068317888 Categorizing call for number: 0505368225
INFO 2024-10-01 18:11:07,415 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:07,418 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:07,418 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:07,418 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:07,419 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:07,419 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:07,419 models 570 138242068317888 Match found: 0505368225 matches 05
INFO 2024-10-01 18:11:07,419 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:07,419 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 Calculating total cost for call: duration=191 seconds
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:11:07,420 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:07,422 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:07,423 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:11:07,425 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:11:07,427 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:07,430 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:11:07.428426+00:00, Should reset: False
INFO 2024-10-01 18:11:07,430 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:11:07,430 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:11:07,430 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:11:07,430 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:11:07,432 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:07,432 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0505368225 at 2024-10-01 15:07:46+03:00
INFO 2024-10-01 18:11:07,837 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58031) on port 8000
INFO 2024-10-01 18:11:19,042 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:05:07,0505537366,7301,00:05:58,2024/10/01 15:05:19,2024/10/01 15:11:18,TerminatedBySrc,,,Ext.7301,0505537366,10001,,,Extension,Line,,Muhammed Sahail,0505537366,
INFO 2024-10-01 18:11:19,042 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:05:07', '0505537366', '7301', '00:05:58', '2024/10/01 15:05:19', '2024/10/01 15:11:18', 'TerminatedBySrc', '', '', 'Ext.7301', '0505537366', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0505537366', '']
INFO 2024-10-01 18:11:19,062 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:19,062 models 570 138242068317888 Initial state: caller=7301, callee=0505537366, duration=358, total_cost=0.0
INFO 2024-10-01 18:11:19,062 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:11:19,063 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0505537366
INFO 2024-10-01 18:11:19,063 utils 570 138242068317888 Original number: 0505537366
INFO 2024-10-01 18:11:19,063 utils 570 138242068317888 Cleaned number: 0505537366
INFO 2024-10-01 18:11:19,063 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:19,063 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:19,063 models 570 138242068317888 Categorizing call for number: 0505537366
INFO 2024-10-01 18:11:19,066 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:19,069 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:19,069 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:19,069 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:19,070 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:19,070 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:19,070 models 570 138242068317888 Match found: 0505537366 matches 05
INFO 2024-10-01 18:11:19,070 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:19,071 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:19,071 models 570 138242068317888 Calculating total cost for call: duration=358 seconds
INFO 2024-10-01 18:11:19,071 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:11:19,071 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:19,072 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:11:19,072 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 18:11:19,072 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:19,074 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:19,075 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:11:19,081 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:11:19,084 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 50.40
INFO 2024-10-01 18:11:19,089 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:11:19.087775+00:00, Should reset: False
INFO 2024-10-01 18:11:19,090 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:11:19,090 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 50.40
INFO 2024-10-01 18:11:19,090 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 18:11:19,090 models 570 138242068317888 Attempting to deduct 2.40 from balance 49.60
INFO 2024-10-01 18:11:19,092 models 570 138242068317888 Successfully deducted 2.40. New remaining balance: 47.20
INFO 2024-10-01 18:11:19,092 models 570 138242068317888 Successfully deducted 2.40 from quota. New balance: 47.20
INFO 2024-10-01 18:11:19,094 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:19,095 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:11:19,095 models 570 138242068317888 Initial state: caller=7301, callee=0505537366, duration=358, total_cost=2.40
INFO 2024-10-01 18:11:19,097 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 18:11:19,098 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0505537366
INFO 2024-10-01 18:11:19,098 utils 570 138242068317888 Original number: 0505537366
INFO 2024-10-01 18:11:19,098 utils 570 138242068317888 Cleaned number: 0505537366
INFO 2024-10-01 18:11:19,098 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:11:19,098 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:11:19,099 models 570 138242068317888 Categorizing call for number: 0505537366
INFO 2024-10-01 18:11:19,105 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:11:19,106 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:11:19,107 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:11:19,107 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:11:19,107 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:11:19,107 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:11:19,107 models 570 138242068317888 Match found: 0505537366 matches 05
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Calculating total cost for call: duration=358 seconds
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:11:19,108 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:11:19,109 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 18:11:19,109 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:11:19,111 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:11:19,111 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 18:11:19,119 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:11:19,121 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:11:19,138 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:11:19.123030+00:00, Should reset: False
INFO 2024-10-01 18:11:19,139 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:11:19,139 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:11:19,139 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:11:19,139 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:11:19,144 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:11:19,144 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0505537366 at 2024-10-01 15:05:07+03:00
INFO 2024-10-01 18:11:19,560 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58035) on port 8000
INFO 2024-10-01 18:12:09,635 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:11:22,0583653551,8426,00:00:30,2024/10/01 15:11:38,2024/10/01 15:12:08,TerminatedBySrc,,,Ext.8426,0583653551,10001,,,Extension,Line,,Rehan Khan Mohammed,0583653551,
INFO 2024-10-01 18:12:09,636 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:11:22', '0583653551', '8426', '00:00:30', '2024/10/01 15:11:38', '2024/10/01 15:12:08', 'TerminatedBySrc', '', '', 'Ext.8426', '0583653551', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0583653551', '']
INFO 2024-10-01 18:12:09,656 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:09,657 models 570 138242068317888 Initial state: caller=8426, callee=0583653551, duration=30, total_cost=0.0
INFO 2024-10-01 18:12:09,657 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:12:09,657 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0583653551
INFO 2024-10-01 18:12:09,657 utils 570 138242068317888 Original number: 0583653551
INFO 2024-10-01 18:12:09,657 utils 570 138242068317888 Cleaned number: 0583653551
INFO 2024-10-01 18:12:09,659 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:09,659 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:09,659 models 570 138242068317888 Categorizing call for number: 0583653551
INFO 2024-10-01 18:12:09,663 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:09,666 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:09,666 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:09,667 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:09,667 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:09,667 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:09,667 models 570 138242068317888 Match found: 0583653551 matches 05
INFO 2024-10-01 18:12:09,667 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:09,669 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:09,669 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 18:12:09,669 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:09,669 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:12:09,670 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:12:09,670 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:12:09,670 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:09,674 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:09,675 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:09,679 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:12:09,682 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:12:09,687 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:12:09.685100+00:00, Should reset: False
INFO 2024-10-01 18:12:09,688 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:12:09,689 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:12:09,689 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:12:09,689 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:12:09,689 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:12:09,690 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 18:12:09,692 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:09,693 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:09,693 models 570 138242068317888 Initial state: caller=8426, callee=0583653551, duration=30, total_cost=0.40
INFO 2024-10-01 18:12:09,697 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:12:09,697 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0583653551
INFO 2024-10-01 18:12:09,698 utils 570 138242068317888 Original number: 0583653551
INFO 2024-10-01 18:12:09,698 utils 570 138242068317888 Cleaned number: 0583653551
INFO 2024-10-01 18:12:09,699 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:09,699 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:09,699 models 570 138242068317888 Categorizing call for number: 0583653551
INFO 2024-10-01 18:12:09,701 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:09,703 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:09,703 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:09,703 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:09,703 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:09,703 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Match found: 0583653551 matches 05
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:09,704 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:12:09,705 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:12:09,705 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:12:09,705 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:09,707 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:09,707 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:12:09,710 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:12:09,712 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:12:09,716 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:12:09.713557+00:00, Should reset: False
INFO 2024-10-01 18:12:09,716 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:12:09,716 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:12:09,716 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:09,716 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:09,718 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:09,718 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0583653551 at 2024-10-01 15:11:22+03:00
INFO 2024-10-01 18:12:10,126 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58039) on port 8000
INFO 2024-10-01 18:12:33,955 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:11:52,0543719006,7301,,,2024/10/01 15:12:33,Failed,,,Ext.7301,0543719006,0543719006,,,Extension,LineSet,,Muhammed Sahail,0543719006,
INFO 2024-10-01 18:12:33,956 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:11:52', '0543719006', '7301', '', '', '2024/10/01 15:12:33', 'Failed', '', '', 'Ext.7301', '0543719006', '0543719006', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0543719006', '']
INFO 2024-10-01 18:12:33,979 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:33,979 models 570 138242068317888 Initial state: caller=7301, callee=0543719006, duration=None, total_cost=0.0
INFO 2024-10-01 18:12:33,979 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:12:33,979 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0543719006
INFO 2024-10-01 18:12:33,980 utils 570 138242068317888 Original number: 0543719006
INFO 2024-10-01 18:12:33,980 utils 570 138242068317888 Cleaned number: 0543719006
INFO 2024-10-01 18:12:33,980 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:33,981 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:33,981 models 570 138242068317888 Categorizing call for number: 0543719006
INFO 2024-10-01 18:12:33,983 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:33,996 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:34,007 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:34,007 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:34,008 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:34,008 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:34,008 models 570 138242068317888 Match found: 0543719006 matches 05
INFO 2024-10-01 18:12:34,008 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:34,009 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:34,009 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:12:34,009 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:12:34,009 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:34,020 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:34,024 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:34,024 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:34,028 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:12:34,030 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:12:34,034 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:12:34.032281+00:00, Should reset: False
INFO 2024-10-01 18:12:34,035 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:12:34,035 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:12:34,035 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:34,035 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:34,037 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:34,038 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:34,038 models 570 138242068317888 Initial state: caller=7301, callee=0543719006, duration=None, total_cost=0.00
INFO 2024-10-01 18:12:34,040 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:12:34,041 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0543719006
INFO 2024-10-01 18:12:34,041 utils 570 138242068317888 Original number: 0543719006
INFO 2024-10-01 18:12:34,041 utils 570 138242068317888 Cleaned number: 0543719006
INFO 2024-10-01 18:12:34,042 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:34,042 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:34,042 models 570 138242068317888 Categorizing call for number: 0543719006
INFO 2024-10-01 18:12:34,044 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:34,045 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:34,045 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:34,046 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:34,046 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:34,046 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:34,046 models 570 138242068317888 Match found: 0543719006 matches 05
INFO 2024-10-01 18:12:34,047 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:34,047 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:34,047 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:12:34,047 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:12:34,048 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:34,048 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:34,050 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:34,050 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:34,053 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:12:34,055 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:12:34,058 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:12:34.057165+00:00, Should reset: False
INFO 2024-10-01 18:12:34,059 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:12:34,059 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:12:34,060 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:34,060 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:34,061 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:34,062 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0543719006 at 2024-10-01 15:11:52+03:00
INFO 2024-10-01 18:12:34,464 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58048) on port 8000
INFO 2024-10-01 18:12:37,544 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:12:28,8000,10001,00:00:07,2024/10/01 15:12:28,2024/10/01 15:12:36,TerminatedBySrc,,,0557771816,Ext.8000,8000,,,Line,Ivr,,0557771816:Main Number,WelcomeMessage,
INFO 2024-10-01 18:12:37,544 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:12:28', '8000', '10001', '00:00:07', '2024/10/01 15:12:28', '2024/10/01 15:12:36', 'TerminatedBySrc', '', '', '0557771816', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0557771816:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:12:37,563 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:37,564 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.0
INFO 2024-10-01 18:12:37,564 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:12:37,564 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:12:37,565 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:12:37,565 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:12:37,565 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:12:37,565 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:37,565 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:12:37,568 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:37,571 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:37,571 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:12:37,571 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:12:37,571 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:37,572 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:12:37,572 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:37,572 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:12:37,572 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:12:37,573 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:37,573 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:37,575 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:37,576 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:12:37,579 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:12:37,581 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:37,581 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:37,582 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.00
INFO 2024-10-01 18:12:37,584 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:12:37,585 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:12:37,585 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:12:37,585 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:12:37,585 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:12:37,586 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:37,586 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:12:37,588 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:37,590 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:37,590 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:12:37,590 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:12:37,591 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:37,591 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:12:37,591 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:37,591 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:12:37,591 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:12:37,592 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:37,592 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:37,594 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:37,594 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:12:37,596 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:12:37,598 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:37,598 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:12:28+03:00
INFO 2024-10-01 18:12:38,000 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58049) on port 8000
INFO 2024-10-01 18:12:38,055 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:12:34,7446,1095,00:00:02,2024/10/01 15:12:34,2024/10/01 15:12:37,TerminatedBySrc,,,Ext.1095,Ext.6666,7446,,,Extension,VMail,,Raha Madina Al Aridh,,
INFO 2024-10-01 18:12:38,056 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:12:34', '7446', '1095', '00:00:02', '2024/10/01 15:12:34', '2024/10/01 15:12:37', 'TerminatedBySrc', '', '', 'Ext.1095', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Raha Madina Al Aridh', '', '']
INFO 2024-10-01 18:12:38,071 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:38,071 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=2, total_cost=0.0
INFO 2024-10-01 18:12:38,072 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:12:38,072 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 18:12:38,072 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:12:38,072 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:12:38,073 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:12:38,073 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:38,073 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:12:38,076 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:38,078 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:38,078 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:12:38,078 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:12:38,079 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:38,080 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:38,082 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:38,082 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:38,086 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:12:38,088 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:12:38,091 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 15:12:38.090192+00:00, Should reset: False
INFO 2024-10-01 18:12:38,092 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:12:38,092 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:12:38,092 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:38,093 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:38,095 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:38,095 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:38,095 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=2, total_cost=0.00
INFO 2024-10-01 18:12:38,097 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:12:38,098 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 18:12:38,098 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:12:38,098 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:12:38,098 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:12:38,099 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:38,099 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:12:38,101 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:38,102 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:38,102 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:12:38,102 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:12:38,103 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:38,104 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:38,106 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:38,106 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:38,108 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:12:38,110 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:12:38,113 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 15:12:38.111360+00:00, Should reset: False
INFO 2024-10-01 18:12:38,113 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:12:38,114 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:12:38,114 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:38,114 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:38,116 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:38,116 socket_server 570 138242068317888 Saved call record for company Smasco: 1095 -> 7446 at 2024-10-01 15:12:34+03:00
INFO 2024-10-01 18:12:38,515 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58051) on port 8000
INFO 2024-10-01 18:12:55,330 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:12:38,0500812222,7781,,,2024/10/01 15:12:54,Failed,,,Ext.7781,0500812222,0500812222,,,Extension,LineSet,,Abdullah Jabal,0500812222,
INFO 2024-10-01 18:12:55,330 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:12:38', '0500812222', '7781', '', '', '2024/10/01 15:12:54', 'Failed', '', '', 'Ext.7781', '0500812222', '0500812222', '', '', 'Extension', 'LineSet', '', 'Abdullah Jabal', '0500812222', '']
INFO 2024-10-01 18:12:55,348 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:55,349 models 570 138242068317888 Initial state: caller=7781, callee=0500812222, duration=None, total_cost=0.0
INFO 2024-10-01 18:12:55,349 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:12:55,349 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0500812222
INFO 2024-10-01 18:12:55,350 utils 570 138242068317888 Original number: 0500812222
INFO 2024-10-01 18:12:55,350 utils 570 138242068317888 Cleaned number: 0500812222
INFO 2024-10-01 18:12:55,350 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:55,350 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:55,350 models 570 138242068317888 Categorizing call for number: 0500812222
INFO 2024-10-01 18:12:55,353 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:55,355 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:55,355 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Match found: 0500812222 matches 05
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:55,356 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:55,357 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:12:55,357 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:12:55,357 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:55,357 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:55,359 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:55,360 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:55,363 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:12:55,365 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:12:55,369 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:12:55.367128+00:00, Should reset: False
INFO 2024-10-01 18:12:55,369 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:12:55,369 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:12:55,369 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:55,369 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:55,371 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:55,372 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:12:55,372 models 570 138242068317888 Initial state: caller=7781, callee=0500812222, duration=None, total_cost=0.00
INFO 2024-10-01 18:12:55,375 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:12:55,375 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0500812222
INFO 2024-10-01 18:12:55,375 utils 570 138242068317888 Original number: 0500812222
INFO 2024-10-01 18:12:55,376 utils 570 138242068317888 Cleaned number: 0500812222
INFO 2024-10-01 18:12:55,376 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:12:55,376 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:12:55,376 models 570 138242068317888 Categorizing call for number: 0500812222
INFO 2024-10-01 18:12:55,379 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:12:55,381 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:12:55,381 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:12:55,381 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:12:55,382 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:12:55,382 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:12:55,382 models 570 138242068317888 Match found: 0500812222 matches 05
INFO 2024-10-01 18:12:55,382 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:12:55,383 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:12:55,383 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:12:55,383 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:12:55,383 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:12:55,384 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:12:55,386 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:12:55,386 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:12:55,390 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:12:55,392 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:12:55,396 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:12:55.393819+00:00, Should reset: False
INFO 2024-10-01 18:12:55,397 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:12:55,397 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:12:55,397 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:12:55,397 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:12:55,400 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:12:55,400 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0500812222 at 2024-10-01 15:12:38+03:00
INFO 2024-10-01 18:12:55,804 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58054) on port 8000
INFO 2024-10-01 18:13:08,714 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:11:34,8000,10001,00:01:33,2024/10/01 15:11:34,2024/10/01 15:13:07,TerminatedBySrc,ReplacedDst,,537085298,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,537085298:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:13:08,714 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:11:34', '8000', '10001', '00:01:33', '2024/10/01 15:11:34', '2024/10/01 15:13:07', 'TerminatedBySrc', 'ReplacedDst', '', '537085298', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '537085298:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:13:08,730 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:08,731 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=93, total_cost=0.0
INFO 2024-10-01 18:13:08,731 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:08,731 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:13:08,731 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:13:08,731 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:13:08,732 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:13:08,732 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:08,732 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:13:08,735 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:08,737 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:08,737 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:13:08,737 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 Calculating total cost for call: duration=93 seconds
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:13:08,738 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:13:08,739 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:08,741 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:08,741 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:13:08,744 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:13:08,747 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:08,747 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:08,747 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=93, total_cost=0.00
INFO 2024-10-01 18:13:08,751 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:13:08,751 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:13:08,752 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:13:08,752 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:13:08,752 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:13:08,752 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:08,752 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:13:08,755 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:08,758 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:08,758 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:13:08,758 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:13:08,758 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:08,761 models 570 138242068317888 Calculating total cost for call: duration=93 seconds
INFO 2024-10-01 18:13:08,761 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:13:08,761 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:13:08,761 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:13:08,761 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:13:08,762 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:08,767 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:08,768 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:13:08,769 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:13:08,771 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:08,772 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:11:34+03:00
INFO 2024-10-01 18:13:09,183 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58055) on port 8000
INFO 2024-10-01 18:13:22,464 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:12:06,0545299743,7790,00:01:02,2024/10/01 15:12:19,2024/10/01 15:13:21,TerminatedBySrc,,,Ext.7790,0545299743,10001,,,Extension,Line,,Maram Alharbi,0545299743,
INFO 2024-10-01 18:13:22,464 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:12:06', '0545299743', '7790', '00:01:02', '2024/10/01 15:12:19', '2024/10/01 15:13:21', 'TerminatedBySrc', '', '', 'Ext.7790', '0545299743', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0545299743', '']
INFO 2024-10-01 18:13:22,481 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:22,482 models 570 138242068317888 Initial state: caller=7790, callee=0545299743, duration=62, total_cost=0.0
INFO 2024-10-01 18:13:22,482 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:22,482 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0545299743
INFO 2024-10-01 18:13:22,482 utils 570 138242068317888 Original number: 0545299743
INFO 2024-10-01 18:13:22,483 utils 570 138242068317888 Cleaned number: 0545299743
INFO 2024-10-01 18:13:22,483 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:22,483 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:22,483 models 570 138242068317888 Categorizing call for number: 0545299743
INFO 2024-10-01 18:13:22,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:22,489 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:22,489 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:22,489 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:22,489 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:22,490 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:22,490 models 570 138242068317888 Match found: 0545299743 matches 05
INFO 2024-10-01 18:13:22,490 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:22,490 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:22,490 models 570 138242068317888 Calculating total cost for call: duration=62 seconds
INFO 2024-10-01 18:13:22,491 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:13:22,491 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:22,491 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:13:22,491 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:13:22,491 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:22,494 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:22,494 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:22,498 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:13:22,500 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:22,505 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:13:22.502780+00:00, Should reset: False
INFO 2024-10-01 18:13:22,505 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:13:22,506 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:22,506 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:13:22,506 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 18:13:22,506 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 18:13:22,506 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:13:22,508 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:22,509 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:22,509 models 570 138242068317888 Initial state: caller=7790, callee=0545299743, duration=62, total_cost=0.80
INFO 2024-10-01 18:13:22,511 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:13:22,512 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0545299743
INFO 2024-10-01 18:13:22,512 utils 570 138242068317888 Original number: 0545299743
INFO 2024-10-01 18:13:22,512 utils 570 138242068317888 Cleaned number: 0545299743
INFO 2024-10-01 18:13:22,512 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:22,512 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:22,512 models 570 138242068317888 Categorizing call for number: 0545299743
INFO 2024-10-01 18:13:22,514 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:22,516 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:22,516 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:22,516 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:22,516 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Match found: 0545299743 matches 05
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Calculating total cost for call: duration=62 seconds
INFO 2024-10-01 18:13:22,517 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:13:22,518 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:22,518 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:13:22,518 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:13:22,518 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:22,520 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:22,520 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:13:22,524 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:13:22,526 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:22,530 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:13:22.527877+00:00, Should reset: False
INFO 2024-10-01 18:13:22,530 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:13:22,530 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:22,530 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:22,530 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:22,533 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:22,533 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0545299743 at 2024-10-01 15:12:06+03:00
INFO 2024-10-01 18:13:22,931 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58056) on port 8000
INFO 2024-10-01 18:13:24,325 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:08:53,0540909955,7783,00:03:53,2024/10/01 15:09:29,2024/10/01 15:13:23,TerminatedByDst,,,Ext.7783,0540909955,10001,,,Extension,Line,,Majd Alshehri,0540909955,
INFO 2024-10-01 18:13:24,326 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:08:53', '0540909955', '7783', '00:03:53', '2024/10/01 15:09:29', '2024/10/01 15:13:23', 'TerminatedByDst', '', '', 'Ext.7783', '0540909955', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0540909955', '']
INFO 2024-10-01 18:13:24,342 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:24,342 models 570 138242068317888 Initial state: caller=7783, callee=0540909955, duration=233, total_cost=0.0
INFO 2024-10-01 18:13:24,343 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:24,343 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0540909955
INFO 2024-10-01 18:13:24,343 utils 570 138242068317888 Original number: 0540909955
INFO 2024-10-01 18:13:24,343 utils 570 138242068317888 Cleaned number: 0540909955
INFO 2024-10-01 18:13:24,344 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:24,344 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:24,344 models 570 138242068317888 Categorizing call for number: 0540909955
INFO 2024-10-01 18:13:24,347 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:24,349 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:24,349 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:24,350 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:24,350 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:24,350 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:24,350 models 570 138242068317888 Match found: 0540909955 matches 05
INFO 2024-10-01 18:13:24,350 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:24,351 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:24,351 models 570 138242068317888 Calculating total cost for call: duration=233 seconds
INFO 2024-10-01 18:13:24,351 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:13:24,351 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:24,351 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:13:24,352 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:13:24,352 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:24,354 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:24,355 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:24,358 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:13:24,360 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 17.60
INFO 2024-10-01 18:13:24,364 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:13:24.362711+00:00, Should reset: False
INFO 2024-10-01 18:13:24,364 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:13:24,365 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 17.60
INFO 2024-10-01 18:13:24,365 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:13:24,365 models 570 138242068317888 Attempting to deduct 1.60 from balance 82.40
INFO 2024-10-01 18:13:24,367 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 80.80
INFO 2024-10-01 18:13:24,367 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 80.80
INFO 2024-10-01 18:13:24,369 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:24,369 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:24,369 models 570 138242068317888 Initial state: caller=7783, callee=0540909955, duration=233, total_cost=1.60
INFO 2024-10-01 18:13:24,372 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:13:24,372 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0540909955
INFO 2024-10-01 18:13:24,372 utils 570 138242068317888 Original number: 0540909955
INFO 2024-10-01 18:13:24,372 utils 570 138242068317888 Cleaned number: 0540909955
INFO 2024-10-01 18:13:24,373 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:24,373 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:24,373 models 570 138242068317888 Categorizing call for number: 0540909955
INFO 2024-10-01 18:13:24,375 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:24,376 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:24,377 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:24,377 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:24,377 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:24,377 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Match found: 0540909955 matches 05
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Calculating total cost for call: duration=233 seconds
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:13:24,378 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:24,379 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:13:24,379 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:13:24,379 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:24,381 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:24,381 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:13:24,385 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:13:24,387 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 19.20
INFO 2024-10-01 18:13:24,390 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:13:24.388701+00:00, Should reset: False
INFO 2024-10-01 18:13:24,391 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:13:24,391 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 19.20
INFO 2024-10-01 18:13:24,391 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:24,391 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:24,394 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:24,395 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0540909955 at 2024-10-01 15:08:53+03:00
INFO 2024-10-01 18:13:24,805 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58057) on port 8000
INFO 2024-10-01 18:13:32,756 basehttp 89332 125374656677568 "GET /outgoing_international/pdf/?time_period=today&custom_date= HTTP/1.1" 200 2491
INFO 2024-10-01 18:13:34,690 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:10:07,0569070646,7552,00:03:14,2024/10/01 15:10:18,2024/10/01 15:13:33,TerminatedBySrc,ReplacedSrc,,Ext.7552,0569070646,10001,0569070646,10001,Extension,Line,Line,Prabu Muruganantham,0569070646,0569070646
INFO 2024-10-01 18:13:34,691 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:10:07', '0569070646', '7552', '00:03:14', '2024/10/01 15:10:18', '2024/10/01 15:13:33', 'TerminatedBySrc', 'ReplacedSrc', '', 'Ext.7552', '0569070646', '10001', '0569070646', '10001', 'Extension', 'Line', 'Line', 'Prabu Muruganantham', '0569070646', '0569070646']
INFO 2024-10-01 18:13:34,706 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:34,706 models 570 138242068317888 Initial state: caller=7552, callee=0569070646, duration=194, total_cost=0.0
INFO 2024-10-01 18:13:34,707 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:34,707 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0569070646
INFO 2024-10-01 18:13:34,707 utils 570 138242068317888 Original number: 0569070646
INFO 2024-10-01 18:13:34,707 utils 570 138242068317888 Cleaned number: 0569070646
INFO 2024-10-01 18:13:34,707 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:34,708 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:34,708 models 570 138242068317888 Categorizing call for number: 0569070646
INFO 2024-10-01 18:13:34,710 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:34,712 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Match found: 0569070646 matches 05
INFO 2024-10-01 18:13:34,713 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 Calculating total cost for call: duration=194 seconds
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:13:34,714 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:13:34,716 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:34,718 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:34,719 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:34,723 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 18:13:34,725 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 18:13:34,730 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 15:13:34.727637+00:00, Should reset: False
INFO 2024-10-01 18:13:34,730 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 18:13:34,731 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 70.40
INFO 2024-10-01 18:13:34,731 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:13:34,731 models 570 138242068317888 Attempting to deduct 1.60 from balance 29.60
INFO 2024-10-01 18:13:34,733 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 28.00
INFO 2024-10-01 18:13:34,734 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 28.00
INFO 2024-10-01 18:13:34,736 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:34,736 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:34,736 models 570 138242068317888 Initial state: caller=7552, callee=0569070646, duration=194, total_cost=1.60
INFO 2024-10-01 18:13:34,739 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:13:34,740 models 570 138242068317888 Before determining country, Caller: 7552, Callee: 0569070646
INFO 2024-10-01 18:13:34,740 utils 570 138242068317888 Original number: 0569070646
INFO 2024-10-01 18:13:34,740 utils 570 138242068317888 Cleaned number: 0569070646
INFO 2024-10-01 18:13:34,741 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:34,741 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:34,741 models 570 138242068317888 Categorizing call for number: 0569070646
INFO 2024-10-01 18:13:34,743 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:34,745 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:34,746 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:34,746 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:34,747 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:34,747 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:34,747 models 570 138242068317888 Match found: 0569070646 matches 05
INFO 2024-10-01 18:13:34,747 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:34,747 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 Calculating total cost for call: duration=194 seconds
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:13:34,748 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:34,751 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:34,752 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:13:34,755 models 570 138242068317888 Found extension: 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 18:13:34,757 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 72.00
INFO 2024-10-01 18:13:34,761 models 570 138242068317888 Quota for 7552 - Prabu Muruganantham (Smasco): Last reset: 2024-09-15 06:35:15.661684+00:00, Next reset: 2024-10-15 06:35:15.661684+00:00, Current time: 2024-10-01 15:13:34.758979+00:00, Should reset: False
INFO 2024-10-01 18:13:34,762 models 570 138242068317888 Quota reset not needed for 7552 - Prabu Muruganantham (Smasco)
INFO 2024-10-01 18:13:34,762 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 72.00
INFO 2024-10-01 18:13:34,762 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:34,762 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:34,764 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:34,764 socket_server 570 138242068317888 Saved call record for company Smasco: 7552 -> 0569070646 at 2024-10-01 15:10:07+03:00
INFO 2024-10-01 18:13:35,187 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58059) on port 8000
INFO 2024-10-01 18:13:47,177 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:13:07,0557402260,7781,00:00:30,2024/10/01 15:13:16,2024/10/01 15:13:46,TerminatedBySrc,,,Ext.7781,0557402260,10001,,,Extension,Line,,Abdullah Jabal,0557402260,
INFO 2024-10-01 18:13:47,178 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:13:07', '0557402260', '7781', '00:00:30', '2024/10/01 15:13:16', '2024/10/01 15:13:46', 'TerminatedBySrc', '', '', 'Ext.7781', '0557402260', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0557402260', '']
INFO 2024-10-01 18:13:47,195 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:47,195 models 570 138242068317888 Initial state: caller=7781, callee=0557402260, duration=30, total_cost=0.0
INFO 2024-10-01 18:13:47,195 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:47,195 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0557402260
INFO 2024-10-01 18:13:47,196 utils 570 138242068317888 Original number: 0557402260
INFO 2024-10-01 18:13:47,196 utils 570 138242068317888 Cleaned number: 0557402260
INFO 2024-10-01 18:13:47,196 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:47,196 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:47,196 models 570 138242068317888 Categorizing call for number: 0557402260
INFO 2024-10-01 18:13:47,199 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:47,201 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:47,201 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:47,201 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:47,201 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:47,202 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:47,202 models 570 138242068317888 Match found: 0557402260 matches 05
INFO 2024-10-01 18:13:47,202 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:47,202 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:47,202 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 18:13:47,203 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:13:47,203 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:47,203 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:13:47,203 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:13:47,203 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:47,210 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:47,210 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:47,216 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:13:47,218 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:13:47,221 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:13:47.219980+00:00, Should reset: False
INFO 2024-10-01 18:13:47,222 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:13:47,222 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.20
INFO 2024-10-01 18:13:47,222 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:13:47,222 models 570 138242068317888 Attempting to deduct 0.40 from balance 70.80
INFO 2024-10-01 18:13:47,224 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 70.40
INFO 2024-10-01 18:13:47,224 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 70.40
INFO 2024-10-01 18:13:47,226 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:47,226 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:47,227 models 570 138242068317888 Initial state: caller=7781, callee=0557402260, duration=30, total_cost=0.40
INFO 2024-10-01 18:13:47,229 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:13:47,230 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0557402260
INFO 2024-10-01 18:13:47,230 utils 570 138242068317888 Original number: 0557402260
INFO 2024-10-01 18:13:47,230 utils 570 138242068317888 Cleaned number: 0557402260
INFO 2024-10-01 18:13:47,230 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:47,230 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:47,230 models 570 138242068317888 Categorizing call for number: 0557402260
INFO 2024-10-01 18:13:47,232 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:47,234 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:47,234 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:47,234 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:47,234 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:47,235 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:47,235 models 570 138242068317888 Match found: 0557402260 matches 05
INFO 2024-10-01 18:13:47,235 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:47,235 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:47,235 models 570 138242068317888 Calculating total cost for call: duration=30 seconds
INFO 2024-10-01 18:13:47,236 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:13:47,236 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:13:47,236 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:13:47,236 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:13:47,236 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:47,238 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:47,239 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:13:47,241 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:13:47,243 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:13:47,246 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:13:47.244733+00:00, Should reset: False
INFO 2024-10-01 18:13:47,247 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:13:47,247 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:13:47,247 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:47,247 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:47,249 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:47,249 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0557402260 at 2024-10-01 15:13:07+03:00
INFO 2024-10-01 18:13:47,661 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58060) on port 8000
INFO 2024-10-01 18:13:47,781 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:13:26,0570815796,1030,,,2024/10/01 15:13:47,Failed,,,Ext.1030,0570815796,0570815796,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570815796,
INFO 2024-10-01 18:13:47,781 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:13:26', '0570815796', '1030', '', '', '2024/10/01 15:13:47', 'Failed', '', '', 'Ext.1030', '0570815796', '0570815796', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570815796', '']
INFO 2024-10-01 18:13:47,797 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:47,797 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.0
INFO 2024-10-01 18:13:47,798 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:13:47,798 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:13:47,798 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:13:47,798 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:13:47,799 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:47,799 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:47,799 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:13:47,802 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:47,804 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:47,804 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:47,804 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:47,804 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:47,805 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:47,805 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:13:47,805 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:47,805 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:47,805 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:13:47,806 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:13:47,806 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:13:47,806 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:47,808 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:47,808 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:47,812 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:13:47,813 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:47,817 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:13:47.815479+00:00, Should reset: False
INFO 2024-10-01 18:13:47,817 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:13:47,818 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:47,818 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:47,818 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:47,820 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:47,820 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:13:47,820 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.00
INFO 2024-10-01 18:13:47,823 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:13:47,823 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:13:47,823 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:13:47,823 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:13:47,823 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:13:47,824 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:13:47,824 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:13:47,826 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:13:47,827 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:13:47,827 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:13:47,828 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:13:47,829 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:13:47,829 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:13:47,829 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:13:47,829 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:13:47,831 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:13:47,831 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:13:47,834 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:13:47,836 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:47,840 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:13:47.838504+00:00, Should reset: False
INFO 2024-10-01 18:13:47,841 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:13:47,841 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:13:47,841 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:13:47,841 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:13:47,843 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:13:47,843 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570815796 at 2024-10-01 15:13:26+03:00
INFO 2024-10-01 18:13:48,233 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58061) on port 8000
INFO 2024-10-01 18:14:09,483 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:12:59,0549004730,7301,,,2024/10/01 15:14:08,Failed,,,Ext.7301,0549004730,0549004730,,,Extension,LineSet,,Muhammed Sahail,0549004730,
INFO 2024-10-01 18:14:09,484 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:12:59', '0549004730', '7301', '', '', '2024/10/01 15:14:08', 'Failed', '', '', 'Ext.7301', '0549004730', '0549004730', '', '', 'Extension', 'LineSet', '', 'Muhammed Sahail', '0549004730', '']
INFO 2024-10-01 18:14:09,502 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:09,502 models 570 138242068317888 Initial state: caller=7301, callee=0549004730, duration=None, total_cost=0.0
INFO 2024-10-01 18:14:09,502 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:09,503 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0549004730
INFO 2024-10-01 18:14:09,503 utils 570 138242068317888 Original number: 0549004730
INFO 2024-10-01 18:14:09,503 utils 570 138242068317888 Cleaned number: 0549004730
INFO 2024-10-01 18:14:09,504 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:09,504 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:09,504 models 570 138242068317888 Categorizing call for number: 0549004730
INFO 2024-10-01 18:14:09,508 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:09,510 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:09,510 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:09,510 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:09,511 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:09,511 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:09,511 models 570 138242068317888 Match found: 0549004730 matches 05
INFO 2024-10-01 18:14:09,511 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:09,511 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:09,512 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:09,512 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:09,512 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:09,512 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:09,514 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:09,515 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:09,518 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:14:09,520 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:14:09,523 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:14:09.521866+00:00, Should reset: False
INFO 2024-10-01 18:14:09,523 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:14:09,524 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:14:09,524 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:09,524 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:09,526 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:09,526 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:09,526 models 570 138242068317888 Initial state: caller=7301, callee=0549004730, duration=None, total_cost=0.00
INFO 2024-10-01 18:14:09,529 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:14:09,530 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0549004730
INFO 2024-10-01 18:14:09,530 utils 570 138242068317888 Original number: 0549004730
INFO 2024-10-01 18:14:09,530 utils 570 138242068317888 Cleaned number: 0549004730
INFO 2024-10-01 18:14:09,530 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:09,530 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:09,530 models 570 138242068317888 Categorizing call for number: 0549004730
INFO 2024-10-01 18:14:09,532 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:09,534 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:09,534 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:09,534 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:09,534 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:09,534 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:09,535 models 570 138242068317888 Match found: 0549004730 matches 05
INFO 2024-10-01 18:14:09,535 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:09,535 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:09,535 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:09,535 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:09,536 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:09,536 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:09,539 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:09,539 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:09,541 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:14:09,543 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:14:09,546 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:14:09.544424+00:00, Should reset: False
INFO 2024-10-01 18:14:09,546 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:14:09,546 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:14:09,546 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:09,547 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:09,548 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:09,548 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0549004730 at 2024-10-01 15:12:59+03:00
INFO 2024-10-01 18:14:09,938 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58062) on port 8000
INFO 2024-10-01 18:14:17,948 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:13:31,0553998893,7790,00:00:41,2024/10/01 15:13:36,2024/10/01 15:14:17,TerminatedByDst,,,Ext.7790,0553998893,10001,,,Extension,Line,,Maram Alharbi,0553998893,
INFO 2024-10-01 18:14:17,949 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:13:31', '0553998893', '7790', '00:00:41', '2024/10/01 15:13:36', '2024/10/01 15:14:17', 'TerminatedByDst', '', '', 'Ext.7790', '0553998893', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0553998893', '']
INFO 2024-10-01 18:14:17,970 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:17,970 models 570 138242068317888 Initial state: caller=7790, callee=0553998893, duration=41, total_cost=0.0
INFO 2024-10-01 18:14:17,970 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:17,970 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0553998893
INFO 2024-10-01 18:14:17,971 utils 570 138242068317888 Original number: 0553998893
INFO 2024-10-01 18:14:17,971 utils 570 138242068317888 Cleaned number: 0553998893
INFO 2024-10-01 18:14:17,971 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:17,971 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:17,971 models 570 138242068317888 Categorizing call for number: 0553998893
INFO 2024-10-01 18:14:17,974 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:17,976 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Match found: 0553998893 matches 05
INFO 2024-10-01 18:14:17,977 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 Calculating total cost for call: duration=41 seconds
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:14:17,978 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:14:17,979 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:17,981 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:17,981 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:17,985 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:14:17,986 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:17,991 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:14:17.989180+00:00, Should reset: False
INFO 2024-10-01 18:14:17,991 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:14:17,992 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:17,992 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:14:17,992 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:14:17,992 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:14:17,993 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:14:17,995 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:17,996 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:17,996 models 570 138242068317888 Initial state: caller=7790, callee=0553998893, duration=41, total_cost=0.40
INFO 2024-10-01 18:14:17,999 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:14:17,999 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0553998893
INFO 2024-10-01 18:14:17,999 utils 570 138242068317888 Original number: 0553998893
INFO 2024-10-01 18:14:17,999 utils 570 138242068317888 Cleaned number: 0553998893
INFO 2024-10-01 18:14:18,000 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:18,000 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:18,000 models 570 138242068317888 Categorizing call for number: 0553998893
INFO 2024-10-01 18:14:18,002 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:18,003 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Match found: 0553998893 matches 05
INFO 2024-10-01 18:14:18,004 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 Calculating total cost for call: duration=41 seconds
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:14:18,005 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:14:18,006 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:18,008 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:18,008 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:14:18,011 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:14:18,013 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:18,016 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:14:18.014618+00:00, Should reset: False
INFO 2024-10-01 18:14:18,017 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:14:18,017 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:18,017 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:18,017 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:18,019 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:18,020 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0553998893 at 2024-10-01 15:13:31+03:00
INFO 2024-10-01 18:14:18,418 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58063) on port 8000
INFO 2024-10-01 18:14:23,263 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:00,0570451697,8426,,,2024/10/01 15:14:22,Failed,,,Ext.8426,0570451697,0570451697,,,Extension,LineSet,,Rehan Khan Mohammed,0570451697,
INFO 2024-10-01 18:14:23,265 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:00', '0570451697', '8426', '', '', '2024/10/01 15:14:22', 'Failed', '', '', 'Ext.8426', '0570451697', '0570451697', '', '', 'Extension', 'LineSet', '', 'Rehan Khan Mohammed', '0570451697', '']
INFO 2024-10-01 18:14:23,289 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:23,289 models 570 138242068317888 Initial state: caller=8426, callee=0570451697, duration=None, total_cost=0.0
INFO 2024-10-01 18:14:23,289 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:23,290 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0570451697
INFO 2024-10-01 18:14:23,290 utils 570 138242068317888 Original number: 0570451697
INFO 2024-10-01 18:14:23,290 utils 570 138242068317888 Cleaned number: 0570451697
INFO 2024-10-01 18:14:23,290 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:23,290 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:23,290 models 570 138242068317888 Categorizing call for number: 0570451697
INFO 2024-10-01 18:14:23,293 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:23,296 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:23,299 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:23,299 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:23,300 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:23,300 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:23,300 models 570 138242068317888 Match found: 0570451697 matches 05
INFO 2024-10-01 18:14:23,300 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:23,302 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:23,302 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:23,302 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:23,304 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:23,304 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:23,308 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:23,309 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:23,313 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:14:23,315 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:23,320 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:14:23.317543+00:00, Should reset: False
INFO 2024-10-01 18:14:23,320 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:14:23,321 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:23,321 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:23,321 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:23,329 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:23,329 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:23,329 models 570 138242068317888 Initial state: caller=8426, callee=0570451697, duration=None, total_cost=0.00
INFO 2024-10-01 18:14:23,336 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:14:23,336 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0570451697
INFO 2024-10-01 18:14:23,337 utils 570 138242068317888 Original number: 0570451697
INFO 2024-10-01 18:14:23,337 utils 570 138242068317888 Cleaned number: 0570451697
INFO 2024-10-01 18:14:23,338 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:23,338 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:23,339 models 570 138242068317888 Categorizing call for number: 0570451697
INFO 2024-10-01 18:14:23,341 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:23,343 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:23,343 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:23,344 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:23,344 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:23,345 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:23,345 models 570 138242068317888 Match found: 0570451697 matches 05
INFO 2024-10-01 18:14:23,345 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:23,345 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:23,345 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:23,346 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:23,347 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:23,347 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:23,350 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:23,350 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:23,354 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:14:23,356 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:23,360 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:14:23.358179+00:00, Should reset: False
INFO 2024-10-01 18:14:23,360 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:14:23,361 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:23,361 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:23,361 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:23,362 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:23,363 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0570451697 at 2024-10-01 15:14:00+03:00
INFO 2024-10-01 18:14:23,770 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58064) on port 8000
INFO 2024-10-01 18:14:25,840 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:23,8000,10001,00:00:01,2024/10/01 15:14:23,2024/10/01 15:14:25,TerminatedBySrc,,,0558194029,Ext.8000,8000,,,Line,Ivr,,0558194029:Main Number,WelcomeMessage,
INFO 2024-10-01 18:14:25,840 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:23', '8000', '10001', '00:00:01', '2024/10/01 15:14:23', '2024/10/01 15:14:25', 'TerminatedBySrc', '', '', '0558194029', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0558194029:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:14:25,861 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:25,862 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=1, total_cost=0.0
INFO 2024-10-01 18:14:25,862 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:25,863 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:14:25,863 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:14:25,864 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:14:25,864 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:14:25,865 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:25,865 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:14:25,868 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:25,871 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:25,871 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:14:25,871 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 Calculating total cost for call: duration=1 seconds
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:14:25,872 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:25,874 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:25,877 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:25,877 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:14:25,881 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:14:25,883 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:25,884 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:25,885 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=1, total_cost=0.00
INFO 2024-10-01 18:14:25,888 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:14:25,888 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:14:25,889 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:14:25,889 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:14:25,889 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:14:25,889 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:25,889 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:14:25,892 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:25,894 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:25,895 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:14:25,895 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:14:25,896 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:25,896 models 570 138242068317888 Calculating total cost for call: duration=1 seconds
INFO 2024-10-01 18:14:25,897 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:25,897 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:14:25,897 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:14:25,897 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:25,897 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:25,900 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:25,901 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:14:25,903 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:14:25,904 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:25,905 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:14:23+03:00
INFO 2024-10-01 18:14:26,295 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58065) on port 8000
INFO 2024-10-01 18:14:39,241 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:14,0570815796,1030,,,2024/10/01 15:14:38,Failed,,,Ext.1030,0570815796,0570815796,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570815796,
INFO 2024-10-01 18:14:39,241 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:14', '0570815796', '1030', '', '', '2024/10/01 15:14:38', 'Failed', '', '', 'Ext.1030', '0570815796', '0570815796', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570815796', '']
INFO 2024-10-01 18:14:39,257 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:39,257 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.0
INFO 2024-10-01 18:14:39,258 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:39,258 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:14:39,258 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:14:39,258 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:14:39,258 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:39,259 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:39,259 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:14:39,261 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:39,263 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:39,264 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:39,264 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:39,264 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:39,264 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:39,265 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:14:39,265 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:39,265 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:39,265 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:39,265 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:39,265 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:39,266 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:39,268 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:39,268 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:39,272 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:14:39,274 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:39,277 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:14:39.275771+00:00, Should reset: False
INFO 2024-10-01 18:14:39,278 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:14:39,278 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:39,278 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:39,278 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:39,280 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:39,280 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:39,280 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.00
INFO 2024-10-01 18:14:39,283 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:14:39,283 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:14:39,283 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:14:39,283 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:14:39,283 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:39,284 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:39,284 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:14:39,285 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:39,287 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:39,287 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:39,288 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:39,289 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:14:39,289 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:14:39,289 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:39,289 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:39,291 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:39,291 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:39,294 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:14:39,295 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:39,298 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:14:39.296424+00:00, Should reset: False
INFO 2024-10-01 18:14:39,298 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:14:39,298 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:39,298 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:39,298 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:39,300 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:39,300 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570815796 at 2024-10-01 15:14:14+03:00
INFO 2024-10-01 18:14:39,701 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58067) on port 8000
INFO 2024-10-01 18:14:42,111 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:34,8000,10001,00:00:06,2024/10/01 15:14:34,2024/10/01 15:14:41,TerminatedBySrc,,,0558194029,Ext.8000,8000,,,Line,Ivr,,0558194029:Main Number,WelcomeMessage,
INFO 2024-10-01 18:14:42,111 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:34', '8000', '10001', '00:00:06', '2024/10/01 15:14:34', '2024/10/01 15:14:41', 'TerminatedBySrc', '', '', '0558194029', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0558194029:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:14:42,126 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:42,126 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.0
INFO 2024-10-01 18:14:42,127 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:42,127 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:14:42,127 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:14:42,128 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:14:42,128 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:14:42,128 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:42,128 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:14:42,131 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:42,133 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:42,133 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:14:42,134 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:14:42,134 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:42,134 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 18:14:42,134 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:42,135 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:14:42,135 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:14:42,135 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:42,135 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:42,137 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:42,138 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:14:42,141 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:14:42,145 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:42,146 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:42,146 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=6, total_cost=0.00
INFO 2024-10-01 18:14:42,151 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:14:42,154 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:14:42,154 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:14:42,154 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:14:42,155 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:14:42,156 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:42,156 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:14:42,158 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:42,160 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:42,160 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:14:42,160 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:14:42,160 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:42,161 models 570 138242068317888 Calculating total cost for call: duration=6 seconds
INFO 2024-10-01 18:14:42,161 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:14:42,161 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:14:42,161 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:14:42,162 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:14:42,162 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:42,164 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:42,164 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:14:42,166 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:14:42,167 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:42,168 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:14:34+03:00
INFO 2024-10-01 18:14:42,570 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58068) on port 8000
INFO 2024-10-01 18:14:58,375 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:07:20,0563993996,7791,00:07:25,2024/10/01 15:07:32,2024/10/01 15:14:57,TerminatedBySrc,,,Ext.7791,0563993996,10001,,,Extension,Line,,Arwa Almagli,0563993996,
INFO 2024-10-01 18:14:58,376 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:07:20', '0563993996', '7791', '00:07:25', '2024/10/01 15:07:32', '2024/10/01 15:14:57', 'TerminatedBySrc', '', '', 'Ext.7791', '0563993996', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0563993996', '']
INFO 2024-10-01 18:14:58,392 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:58,392 models 570 138242068317888 Initial state: caller=7791, callee=0563993996, duration=445, total_cost=0.0
INFO 2024-10-01 18:14:58,392 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:14:58,393 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0563993996
INFO 2024-10-01 18:14:58,393 utils 570 138242068317888 Original number: 0563993996
INFO 2024-10-01 18:14:58,393 utils 570 138242068317888 Cleaned number: 0563993996
INFO 2024-10-01 18:14:58,393 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:58,393 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:58,393 models 570 138242068317888 Categorizing call for number: 0563993996
INFO 2024-10-01 18:14:58,396 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:58,398 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:58,398 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:58,399 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:58,399 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:58,399 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:58,399 models 570 138242068317888 Match found: 0563993996 matches 05
INFO 2024-10-01 18:14:58,400 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:58,400 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:58,400 models 570 138242068317888 Calculating total cost for call: duration=445 seconds
INFO 2024-10-01 18:14:58,400 models 570 138242068317888 Duration in minutes: 8
INFO 2024-10-01 18:14:58,400 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:14:58,401 models 570 138242068317888 Calculated total cost: 3.20
INFO 2024-10-01 18:14:58,401 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=3.20
INFO 2024-10-01 18:14:58,401 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:58,403 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:58,404 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:14:58,408 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:14:58,410 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:58,417 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:14:58.411840+00:00, Should reset: False
INFO 2024-10-01 18:14:58,417 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:14:58,417 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:58,417 models 570 138242068317888 Amount to deduct: 3.20
INFO 2024-10-01 18:14:58,418 models 570 138242068317888 Attempting to deduct 3.20 from balance 0.00
WARNING 2024-10-01 18:14:58,418 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 3.20
WARNING 2024-10-01 18:14:58,418 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 18:14:58,421 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:58,421 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:14:58,422 models 570 138242068317888 Initial state: caller=7791, callee=0563993996, duration=445, total_cost=3.20
INFO 2024-10-01 18:14:58,425 models 570 138242068317888 This is an existing CallRecord. Old total cost: 3.20
INFO 2024-10-01 18:14:58,426 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0563993996
INFO 2024-10-01 18:14:58,426 utils 570 138242068317888 Original number: 0563993996
INFO 2024-10-01 18:14:58,426 utils 570 138242068317888 Cleaned number: 0563993996
INFO 2024-10-01 18:14:58,426 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:14:58,426 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:14:58,427 models 570 138242068317888 Categorizing call for number: 0563993996
INFO 2024-10-01 18:14:58,429 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:14:58,432 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:14:58,432 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:14:58,433 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:14:58,433 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Match found: 0563993996 matches 05
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Calculating total cost for call: duration=445 seconds
INFO 2024-10-01 18:14:58,434 models 570 138242068317888 Duration in minutes: 8
INFO 2024-10-01 18:14:58,435 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:14:58,435 models 570 138242068317888 Calculated total cost: 3.20
INFO 2024-10-01 18:14:58,435 models 570 138242068317888 After cost calculation: old_total_cost=3.20, new_total_cost=3.20
INFO 2024-10-01 18:14:58,436 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:14:58,438 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:14:58,439 models 570 138242068317888 Starting update_user_quota with old_total_cost=3.20
INFO 2024-10-01 18:14:58,445 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:14:58,446 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:58,457 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:14:58.453477+00:00, Should reset: False
INFO 2024-10-01 18:14:58,458 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:14:58,458 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:14:58,458 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:14:58,458 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:14:58,460 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:14:58,460 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0563993996 at 2024-10-01 15:07:20+03:00
INFO 2024-10-01 18:14:58,872 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58069) on port 8000
INFO 2024-10-01 18:15:09,591 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:15:06,0500304295,1030,,,2024/10/01 15:15:08,Failed,,,Ext.1030,0500304295,0500304295,,,Extension,LineSet,,Saiyed Jafar Ahmad,0500304295,
INFO 2024-10-01 18:15:09,592 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:15:06', '0500304295', '1030', '', '', '2024/10/01 15:15:08', 'Failed', '', '', 'Ext.1030', '0500304295', '0500304295', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0500304295', '']
INFO 2024-10-01 18:15:09,612 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:15:09,613 models 570 138242068317888 Initial state: caller=1030, callee=0500304295, duration=None, total_cost=0.0
INFO 2024-10-01 18:15:09,613 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:15:09,614 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0500304295
INFO 2024-10-01 18:15:09,614 utils 570 138242068317888 Original number: 0500304295
INFO 2024-10-01 18:15:09,614 utils 570 138242068317888 Cleaned number: 0500304295
INFO 2024-10-01 18:15:09,615 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:15:09,615 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:15:09,615 models 570 138242068317888 Categorizing call for number: 0500304295
INFO 2024-10-01 18:15:09,618 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:15:09,621 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:15:09,622 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:15:09,622 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:15:09,622 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:15:09,622 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:15:09,622 models 570 138242068317888 Match found: 0500304295 matches 05
INFO 2024-10-01 18:15:09,623 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:15:09,624 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:15:09,624 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:15:09,624 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:15:09,625 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:15:09,625 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:15:09,628 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:15:09,629 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:15:09,634 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:15:09,637 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:15:09,642 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:15:09.639686+00:00, Should reset: False
INFO 2024-10-01 18:15:09,643 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:15:09,643 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:15:09,644 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:15:09,644 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:15:09,646 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:15:09,647 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:15:09,648 models 570 138242068317888 Initial state: caller=1030, callee=0500304295, duration=None, total_cost=0.00
INFO 2024-10-01 18:15:09,651 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:15:09,651 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0500304295
INFO 2024-10-01 18:15:09,651 utils 570 138242068317888 Original number: 0500304295
INFO 2024-10-01 18:15:09,651 utils 570 138242068317888 Cleaned number: 0500304295
INFO 2024-10-01 18:15:09,652 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:15:09,652 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:15:09,653 models 570 138242068317888 Categorizing call for number: 0500304295
INFO 2024-10-01 18:15:09,656 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:15:09,659 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:15:09,659 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:15:09,660 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:15:09,660 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:15:09,661 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:15:09,662 models 570 138242068317888 Match found: 0500304295 matches 05
INFO 2024-10-01 18:15:09,662 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:15:09,662 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:15:09,662 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:15:09,662 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:15:09,662 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:15:09,664 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:15:09,666 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:15:09,666 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:15:09,670 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:15:09,672 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:15:09,677 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:15:09.674510+00:00, Should reset: False
INFO 2024-10-01 18:15:09,677 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:15:09,677 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:15:09,677 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:15:09,678 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:15:09,679 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:15:09,680 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0500304295 at 2024-10-01 15:15:06+03:00
INFO 2024-10-01 18:15:10,100 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58070) on port 8000
INFO 2024-10-01 18:15:52,295 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:23,8000,10001,00:01:28,2024/10/01 15:14:23,2024/10/01 15:15:51,TerminatedBySrc,ReplacedDst,,0559444836,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0559444836:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:15:52,296 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:23', '8000', '10001', '00:01:28', '2024/10/01 15:14:23', '2024/10/01 15:15:51', 'TerminatedBySrc', 'ReplacedDst', '', '0559444836', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0559444836:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:15:52,314 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:15:52,314 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=88, total_cost=0.0
INFO 2024-10-01 18:15:52,315 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:15:52,316 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:15:52,316 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:15:52,316 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:15:52,316 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:15:52,317 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:15:52,317 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:15:52,320 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:15:52,323 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:15:52,324 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:15:52,325 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:15:52,325 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:15:52,325 models 570 138242068317888 Calculating total cost for call: duration=88 seconds
INFO 2024-10-01 18:15:52,325 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:15:52,325 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:15:52,326 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:15:52,327 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:15:52,327 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:15:52,330 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:15:52,330 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:15:52,333 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:15:52,336 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:15:52,337 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:15:52,337 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=88, total_cost=0.00
INFO 2024-10-01 18:15:52,340 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:15:52,341 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:15:52,341 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:15:52,342 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:15:52,342 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:15:52,342 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:15:52,342 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:15:52,345 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:15:52,348 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:15:52,348 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:15:52,349 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:15:52,349 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:15:52,349 models 570 138242068317888 Calculating total cost for call: duration=88 seconds
INFO 2024-10-01 18:15:52,350 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:15:52,350 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:15:52,350 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:15:52,350 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:15:52,350 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:15:52,353 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:15:52,354 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:15:52,356 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:15:52,358 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:15:52,359 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:14:23+03:00
INFO 2024-10-01 18:15:52,760 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58077) on port 8000
INFO 2024-10-01 18:16:04,645 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:09:10,0556322282,1131,00:06:38,2024/10/01 15:09:25,2024/10/01 15:16:03,TerminatedByDst,,,Ext.1131,0556322282,10001,,,Extension,Line,,MUNIRAH ALQURAISHI,0556322282,
INFO 2024-10-01 18:16:04,646 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:09:10', '0556322282', '1131', '00:06:38', '2024/10/01 15:09:25', '2024/10/01 15:16:03', 'TerminatedByDst', '', '', 'Ext.1131', '0556322282', '10001', '', '', 'Extension', 'Line', '', 'MUNIRAH ALQURAISHI', '0556322282', '']
INFO 2024-10-01 18:16:04,661 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:16:04,661 models 570 138242068317888 Initial state: caller=1131, callee=0556322282, duration=398, total_cost=0.0
INFO 2024-10-01 18:16:04,661 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:16:04,661 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0556322282
INFO 2024-10-01 18:16:04,662 utils 570 138242068317888 Original number: 0556322282
INFO 2024-10-01 18:16:04,662 utils 570 138242068317888 Cleaned number: 0556322282
INFO 2024-10-01 18:16:04,662 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:16:04,662 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:16:04,663 models 570 138242068317888 Categorizing call for number: 0556322282
INFO 2024-10-01 18:16:04,665 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:16:04,667 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:16:04,667 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:16:04,668 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:16:04,668 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:16:04,668 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:16:04,668 models 570 138242068317888 Match found: 0556322282 matches 05
INFO 2024-10-01 18:16:04,668 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 Calculating total cost for call: duration=398 seconds
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 18:16:04,669 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.80
INFO 2024-10-01 18:16:04,670 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:16:04,672 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:16:04,672 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:16:04,675 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:16:04,677 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:16:04,677 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:16:04,677 models 570 138242068317888 Initial state: caller=1131, callee=0556322282, duration=398, total_cost=2.80
INFO 2024-10-01 18:16:04,680 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.80
INFO 2024-10-01 18:16:04,680 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0556322282
INFO 2024-10-01 18:16:04,680 utils 570 138242068317888 Original number: 0556322282
INFO 2024-10-01 18:16:04,680 utils 570 138242068317888 Cleaned number: 0556322282
INFO 2024-10-01 18:16:04,680 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:16:04,681 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:16:04,681 models 570 138242068317888 Categorizing call for number: 0556322282
INFO 2024-10-01 18:16:04,682 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:16:04,684 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:16:04,684 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:16:04,684 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:16:04,684 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:16:04,685 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:16:04,685 models 570 138242068317888 Match found: 0556322282 matches 05
INFO 2024-10-01 18:16:04,685 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:16:04,685 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:16:04,685 models 570 138242068317888 Calculating total cost for call: duration=398 seconds
INFO 2024-10-01 18:16:04,686 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 18:16:04,686 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:16:04,686 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 18:16:04,686 models 570 138242068317888 After cost calculation: old_total_cost=2.80, new_total_cost=2.80
INFO 2024-10-01 18:16:04,686 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:16:04,688 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:16:04,689 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.80
WARNING 2024-10-01 18:16:04,690 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:16:04,692 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:16:04,692 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0556322282 at 2024-10-01 15:09:10+03:00
INFO 2024-10-01 18:16:05,088 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58085) on port 8000
INFO 2024-10-01 18:17:04,528 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:16:29,0509572412,7781,,,2024/10/01 15:17:03,Failed,,,Ext.7781,0509572412,0509572412,,,Extension,LineSet,,Abdullah Jabal,0509572412,
INFO 2024-10-01 18:17:04,529 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:16:29', '0509572412', '7781', '', '', '2024/10/01 15:17:03', 'Failed', '', '', 'Ext.7781', '0509572412', '0509572412', '', '', 'Extension', 'LineSet', '', 'Abdullah Jabal', '0509572412', '']
INFO 2024-10-01 18:17:04,549 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:04,549 models 570 138242068317888 Initial state: caller=7781, callee=0509572412, duration=None, total_cost=0.0
INFO 2024-10-01 18:17:04,549 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:17:04,550 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0509572412
INFO 2024-10-01 18:17:04,550 utils 570 138242068317888 Original number: 0509572412
INFO 2024-10-01 18:17:04,551 utils 570 138242068317888 Cleaned number: 0509572412
INFO 2024-10-01 18:17:04,551 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:17:04,551 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:04,551 models 570 138242068317888 Categorizing call for number: 0509572412
INFO 2024-10-01 18:17:04,555 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:04,558 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:04,558 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:17:04,559 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:17:04,559 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:17:04,559 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:17:04,559 models 570 138242068317888 Match found: 0509572412 matches 05
INFO 2024-10-01 18:17:04,560 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:17:04,560 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:04,560 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:17:04,560 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:17:04,560 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:04,560 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:04,564 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:04,564 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:17:04,569 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:17:04,572 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:17:04,576 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:17:04.574277+00:00, Should reset: False
INFO 2024-10-01 18:17:04,577 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:17:04,577 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:17:04,577 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:17:04,577 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:17:04,579 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:04,580 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:04,580 models 570 138242068317888 Initial state: caller=7781, callee=0509572412, duration=None, total_cost=0.00
INFO 2024-10-01 18:17:04,583 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:17:04,583 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0509572412
INFO 2024-10-01 18:17:04,583 utils 570 138242068317888 Original number: 0509572412
INFO 2024-10-01 18:17:04,584 utils 570 138242068317888 Cleaned number: 0509572412
INFO 2024-10-01 18:17:04,584 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:17:04,584 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:04,585 models 570 138242068317888 Categorizing call for number: 0509572412
INFO 2024-10-01 18:17:04,587 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:04,589 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:04,589 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:17:04,590 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:17:04,590 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:17:04,590 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:17:04,591 models 570 138242068317888 Match found: 0509572412 matches 05
INFO 2024-10-01 18:17:04,591 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:17:04,591 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:04,591 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:17:04,592 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:17:04,592 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:04,592 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:04,595 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:04,595 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:17:04,598 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:17:04,599 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:17:04,609 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:17:04.601874+00:00, Should reset: False
INFO 2024-10-01 18:17:04,612 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:17:04,612 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:17:04,612 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:17:04,612 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:17:04,616 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:04,616 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0509572412 at 2024-10-01 15:16:29+03:00
INFO 2024-10-01 18:17:05,022 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58097) on port 8000
INFO 2024-10-01 18:17:16,336 autoreload 89332 125374924284032 /home/ubuntu/3CX/cdr/cdr3cx/views.py changed, reloading.
INFO 2024-10-01 18:17:16,416 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:17:12,8000,10001,00:00:03,2024/10/01 15:17:12,2024/10/01 15:17:15,TerminatedBySrc,,,0531226161,Ext.8000,8000,,,Line,Ivr,,0531226161:Main Number,WelcomeMessage,
INFO 2024-10-01 18:17:16,417 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:17:12', '8000', '10001', '00:00:03', '2024/10/01 15:17:12', '2024/10/01 15:17:15', 'TerminatedBySrc', '', '', '0531226161', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0531226161:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:17:16,443 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:16,444 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.0
INFO 2024-10-01 18:17:16,446 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:17:16,448 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:17:16,450 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:17:16,451 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:17:16,453 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:17:16,454 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:16,455 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:17:16,459 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:16,463 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:16,463 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:17:16,464 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:17:16,464 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:16,465 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:16,469 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:16,470 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:17:16,474 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:17:16,477 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:16,477 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:16,477 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.00
INFO 2024-10-01 18:17:16,481 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:17:16,481 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:17:16,482 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:17:16,482 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:17:16,483 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:17:16,483 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:16,483 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:17:16,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:16,488 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:16,489 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:17:16,489 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:17:16,490 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:16,490 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:17:16,491 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:16,491 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:17:16,491 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:17:16,491 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:16,492 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:16,494 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:16,495 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:17:16,497 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:17:16,499 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:16,500 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:17:12+03:00
INFO 2024-10-01 18:17:16,900 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58099) on port 8000
INFO 2024-10-01 18:17:17,906 autoreload 90432 140513550012544 Watching for file changes with StatReloader
INFO 2024-10-01 18:17:30,220 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:17:24,7327,7327,00:00:05,2024/10/01 15:17:24,2024/10/01 15:17:29,TerminatedBySrc,,,Ext.7327,Ext.6666,7327,,,Extension,VMail,,Muhammad Hamza Haider,,
INFO 2024-10-01 18:17:30,220 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:17:24', '7327', '7327', '00:00:05', '2024/10/01 15:17:24', '2024/10/01 15:17:29', 'TerminatedBySrc', '', '', 'Ext.7327', 'Ext.6666', '7327', '', '', 'Extension', 'VMail', '', 'Muhammad Hamza Haider', '', '']
INFO 2024-10-01 18:17:30,238 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:30,239 models 570 138242068317888 Initial state: caller=7327, callee=7327, duration=5, total_cost=0.0
INFO 2024-10-01 18:17:30,239 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:17:30,239 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 7327
INFO 2024-10-01 18:17:30,239 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:17:30,239 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:17:30,240 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:17:30,240 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:30,240 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:17:30,243 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:30,245 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:30,245 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:17:30,245 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:17:30,245 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:30,246 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:30,249 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:30,249 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:17:30,253 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:17:30,256 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:17:30,268 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 15:17:30.263327+00:00, Should reset: False
INFO 2024-10-01 18:17:30,268 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:17:30,268 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:17:30,269 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:17:30,269 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:17:30,271 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:30,272 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:30,272 models 570 138242068317888 Initial state: caller=7327, callee=7327, duration=5, total_cost=0.00
INFO 2024-10-01 18:17:30,275 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:17:30,276 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 7327
INFO 2024-10-01 18:17:30,276 utils 570 138242068317888 Original number: 7327
INFO 2024-10-01 18:17:30,276 utils 570 138242068317888 Cleaned number: 7327
INFO 2024-10-01 18:17:30,276 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:17:30,277 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:30,277 models 570 138242068317888 Categorizing call for number: 7327
INFO 2024-10-01 18:17:30,279 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:30,282 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:30,282 models 570 138242068317888 Match found: 7327 matches ^\d{4}$
INFO 2024-10-01 18:17:30,282 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 Calculating total cost for call: duration=5 seconds
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:17:30,283 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:17:30,284 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:30,286 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:30,286 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:17:30,288 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:17:30,290 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:17:30,294 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 15:17:30.292916+00:00, Should reset: False
INFO 2024-10-01 18:17:30,295 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:17:30,295 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:17:30,295 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:17:30,295 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:17:30,297 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:30,297 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 7327 at 2024-10-01 15:17:24+03:00
INFO 2024-10-01 18:17:30,710 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58101) on port 8000
INFO 2024-10-01 18:17:44,480 basehttp 90432 140513275545280 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 37873
INFO 2024-10-01 18:17:49,071 basehttp 90432 140513275545280 "GET /outgoing_international/?time_period=today&custom_date=&search=&per_page=100 HTTP/1.1" 200 23419
INFO 2024-10-01 18:17:49,460 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:16:56,0507945526,8449,00:00:37,2024/10/01 15:17:10,2024/10/01 15:17:48,TerminatedByDst,,,Ext.8449,0507945526,10001,,,Extension,Line,,Mohammed Aasif,0507945526,
INFO 2024-10-01 18:17:49,461 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:16:56', '0507945526', '8449', '00:00:37', '2024/10/01 15:17:10', '2024/10/01 15:17:48', 'TerminatedByDst', '', '', 'Ext.8449', '0507945526', '10001', '', '', 'Extension', 'Line', '', 'Mohammed Aasif', '0507945526', '']
INFO 2024-10-01 18:17:49,481 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:49,481 models 570 138242068317888 Initial state: caller=8449, callee=0507945526, duration=37, total_cost=0.0
INFO 2024-10-01 18:17:49,481 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:17:49,482 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 0507945526
INFO 2024-10-01 18:17:49,482 utils 570 138242068317888 Original number: 0507945526
INFO 2024-10-01 18:17:49,482 utils 570 138242068317888 Cleaned number: 0507945526
INFO 2024-10-01 18:17:49,482 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:17:49,482 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:49,483 models 570 138242068317888 Categorizing call for number: 0507945526
INFO 2024-10-01 18:17:49,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:49,488 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:49,489 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:17:49,489 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:17:49,489 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:17:49,489 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:17:49,490 models 570 138242068317888 Match found: 0507945526 matches 05
INFO 2024-10-01 18:17:49,490 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:17:49,490 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:49,491 models 570 138242068317888 Calculating total cost for call: duration=37 seconds
INFO 2024-10-01 18:17:49,491 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:49,491 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:17:49,491 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:17:49,491 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:17:49,492 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:49,494 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:49,495 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:17:49,499 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:17:49,502 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 18:17:49,506 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:17:49.504451+00:00, Should reset: False
INFO 2024-10-01 18:17:49,506 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:17:49,506 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.20
INFO 2024-10-01 18:17:49,507 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:17:49,507 models 570 138242068317888 Attempting to deduct 0.40 from balance 18.80
INFO 2024-10-01 18:17:49,509 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 18.40
INFO 2024-10-01 18:17:49,509 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 18.40
INFO 2024-10-01 18:17:49,512 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:49,512 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:17:49,512 models 570 138242068317888 Initial state: caller=8449, callee=0507945526, duration=37, total_cost=0.40
INFO 2024-10-01 18:17:49,515 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:17:49,515 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 0507945526
INFO 2024-10-01 18:17:49,515 utils 570 138242068317888 Original number: 0507945526
INFO 2024-10-01 18:17:49,515 utils 570 138242068317888 Cleaned number: 0507945526
INFO 2024-10-01 18:17:49,515 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:17:49,516 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:17:49,516 models 570 138242068317888 Categorizing call for number: 0507945526
INFO 2024-10-01 18:17:49,518 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:17:49,519 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:17:49,520 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:17:49,520 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:17:49,520 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:17:49,520 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Match found: 0507945526 matches 05
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Calculating total cost for call: duration=37 seconds
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:17:49,521 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:17:49,522 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:17:49,522 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:17:49,522 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:17:49,524 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:17:49,525 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:17:49,527 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:17:49,529 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:17:49,532 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:17:49.530553+00:00, Should reset: False
INFO 2024-10-01 18:17:49,533 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:17:49,533 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:17:49,533 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:17:49,533 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:17:49,535 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:17:49,535 socket_server 570 138242068317888 Saved call record for company Smasco: 8449 -> 0507945526 at 2024-10-01 15:16:56+03:00
INFO 2024-10-01 18:17:49,945 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58106) on port 8000
INFO 2024-10-01 18:17:54,447 basehttp 90432 140513275545280 "GET /outgoing_international/pdf/?time_period=today&custom_date= HTTP/1.1" 200 2491
INFO 2024-10-01 18:18:51,680 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:17:35,6730,7327,00:01:05,2024/10/01 15:17:45,2024/10/01 15:18:50,TerminatedByDst,,,Ext.7327,Ext.6730,6730,,,Extension,Extension,,Muhammad Hamza Haider,Vijaya krishnan,
INFO 2024-10-01 18:18:51,681 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:17:35', '6730', '7327', '00:01:05', '2024/10/01 15:17:45', '2024/10/01 15:18:50', 'TerminatedByDst', '', '', 'Ext.7327', 'Ext.6730', '6730', '', '', 'Extension', 'Extension', '', 'Muhammad Hamza Haider', 'Vijaya krishnan', '']
INFO 2024-10-01 18:18:51,700 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:18:51,700 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=65, total_cost=0.0
INFO 2024-10-01 18:18:51,700 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:18:51,701 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 18:18:51,701 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 18:18:51,701 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 18:18:51,701 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:18:51,701 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:18:51,701 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 18:18:51,705 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:18:51,709 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:18:51,709 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 18:18:51,710 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:18:51,711 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:18:51,711 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 18:18:51,712 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:18:51,712 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:18:51,712 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:18:51,712 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:18:51,713 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:18:51,715 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:18:51,715 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:18:51,719 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:18:51,720 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:18:51,730 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 15:18:51.723363+00:00, Should reset: False
INFO 2024-10-01 18:18:51,730 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:18:51,730 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:18:51,730 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:18:51,731 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:18:51,733 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:18:51,733 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:18:51,733 models 570 138242068317888 Initial state: caller=7327, callee=6730, duration=65, total_cost=0.00
INFO 2024-10-01 18:18:51,736 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:18:51,736 models 570 138242068317888 Before determining country, Caller: 7327, Callee: 6730
INFO 2024-10-01 18:18:51,736 utils 570 138242068317888 Original number: 6730
INFO 2024-10-01 18:18:51,736 utils 570 138242068317888 Cleaned number: 6730
INFO 2024-10-01 18:18:51,736 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:18:51,737 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:18:51,737 models 570 138242068317888 Categorizing call for number: 6730
INFO 2024-10-01 18:18:51,739 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:18:51,740 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:18:51,740 models 570 138242068317888 Match found: 6730 matches ^\d{4}$
INFO 2024-10-01 18:18:51,740 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:18:51,741 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:18:51,742 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:18:51,743 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:18:51,744 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:18:51,746 models 570 138242068317888 Found extension: 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:18:51,747 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:18:51,750 models 570 138242068317888 Quota for 7327 - Muhammad Hamza Haider (Smasco): Last reset: 2024-09-15 06:35:05.726237+00:00, Next reset: 2024-10-15 06:35:05.726237+00:00, Current time: 2024-10-01 15:18:51.749025+00:00, Should reset: False
INFO 2024-10-01 18:18:51,751 models 570 138242068317888 Quota reset not needed for 7327 - Muhammad Hamza Haider (Smasco)
INFO 2024-10-01 18:18:51,751 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:18:51,751 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:18:51,751 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:18:51,752 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:18:51,753 socket_server 570 138242068317888 Saved call record for company Smasco: 7327 -> 6730 at 2024-10-01 15:17:35+03:00
INFO 2024-10-01 18:18:52,160 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58117) on port 8000
INFO 2024-10-01 18:19:09,340 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:18:56,8000,10001,00:00:12,2024/10/01 15:18:56,2024/10/01 15:19:08,TerminatedBySrc,,,568880669,Ext.8000,8000,,,Line,Ivr,,568880669:Main Number,WelcomeMessage,
INFO 2024-10-01 18:19:09,341 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:18:56', '8000', '10001', '00:00:12', '2024/10/01 15:18:56', '2024/10/01 15:19:08', 'TerminatedBySrc', '', '', '568880669', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '568880669:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:19:09,367 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:09,367 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.0
INFO 2024-10-01 18:19:09,368 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:19:09,368 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:19:09,368 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:19:09,369 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:19:09,369 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:19:09,369 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:09,369 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:19:09,373 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:09,377 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:09,377 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:19:09,377 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:19:09,377 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:09,378 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:19:09,378 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:09,378 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:19:09,378 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:19:09,379 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:19:09,379 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:09,382 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:09,383 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:19:09,386 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:19:09,389 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:09,389 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:09,389 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.00
INFO 2024-10-01 18:19:09,393 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:19:09,393 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:19:09,394 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:19:09,394 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:19:09,394 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:19:09,394 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:09,394 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:19:09,397 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:09,398 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:09,398 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:19:09,399 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:19:09,400 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:19:09,400 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:09,402 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:09,402 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:19:09,403 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:19:09,405 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:09,406 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:18:56+03:00
INFO 2024-10-01 18:19:09,799 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58118) on port 8000
INFO 2024-10-01 18:19:47,824 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:18:18,0537904818,7492,00:00:28,2024/10/01 15:19:18,2024/10/01 15:19:46,TerminatedByDst,,,Ext.7492,0537904818,10001,,,Extension,Line,,Rohimah Halil,0537904818,
INFO 2024-10-01 18:19:47,824 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:18:18', '0537904818', '7492', '00:00:28', '2024/10/01 15:19:18', '2024/10/01 15:19:46', 'TerminatedByDst', '', '', 'Ext.7492', '0537904818', '10001', '', '', 'Extension', 'Line', '', 'Rohimah Halil', '0537904818', '']
INFO 2024-10-01 18:19:47,841 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:47,842 models 570 138242068317888 Initial state: caller=7492, callee=0537904818, duration=28, total_cost=0.0
INFO 2024-10-01 18:19:47,842 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:19:47,842 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0537904818
INFO 2024-10-01 18:19:47,843 utils 570 138242068317888 Original number: 0537904818
INFO 2024-10-01 18:19:47,843 utils 570 138242068317888 Cleaned number: 0537904818
INFO 2024-10-01 18:19:47,843 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:19:47,843 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:47,843 models 570 138242068317888 Categorizing call for number: 0537904818
INFO 2024-10-01 18:19:47,847 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:47,849 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:47,849 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Match found: 0537904818 matches 05
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:19:47,850 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 Calculating total cost for call: duration=28 seconds
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:19:47,851 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:47,854 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:47,854 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:19:47,859 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:19:47,861 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:19:47,866 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:19:47.863414+00:00, Should reset: False
INFO 2024-10-01 18:19:47,866 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:19:47,866 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:19:47,866 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:19:47,867 models 570 138242068317888 Attempting to deduct 0.40 from balance 70.40
INFO 2024-10-01 18:19:47,869 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 70.00
INFO 2024-10-01 18:19:47,869 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 70.00
INFO 2024-10-01 18:19:47,872 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:47,872 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:47,873 models 570 138242068317888 Initial state: caller=7492, callee=0537904818, duration=28, total_cost=0.40
INFO 2024-10-01 18:19:47,876 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:19:47,876 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0537904818
INFO 2024-10-01 18:19:47,876 utils 570 138242068317888 Original number: 0537904818
INFO 2024-10-01 18:19:47,876 utils 570 138242068317888 Cleaned number: 0537904818
INFO 2024-10-01 18:19:47,877 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:19:47,877 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:47,877 models 570 138242068317888 Categorizing call for number: 0537904818
INFO 2024-10-01 18:19:47,879 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:47,881 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:47,881 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:19:47,881 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:19:47,881 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:19:47,881 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:19:47,882 models 570 138242068317888 Match found: 0537904818 matches 05
INFO 2024-10-01 18:19:47,882 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:19:47,882 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:47,882 models 570 138242068317888 Calculating total cost for call: duration=28 seconds
INFO 2024-10-01 18:19:47,882 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:47,883 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:19:47,883 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:19:47,883 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:19:47,883 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:47,885 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:47,885 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:19:47,888 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:19:47,889 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:19:47,893 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:19:47.891351+00:00, Should reset: False
INFO 2024-10-01 18:19:47,893 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:19:47,893 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:19:47,893 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:19:47,894 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:19:47,895 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:47,895 socket_server 570 138242068317888 Saved call record for company Smasco: 7492 -> 0537904818 at 2024-10-01 15:18:18+03:00
INFO 2024-10-01 18:19:48,308 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58123) on port 8000
INFO 2024-10-01 18:19:54,648 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:19:46,8000,10001,00:00:07,2024/10/01 15:19:46,2024/10/01 15:19:53,TerminatedBySrc,,,544156688,Ext.8000,8000,,,Line,Ivr,,544156688:Main Number,WelcomeMessage,
INFO 2024-10-01 18:19:54,648 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:19:46', '8000', '10001', '00:00:07', '2024/10/01 15:19:46', '2024/10/01 15:19:53', 'TerminatedBySrc', '', '', '544156688', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '544156688:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:19:54,667 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:54,667 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.0
INFO 2024-10-01 18:19:54,668 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:19:54,668 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:19:54,668 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:19:54,668 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:19:54,669 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:19:54,669 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:54,669 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:19:54,672 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:54,674 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:54,674 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:19:54,675 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:19:54,675 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:54,675 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:19:54,675 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:54,675 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:19:54,676 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:19:54,676 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:19:54,676 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:54,679 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:54,679 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:19:54,682 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:19:54,684 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:54,684 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:19:54,684 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.00
INFO 2024-10-01 18:19:54,686 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:19:54,687 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:19:54,687 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:19:54,687 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:19:54,687 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:19:54,687 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:19:54,688 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:19:54,689 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:19:54,691 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:19:54,691 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:19:54,692 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:19:54,693 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:19:54,693 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:19:54,695 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:19:54,695 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:19:54,697 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:19:54,698 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:19:54,699 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:19:46+03:00
INFO 2024-10-01 18:19:55,110 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58124) on port 8000
INFO 2024-10-01 18:20:03,005 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:19:29,0500460814,7781,,,2024/10/01 15:20:02,Failed,,,Ext.7781,0500460814,0500460814,,,Extension,LineSet,,Abdullah Jabal,0500460814,
INFO 2024-10-01 18:20:03,005 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:19:29', '0500460814', '7781', '', '', '2024/10/01 15:20:02', 'Failed', '', '', 'Ext.7781', '0500460814', '0500460814', '', '', 'Extension', 'LineSet', '', 'Abdullah Jabal', '0500460814', '']
INFO 2024-10-01 18:20:03,026 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:03,027 models 570 138242068317888 Initial state: caller=7781, callee=0500460814, duration=None, total_cost=0.0
INFO 2024-10-01 18:20:03,027 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:20:03,027 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0500460814
INFO 2024-10-01 18:20:03,028 utils 570 138242068317888 Original number: 0500460814
INFO 2024-10-01 18:20:03,028 utils 570 138242068317888 Cleaned number: 0500460814
INFO 2024-10-01 18:20:03,028 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:03,028 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:03,028 models 570 138242068317888 Categorizing call for number: 0500460814
INFO 2024-10-01 18:20:03,033 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:03,036 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:03,037 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:03,037 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:03,038 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:03,038 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:03,039 models 570 138242068317888 Match found: 0500460814 matches 05
INFO 2024-10-01 18:20:03,039 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:03,039 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:03,039 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:20:03,039 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:20:03,040 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:03,041 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:03,043 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:03,044 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:03,049 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:20:03,051 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:20:03,055 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:20:03.053662+00:00, Should reset: False
INFO 2024-10-01 18:20:03,056 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:20:03,056 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:20:03,056 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:03,057 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:03,059 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:03,059 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:03,059 models 570 138242068317888 Initial state: caller=7781, callee=0500460814, duration=None, total_cost=0.00
INFO 2024-10-01 18:20:03,063 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:20:03,063 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0500460814
INFO 2024-10-01 18:20:03,064 utils 570 138242068317888 Original number: 0500460814
INFO 2024-10-01 18:20:03,064 utils 570 138242068317888 Cleaned number: 0500460814
INFO 2024-10-01 18:20:03,064 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:03,064 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:03,064 models 570 138242068317888 Categorizing call for number: 0500460814
INFO 2024-10-01 18:20:03,067 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:03,069 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:03,069 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:03,070 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:03,070 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:03,071 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:03,071 models 570 138242068317888 Match found: 0500460814 matches 05
INFO 2024-10-01 18:20:03,071 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:03,071 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:03,071 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:20:03,071 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:20:03,073 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:03,073 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:03,075 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:03,076 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:03,080 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:20:03,082 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:20:03,101 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:20:03.092428+00:00, Should reset: False
INFO 2024-10-01 18:20:03,102 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:20:03,102 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:20:03,102 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:03,103 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:03,107 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:03,107 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0500460814 at 2024-10-01 15:19:29+03:00
INFO 2024-10-01 18:20:03,515 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58125) on port 8000
INFO 2024-10-01 18:20:08,070 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:18:43,0530971496,7436,00:01:05,2024/10/01 15:19:00,2024/10/01 15:20:06,TerminatedByDst,,,Ext.7436,0530971496,10001,,,Extension,Line,,Nabasitu Ssengendo,0530971496,
INFO 2024-10-01 18:20:08,070 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:18:43', '0530971496', '7436', '00:01:05', '2024/10/01 15:19:00', '2024/10/01 15:20:06', 'TerminatedByDst', '', '', 'Ext.7436', '0530971496', '10001', '', '', 'Extension', 'Line', '', 'Nabasitu Ssengendo', '0530971496', '']
INFO 2024-10-01 18:20:08,089 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:08,090 models 570 138242068317888 Initial state: caller=7436, callee=0530971496, duration=65, total_cost=0.0
INFO 2024-10-01 18:20:08,090 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:20:08,090 models 570 138242068317888 Before determining country, Caller: 7436, Callee: 0530971496
INFO 2024-10-01 18:20:08,091 utils 570 138242068317888 Original number: 0530971496
INFO 2024-10-01 18:20:08,091 utils 570 138242068317888 Cleaned number: 0530971496
INFO 2024-10-01 18:20:08,091 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:08,092 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:08,092 models 570 138242068317888 Categorizing call for number: 0530971496
INFO 2024-10-01 18:20:08,095 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:08,097 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:08,097 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:08,098 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:08,098 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:08,098 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Match found: 0530971496 matches 05
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:20:08,099 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:20:08,100 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:20:08,100 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:20:08,100 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:08,103 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:08,103 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:08,108 models 570 138242068317888 Found extension: 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 18:20:08,111 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 2.80
INFO 2024-10-01 18:20:08,115 models 570 138242068317888 Quota for 7436 - Nabasitu Ssengendo (Smasco): Last reset: 2024-09-15 06:35:06.048112+00:00, Next reset: 2024-10-15 06:35:06.048112+00:00, Current time: 2024-10-01 15:20:08.113300+00:00, Should reset: False
INFO 2024-10-01 18:20:08,116 models 570 138242068317888 Quota reset not needed for 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 18:20:08,116 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 2.80
INFO 2024-10-01 18:20:08,117 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:20:08,117 models 570 138242068317888 Attempting to deduct 0.80 from balance 97.20
INFO 2024-10-01 18:20:08,119 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 96.40
INFO 2024-10-01 18:20:08,119 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 96.40
INFO 2024-10-01 18:20:08,121 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:08,122 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:08,122 models 570 138242068317888 Initial state: caller=7436, callee=0530971496, duration=65, total_cost=0.80
INFO 2024-10-01 18:20:08,125 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:20:08,126 models 570 138242068317888 Before determining country, Caller: 7436, Callee: 0530971496
INFO 2024-10-01 18:20:08,126 utils 570 138242068317888 Original number: 0530971496
INFO 2024-10-01 18:20:08,126 utils 570 138242068317888 Cleaned number: 0530971496
INFO 2024-10-01 18:20:08,127 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:08,127 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:08,127 models 570 138242068317888 Categorizing call for number: 0530971496
INFO 2024-10-01 18:20:08,130 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:08,132 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:08,132 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:08,133 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:08,133 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:08,133 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:08,133 models 570 138242068317888 Match found: 0530971496 matches 05
INFO 2024-10-01 18:20:08,134 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:08,134 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:08,134 models 570 138242068317888 Calculating total cost for call: duration=65 seconds
INFO 2024-10-01 18:20:08,135 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:20:08,135 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:20:08,135 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:20:08,135 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:20:08,135 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:08,138 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:08,138 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:20:08,142 models 570 138242068317888 Found extension: 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 18:20:08,144 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:20:08,149 models 570 138242068317888 Quota for 7436 - Nabasitu Ssengendo (Smasco): Last reset: 2024-09-15 06:35:06.048112+00:00, Next reset: 2024-10-15 06:35:06.048112+00:00, Current time: 2024-10-01 15:20:08.145861+00:00, Should reset: False
INFO 2024-10-01 18:20:08,149 models 570 138242068317888 Quota reset not needed for 7436 - Nabasitu Ssengendo (Smasco)
INFO 2024-10-01 18:20:08,150 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:20:08,150 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:08,150 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:08,152 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:08,152 socket_server 570 138242068317888 Saved call record for company Smasco: 7436 -> 0530971496 at 2024-10-01 15:18:43+03:00
INFO 2024-10-01 18:20:08,556 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58126) on port 8000
INFO 2024-10-01 18:20:19,714 autoreload 90432 140513550012544 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 18:20:21,493 autoreload 90881 130667071500416 Watching for file changes with StatReloader
INFO 2024-10-01 18:20:23,054 basehttp 90881 130666878469824 "GET /outgoing_international/ HTTP/1.1" 200 23419
INFO 2024-10-01 18:20:25,943 basehttp 90881 130666878469824 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 37873
INFO 2024-10-01 18:20:30,407 basehttp 90881 130666878469824 "GET /outgoing_international/?time_period=today&custom_date=&search=&per_page=100 HTTP/1.1" 200 23419
INFO 2024-10-01 18:20:32,046 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:20:29,7446,1095,00:00:01,2024/10/01 15:20:29,2024/10/01 15:20:31,TerminatedBySrc,,,Ext.1095,Ext.6666,7446,,,Extension,VMail,,Raha Madina Al Aridh,,
INFO 2024-10-01 18:20:32,047 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:20:29', '7446', '1095', '00:00:01', '2024/10/01 15:20:29', '2024/10/01 15:20:31', 'TerminatedBySrc', '', '', 'Ext.1095', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Raha Madina Al Aridh', '', '']
INFO 2024-10-01 18:20:32,070 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:32,071 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=1, total_cost=0.0
INFO 2024-10-01 18:20:32,072 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:20:32,072 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 18:20:32,073 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:20:32,073 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:20:32,073 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:20:32,073 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:32,074 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:20:32,077 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:32,080 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:32,081 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:20:32,081 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:20:32,082 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:32,082 models 570 138242068317888 Calculating total cost for call: duration=1 seconds
INFO 2024-10-01 18:20:32,082 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:32,082 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:20:32,083 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:20:32,083 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:32,083 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:32,087 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:32,088 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:32,095 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:20:32,098 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:20:32,105 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 15:20:32.102113+00:00, Should reset: False
INFO 2024-10-01 18:20:32,106 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:20:32,106 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:20:32,107 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:32,107 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:32,109 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:32,110 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:32,110 models 570 138242068317888 Initial state: caller=1095, callee=7446, duration=1, total_cost=0.00
INFO 2024-10-01 18:20:32,114 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:20:32,114 models 570 138242068317888 Before determining country, Caller: 1095, Callee: 7446
INFO 2024-10-01 18:20:32,115 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:20:32,115 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:20:32,115 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:20:32,115 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:32,115 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:20:32,118 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:32,120 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:32,121 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:20:32,122 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:20:32,122 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:32,122 models 570 138242068317888 Calculating total cost for call: duration=1 seconds
INFO 2024-10-01 18:20:32,122 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:32,122 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:20:32,123 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:20:32,123 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:32,123 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:32,126 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:32,127 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:32,130 models 570 138242068317888 Found extension: 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:20:32,132 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:20:32,137 models 570 138242068317888 Quota for 1095 - Raha Madina Al Aridh (Smasco): Last reset: 2024-09-15 06:34:09.524548+00:00, Next reset: 2024-10-15 06:34:09.524548+00:00, Current time: 2024-10-01 15:20:32.134810+00:00, Should reset: False
INFO 2024-10-01 18:20:32,137 models 570 138242068317888 Quota reset not needed for 1095 - Raha Madina Al Aridh (Smasco)
INFO 2024-10-01 18:20:32,138 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:20:32,138 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:32,138 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:32,140 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:32,140 socket_server 570 138242068317888 Saved call record for company Smasco: 1095 -> 7446 at 2024-10-01 15:20:29+03:00
INFO 2024-10-01 18:20:32,551 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58130) on port 8000
INFO 2024-10-01 18:20:32,732 basehttp 90881 130666878469824 "GET /outgoing_international/pdf/?time_period=today&custom_date= HTTP/1.1" 200 2346
INFO 2024-10-01 18:20:34,431 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:20:20,8000,10001,00:00:12,2024/10/01 15:20:20,2024/10/01 15:20:33,TerminatedBySrc,,,500460814,Ext.8000,8000,,,Line,Ivr,,500460814:Main Number,WelcomeMessage,
INFO 2024-10-01 18:20:34,432 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:20:20', '8000', '10001', '00:00:12', '2024/10/01 15:20:20', '2024/10/01 15:20:33', 'TerminatedBySrc', '', '', '500460814', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '500460814:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:20:34,453 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:34,454 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.0
INFO 2024-10-01 18:20:34,454 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:20:34,455 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:20:34,455 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:20:34,455 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:20:34,455 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:20:34,455 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:34,457 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:20:34,460 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:34,464 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:34,464 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:20:34,465 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:20:34,465 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:34,466 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:34,470 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:34,471 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:20:34,474 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:20:34,477 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:34,477 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:34,478 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.00
INFO 2024-10-01 18:20:34,481 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:20:34,482 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:20:34,482 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:20:34,482 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:20:34,483 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:20:34,483 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:34,483 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:20:34,486 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:34,488 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:34,488 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:20:34,489 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:20:34,489 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:34,489 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:20:34,489 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:34,490 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:20:34,491 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:20:34,491 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:20:34,492 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:34,494 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:34,495 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:20:34,497 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:20:34,499 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:34,500 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:20:20+03:00
INFO 2024-10-01 18:20:34,913 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58135) on port 8000
INFO 2024-10-01 18:20:45,898 basehttp 90881 130666878469824 "GET /outgoing_international/?time_period=1m&custom_date=&search=&per_page=100 HTTP/1.1" 200 73013
INFO 2024-10-01 18:20:48,309 basehttp 90881 130666878469824 "GET /outgoing_international/pdf/?time_period=1m&custom_date= HTTP/1.1" 200 15366
INFO 2024-10-01 18:20:54,233 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:20:03,0539748579,7492,00:00:14,2024/10/01 15:20:38,2024/10/01 15:20:53,TerminatedBySrc,,,Ext.7492,0539748579,10001,,,Extension,Line,,Rohimah Halil,0539748579,
INFO 2024-10-01 18:20:54,234 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:20:03', '0539748579', '7492', '00:00:14', '2024/10/01 15:20:38', '2024/10/01 15:20:53', 'TerminatedBySrc', '', '', 'Ext.7492', '0539748579', '10001', '', '', 'Extension', 'Line', '', 'Rohimah Halil', '0539748579', '']
INFO 2024-10-01 18:20:54,249 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:54,249 models 570 138242068317888 Initial state: caller=7492, callee=0539748579, duration=14, total_cost=0.0
INFO 2024-10-01 18:20:54,250 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:20:54,250 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0539748579
INFO 2024-10-01 18:20:54,250 utils 570 138242068317888 Original number: 0539748579
INFO 2024-10-01 18:20:54,250 utils 570 138242068317888 Cleaned number: 0539748579
INFO 2024-10-01 18:20:54,251 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:54,251 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:54,251 models 570 138242068317888 Categorizing call for number: 0539748579
INFO 2024-10-01 18:20:54,254 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:54,256 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:54,256 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:54,256 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:54,256 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:54,257 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:54,257 models 570 138242068317888 Match found: 0539748579 matches 05
INFO 2024-10-01 18:20:54,257 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:54,257 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:54,257 models 570 138242068317888 Calculating total cost for call: duration=14 seconds
INFO 2024-10-01 18:20:54,258 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:54,258 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:20:54,258 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:20:54,258 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:20:54,258 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:54,260 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:54,261 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:20:54,264 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:20:54,266 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:20:54,274 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:20:54.268693+00:00, Should reset: False
INFO 2024-10-01 18:20:54,274 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:20:54,277 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:20:54,277 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:20:54,277 models 570 138242068317888 Attempting to deduct 0.40 from balance 70.00
INFO 2024-10-01 18:20:54,279 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 69.60
INFO 2024-10-01 18:20:54,279 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 69.60
INFO 2024-10-01 18:20:54,282 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:54,282 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:20:54,282 models 570 138242068317888 Initial state: caller=7492, callee=0539748579, duration=14, total_cost=0.40
INFO 2024-10-01 18:20:54,285 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:20:54,285 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0539748579
INFO 2024-10-01 18:20:54,285 utils 570 138242068317888 Original number: 0539748579
INFO 2024-10-01 18:20:54,285 utils 570 138242068317888 Cleaned number: 0539748579
INFO 2024-10-01 18:20:54,285 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:20:54,285 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:20:54,286 models 570 138242068317888 Categorizing call for number: 0539748579
INFO 2024-10-01 18:20:54,287 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:20:54,289 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:20:54,289 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:20:54,289 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Match found: 0539748579 matches 05
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:20:54,290 models 570 138242068317888 Calculating total cost for call: duration=14 seconds
INFO 2024-10-01 18:20:54,291 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:20:54,291 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:20:54,291 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:20:54,291 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:20:54,291 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:20:54,293 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:20:54,294 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:20:54,296 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:20:54,298 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:20:54,301 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:20:54.299648+00:00, Should reset: False
INFO 2024-10-01 18:20:54,302 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:20:54,302 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:20:54,302 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:20:54,302 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:20:54,304 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:20:54,304 socket_server 570 138242068317888 Saved call record for company Smasco: 7492 -> 0539748579 at 2024-10-01 15:20:03+03:00
INFO 2024-10-01 18:20:54,710 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58136) on port 8000
INFO 2024-10-01 18:21:54,880 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:00:27,0504933490,7189,00:21:23,2024/10/01 15:00:30,2024/10/01 15:21:54,TerminatedBySrc,,,Ext.7189,0504933490,10001,,,Extension,Line,,Maryam Almutairi,0504933490,
INFO 2024-10-01 18:21:54,880 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:00:27', '0504933490', '7189', '00:21:23', '2024/10/01 15:00:30', '2024/10/01 15:21:54', 'TerminatedBySrc', '', '', 'Ext.7189', '0504933490', '10001', '', '', 'Extension', 'Line', '', 'Maryam Almutairi', '0504933490', '']
INFO 2024-10-01 18:21:54,899 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:21:54,899 models 570 138242068317888 Initial state: caller=7189, callee=0504933490, duration=1283, total_cost=0.0
INFO 2024-10-01 18:21:54,900 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:21:54,900 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0504933490
INFO 2024-10-01 18:21:54,900 utils 570 138242068317888 Original number: 0504933490
INFO 2024-10-01 18:21:54,900 utils 570 138242068317888 Cleaned number: 0504933490
INFO 2024-10-01 18:21:54,901 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:21:54,901 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:21:54,901 models 570 138242068317888 Categorizing call for number: 0504933490
INFO 2024-10-01 18:21:54,904 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:21:54,906 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:21:54,907 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:21:54,907 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:21:54,907 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:21:54,907 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:21:54,907 models 570 138242068317888 Match found: 0504933490 matches 05
INFO 2024-10-01 18:21:54,908 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:21:54,908 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:21:54,908 models 570 138242068317888 Calculating total cost for call: duration=1283 seconds
INFO 2024-10-01 18:21:54,908 models 570 138242068317888 Duration in minutes: 22
INFO 2024-10-01 18:21:54,909 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:21:54,909 models 570 138242068317888 Calculated total cost: 8.80
INFO 2024-10-01 18:21:54,909 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=8.80
INFO 2024-10-01 18:21:54,909 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:21:54,911 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:21:54,912 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:21:54,917 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:21:54,920 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:21:54,925 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 15:21:54.922896+00:00, Should reset: False
INFO 2024-10-01 18:21:54,926 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:21:54,927 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:21:54,927 models 570 138242068317888 Amount to deduct: 8.80
INFO 2024-10-01 18:21:54,928 models 570 138242068317888 Attempting to deduct 8.80 from balance 0.00
WARNING 2024-10-01 18:21:54,928 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 8.80
WARNING 2024-10-01 18:21:54,928 models 570 138242068317888 Warning: Quota exceeded for extension 7189
INFO 2024-10-01 18:21:54,930 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:21:54,931 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:21:54,931 models 570 138242068317888 Initial state: caller=7189, callee=0504933490, duration=1283, total_cost=8.80
INFO 2024-10-01 18:21:54,934 models 570 138242068317888 This is an existing CallRecord. Old total cost: 8.80
INFO 2024-10-01 18:21:54,934 models 570 138242068317888 Before determining country, Caller: 7189, Callee: 0504933490
INFO 2024-10-01 18:21:54,934 utils 570 138242068317888 Original number: 0504933490
INFO 2024-10-01 18:21:54,935 utils 570 138242068317888 Cleaned number: 0504933490
INFO 2024-10-01 18:21:54,935 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:21:54,935 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:21:54,935 models 570 138242068317888 Categorizing call for number: 0504933490
INFO 2024-10-01 18:21:54,937 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:21:54,939 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:21:54,939 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:21:54,939 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:21:54,939 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:21:54,940 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:21:54,940 models 570 138242068317888 Match found: 0504933490 matches 05
INFO 2024-10-01 18:21:54,940 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:21:54,940 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:21:54,940 models 570 138242068317888 Calculating total cost for call: duration=1283 seconds
INFO 2024-10-01 18:21:54,941 models 570 138242068317888 Duration in minutes: 22
INFO 2024-10-01 18:21:54,941 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:21:54,941 models 570 138242068317888 Calculated total cost: 8.80
INFO 2024-10-01 18:21:54,941 models 570 138242068317888 After cost calculation: old_total_cost=8.80, new_total_cost=8.80
INFO 2024-10-01 18:21:54,942 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:21:54,945 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:21:54,945 models 570 138242068317888 Starting update_user_quota with old_total_cost=8.80
INFO 2024-10-01 18:21:54,952 models 570 138242068317888 Found extension: 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:21:54,954 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:21:54,961 models 570 138242068317888 Quota for 7189 - Maryam Almutairi (Smasco): Last reset: 2024-09-15 06:34:55.070318+00:00, Next reset: 2024-10-15 06:34:55.070318+00:00, Current time: 2024-10-01 15:21:54.957829+00:00, Should reset: False
INFO 2024-10-01 18:21:54,961 models 570 138242068317888 Quota reset not needed for 7189 - Maryam Almutairi (Smasco)
INFO 2024-10-01 18:21:54,961 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:21:54,962 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:21:54,962 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:21:54,964 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:21:54,965 socket_server 570 138242068317888 Saved call record for company Smasco: 7189 -> 0504933490 at 2024-10-01 15:00:27+03:00
INFO 2024-10-01 18:21:55,367 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58141) on port 8000
INFO 2024-10-01 18:22:02,660 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:19:58,0507281203,1131,,,2024/10/01 15:22:01,Failed,,,Ext.1131,0507281203,0507281203,,,Extension,LineSet,,MUNIRAH ALQURAISHI,0507281203,
INFO 2024-10-01 18:22:02,660 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:19:58', '0507281203', '1131', '', '', '2024/10/01 15:22:01', 'Failed', '', '', 'Ext.1131', '0507281203', '0507281203', '', '', 'Extension', 'LineSet', '', 'MUNIRAH ALQURAISHI', '0507281203', '']
INFO 2024-10-01 18:22:02,677 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:02,678 models 570 138242068317888 Initial state: caller=1131, callee=0507281203, duration=None, total_cost=0.0
INFO 2024-10-01 18:22:02,678 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:02,679 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0507281203
INFO 2024-10-01 18:22:02,679 utils 570 138242068317888 Original number: 0507281203
INFO 2024-10-01 18:22:02,679 utils 570 138242068317888 Cleaned number: 0507281203
INFO 2024-10-01 18:22:02,679 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:02,680 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:02,680 models 570 138242068317888 Categorizing call for number: 0507281203
INFO 2024-10-01 18:22:02,683 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:02,685 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:02,685 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:02,685 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:02,685 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:02,685 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:02,686 models 570 138242068317888 Match found: 0507281203 matches 05
INFO 2024-10-01 18:22:02,686 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:02,686 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:02,686 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:22:02,686 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:22:02,687 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:02,687 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:02,689 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:02,689 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:22:02,692 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:22:02,695 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:02,696 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:02,696 models 570 138242068317888 Initial state: caller=1131, callee=0507281203, duration=None, total_cost=0.00
INFO 2024-10-01 18:22:02,699 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:22:02,699 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0507281203
INFO 2024-10-01 18:22:02,699 utils 570 138242068317888 Original number: 0507281203
INFO 2024-10-01 18:22:02,700 utils 570 138242068317888 Cleaned number: 0507281203
INFO 2024-10-01 18:22:02,700 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:02,700 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:02,700 models 570 138242068317888 Categorizing call for number: 0507281203
INFO 2024-10-01 18:22:02,702 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:02,704 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:02,704 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Match found: 0507281203 matches 05
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:02,705 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:02,706 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:22:02,706 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:22:02,706 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:02,706 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:02,708 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:02,708 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:22:02,710 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:22:02,712 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:02,713 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0507281203 at 2024-10-01 15:19:58+03:00
INFO 2024-10-01 18:22:03,128 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58142) on port 8000
INFO 2024-10-01 18:22:09,468 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:21:25,0508267157,8449,00:00:28,2024/10/01 15:21:39,2024/10/01 15:22:08,TerminatedBySrc,,,Ext.8449,0508267157,10001,,,Extension,Line,,Mohammed Aasif,0508267157,
INFO 2024-10-01 18:22:09,468 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:21:25', '0508267157', '8449', '00:00:28', '2024/10/01 15:21:39', '2024/10/01 15:22:08', 'TerminatedBySrc', '', '', 'Ext.8449', '0508267157', '10001', '', '', 'Extension', 'Line', '', 'Mohammed Aasif', '0508267157', '']
INFO 2024-10-01 18:22:09,491 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:09,491 models 570 138242068317888 Initial state: caller=8449, callee=0508267157, duration=28, total_cost=0.0
INFO 2024-10-01 18:22:09,491 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:09,492 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 0508267157
INFO 2024-10-01 18:22:09,492 utils 570 138242068317888 Original number: 0508267157
INFO 2024-10-01 18:22:09,493 utils 570 138242068317888 Cleaned number: 0508267157
INFO 2024-10-01 18:22:09,493 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:09,493 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:09,493 models 570 138242068317888 Categorizing call for number: 0508267157
INFO 2024-10-01 18:22:09,502 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:09,509 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:09,509 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:09,510 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:09,510 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:09,510 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:09,510 models 570 138242068317888 Match found: 0508267157 matches 05
INFO 2024-10-01 18:22:09,511 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:09,511 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:09,511 models 570 138242068317888 Calculating total cost for call: duration=28 seconds
INFO 2024-10-01 18:22:09,511 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:09,511 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:09,512 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:22:09,512 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:22:09,512 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:09,518 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:09,518 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:09,526 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:09,528 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:22:09,536 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:22:09.531462+00:00, Should reset: False
INFO 2024-10-01 18:22:09,536 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:09,537 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 81.60
INFO 2024-10-01 18:22:09,537 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:22:09,537 models 570 138242068317888 Attempting to deduct 0.40 from balance 18.40
INFO 2024-10-01 18:22:09,540 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 18.00
INFO 2024-10-01 18:22:09,540 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 18.00
INFO 2024-10-01 18:22:09,542 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:09,543 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:09,543 models 570 138242068317888 Initial state: caller=8449, callee=0508267157, duration=28, total_cost=0.40
INFO 2024-10-01 18:22:09,547 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:22:09,547 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 0508267157
INFO 2024-10-01 18:22:09,547 utils 570 138242068317888 Original number: 0508267157
INFO 2024-10-01 18:22:09,547 utils 570 138242068317888 Cleaned number: 0508267157
INFO 2024-10-01 18:22:09,547 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:09,548 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:09,548 models 570 138242068317888 Categorizing call for number: 0508267157
INFO 2024-10-01 18:22:09,554 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:09,555 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Match found: 0508267157 matches 05
INFO 2024-10-01 18:22:09,556 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:09,557 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:09,557 models 570 138242068317888 Calculating total cost for call: duration=28 seconds
INFO 2024-10-01 18:22:09,557 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:09,557 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:09,557 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:22:09,558 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:22:09,558 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:09,560 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:09,560 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:22:09,566 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:09,568 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:09,573 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:22:09.570351+00:00, Should reset: False
INFO 2024-10-01 18:22:09,573 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:09,573 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:09,574 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:09,574 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:09,576 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:09,577 socket_server 570 138242068317888 Saved call record for company Smasco: 8449 -> 0508267157 at 2024-10-01 15:21:25+03:00
INFO 2024-10-01 18:22:09,974 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58143) on port 8000
INFO 2024-10-01 18:22:12,849 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:21:03,0545666060,7738,,,2024/10/01 15:22:12,Failed,,,Ext.7738,0545666060,0545666060,,,Extension,LineSet,,Hanaa Alshalwi,0545666060,
INFO 2024-10-01 18:22:12,850 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:21:03', '0545666060', '7738', '', '', '2024/10/01 15:22:12', 'Failed', '', '', 'Ext.7738', '0545666060', '0545666060', '', '', 'Extension', 'LineSet', '', 'Hanaa Alshalwi', '0545666060', '']
INFO 2024-10-01 18:22:12,870 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:12,871 models 570 138242068317888 Initial state: caller=7738, callee=0545666060, duration=None, total_cost=0.0
INFO 2024-10-01 18:22:12,871 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:12,871 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0545666060
INFO 2024-10-01 18:22:12,872 utils 570 138242068317888 Original number: 0545666060
INFO 2024-10-01 18:22:12,872 utils 570 138242068317888 Cleaned number: 0545666060
INFO 2024-10-01 18:22:12,872 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:12,872 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:12,873 models 570 138242068317888 Categorizing call for number: 0545666060
INFO 2024-10-01 18:22:12,876 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:12,878 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:12,879 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:12,879 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:12,880 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:12,880 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:12,880 models 570 138242068317888 Match found: 0545666060 matches 05
INFO 2024-10-01 18:22:12,880 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:12,881 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:12,881 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:22:12,881 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:22:12,881 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:12,881 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:12,884 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:12,885 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:12,890 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:22:12,892 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:22:12,903 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:22:12.898303+00:00, Should reset: False
INFO 2024-10-01 18:22:12,904 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:22:12,905 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:22:12,905 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:12,905 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:12,911 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:12,914 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:12,914 models 570 138242068317888 Initial state: caller=7738, callee=0545666060, duration=None, total_cost=0.00
INFO 2024-10-01 18:22:12,918 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:22:12,918 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0545666060
INFO 2024-10-01 18:22:12,919 utils 570 138242068317888 Original number: 0545666060
INFO 2024-10-01 18:22:12,920 utils 570 138242068317888 Cleaned number: 0545666060
INFO 2024-10-01 18:22:12,920 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:12,921 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:12,921 models 570 138242068317888 Categorizing call for number: 0545666060
INFO 2024-10-01 18:22:12,925 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:12,929 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:12,930 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:12,930 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:12,931 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:12,931 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:12,932 models 570 138242068317888 Match found: 0545666060 matches 05
INFO 2024-10-01 18:22:12,932 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:12,932 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:12,933 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:22:12,933 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:22:12,933 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:12,933 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:12,938 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:12,939 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:12,943 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:22:12,946 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:22:12,950 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:22:12.947974+00:00, Should reset: False
INFO 2024-10-01 18:22:12,951 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:22:12,951 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:22:12,951 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:12,951 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:12,953 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:12,954 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0545666060 at 2024-10-01 15:21:03+03:00
INFO 2024-10-01 18:22:13,362 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58144) on port 8000
INFO 2024-10-01 18:22:14,881 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 14:59:42,7446,8477,00:22:25,2024/10/01 14:59:48,2024/10/01 15:22:14,TerminatedByDst,,,Ext.8477,Ext.7446,7446,,,Extension,Extension,,Felmban Dana,Alex George,
INFO 2024-10-01 18:22:14,882 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 14:59:42', '7446', '8477', '00:22:25', '2024/10/01 14:59:48', '2024/10/01 15:22:14', 'TerminatedByDst', '', '', 'Ext.8477', 'Ext.7446', '7446', '', '', 'Extension', 'Extension', '', 'Felmban Dana', 'Alex George', '']
INFO 2024-10-01 18:22:14,898 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:14,898 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=1345, total_cost=0.0
INFO 2024-10-01 18:22:14,898 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:14,899 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 18:22:14,899 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:22:14,899 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:22:14,900 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:14,900 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:14,900 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:22:14,902 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:14,905 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:14,905 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:22:14,906 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:14,906 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:14,906 models 570 138242068317888 Calculating total cost for call: duration=1345 seconds
INFO 2024-10-01 18:22:14,906 models 570 138242068317888 Duration in minutes: 23
INFO 2024-10-01 18:22:14,907 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:14,907 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:14,907 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:14,907 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:14,909 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:14,910 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:14,913 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 18:22:14,915 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:22:14,921 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 15:22:14.918079+00:00, Should reset: False
INFO 2024-10-01 18:22:14,922 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 18:22:14,922 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:22:14,922 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:14,923 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:14,925 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:14,926 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:14,927 models 570 138242068317888 Initial state: caller=8477, callee=7446, duration=1345, total_cost=0.00
INFO 2024-10-01 18:22:14,929 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:22:14,930 models 570 138242068317888 Before determining country, Caller: 8477, Callee: 7446
INFO 2024-10-01 18:22:14,930 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:22:14,930 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:22:14,930 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:14,930 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:14,930 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:22:14,932 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:14,934 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:14,934 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:22:14,935 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:14,935 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:14,935 models 570 138242068317888 Calculating total cost for call: duration=1345 seconds
INFO 2024-10-01 18:22:14,935 models 570 138242068317888 Duration in minutes: 23
INFO 2024-10-01 18:22:14,935 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:14,936 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:14,936 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:14,936 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:14,938 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:14,938 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:14,941 models 570 138242068317888 Found extension: 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 18:22:14,942 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:22:14,946 models 570 138242068317888 Quota for 8477 - Felmban Dana (Smasco): Last reset: 2024-09-15 06:35:35.154056+00:00, Next reset: 2024-10-15 06:35:35.154056+00:00, Current time: 2024-10-01 15:22:14.944299+00:00, Should reset: False
INFO 2024-10-01 18:22:14,946 models 570 138242068317888 Quota reset not needed for 8477 - Felmban Dana (Smasco)
INFO 2024-10-01 18:22:14,946 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:22:14,946 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:14,947 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:14,948 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:14,948 socket_server 570 138242068317888 Saved call record for company Smasco: 8477 -> 7446 at 2024-10-01 14:59:42+03:00
INFO 2024-10-01 18:22:15,341 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58146) on port 8000
INFO 2024-10-01 18:22:33,496 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:22:27,8000,10001,00:00:04,2024/10/01 15:22:28,2024/10/01 15:22:32,TerminatedBySrc,,,0507281203,Ext.8000,8000,,,Line,Ivr,,0507281203:Main Number,WelcomeMessage,
INFO 2024-10-01 18:22:33,497 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:22:27', '8000', '10001', '00:00:04', '2024/10/01 15:22:28', '2024/10/01 15:22:32', 'TerminatedBySrc', '', '', '0507281203', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0507281203:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:22:33,513 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:33,514 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=4, total_cost=0.0
INFO 2024-10-01 18:22:33,514 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:33,514 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:22:33,514 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:22:33,514 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:22:33,515 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:33,515 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:33,515 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:22:33,518 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:33,520 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:33,520 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:22:33,520 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:33,521 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:33,522 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:33,524 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:33,524 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:22:33,526 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:22:33,529 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:33,529 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:33,530 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=4, total_cost=0.00
INFO 2024-10-01 18:22:33,533 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:22:33,534 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:22:33,534 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:22:33,534 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:22:33,534 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:33,534 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:33,535 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:22:33,537 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:33,540 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:33,540 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:22:33,540 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:33,541 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:33,541 models 570 138242068317888 Calculating total cost for call: duration=4 seconds
INFO 2024-10-01 18:22:33,541 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:33,541 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:33,542 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:33,542 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:33,542 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:33,545 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:33,545 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:22:33,548 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:22:33,550 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:33,551 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:22:27+03:00
INFO 2024-10-01 18:22:33,960 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58152) on port 8000
INFO 2024-10-01 18:22:37,305 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:14:34,0569985861,7301,00:07:46,2024/10/01 15:14:49,2024/10/01 15:22:36,TerminatedByDst,,,Ext.7301,0569985861,10001,,,Extension,Line,,Muhammed Sahail,0569985861,
INFO 2024-10-01 18:22:37,305 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:14:34', '0569985861', '7301', '00:07:46', '2024/10/01 15:14:49', '2024/10/01 15:22:36', 'TerminatedByDst', '', '', 'Ext.7301', '0569985861', '10001', '', '', 'Extension', 'Line', '', 'Muhammed Sahail', '0569985861', '']
INFO 2024-10-01 18:22:37,324 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:37,325 models 570 138242068317888 Initial state: caller=7301, callee=0569985861, duration=466, total_cost=0.0
INFO 2024-10-01 18:22:37,325 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:37,325 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0569985861
INFO 2024-10-01 18:22:37,325 utils 570 138242068317888 Original number: 0569985861
INFO 2024-10-01 18:22:37,326 utils 570 138242068317888 Cleaned number: 0569985861
INFO 2024-10-01 18:22:37,326 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:37,326 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:37,326 models 570 138242068317888 Categorizing call for number: 0569985861
INFO 2024-10-01 18:22:37,329 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:37,331 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:37,331 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:37,331 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:37,331 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:37,331 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Match found: 0569985861 matches 05
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Calculating total cost for call: duration=466 seconds
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Duration in minutes: 8
INFO 2024-10-01 18:22:37,332 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:37,333 models 570 138242068317888 Calculated total cost: 3.20
INFO 2024-10-01 18:22:37,333 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=3.20
INFO 2024-10-01 18:22:37,333 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:37,337 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:37,337 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:37,347 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:22:37,350 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:22:37,357 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:22:37.353089+00:00, Should reset: False
INFO 2024-10-01 18:22:37,358 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:22:37,358 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 52.80
INFO 2024-10-01 18:22:37,358 models 570 138242068317888 Amount to deduct: 3.20
INFO 2024-10-01 18:22:37,358 models 570 138242068317888 Attempting to deduct 3.20 from balance 47.20
INFO 2024-10-01 18:22:37,360 models 570 138242068317888 Successfully deducted 3.20. New remaining balance: 44.00
INFO 2024-10-01 18:22:37,360 models 570 138242068317888 Successfully deducted 3.20 from quota. New balance: 44.00
INFO 2024-10-01 18:22:37,363 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:37,363 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:37,364 models 570 138242068317888 Initial state: caller=7301, callee=0569985861, duration=466, total_cost=3.20
INFO 2024-10-01 18:22:37,367 models 570 138242068317888 This is an existing CallRecord. Old total cost: 3.20
INFO 2024-10-01 18:22:37,367 models 570 138242068317888 Before determining country, Caller: 7301, Callee: 0569985861
INFO 2024-10-01 18:22:37,367 utils 570 138242068317888 Original number: 0569985861
INFO 2024-10-01 18:22:37,368 utils 570 138242068317888 Cleaned number: 0569985861
INFO 2024-10-01 18:22:37,368 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:37,368 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:37,368 models 570 138242068317888 Categorizing call for number: 0569985861
INFO 2024-10-01 18:22:37,370 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:37,372 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:37,373 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:37,373 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:37,373 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:37,374 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:37,374 models 570 138242068317888 Match found: 0569985861 matches 05
INFO 2024-10-01 18:22:37,374 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:37,374 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:37,374 models 570 138242068317888 Calculating total cost for call: duration=466 seconds
INFO 2024-10-01 18:22:37,375 models 570 138242068317888 Duration in minutes: 8
INFO 2024-10-01 18:22:37,375 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:37,375 models 570 138242068317888 Calculated total cost: 3.20
INFO 2024-10-01 18:22:37,375 models 570 138242068317888 After cost calculation: old_total_cost=3.20, new_total_cost=3.20
INFO 2024-10-01 18:22:37,375 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:37,378 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:37,378 models 570 138242068317888 Starting update_user_quota with old_total_cost=3.20
INFO 2024-10-01 18:22:37,381 models 570 138242068317888 Found extension: 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:22:37,383 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 56.00
INFO 2024-10-01 18:22:37,388 models 570 138242068317888 Quota for 7301 - Muhammed Sahail (Smasco): Last reset: 2024-09-15 06:35:05.618907+00:00, Next reset: 2024-10-15 06:35:05.618907+00:00, Current time: 2024-10-01 15:22:37.385605+00:00, Should reset: False
INFO 2024-10-01 18:22:37,388 models 570 138242068317888 Quota reset not needed for 7301 - Muhammed Sahail (Smasco)
INFO 2024-10-01 18:22:37,389 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 56.00
INFO 2024-10-01 18:22:37,389 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:37,389 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:37,391 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:37,391 socket_server 570 138242068317888 Saved call record for company Smasco: 7301 -> 0569985861 at 2024-10-01 15:14:34+03:00
INFO 2024-10-01 18:22:37,812 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58153) on port 8000
INFO 2024-10-01 18:22:46,887 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:21:43,0540322655,7781,00:00:47,2024/10/01 15:21:58,2024/10/01 15:22:46,TerminatedBySrc,,,Ext.7781,0540322655,10001,,,Extension,Line,,Abdullah Jabal,0540322655,
INFO 2024-10-01 18:22:46,887 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:21:43', '0540322655', '7781', '00:00:47', '2024/10/01 15:21:58', '2024/10/01 15:22:46', 'TerminatedBySrc', '', '', 'Ext.7781', '0540322655', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0540322655', '']
INFO 2024-10-01 18:22:46,910 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:46,911 models 570 138242068317888 Initial state: caller=7781, callee=0540322655, duration=47, total_cost=0.0
INFO 2024-10-01 18:22:46,911 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:46,911 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0540322655
INFO 2024-10-01 18:22:46,911 utils 570 138242068317888 Original number: 0540322655
INFO 2024-10-01 18:22:46,911 utils 570 138242068317888 Cleaned number: 0540322655
INFO 2024-10-01 18:22:46,911 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:46,912 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:46,912 models 570 138242068317888 Categorizing call for number: 0540322655
INFO 2024-10-01 18:22:46,915 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:46,918 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:46,918 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Match found: 0540322655 matches 05
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:46,919 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:46,920 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 18:22:46,920 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:46,921 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:46,921 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:22:46,921 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:22:46,922 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:46,925 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:46,925 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:46,931 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:22:46,934 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:22:46,945 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:22:46.939689+00:00, Should reset: False
INFO 2024-10-01 18:22:46,946 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:22:46,947 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 29.60
INFO 2024-10-01 18:22:46,947 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:22:46,947 models 570 138242068317888 Attempting to deduct 0.40 from balance 70.40
INFO 2024-10-01 18:22:46,949 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 70.00
INFO 2024-10-01 18:22:46,949 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 70.00
INFO 2024-10-01 18:22:46,956 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:46,958 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:46,959 models 570 138242068317888 Initial state: caller=7781, callee=0540322655, duration=47, total_cost=0.40
INFO 2024-10-01 18:22:46,963 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:22:46,964 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0540322655
INFO 2024-10-01 18:22:46,964 utils 570 138242068317888 Original number: 0540322655
INFO 2024-10-01 18:22:46,966 utils 570 138242068317888 Cleaned number: 0540322655
INFO 2024-10-01 18:22:46,966 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:22:46,966 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:46,966 models 570 138242068317888 Categorizing call for number: 0540322655
INFO 2024-10-01 18:22:46,970 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:46,972 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:46,973 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:22:46,974 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:22:46,974 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:22:46,974 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Match found: 0540322655 matches 05
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Calculating total cost for call: duration=47 seconds
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:46,975 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:22:46,978 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:22:46,978 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:22:46,979 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:46,982 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:46,983 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:22:46,987 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:22:46,990 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:22:46,995 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:22:46.992381+00:00, Should reset: False
INFO 2024-10-01 18:22:46,995 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:22:46,996 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:22:46,996 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:46,997 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:46,999 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:47,000 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0540322655 at 2024-10-01 15:21:43+03:00
INFO 2024-10-01 18:22:47,402 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58154) on port 8000
INFO 2024-10-01 18:22:53,841 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:22:14,8426,8449,00:00:35,2024/10/01 15:22:17,2024/10/01 15:22:52,TerminatedByDst,,,Ext.8449,Ext.8426,8426,,,Extension,Extension,,Mohammed Aasif,Rehan Khan Mohammed,
INFO 2024-10-01 18:22:53,841 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:22:14', '8426', '8449', '00:00:35', '2024/10/01 15:22:17', '2024/10/01 15:22:52', 'TerminatedByDst', '', '', 'Ext.8449', 'Ext.8426', '8426', '', '', 'Extension', 'Extension', '', 'Mohammed Aasif', 'Rehan Khan Mohammed', '']
INFO 2024-10-01 18:22:53,861 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:53,861 models 570 138242068317888 Initial state: caller=8449, callee=8426, duration=35, total_cost=0.0
INFO 2024-10-01 18:22:53,861 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:22:53,862 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 8426
INFO 2024-10-01 18:22:53,862 utils 570 138242068317888 Original number: 8426
INFO 2024-10-01 18:22:53,862 utils 570 138242068317888 Cleaned number: 8426
INFO 2024-10-01 18:22:53,862 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:53,862 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:53,863 models 570 138242068317888 Categorizing call for number: 8426
INFO 2024-10-01 18:22:53,866 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:53,868 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:53,868 models 570 138242068317888 Match found: 8426 matches ^\d{4}$
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Calculating total cost for call: duration=35 seconds
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:53,869 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:53,870 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:53,870 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:53,873 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:53,873 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:53,877 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:53,880 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:53,884 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:22:53.882021+00:00, Should reset: False
INFO 2024-10-01 18:22:53,884 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:53,884 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:53,884 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:53,885 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:53,887 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:53,887 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:22:53,888 models 570 138242068317888 Initial state: caller=8449, callee=8426, duration=35, total_cost=0.00
INFO 2024-10-01 18:22:53,890 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:22:53,891 models 570 138242068317888 Before determining country, Caller: 8449, Callee: 8426
INFO 2024-10-01 18:22:53,891 utils 570 138242068317888 Original number: 8426
INFO 2024-10-01 18:22:53,891 utils 570 138242068317888 Cleaned number: 8426
INFO 2024-10-01 18:22:53,891 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:22:53,892 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:22:53,892 models 570 138242068317888 Categorizing call for number: 8426
INFO 2024-10-01 18:22:53,894 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:22:53,896 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:22:53,897 models 570 138242068317888 Match found: 8426 matches ^\d{4}$
INFO 2024-10-01 18:22:53,897 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:22:53,897 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:22:53,897 models 570 138242068317888 Calculating total cost for call: duration=35 seconds
INFO 2024-10-01 18:22:53,897 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:22:53,898 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:22:53,898 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:22:53,898 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:22:53,898 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:22:53,901 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:22:53,902 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:22:53,905 models 570 138242068317888 Found extension: 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:53,907 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:53,911 models 570 138242068317888 Quota for 8449 - Mohammed Aasif (Smasco): Last reset: 2024-09-15 06:35:35.049445+00:00, Next reset: 2024-10-15 06:35:35.049445+00:00, Current time: 2024-10-01 15:22:53.908976+00:00, Should reset: False
INFO 2024-10-01 18:22:53,912 models 570 138242068317888 Quota reset not needed for 8449 - Mohammed Aasif (Smasco)
INFO 2024-10-01 18:22:53,912 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 82.00
INFO 2024-10-01 18:22:53,912 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:22:53,912 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:22:53,914 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:22:53,915 socket_server 570 138242068317888 Saved call record for company Smasco: 8449 -> 8426 at 2024-10-01 15:22:14+03:00
INFO 2024-10-01 18:22:54,317 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58156) on port 8000
INFO 2024-10-01 18:23:06,422 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:23:04,0502629904,8426,,,2024/10/01 15:23:05,Failed,,,Ext.8426,0502629904,0502629904,,,Extension,LineSet,,Rehan Khan Mohammed,0502629904,
INFO 2024-10-01 18:23:06,422 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:23:04', '0502629904', '8426', '', '', '2024/10/01 15:23:05', 'Failed', '', '', 'Ext.8426', '0502629904', '0502629904', '', '', 'Extension', 'LineSet', '', 'Rehan Khan Mohammed', '0502629904', '']
INFO 2024-10-01 18:23:06,437 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:06,438 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=None, total_cost=0.0
INFO 2024-10-01 18:23:06,438 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:23:06,438 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:23:06,438 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:23:06,439 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:23:06,439 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:06,439 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:06,439 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:23:06,442 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:06,444 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:06,444 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:06,445 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:06,445 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:06,445 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:06,445 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:23:06,446 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:06,446 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:06,446 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:06,446 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:06,446 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:06,446 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:06,449 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:06,449 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:06,452 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:06,454 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:06,458 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:23:06.456276+00:00, Should reset: False
INFO 2024-10-01 18:23:06,458 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:06,458 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:06,459 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:06,459 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:06,461 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:06,461 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:06,461 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=None, total_cost=0.00
INFO 2024-10-01 18:23:06,464 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:23:06,464 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:23:06,464 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:23:06,464 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:23:06,464 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:06,465 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:06,465 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:23:06,467 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:06,468 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:06,468 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:06,468 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:06,469 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:06,469 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:06,469 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:23:06,469 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:06,470 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:06,470 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:06,470 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:06,470 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:06,471 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:06,473 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:06,473 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:06,475 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:06,477 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:06,480 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:23:06.478726+00:00, Should reset: False
INFO 2024-10-01 18:23:06,481 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:06,481 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:06,481 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:06,481 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:06,483 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:06,483 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0502629904 at 2024-10-01 15:23:04+03:00
INFO 2024-10-01 18:23:06,907 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58157) on port 8000
INFO 2024-10-01 18:23:12,882 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:21:20,0537904818,7492,,,2024/10/01 15:23:12,Failed,,,Ext.7492,0537904818,0537904818,,,Extension,LineSet,,Rohimah Halil,0537904818,
INFO 2024-10-01 18:23:12,883 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:21:20', '0537904818', '7492', '', '', '2024/10/01 15:23:12', 'Failed', '', '', 'Ext.7492', '0537904818', '0537904818', '', '', 'Extension', 'LineSet', '', 'Rohimah Halil', '0537904818', '']
INFO 2024-10-01 18:23:12,902 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:12,902 models 570 138242068317888 Initial state: caller=7492, callee=0537904818, duration=None, total_cost=0.0
INFO 2024-10-01 18:23:12,903 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:23:12,903 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0537904818
INFO 2024-10-01 18:23:12,903 utils 570 138242068317888 Original number: 0537904818
INFO 2024-10-01 18:23:12,903 utils 570 138242068317888 Cleaned number: 0537904818
INFO 2024-10-01 18:23:12,904 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:12,904 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:12,904 models 570 138242068317888 Categorizing call for number: 0537904818
INFO 2024-10-01 18:23:12,907 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:12,909 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:12,909 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:12,909 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:12,909 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:12,909 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:12,910 models 570 138242068317888 Match found: 0537904818 matches 05
INFO 2024-10-01 18:23:12,910 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:12,910 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:12,910 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:12,910 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:12,910 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:12,911 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:12,913 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:12,913 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:12,922 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:23:12,924 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:23:12,929 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:23:12.926784+00:00, Should reset: False
INFO 2024-10-01 18:23:12,929 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:23:12,929 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:23:12,929 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:12,929 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:12,932 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:12,932 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:12,932 models 570 138242068317888 Initial state: caller=7492, callee=0537904818, duration=None, total_cost=0.00
INFO 2024-10-01 18:23:12,936 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:23:12,937 models 570 138242068317888 Before determining country, Caller: 7492, Callee: 0537904818
INFO 2024-10-01 18:23:12,937 utils 570 138242068317888 Original number: 0537904818
INFO 2024-10-01 18:23:12,937 utils 570 138242068317888 Cleaned number: 0537904818
INFO 2024-10-01 18:23:12,937 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:12,937 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:12,937 models 570 138242068317888 Categorizing call for number: 0537904818
INFO 2024-10-01 18:23:12,939 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:12,941 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:12,941 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:12,942 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:12,942 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:12,942 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:12,942 models 570 138242068317888 Match found: 0537904818 matches 05
INFO 2024-10-01 18:23:12,942 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:12,943 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:12,943 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:12,943 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:12,943 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:12,943 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:12,946 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:12,947 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:12,950 models 570 138242068317888 Found extension: 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:23:12,952 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:23:12,956 models 570 138242068317888 Quota for 7492 - Rohimah Halil (Smasco): Last reset: 2024-09-15 06:35:15.479485+00:00, Next reset: 2024-10-15 06:35:15.479485+00:00, Current time: 2024-10-01 15:23:12.954554+00:00, Should reset: False
INFO 2024-10-01 18:23:12,957 models 570 138242068317888 Quota reset not needed for 7492 - Rohimah Halil (Smasco)
INFO 2024-10-01 18:23:12,957 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.40
INFO 2024-10-01 18:23:12,957 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:12,958 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:12,960 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:12,960 socket_server 570 138242068317888 Saved call record for company Smasco: 7492 -> 0537904818 at 2024-10-01 15:21:20+03:00
INFO 2024-10-01 18:23:13,371 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58158) on port 8000
INFO 2024-10-01 18:23:48,311 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:23:46,0502629904,8426,,,2024/10/01 15:23:47,Failed,,,Ext.8426,0502629904,0502629904,,,Extension,LineSet,,Rehan Khan Mohammed,0502629904,
INFO 2024-10-01 18:23:48,311 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:23:46', '0502629904', '8426', '', '', '2024/10/01 15:23:47', 'Failed', '', '', 'Ext.8426', '0502629904', '0502629904', '', '', 'Extension', 'LineSet', '', 'Rehan Khan Mohammed', '0502629904', '']
INFO 2024-10-01 18:23:48,335 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:48,335 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=None, total_cost=0.0
INFO 2024-10-01 18:23:48,336 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:23:48,336 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:23:48,336 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:23:48,336 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:23:48,337 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:48,337 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:48,337 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:23:48,340 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:48,343 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:48,344 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:48,344 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:48,344 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:48,344 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:48,344 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:23:48,345 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:48,345 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:48,345 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:48,345 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:48,345 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:48,345 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:48,352 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:48,352 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:48,356 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:48,358 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:48,362 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:23:48.360340+00:00, Should reset: False
INFO 2024-10-01 18:23:48,362 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:48,363 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:48,363 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:48,363 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:48,364 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:48,365 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:48,365 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=None, total_cost=0.00
INFO 2024-10-01 18:23:48,367 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:23:48,367 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:23:48,367 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:23:48,368 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:23:48,368 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:48,368 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:48,368 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:23:48,370 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:48,371 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:23:48,372 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:48,373 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:48,373 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:23:48,373 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:23:48,373 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:23:48,373 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:48,375 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:48,375 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:48,378 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:48,379 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:48,382 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:23:48.380657+00:00, Should reset: False
INFO 2024-10-01 18:23:48,382 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:23:48,382 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:48,383 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:48,383 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:48,384 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:48,384 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0502629904 at 2024-10-01 15:23:46+03:00
INFO 2024-10-01 18:23:48,794 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58160) on port 8000
INFO 2024-10-01 18:23:50,094 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:19:34,0504578882,7791,00:04:00,2024/10/01 15:19:48,2024/10/01 15:23:49,TerminatedByDst,,,Ext.7791,0504578882,10001,,,Extension,Line,,Arwa Almagli,0504578882,
INFO 2024-10-01 18:23:50,095 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:19:34', '0504578882', '7791', '00:04:00', '2024/10/01 15:19:48', '2024/10/01 15:23:49', 'TerminatedByDst', '', '', 'Ext.7791', '0504578882', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0504578882', '']
INFO 2024-10-01 18:23:50,109 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:50,110 models 570 138242068317888 Initial state: caller=7791, callee=0504578882, duration=240, total_cost=0.0
INFO 2024-10-01 18:23:50,110 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:23:50,110 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0504578882
INFO 2024-10-01 18:23:50,110 utils 570 138242068317888 Original number: 0504578882
INFO 2024-10-01 18:23:50,110 utils 570 138242068317888 Cleaned number: 0504578882
INFO 2024-10-01 18:23:50,111 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:50,111 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:50,111 models 570 138242068317888 Categorizing call for number: 0504578882
INFO 2024-10-01 18:23:50,113 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:50,115 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:50,116 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:50,116 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:50,116 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:50,116 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:50,116 models 570 138242068317888 Match found: 0504578882 matches 05
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Calculating total cost for call: duration=240 seconds
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:23:50,117 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:23:50,118 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:23:50,118 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:50,120 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:50,120 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:23:50,124 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:23:50,125 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:50,129 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:23:50.127430+00:00, Should reset: False
INFO 2024-10-01 18:23:50,129 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:23:50,129 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:50,130 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:23:50,130 models 570 138242068317888 Attempting to deduct 1.60 from balance 0.00
WARNING 2024-10-01 18:23:50,130 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.60
WARNING 2024-10-01 18:23:50,130 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 18:23:50,132 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:50,132 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:23:50,132 models 570 138242068317888 Initial state: caller=7791, callee=0504578882, duration=240, total_cost=1.60
INFO 2024-10-01 18:23:50,135 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:23:50,135 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0504578882
INFO 2024-10-01 18:23:50,135 utils 570 138242068317888 Original number: 0504578882
INFO 2024-10-01 18:23:50,135 utils 570 138242068317888 Cleaned number: 0504578882
INFO 2024-10-01 18:23:50,135 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:23:50,135 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:23:50,136 models 570 138242068317888 Categorizing call for number: 0504578882
INFO 2024-10-01 18:23:50,137 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:23:50,139 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:23:50,139 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:23:50,139 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:23:50,140 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:23:50,140 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:23:50,140 models 570 138242068317888 Match found: 0504578882 matches 05
INFO 2024-10-01 18:23:50,140 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:23:50,140 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 Calculating total cost for call: duration=240 seconds
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:23:50,141 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:23:50,143 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:23:50,144 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:23:50,146 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:23:50,147 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:50,150 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:23:50.149188+00:00, Should reset: False
INFO 2024-10-01 18:23:50,151 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:23:50,151 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:23:50,151 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:23:50,151 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:23:50,152 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:23:50,153 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0504578882 at 2024-10-01 15:19:34+03:00
INFO 2024-10-01 18:23:50,553 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58161) on port 8000
INFO 2024-10-01 18:23:51,541 basehttp 90881 130666878469824 "GET /top-extensions/ HTTP/1.1" 200 32413
INFO 2024-10-01 18:24:20,683 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:15:13,0500416804,1030,00:08:59,2024/10/01 15:15:20,2024/10/01 15:24:19,TerminatedBySrc,,,Ext.1030,0500416804,10001,,,Extension,Line,,Saiyed Jafar Ahmad,0500416804,
INFO 2024-10-01 18:24:20,683 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:15:13', '0500416804', '1030', '00:08:59', '2024/10/01 15:15:20', '2024/10/01 15:24:19', 'TerminatedBySrc', '', '', 'Ext.1030', '0500416804', '10001', '', '', 'Extension', 'Line', '', 'Saiyed Jafar Ahmad', '0500416804', '']
INFO 2024-10-01 18:24:20,707 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:20,708 models 570 138242068317888 Initial state: caller=1030, callee=0500416804, duration=539, total_cost=0.0
INFO 2024-10-01 18:24:20,708 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:24:20,708 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0500416804
INFO 2024-10-01 18:24:20,708 utils 570 138242068317888 Original number: 0500416804
INFO 2024-10-01 18:24:20,709 utils 570 138242068317888 Cleaned number: 0500416804
INFO 2024-10-01 18:24:20,709 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:20,709 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:20,709 models 570 138242068317888 Categorizing call for number: 0500416804
INFO 2024-10-01 18:24:20,713 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:20,716 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:20,716 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:20,717 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:20,717 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:20,717 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:20,717 models 570 138242068317888 Match found: 0500416804 matches 05
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Calculating total cost for call: duration=539 seconds
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Duration in minutes: 9
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:20,718 models 570 138242068317888 Calculated total cost: 3.60
INFO 2024-10-01 18:24:20,719 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=3.60
INFO 2024-10-01 18:24:20,719 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:20,722 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:20,723 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:24:20,727 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:24:20,731 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:20,738 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:24:20.734608+00:00, Should reset: False
INFO 2024-10-01 18:24:20,738 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:24:20,739 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:20,739 models 570 138242068317888 Amount to deduct: 3.60
INFO 2024-10-01 18:24:20,739 models 570 138242068317888 Attempting to deduct 3.60 from balance 0.00
WARNING 2024-10-01 18:24:20,739 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 3.60
WARNING 2024-10-01 18:24:20,740 models 570 138242068317888 Warning: Quota exceeded for extension 1030
INFO 2024-10-01 18:24:20,742 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:20,742 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:20,743 models 570 138242068317888 Initial state: caller=1030, callee=0500416804, duration=539, total_cost=3.60
INFO 2024-10-01 18:24:20,746 models 570 138242068317888 This is an existing CallRecord. Old total cost: 3.60
INFO 2024-10-01 18:24:20,746 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0500416804
INFO 2024-10-01 18:24:20,746 utils 570 138242068317888 Original number: 0500416804
INFO 2024-10-01 18:24:20,747 utils 570 138242068317888 Cleaned number: 0500416804
INFO 2024-10-01 18:24:20,747 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:20,747 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:20,747 models 570 138242068317888 Categorizing call for number: 0500416804
INFO 2024-10-01 18:24:20,750 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:20,752 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:20,752 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:20,752 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:20,753 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:20,753 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:20,753 models 570 138242068317888 Match found: 0500416804 matches 05
INFO 2024-10-01 18:24:20,753 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:20,754 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:20,754 models 570 138242068317888 Calculating total cost for call: duration=539 seconds
INFO 2024-10-01 18:24:20,754 models 570 138242068317888 Duration in minutes: 9
INFO 2024-10-01 18:24:20,754 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:20,754 models 570 138242068317888 Calculated total cost: 3.60
INFO 2024-10-01 18:24:20,755 models 570 138242068317888 After cost calculation: old_total_cost=3.60, new_total_cost=3.60
INFO 2024-10-01 18:24:20,756 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:20,758 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:20,759 models 570 138242068317888 Starting update_user_quota with old_total_cost=3.60
INFO 2024-10-01 18:24:20,762 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:24:20,765 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:20,770 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:24:20.767777+00:00, Should reset: False
INFO 2024-10-01 18:24:20,770 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:24:20,770 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:20,771 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:24:20,771 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:24:20,772 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:20,773 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0500416804 at 2024-10-01 15:15:13+03:00
INFO 2024-10-01 18:24:21,175 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58173) on port 8000
INFO 2024-10-01 18:24:37,119 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:24:03,0545714582,8451,00:00:14,2024/10/01 15:24:22,2024/10/01 15:24:36,TerminatedBySrc,,,Ext.8451,0545714582,10001,,,Extension,Line,,Jamil Agbay,0545714582,
INFO 2024-10-01 18:24:37,120 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:24:03', '0545714582', '8451', '00:00:14', '2024/10/01 15:24:22', '2024/10/01 15:24:36', 'TerminatedBySrc', '', '', 'Ext.8451', '0545714582', '10001', '', '', 'Extension', 'Line', '', 'Jamil Agbay', '0545714582', '']
INFO 2024-10-01 18:24:37,136 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:37,136 models 570 138242068317888 Initial state: caller=8451, callee=0545714582, duration=14, total_cost=0.0
INFO 2024-10-01 18:24:37,136 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:24:37,137 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0545714582
INFO 2024-10-01 18:24:37,137 utils 570 138242068317888 Original number: 0545714582
INFO 2024-10-01 18:24:37,137 utils 570 138242068317888 Cleaned number: 0545714582
INFO 2024-10-01 18:24:37,137 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:37,137 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:37,138 models 570 138242068317888 Categorizing call for number: 0545714582
INFO 2024-10-01 18:24:37,140 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:37,142 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:37,142 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:37,142 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Match found: 0545714582 matches 05
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:37,143 models 570 138242068317888 Calculating total cost for call: duration=14 seconds
INFO 2024-10-01 18:24:37,144 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:24:37,144 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:37,144 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:24:37,144 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:24:37,144 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:37,146 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:37,147 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:24:37,150 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:24:37,152 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:37,155 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 15:24:37.153650+00:00, Should reset: False
INFO 2024-10-01 18:24:37,155 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:24:37,155 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:37,156 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:24:37,156 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:24:37,156 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:24:37,156 models 570 138242068317888 Warning: Quota exceeded for extension 8451
INFO 2024-10-01 18:24:37,158 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:37,158 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:37,159 models 570 138242068317888 Initial state: caller=8451, callee=0545714582, duration=14, total_cost=0.40
INFO 2024-10-01 18:24:37,161 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:24:37,161 models 570 138242068317888 Before determining country, Caller: 8451, Callee: 0545714582
INFO 2024-10-01 18:24:37,162 utils 570 138242068317888 Original number: 0545714582
INFO 2024-10-01 18:24:37,162 utils 570 138242068317888 Cleaned number: 0545714582
INFO 2024-10-01 18:24:37,162 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:37,162 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:37,162 models 570 138242068317888 Categorizing call for number: 0545714582
INFO 2024-10-01 18:24:37,164 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:37,165 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:37,166 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:37,166 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:37,166 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:37,166 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:37,166 models 570 138242068317888 Match found: 0545714582 matches 05
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Calculating total cost for call: duration=14 seconds
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:37,167 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:24:37,168 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:24:37,168 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:37,170 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:37,170 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:24:37,172 models 570 138242068317888 Found extension: 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:24:37,174 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:37,177 models 570 138242068317888 Quota for 8451 - Jamil Agbay (Smasco): Last reset: 2024-09-15 06:35:35.055348+00:00, Next reset: 2024-10-15 06:35:35.055348+00:00, Current time: 2024-10-01 15:24:37.175448+00:00, Should reset: False
INFO 2024-10-01 18:24:37,177 models 570 138242068317888 Quota reset not needed for 8451 - Jamil Agbay (Smasco)
INFO 2024-10-01 18:24:37,178 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:37,178 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:24:37,178 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:24:37,180 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:37,180 socket_server 570 138242068317888 Saved call record for company Smasco: 8451 -> 0545714582 at 2024-10-01 15:24:03+03:00
INFO 2024-10-01 18:24:37,587 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58174) on port 8000
INFO 2024-10-01 18:24:52,211 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:20:17,0559593373,7790,00:04:26,2024/10/01 15:20:25,2024/10/01 15:24:51,TerminatedBySrc,,,Ext.7790,0559593373,10001,,,Extension,Line,,Maram Alharbi,0559593373,
INFO 2024-10-01 18:24:52,212 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:20:17', '0559593373', '7790', '00:04:26', '2024/10/01 15:20:25', '2024/10/01 15:24:51', 'TerminatedBySrc', '', '', 'Ext.7790', '0559593373', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0559593373', '']
INFO 2024-10-01 18:24:52,233 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:52,233 models 570 138242068317888 Initial state: caller=7790, callee=0559593373, duration=266, total_cost=0.0
INFO 2024-10-01 18:24:52,234 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:24:52,234 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0559593373
INFO 2024-10-01 18:24:52,234 utils 570 138242068317888 Original number: 0559593373
INFO 2024-10-01 18:24:52,234 utils 570 138242068317888 Cleaned number: 0559593373
INFO 2024-10-01 18:24:52,234 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:52,235 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:52,235 models 570 138242068317888 Categorizing call for number: 0559593373
INFO 2024-10-01 18:24:52,238 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:52,249 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:52,277 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:52,277 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:52,278 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:52,278 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:52,278 models 570 138242068317888 Match found: 0559593373 matches 05
INFO 2024-10-01 18:24:52,278 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:52,278 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:52,303 models 570 138242068317888 Calculating total cost for call: duration=266 seconds
INFO 2024-10-01 18:24:52,303 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 18:24:52,303 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:52,304 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 18:24:52,304 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 18:24:52,304 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:52,325 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:52,327 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:24:52,331 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:24:52,334 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:52,338 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:24:52.336420+00:00, Should reset: False
INFO 2024-10-01 18:24:52,339 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:24:52,339 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:52,339 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 18:24:52,339 models 570 138242068317888 Attempting to deduct 2.00 from balance 0.00
WARNING 2024-10-01 18:24:52,340 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.00
WARNING 2024-10-01 18:24:52,340 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:24:52,342 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:52,342 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:24:52,343 models 570 138242068317888 Initial state: caller=7790, callee=0559593373, duration=266, total_cost=2.00
INFO 2024-10-01 18:24:52,346 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 18:24:52,346 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0559593373
INFO 2024-10-01 18:24:52,346 utils 570 138242068317888 Original number: 0559593373
INFO 2024-10-01 18:24:52,347 utils 570 138242068317888 Cleaned number: 0559593373
INFO 2024-10-01 18:24:52,347 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:24:52,347 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:24:52,347 models 570 138242068317888 Categorizing call for number: 0559593373
INFO 2024-10-01 18:24:52,350 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:24:52,352 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:24:52,353 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:24:52,353 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:24:52,353 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:24:52,353 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:24:52,353 models 570 138242068317888 Match found: 0559593373 matches 05
INFO 2024-10-01 18:24:52,354 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:24:52,355 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:24:52,355 models 570 138242068317888 Calculating total cost for call: duration=266 seconds
INFO 2024-10-01 18:24:52,355 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 18:24:52,356 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:24:52,356 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 18:24:52,356 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 18:24:52,356 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:24:52,359 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:24:52,360 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 18:24:52,363 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:24:52,365 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:52,369 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:24:52.367488+00:00, Should reset: False
INFO 2024-10-01 18:24:52,370 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:24:52,370 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:24:52,370 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:24:52,370 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:24:52,373 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:24:52,374 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0559593373 at 2024-10-01 15:20:17+03:00
INFO 2024-10-01 18:24:52,779 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58176) on port 8000
INFO 2024-10-01 18:25:10,120 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:24:22,0531651059,1030,00:00:33,2024/10/01 15:24:36,2024/10/01 15:25:09,TerminatedBySrc,,,Ext.1030,0531651059,10001,,,Extension,Line,,Saiyed Jafar Ahmad,0531651059,
INFO 2024-10-01 18:25:10,120 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:24:22', '0531651059', '1030', '00:00:33', '2024/10/01 15:24:36', '2024/10/01 15:25:09', 'TerminatedBySrc', '', '', 'Ext.1030', '0531651059', '10001', '', '', 'Extension', 'Line', '', 'Saiyed Jafar Ahmad', '0531651059', '']
INFO 2024-10-01 18:25:10,142 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:10,142 models 570 138242068317888 Initial state: caller=1030, callee=0531651059, duration=33, total_cost=0.0
INFO 2024-10-01 18:25:10,143 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:25:10,143 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0531651059
INFO 2024-10-01 18:25:10,144 utils 570 138242068317888 Original number: 0531651059
INFO 2024-10-01 18:25:10,144 utils 570 138242068317888 Cleaned number: 0531651059
INFO 2024-10-01 18:25:10,144 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:10,144 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:10,144 models 570 138242068317888 Categorizing call for number: 0531651059
INFO 2024-10-01 18:25:10,149 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:10,151 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:10,152 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:10,152 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:10,152 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:10,152 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:10,153 models 570 138242068317888 Match found: 0531651059 matches 05
INFO 2024-10-01 18:25:10,153 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:10,153 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:10,153 models 570 138242068317888 Calculating total cost for call: duration=33 seconds
INFO 2024-10-01 18:25:10,153 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:10,154 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:10,154 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:25:10,154 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:25:10,154 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:10,157 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:10,157 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:10,162 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:10,164 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:10,171 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:25:10.168348+00:00, Should reset: False
INFO 2024-10-01 18:25:10,171 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:10,171 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:10,172 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:25:10,172 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:25:10,172 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:25:10,172 models 570 138242068317888 Warning: Quota exceeded for extension 1030
INFO 2024-10-01 18:25:10,174 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:10,175 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:10,175 models 570 138242068317888 Initial state: caller=1030, callee=0531651059, duration=33, total_cost=0.40
INFO 2024-10-01 18:25:10,179 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:25:10,179 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0531651059
INFO 2024-10-01 18:25:10,179 utils 570 138242068317888 Original number: 0531651059
INFO 2024-10-01 18:25:10,179 utils 570 138242068317888 Cleaned number: 0531651059
INFO 2024-10-01 18:25:10,179 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:10,180 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:10,180 models 570 138242068317888 Categorizing call for number: 0531651059
INFO 2024-10-01 18:25:10,182 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:10,183 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Match found: 0531651059 matches 05
INFO 2024-10-01 18:25:10,184 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:10,185 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:10,185 models 570 138242068317888 Calculating total cost for call: duration=33 seconds
INFO 2024-10-01 18:25:10,185 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:10,185 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:10,185 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:25:10,186 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:25:10,186 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:10,188 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:10,188 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:25:10,191 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:10,192 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:10,196 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:25:10.194508+00:00, Should reset: False
INFO 2024-10-01 18:25:10,196 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:10,197 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:10,197 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:10,197 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:10,198 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:10,199 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0531651059 at 2024-10-01 15:24:22+03:00
INFO 2024-10-01 18:25:10,592 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58186) on port 8000
INFO 2024-10-01 18:25:36,327 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:24:51,0551941941,1131,00:00:33,2024/10/01 15:25:01,2024/10/01 15:25:35,TerminatedBySrc,,,Ext.1131,0551941941,10001,,,Extension,Line,,MUNIRAH ALQURAISHI,0551941941,
INFO 2024-10-01 18:25:36,328 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:24:51', '0551941941', '1131', '00:00:33', '2024/10/01 15:25:01', '2024/10/01 15:25:35', 'TerminatedBySrc', '', '', 'Ext.1131', '0551941941', '10001', '', '', 'Extension', 'Line', '', 'MUNIRAH ALQURAISHI', '0551941941', '']
INFO 2024-10-01 18:25:36,344 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:36,344 models 570 138242068317888 Initial state: caller=1131, callee=0551941941, duration=33, total_cost=0.0
INFO 2024-10-01 18:25:36,344 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:25:36,345 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0551941941
INFO 2024-10-01 18:25:36,345 utils 570 138242068317888 Original number: 0551941941
INFO 2024-10-01 18:25:36,345 utils 570 138242068317888 Cleaned number: 0551941941
INFO 2024-10-01 18:25:36,345 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:36,345 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:36,346 models 570 138242068317888 Categorizing call for number: 0551941941
INFO 2024-10-01 18:25:36,348 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:36,350 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:36,350 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:36,350 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:36,351 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:36,351 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:36,351 models 570 138242068317888 Match found: 0551941941 matches 05
INFO 2024-10-01 18:25:36,351 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:36,351 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 Calculating total cost for call: duration=33 seconds
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:25:36,352 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:36,355 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:36,355 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:25:36,357 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:25:36,359 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:36,359 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:36,360 models 570 138242068317888 Initial state: caller=1131, callee=0551941941, duration=33, total_cost=0.40
INFO 2024-10-01 18:25:36,362 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:25:36,363 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0551941941
INFO 2024-10-01 18:25:36,363 utils 570 138242068317888 Original number: 0551941941
INFO 2024-10-01 18:25:36,363 utils 570 138242068317888 Cleaned number: 0551941941
INFO 2024-10-01 18:25:36,363 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:36,363 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:36,363 models 570 138242068317888 Categorizing call for number: 0551941941
INFO 2024-10-01 18:25:36,365 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:36,367 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:36,367 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:36,367 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:36,367 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:36,367 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:36,368 models 570 138242068317888 Match found: 0551941941 matches 05
INFO 2024-10-01 18:25:36,368 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:36,368 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:36,368 models 570 138242068317888 Calculating total cost for call: duration=33 seconds
INFO 2024-10-01 18:25:36,368 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:36,369 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:36,369 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:25:36,369 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:25:36,369 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:36,371 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:36,371 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
WARNING 2024-10-01 18:25:36,373 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:25:36,374 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:36,375 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0551941941 at 2024-10-01 15:24:51+03:00
INFO 2024-10-01 18:25:36,774 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58194) on port 8000
INFO 2024-10-01 18:25:39,745 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:20:23,0506738873,7783,00:05:07,2024/10/01 15:20:31,2024/10/01 15:25:38,TerminatedByDst,,,Ext.7783,0506738873,10001,,,Extension,Line,,Majd Alshehri,0506738873,
INFO 2024-10-01 18:25:39,745 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:20:23', '0506738873', '7783', '00:05:07', '2024/10/01 15:20:31', '2024/10/01 15:25:38', 'TerminatedByDst', '', '', 'Ext.7783', '0506738873', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0506738873', '']
INFO 2024-10-01 18:25:39,777 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:39,778 models 570 138242068317888 Initial state: caller=7783, callee=0506738873, duration=307, total_cost=0.0
INFO 2024-10-01 18:25:39,779 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:25:39,780 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0506738873
INFO 2024-10-01 18:25:39,780 utils 570 138242068317888 Original number: 0506738873
INFO 2024-10-01 18:25:39,780 utils 570 138242068317888 Cleaned number: 0506738873
INFO 2024-10-01 18:25:39,781 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:39,782 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:39,783 models 570 138242068317888 Categorizing call for number: 0506738873
INFO 2024-10-01 18:25:39,787 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:39,792 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:39,792 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:39,792 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:39,793 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:39,794 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:39,794 models 570 138242068317888 Match found: 0506738873 matches 05
INFO 2024-10-01 18:25:39,794 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:39,795 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:39,795 models 570 138242068317888 Calculating total cost for call: duration=307 seconds
INFO 2024-10-01 18:25:39,795 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:25:39,795 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:39,797 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:25:39,797 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 18:25:39,797 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:39,801 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:39,801 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:39,806 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:25:39,808 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 19.20
INFO 2024-10-01 18:25:39,813 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:25:39.810814+00:00, Should reset: False
INFO 2024-10-01 18:25:39,814 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:25:39,814 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 19.20
INFO 2024-10-01 18:25:39,814 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 18:25:39,814 models 570 138242068317888 Attempting to deduct 2.40 from balance 80.80
INFO 2024-10-01 18:25:39,817 models 570 138242068317888 Successfully deducted 2.40. New remaining balance: 78.40
INFO 2024-10-01 18:25:39,817 models 570 138242068317888 Successfully deducted 2.40 from quota. New balance: 78.40
INFO 2024-10-01 18:25:39,819 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:39,820 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:39,820 models 570 138242068317888 Initial state: caller=7783, callee=0506738873, duration=307, total_cost=2.40
INFO 2024-10-01 18:25:39,824 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 18:25:39,825 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0506738873
INFO 2024-10-01 18:25:39,825 utils 570 138242068317888 Original number: 0506738873
INFO 2024-10-01 18:25:39,826 utils 570 138242068317888 Cleaned number: 0506738873
INFO 2024-10-01 18:25:39,826 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:39,827 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:39,827 models 570 138242068317888 Categorizing call for number: 0506738873
INFO 2024-10-01 18:25:39,829 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:39,832 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:39,832 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:39,833 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:39,833 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:39,834 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:39,838 models 570 138242068317888 Match found: 0506738873 matches 05
INFO 2024-10-01 18:25:39,839 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:39,839 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:39,839 models 570 138242068317888 Calculating total cost for call: duration=307 seconds
INFO 2024-10-01 18:25:39,841 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:25:39,841 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:25:39,841 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:25:39,842 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 18:25:39,842 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:39,845 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:39,845 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 18:25:39,850 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:25:39,852 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:25:39,857 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:25:39.855130+00:00, Should reset: False
INFO 2024-10-01 18:25:39,858 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:25:39,859 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:25:39,859 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:39,859 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:39,861 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:39,861 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0506738873 at 2024-10-01 15:20:23+03:00
INFO 2024-10-01 18:25:40,261 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58195) on port 8000
INFO 2024-10-01 18:25:43,747 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:24:49,7107,1021,00:00:42,2024/10/01 15:25:00,2024/10/01 15:25:42,TerminatedByDst,,,Ext.1021,Ext.7107,7107,,,Extension,Extension,,Mohammed Aquil,Shringer Shekhar Upadhyay,
INFO 2024-10-01 18:25:43,747 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:24:49', '7107', '1021', '00:00:42', '2024/10/01 15:25:00', '2024/10/01 15:25:42', 'TerminatedByDst', '', '', 'Ext.1021', 'Ext.7107', '7107', '', '', 'Extension', 'Extension', '', 'Mohammed Aquil', 'Shringer Shekhar Upadhyay', '']
INFO 2024-10-01 18:25:43,793 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:43,793 models 570 138242068317888 Initial state: caller=1021, callee=7107, duration=42, total_cost=0.0
INFO 2024-10-01 18:25:43,794 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:25:43,794 models 570 138242068317888 Before determining country, Caller: 1021, Callee: 7107
INFO 2024-10-01 18:25:43,794 utils 570 138242068317888 Original number: 7107
INFO 2024-10-01 18:25:43,794 utils 570 138242068317888 Cleaned number: 7107
INFO 2024-10-01 18:25:43,794 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:25:43,794 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:43,795 models 570 138242068317888 Categorizing call for number: 7107
INFO 2024-10-01 18:25:43,797 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:43,801 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Match found: 7107 matches ^\d{4}$
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Calculating total cost for call: duration=42 seconds
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:43,802 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:25:43,803 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:25:43,803 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:25:43,803 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:43,809 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:43,811 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:43,818 models 570 138242068317888 Found extension: 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 18:25:43,823 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:25:43,829 models 570 138242068317888 Quota for 1021 - Mohammed Aquil (Smasco): Last reset: 2024-09-15 06:34:08.988366+00:00, Next reset: 2024-10-15 06:34:08.988366+00:00, Current time: 2024-10-01 15:25:43.826332+00:00, Should reset: False
INFO 2024-10-01 18:25:43,829 models 570 138242068317888 Quota reset not needed for 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 18:25:43,829 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:25:43,829 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:43,829 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:43,837 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:43,837 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:43,837 models 570 138242068317888 Initial state: caller=1021, callee=7107, duration=42, total_cost=0.00
INFO 2024-10-01 18:25:43,848 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:25:43,854 models 570 138242068317888 Before determining country, Caller: 1021, Callee: 7107
INFO 2024-10-01 18:25:43,854 utils 570 138242068317888 Original number: 7107
INFO 2024-10-01 18:25:43,854 utils 570 138242068317888 Cleaned number: 7107
INFO 2024-10-01 18:25:43,854 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:25:43,854 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:43,855 models 570 138242068317888 Categorizing call for number: 7107
INFO 2024-10-01 18:25:43,859 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:43,861 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:43,861 models 570 138242068317888 Match found: 7107 matches ^\d{4}$
INFO 2024-10-01 18:25:43,861 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:25:43,861 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:43,862 models 570 138242068317888 Calculating total cost for call: duration=42 seconds
INFO 2024-10-01 18:25:43,862 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:25:43,862 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:25:43,865 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:25:43,865 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:25:43,865 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:43,868 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:43,868 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:43,872 models 570 138242068317888 Found extension: 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 18:25:43,874 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:25:43,882 models 570 138242068317888 Quota for 1021 - Mohammed Aquil (Smasco): Last reset: 2024-09-15 06:34:08.988366+00:00, Next reset: 2024-10-15 06:34:08.988366+00:00, Current time: 2024-10-01 15:25:43.877459+00:00, Should reset: False
INFO 2024-10-01 18:25:43,882 models 570 138242068317888 Quota reset not needed for 1021 - Mohammed Aquil (Smasco)
INFO 2024-10-01 18:25:43,882 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 3.60
INFO 2024-10-01 18:25:43,883 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:43,883 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:43,884 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:43,884 socket_server 570 138242068317888 Saved call record for company Smasco: 1021 -> 7107 at 2024-10-01 15:24:49+03:00
INFO 2024-10-01 18:25:44,295 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58201) on port 8000
INFO 2024-10-01 18:25:46,055 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:25:15,0570815796,1030,,,2024/10/01 15:25:45,Failed,,,Ext.1030,0570815796,0570815796,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570815796,
INFO 2024-10-01 18:25:46,055 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:25:15', '0570815796', '1030', '', '', '2024/10/01 15:25:45', 'Failed', '', '', 'Ext.1030', '0570815796', '0570815796', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570815796', '']
INFO 2024-10-01 18:25:46,070 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:46,070 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.0
INFO 2024-10-01 18:25:46,071 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:25:46,071 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:25:46,071 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:25:46,071 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:25:46,071 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:46,072 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:46,072 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:25:46,074 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:46,076 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:46,077 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:46,077 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:46,077 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:46,077 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:46,078 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:25:46,078 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:46,078 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:46,078 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:25:46,078 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:25:46,078 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:25:46,079 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:46,081 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:46,081 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:46,085 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:46,086 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:46,090 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:25:46.088598+00:00, Should reset: False
INFO 2024-10-01 18:25:46,091 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:46,091 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:46,091 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:46,091 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:46,093 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:46,093 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:25:46,094 models 570 138242068317888 Initial state: caller=1030, callee=0570815796, duration=None, total_cost=0.00
INFO 2024-10-01 18:25:46,096 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:25:46,097 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570815796
INFO 2024-10-01 18:25:46,097 utils 570 138242068317888 Original number: 0570815796
INFO 2024-10-01 18:25:46,097 utils 570 138242068317888 Cleaned number: 0570815796
INFO 2024-10-01 18:25:46,097 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:25:46,097 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:25:46,097 models 570 138242068317888 Categorizing call for number: 0570815796
INFO 2024-10-01 18:25:46,099 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:25:46,101 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:25:46,101 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:25:46,101 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:25:46,102 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:25:46,102 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:25:46,102 models 570 138242068317888 Match found: 0570815796 matches 05
INFO 2024-10-01 18:25:46,102 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:25:46,102 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:25:46,103 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:25:46,103 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:25:46,103 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:25:46,103 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:25:46,105 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:25:46,105 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:25:46,108 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:46,109 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:46,112 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:25:46.110598+00:00, Should reset: False
INFO 2024-10-01 18:25:46,112 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:25:46,113 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:25:46,113 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:25:46,113 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:25:46,117 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:25:46,117 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570815796 at 2024-10-01 15:25:15+03:00
INFO 2024-10-01 18:25:46,519 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58204) on port 8000
INFO 2024-10-01 18:26:04,274 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:25:59,0551941941,1131,,,2024/10/01 15:26:03,Failed,,,Ext.1131,0551941941,0551941941,,,Extension,LineSet,,MUNIRAH ALQURAISHI,0551941941,
INFO 2024-10-01 18:26:04,274 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:25:59', '0551941941', '1131', '', '', '2024/10/01 15:26:03', 'Failed', '', '', 'Ext.1131', '0551941941', '0551941941', '', '', 'Extension', 'LineSet', '', 'MUNIRAH ALQURAISHI', '0551941941', '']
INFO 2024-10-01 18:26:04,289 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:04,290 models 570 138242068317888 Initial state: caller=1131, callee=0551941941, duration=None, total_cost=0.0
INFO 2024-10-01 18:26:04,290 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:26:04,290 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0551941941
INFO 2024-10-01 18:26:04,291 utils 570 138242068317888 Original number: 0551941941
INFO 2024-10-01 18:26:04,291 utils 570 138242068317888 Cleaned number: 0551941941
INFO 2024-10-01 18:26:04,291 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:04,291 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:04,291 models 570 138242068317888 Categorizing call for number: 0551941941
INFO 2024-10-01 18:26:04,294 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:04,297 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:04,298 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:04,298 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:04,299 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:04,299 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:04,299 models 570 138242068317888 Match found: 0551941941 matches 05
INFO 2024-10-01 18:26:04,299 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:04,299 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:04,300 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:26:04,300 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:26:04,300 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:26:04,300 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:04,303 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:04,304 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:26:04,309 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:26:04,311 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:04,312 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:04,312 models 570 138242068317888 Initial state: caller=1131, callee=0551941941, duration=None, total_cost=0.00
INFO 2024-10-01 18:26:04,316 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:26:04,316 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0551941941
INFO 2024-10-01 18:26:04,317 utils 570 138242068317888 Original number: 0551941941
INFO 2024-10-01 18:26:04,317 utils 570 138242068317888 Cleaned number: 0551941941
INFO 2024-10-01 18:26:04,317 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:04,317 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:04,317 models 570 138242068317888 Categorizing call for number: 0551941941
INFO 2024-10-01 18:26:04,321 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:04,323 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:04,324 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:04,324 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:04,324 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:04,324 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:04,325 models 570 138242068317888 Match found: 0551941941 matches 05
INFO 2024-10-01 18:26:04,325 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:04,325 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:04,325 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:26:04,325 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:26:04,326 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:26:04,326 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:04,329 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:04,329 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:26:04,331 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:26:04,333 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:04,333 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0551941941 at 2024-10-01 15:25:59+03:00
INFO 2024-10-01 18:26:04,726 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58207) on port 8000
INFO 2024-10-01 18:26:18,531 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:23:38,0557387656,7781,00:02:32,2024/10/01 15:23:45,2024/10/01 15:26:17,TerminatedBySrc,,,Ext.7781,0557387656,10001,,,Extension,Line,,Abdullah Jabal,0557387656,
INFO 2024-10-01 18:26:18,531 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:23:38', '0557387656', '7781', '00:02:32', '2024/10/01 15:23:45', '2024/10/01 15:26:17', 'TerminatedBySrc', '', '', 'Ext.7781', '0557387656', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0557387656', '']
INFO 2024-10-01 18:26:18,549 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:18,549 models 570 138242068317888 Initial state: caller=7781, callee=0557387656, duration=152, total_cost=0.0
INFO 2024-10-01 18:26:18,550 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:26:18,550 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0557387656
INFO 2024-10-01 18:26:18,550 utils 570 138242068317888 Original number: 0557387656
INFO 2024-10-01 18:26:18,551 utils 570 138242068317888 Cleaned number: 0557387656
INFO 2024-10-01 18:26:18,551 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:18,551 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:18,551 models 570 138242068317888 Categorizing call for number: 0557387656
INFO 2024-10-01 18:26:18,554 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:18,556 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:18,557 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:18,557 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:18,557 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:18,557 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:18,558 models 570 138242068317888 Match found: 0557387656 matches 05
INFO 2024-10-01 18:26:18,558 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:18,558 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:18,559 models 570 138242068317888 Calculating total cost for call: duration=152 seconds
INFO 2024-10-01 18:26:18,559 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 18:26:18,559 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:26:18,559 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 18:26:18,559 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.20
INFO 2024-10-01 18:26:18,560 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:18,562 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:18,562 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:26:18,566 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:26:18,568 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:26:18,573 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:26:18.571162+00:00, Should reset: False
INFO 2024-10-01 18:26:18,574 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:26:18,574 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 30.00
INFO 2024-10-01 18:26:18,574 models 570 138242068317888 Amount to deduct: 1.20
INFO 2024-10-01 18:26:18,574 models 570 138242068317888 Attempting to deduct 1.20 from balance 70.00
INFO 2024-10-01 18:26:18,576 models 570 138242068317888 Successfully deducted 1.20. New remaining balance: 68.80
INFO 2024-10-01 18:26:18,576 models 570 138242068317888 Successfully deducted 1.20 from quota. New balance: 68.80
INFO 2024-10-01 18:26:18,578 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:18,578 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:18,578 models 570 138242068317888 Initial state: caller=7781, callee=0557387656, duration=152, total_cost=1.20
INFO 2024-10-01 18:26:18,581 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.20
INFO 2024-10-01 18:26:18,581 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0557387656
INFO 2024-10-01 18:26:18,582 utils 570 138242068317888 Original number: 0557387656
INFO 2024-10-01 18:26:18,582 utils 570 138242068317888 Cleaned number: 0557387656
INFO 2024-10-01 18:26:18,582 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:18,582 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:18,582 models 570 138242068317888 Categorizing call for number: 0557387656
INFO 2024-10-01 18:26:18,584 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:18,586 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:18,586 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:18,587 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:18,587 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:18,588 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:18,588 models 570 138242068317888 Match found: 0557387656 matches 05
INFO 2024-10-01 18:26:18,588 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:18,588 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:18,588 models 570 138242068317888 Calculating total cost for call: duration=152 seconds
INFO 2024-10-01 18:26:18,589 models 570 138242068317888 Duration in minutes: 3
INFO 2024-10-01 18:26:18,589 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:26:18,589 models 570 138242068317888 Calculated total cost: 1.20
INFO 2024-10-01 18:26:18,589 models 570 138242068317888 After cost calculation: old_total_cost=1.20, new_total_cost=1.20
INFO 2024-10-01 18:26:18,589 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:18,591 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:18,592 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.20
INFO 2024-10-01 18:26:18,594 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:26:18,596 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 31.20
INFO 2024-10-01 18:26:18,599 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:26:18.598061+00:00, Should reset: False
INFO 2024-10-01 18:26:18,600 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:26:18,600 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 31.20
INFO 2024-10-01 18:26:18,600 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:26:18,601 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:26:18,602 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:18,602 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0557387656 at 2024-10-01 15:23:38+03:00
INFO 2024-10-01 18:26:18,999 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58208) on port 8000
INFO 2024-10-01 18:26:25,964 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:25:46,0553057535,7783,,,2024/10/01 15:26:25,Failed,,,Ext.7783,0553057535,0553057535,,,Extension,LineSet,,Majd Alshehri,0553057535,
INFO 2024-10-01 18:26:25,965 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:25:46', '0553057535', '7783', '', '', '2024/10/01 15:26:25', 'Failed', '', '', 'Ext.7783', '0553057535', '0553057535', '', '', 'Extension', 'LineSet', '', 'Majd Alshehri', '0553057535', '']
INFO 2024-10-01 18:26:25,985 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:25,986 models 570 138242068317888 Initial state: caller=7783, callee=0553057535, duration=None, total_cost=0.0
INFO 2024-10-01 18:26:25,986 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:26:25,986 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0553057535
INFO 2024-10-01 18:26:25,987 utils 570 138242068317888 Original number: 0553057535
INFO 2024-10-01 18:26:25,987 utils 570 138242068317888 Cleaned number: 0553057535
INFO 2024-10-01 18:26:25,987 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:25,987 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:25,988 models 570 138242068317888 Categorizing call for number: 0553057535
INFO 2024-10-01 18:26:25,994 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:26,000 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:26,000 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:26,001 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:26,001 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:26,001 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:26,002 models 570 138242068317888 Match found: 0553057535 matches 05
INFO 2024-10-01 18:26:26,003 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:26,003 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:26,003 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:26:26,003 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:26:26,003 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:26:26,003 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:26,007 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:26,008 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:26:26,013 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:26:26,016 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:26:26,042 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:26:26.020819+00:00, Should reset: False
INFO 2024-10-01 18:26:26,042 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:26:26,043 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:26:26,043 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:26:26,044 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:26:26,047 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:26,047 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:26,047 models 570 138242068317888 Initial state: caller=7783, callee=0553057535, duration=None, total_cost=0.00
INFO 2024-10-01 18:26:26,051 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:26:26,052 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0553057535
INFO 2024-10-01 18:26:26,052 utils 570 138242068317888 Original number: 0553057535
INFO 2024-10-01 18:26:26,053 utils 570 138242068317888 Cleaned number: 0553057535
INFO 2024-10-01 18:26:26,054 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:26,054 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:26,054 models 570 138242068317888 Categorizing call for number: 0553057535
INFO 2024-10-01 18:26:26,057 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:26,060 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:26,060 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:26,061 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:26,061 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:26,062 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:26,062 models 570 138242068317888 Match found: 0553057535 matches 05
INFO 2024-10-01 18:26:26,062 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:26,062 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:26,062 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:26:26,062 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:26:26,063 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:26:26,064 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:26,067 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:26,067 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:26:26,071 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:26:26,073 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:26:26,077 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:26:26.075398+00:00, Should reset: False
INFO 2024-10-01 18:26:26,078 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:26:26,078 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:26:26,079 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:26:26,079 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:26:26,081 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:26,082 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0553057535 at 2024-10-01 15:25:46+03:00
INFO 2024-10-01 18:26:26,483 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58209) on port 8000
INFO 2024-10-01 18:26:32,363 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:24:39,0561667050,7738,00:01:43,2024/10/01 15:24:48,2024/10/01 15:26:31,TerminatedBySrc,,,Ext.7738,0561667050,10001,,,Extension,Line,,Hanaa Alshalwi,0561667050,
INFO 2024-10-01 18:26:32,363 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:24:39', '0561667050', '7738', '00:01:43', '2024/10/01 15:24:48', '2024/10/01 15:26:31', 'TerminatedBySrc', '', '', 'Ext.7738', '0561667050', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0561667050', '']
INFO 2024-10-01 18:26:32,381 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:32,381 models 570 138242068317888 Initial state: caller=7738, callee=0561667050, duration=103, total_cost=0.0
INFO 2024-10-01 18:26:32,382 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:26:32,382 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0561667050
INFO 2024-10-01 18:26:32,382 utils 570 138242068317888 Original number: 0561667050
INFO 2024-10-01 18:26:32,382 utils 570 138242068317888 Cleaned number: 0561667050
INFO 2024-10-01 18:26:32,382 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:32,382 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:32,383 models 570 138242068317888 Categorizing call for number: 0561667050
INFO 2024-10-01 18:26:32,386 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:32,388 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:32,388 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:32,388 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Match found: 0561667050 matches 05
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:32,389 models 570 138242068317888 Calculating total cost for call: duration=103 seconds
INFO 2024-10-01 18:26:32,390 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:26:32,390 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:26:32,390 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:26:32,390 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:26:32,390 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:32,393 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:32,393 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:26:32,397 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:26:32,399 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:26:32,403 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:26:32.401326+00:00, Should reset: False
INFO 2024-10-01 18:26:32,404 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:26:32,404 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:26:32,404 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:26:32,404 models 570 138242068317888 Attempting to deduct 0.80 from balance 0.00
WARNING 2024-10-01 18:26:32,404 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.80
WARNING 2024-10-01 18:26:32,405 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 18:26:32,406 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:32,407 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:26:32,407 models 570 138242068317888 Initial state: caller=7738, callee=0561667050, duration=103, total_cost=0.80
INFO 2024-10-01 18:26:32,410 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:26:32,411 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0561667050
INFO 2024-10-01 18:26:32,411 utils 570 138242068317888 Original number: 0561667050
INFO 2024-10-01 18:26:32,411 utils 570 138242068317888 Cleaned number: 0561667050
INFO 2024-10-01 18:26:32,412 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:26:32,412 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:26:32,412 models 570 138242068317888 Categorizing call for number: 0561667050
INFO 2024-10-01 18:26:32,414 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:26:32,416 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:26:32,417 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:26:32,417 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:26:32,418 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:26:32,418 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:26:32,418 models 570 138242068317888 Match found: 0561667050 matches 05
INFO 2024-10-01 18:26:32,418 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 Calculating total cost for call: duration=103 seconds
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:26:32,419 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:26:32,421 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:26:32,423 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:26:32,424 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:26:32,428 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:26:32,430 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:26:32,434 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:26:32.432165+00:00, Should reset: False
INFO 2024-10-01 18:26:32,435 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:26:32,435 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:26:32,436 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:26:32,436 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:26:32,437 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:26:32,438 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0561667050 at 2024-10-01 15:24:39+03:00
INFO 2024-10-01 18:26:32,835 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58210) on port 8000
INFO 2024-10-01 18:26:49,787 autoreload 90881 130667071500416 /home/ubuntu/3CX/cdr/cdr3cx/views.py changed, reloading.
INFO 2024-10-01 18:26:51,705 autoreload 91866 127264792551552 Watching for file changes with StatReloader
INFO 2024-10-01 18:26:57,317 basehttp 91866 127264593282752 "GET /top-extensions/?time_period=today&custom_date=&limit=20 HTTP/1.1" 200 32417
INFO 2024-10-01 18:27:02,261 basehttp 91866 127264593282752 "GET /outgoing_international/ HTTP/1.1" 200 26478
INFO 2024-10-01 18:27:08,475 basehttp 91866 127264593282752 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 40935
INFO 2024-10-01 18:27:11,385 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:26:53,0570216056,1030,,,2024/10/01 15:27:10,Failed,,,Ext.1030,0570216056,0570216056,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570216056,
INFO 2024-10-01 18:27:11,386 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:26:53', '0570216056', '1030', '', '', '2024/10/01 15:27:10', 'Failed', '', '', 'Ext.1030', '0570216056', '0570216056', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570216056', '']
INFO 2024-10-01 18:27:11,407 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:11,407 models 570 138242068317888 Initial state: caller=1030, callee=0570216056, duration=None, total_cost=0.0
INFO 2024-10-01 18:27:11,408 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:11,408 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570216056
INFO 2024-10-01 18:27:11,408 utils 570 138242068317888 Original number: 0570216056
INFO 2024-10-01 18:27:11,409 utils 570 138242068317888 Cleaned number: 0570216056
INFO 2024-10-01 18:27:11,409 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:11,409 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:11,409 models 570 138242068317888 Categorizing call for number: 0570216056
INFO 2024-10-01 18:27:11,417 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:11,420 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:11,420 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:11,421 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:11,421 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:11,421 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:11,422 models 570 138242068317888 Match found: 0570216056 matches 05
INFO 2024-10-01 18:27:11,422 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:11,422 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:11,422 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:11,423 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:11,423 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:11,423 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:11,426 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:11,426 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:11,431 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:11,433 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:11,438 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:27:11.435408+00:00, Should reset: False
INFO 2024-10-01 18:27:11,438 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:11,438 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:11,439 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:11,439 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:11,441 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:11,441 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:11,441 models 570 138242068317888 Initial state: caller=1030, callee=0570216056, duration=None, total_cost=0.00
INFO 2024-10-01 18:27:11,446 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:27:11,446 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570216056
INFO 2024-10-01 18:27:11,446 utils 570 138242068317888 Original number: 0570216056
INFO 2024-10-01 18:27:11,447 utils 570 138242068317888 Cleaned number: 0570216056
INFO 2024-10-01 18:27:11,447 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:11,447 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:11,447 models 570 138242068317888 Categorizing call for number: 0570216056
INFO 2024-10-01 18:27:11,449 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:11,451 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:11,452 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:11,452 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:11,452 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:11,453 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:11,453 models 570 138242068317888 Match found: 0570216056 matches 05
INFO 2024-10-01 18:27:11,453 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:11,453 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:11,454 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:11,454 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:11,454 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:11,454 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:11,456 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:11,457 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:11,459 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:11,461 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:11,465 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:27:11.462615+00:00, Should reset: False
INFO 2024-10-01 18:27:11,465 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:11,465 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:11,465 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:11,466 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:11,467 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:11,467 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570216056 at 2024-10-01 15:26:53+03:00
INFO 2024-10-01 18:27:11,862 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58211) on port 8000
INFO 2024-10-01 18:27:18,907 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:10,8000,10001,00:00:07,2024/10/01 15:27:10,2024/10/01 15:27:18,TerminatedBySrc,,,567642345,Ext.8000,8000,,,Line,Ivr,,567642345:Main Number,WelcomeMessage,
INFO 2024-10-01 18:27:18,908 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:10', '8000', '10001', '00:00:07', '2024/10/01 15:27:10', '2024/10/01 15:27:18', 'TerminatedBySrc', '', '', '567642345', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '567642345:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:27:18,926 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:18,926 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.0
INFO 2024-10-01 18:27:18,929 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:18,929 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:27:18,929 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:27:18,929 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:27:18,932 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:27:18,932 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:18,932 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:27:18,938 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:18,943 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:18,943 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:27:18,943 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:27:18,944 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:18,947 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:18,953 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:18,953 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:27:18,958 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:27:18,962 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:18,963 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:18,963 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=7, total_cost=0.00
INFO 2024-10-01 18:27:18,967 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:27:18,970 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:27:18,970 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:27:18,970 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:27:18,970 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:27:18,970 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:18,971 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:27:18,975 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:18,979 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:18,979 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:27:18,980 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:27:18,983 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:18,983 models 570 138242068317888 Calculating total cost for call: duration=7 seconds
INFO 2024-10-01 18:27:18,983 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:27:18,983 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:27:18,983 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:27:18,984 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:18,984 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:18,989 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:18,989 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:27:18,993 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:27:18,997 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:18,997 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:27:10+03:00
INFO 2024-10-01 18:27:19,416 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58213) on port 8000
INFO 2024-10-01 18:27:19,470 basehttp 91866 127264593282752 "GET /outgoing_international/?time_period=1m&custom_date=&search=&per_page=100 HTTP/1.1" 200 76078
INFO 2024-10-01 18:27:24,739 basehttp 91866 127264593282752 "GET /outgoing_international/?time_period=6m&custom_date=&search=&per_page=100 HTTP/1.1" 200 76351
INFO 2024-10-01 18:27:25,891 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:25:49,0555423299,7790,00:00:03,2024/10/01 15:27:21,2024/10/01 15:27:25,TerminatedByDst,,,Ext.7790,0555423299,10001,,,Extension,Line,,Maram Alharbi,0555423299,
INFO 2024-10-01 18:27:25,891 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:25:49', '0555423299', '7790', '00:00:03', '2024/10/01 15:27:21', '2024/10/01 15:27:25', 'TerminatedByDst', '', '', 'Ext.7790', '0555423299', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0555423299', '']
INFO 2024-10-01 18:27:25,910 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:25,910 models 570 138242068317888 Initial state: caller=7790, callee=0555423299, duration=3, total_cost=0.0
INFO 2024-10-01 18:27:25,910 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:25,910 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0555423299
INFO 2024-10-01 18:27:25,911 utils 570 138242068317888 Original number: 0555423299
INFO 2024-10-01 18:27:25,911 utils 570 138242068317888 Cleaned number: 0555423299
INFO 2024-10-01 18:27:25,911 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:25,911 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:25,912 models 570 138242068317888 Categorizing call for number: 0555423299
INFO 2024-10-01 18:27:25,914 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:25,916 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Match found: 0555423299 matches 05
INFO 2024-10-01 18:27:25,917 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:25,918 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:25,918 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:27:25,918 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:27:25,919 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:27:25,919 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:27:25,919 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:27:25,920 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:25,922 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:25,922 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:25,926 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:25,928 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:25,940 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:27:25.933535+00:00, Should reset: False
INFO 2024-10-01 18:27:25,941 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:25,941 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:25,941 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:27:25,941 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:27:25,941 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:27:25,942 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:27:25,944 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:25,944 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:25,944 models 570 138242068317888 Initial state: caller=7790, callee=0555423299, duration=3, total_cost=0.40
INFO 2024-10-01 18:27:25,947 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:27:25,947 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0555423299
INFO 2024-10-01 18:27:25,948 utils 570 138242068317888 Original number: 0555423299
INFO 2024-10-01 18:27:25,948 utils 570 138242068317888 Cleaned number: 0555423299
INFO 2024-10-01 18:27:25,948 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:25,948 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:25,948 models 570 138242068317888 Categorizing call for number: 0555423299
INFO 2024-10-01 18:27:25,950 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:25,952 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:25,953 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:25,953 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:25,953 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:25,954 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:25,954 models 570 138242068317888 Match found: 0555423299 matches 05
INFO 2024-10-01 18:27:25,954 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:25,954 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:25,955 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:27:25,955 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:27:25,955 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:27:25,956 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:27:25,956 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:27:25,956 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:25,958 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:25,959 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:27:25,961 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:25,963 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:25,966 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:27:25.964657+00:00, Should reset: False
INFO 2024-10-01 18:27:25,967 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:25,967 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:25,967 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:25,967 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:25,969 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:25,969 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0555423299 at 2024-10-01 15:25:49+03:00
INFO 2024-10-01 18:27:26,382 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58215) on port 8000
INFO 2024-10-01 18:27:30,753 basehttp 91866 127264593282752 "GET /outgoing_international/pdf/?time_period=6m&custom_date= HTTP/1.1" 200 57478
INFO 2024-10-01 18:27:31,593 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:30,0505860286,7790,,,2024/10/01 15:27:30,Failed,,,Ext.7790,0505860286,0505860286,,,Extension,LineSet,,Maram Alharbi,0505860286,
INFO 2024-10-01 18:27:31,593 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:30', '0505860286', '7790', '', '', '2024/10/01 15:27:30', 'Failed', '', '', 'Ext.7790', '0505860286', '0505860286', '', '', 'Extension', 'LineSet', '', 'Maram Alharbi', '0505860286', '']
INFO 2024-10-01 18:27:31,625 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:31,625 models 570 138242068317888 Initial state: caller=7790, callee=0505860286, duration=None, total_cost=0.0
INFO 2024-10-01 18:27:31,625 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:31,626 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505860286
INFO 2024-10-01 18:27:31,626 utils 570 138242068317888 Original number: 0505860286
INFO 2024-10-01 18:27:31,626 utils 570 138242068317888 Cleaned number: 0505860286
INFO 2024-10-01 18:27:31,626 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:31,626 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:31,626 models 570 138242068317888 Categorizing call for number: 0505860286
INFO 2024-10-01 18:27:31,633 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:31,637 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:31,637 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:31,638 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:31,639 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:31,639 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:31,640 models 570 138242068317888 Match found: 0505860286 matches 05
INFO 2024-10-01 18:27:31,641 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:31,641 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:31,641 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:31,642 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:31,642 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:31,642 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:31,646 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:31,647 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:31,653 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:31,656 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:31,662 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:27:31.659241+00:00, Should reset: False
INFO 2024-10-01 18:27:31,663 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:31,664 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:31,664 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:31,664 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:31,667 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:31,668 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:31,668 models 570 138242068317888 Initial state: caller=7790, callee=0505860286, duration=None, total_cost=0.00
INFO 2024-10-01 18:27:31,673 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:27:31,673 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505860286
INFO 2024-10-01 18:27:31,674 utils 570 138242068317888 Original number: 0505860286
INFO 2024-10-01 18:27:31,674 utils 570 138242068317888 Cleaned number: 0505860286
INFO 2024-10-01 18:27:31,674 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:31,674 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:31,674 models 570 138242068317888 Categorizing call for number: 0505860286
INFO 2024-10-01 18:27:31,677 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:31,685 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:31,686 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:31,687 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:31,687 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:31,690 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:31,691 models 570 138242068317888 Match found: 0505860286 matches 05
INFO 2024-10-01 18:27:31,692 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:31,693 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:31,693 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:31,694 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:31,694 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:31,694 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:31,699 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:31,699 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:31,704 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:31,707 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:31,711 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:27:31.709010+00:00, Should reset: False
INFO 2024-10-01 18:27:31,711 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:27:31,712 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:31,712 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:31,712 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:31,714 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:31,714 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0505860286 at 2024-10-01 15:27:30+03:00
INFO 2024-10-01 18:27:32,129 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58219) on port 8000
INFO 2024-10-01 18:27:38,484 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:30,8811,8800,,,2024/10/01 15:27:37,Failed_Cancelled,,,Ext.8800,Ext.8811,8811,,,Extension,Extension,,Ali Almutairi,Saad Alqahtani,
INFO 2024-10-01 18:27:38,484 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:30', '8811', '8800', '', '', '2024/10/01 15:27:37', 'Failed_Cancelled', '', '', 'Ext.8800', 'Ext.8811', '8811', '', '', 'Extension', 'Extension', '', 'Ali Almutairi', 'Saad Alqahtani', '']
INFO 2024-10-01 18:27:38,501 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:38,501 models 570 138242068317888 Initial state: caller=8800, callee=8811, duration=None, total_cost=0.0
INFO 2024-10-01 18:27:38,502 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:38,502 models 570 138242068317888 Before determining country, Caller: 8800, Callee: 8811
INFO 2024-10-01 18:27:38,502 utils 570 138242068317888 Original number: 8811
INFO 2024-10-01 18:27:38,503 utils 570 138242068317888 Cleaned number: 8811
INFO 2024-10-01 18:27:38,503 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:27:38,503 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:38,503 models 570 138242068317888 Categorizing call for number: 8811
INFO 2024-10-01 18:27:38,508 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:38,511 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:38,511 models 570 138242068317888 Match found: 8811 matches ^\d{4}$
INFO 2024-10-01 18:27:38,511 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:27:38,512 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:38,512 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:38,512 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:38,513 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:38,513 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:38,516 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:38,516 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:38,522 models 570 138242068317888 Found extension: 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 18:27:38,524 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:27:38,530 models 570 138242068317888 Quota for 8800 - Ali Almutairi (Smasco): Last reset: 2024-09-15 06:35:35.284916+00:00, Next reset: 2024-10-15 06:35:35.284916+00:00, Current time: 2024-10-01 15:27:38.527043+00:00, Should reset: False
INFO 2024-10-01 18:27:38,530 models 570 138242068317888 Quota reset not needed for 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 18:27:38,531 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:27:38,532 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:38,532 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:38,534 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:38,535 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:38,535 models 570 138242068317888 Initial state: caller=8800, callee=8811, duration=None, total_cost=0.00
INFO 2024-10-01 18:27:38,539 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:27:38,539 models 570 138242068317888 Before determining country, Caller: 8800, Callee: 8811
INFO 2024-10-01 18:27:38,539 utils 570 138242068317888 Original number: 8811
INFO 2024-10-01 18:27:38,540 utils 570 138242068317888 Cleaned number: 8811
INFO 2024-10-01 18:27:38,540 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:27:38,540 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:38,540 models 570 138242068317888 Categorizing call for number: 8811
INFO 2024-10-01 18:27:38,543 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:38,546 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:38,546 models 570 138242068317888 Match found: 8811 matches ^\d{4}$
INFO 2024-10-01 18:27:38,547 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:27:38,547 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:38,547 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:38,548 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:38,548 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:38,548 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:38,552 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:38,552 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:38,556 models 570 138242068317888 Found extension: 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 18:27:38,558 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:27:38,564 models 570 138242068317888 Quota for 8800 - Ali Almutairi (Smasco): Last reset: 2024-09-15 06:35:35.284916+00:00, Next reset: 2024-10-15 06:35:35.284916+00:00, Current time: 2024-10-01 15:27:38.560384+00:00, Should reset: False
INFO 2024-10-01 18:27:38,565 models 570 138242068317888 Quota reset not needed for 8800 - Ali Almutairi (Smasco)
INFO 2024-10-01 18:27:38,565 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:27:38,565 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:38,566 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:38,568 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:38,568 socket_server 570 138242068317888 Saved call record for company Smasco: 8800 -> 8811 at 2024-10-01 15:27:30+03:00
INFO 2024-10-01 18:27:38,969 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58230) on port 8000
INFO 2024-10-01 18:27:46,214 basehttp 91866 127264593282752 "GET /top-extensions/ HTTP/1.1" 200 32418
INFO 2024-10-01 18:27:49,680 basehttp 91866 127264593282752 "GET /top-extensions/?time_period=7d&custom_date=&limit=20 HTTP/1.1" 200 32553
INFO 2024-10-01 18:27:50,874 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:15,0570915165,1030,,,2024/10/01 15:27:50,Failed,,,Ext.1030,0570915165,0570915165,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570915165,
INFO 2024-10-01 18:27:50,875 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:15', '0570915165', '1030', '', '', '2024/10/01 15:27:50', 'Failed', '', '', 'Ext.1030', '0570915165', '0570915165', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570915165', '']
INFO 2024-10-01 18:27:50,894 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:50,894 models 570 138242068317888 Initial state: caller=1030, callee=0570915165, duration=None, total_cost=0.0
INFO 2024-10-01 18:27:50,894 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:27:50,895 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570915165
INFO 2024-10-01 18:27:50,895 utils 570 138242068317888 Original number: 0570915165
INFO 2024-10-01 18:27:50,895 utils 570 138242068317888 Cleaned number: 0570915165
INFO 2024-10-01 18:27:50,896 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:50,896 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:50,896 models 570 138242068317888 Categorizing call for number: 0570915165
INFO 2024-10-01 18:27:50,899 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:50,901 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:50,902 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:50,902 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:50,902 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:50,902 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:50,902 models 570 138242068317888 Match found: 0570915165 matches 05
INFO 2024-10-01 18:27:50,903 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:50,903 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:50,903 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:50,903 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:50,903 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:50,904 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:50,906 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:50,906 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:50,910 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:50,912 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:50,916 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:27:50.914032+00:00, Should reset: False
INFO 2024-10-01 18:27:50,916 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:50,916 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:50,917 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:50,917 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:50,919 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:50,920 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:27:50,920 models 570 138242068317888 Initial state: caller=1030, callee=0570915165, duration=None, total_cost=0.00
INFO 2024-10-01 18:27:50,923 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:27:50,924 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570915165
INFO 2024-10-01 18:27:50,924 utils 570 138242068317888 Original number: 0570915165
INFO 2024-10-01 18:27:50,924 utils 570 138242068317888 Cleaned number: 0570915165
INFO 2024-10-01 18:27:50,924 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:27:50,925 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:27:50,925 models 570 138242068317888 Categorizing call for number: 0570915165
INFO 2024-10-01 18:27:50,927 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:27:50,929 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:27:50,929 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Match found: 0570915165 matches 05
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:27:50,930 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:27:50,931 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:27:50,931 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:27:50,931 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:27:50,931 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:27:50,934 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:27:50,934 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:27:50,937 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:50,939 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:50,943 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:27:50.941049+00:00, Should reset: False
INFO 2024-10-01 18:27:50,943 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:27:50,943 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:27:50,944 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:27:50,944 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:27:50,945 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:27:50,946 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570915165 at 2024-10-01 15:27:15+03:00
INFO 2024-10-01 18:27:51,349 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58231) on port 8000
INFO 2024-10-01 18:27:52,064 basehttp 91866 127264593282752 "GET /top-extensions/pdf/?time_period=7d&custom_date=&limit=20 HTTP/1.1" 200 4120
INFO 2024-10-01 18:28:00,984 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:53,0570126275,1030,,,2024/10/01 15:28:00,Failed,,,Ext.1030,0570126275,0570126275,,,Extension,LineSet,,Saiyed Jafar Ahmad,0570126275,
INFO 2024-10-01 18:28:00,985 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:53', '0570126275', '1030', '', '', '2024/10/01 15:28:00', 'Failed', '', '', 'Ext.1030', '0570126275', '0570126275', '', '', 'Extension', 'LineSet', '', 'Saiyed Jafar Ahmad', '0570126275', '']
INFO 2024-10-01 18:28:01,007 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:01,007 models 570 138242068317888 Initial state: caller=1030, callee=0570126275, duration=None, total_cost=0.0
INFO 2024-10-01 18:28:01,008 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:28:01,008 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570126275
INFO 2024-10-01 18:28:01,009 utils 570 138242068317888 Original number: 0570126275
INFO 2024-10-01 18:28:01,009 utils 570 138242068317888 Cleaned number: 0570126275
INFO 2024-10-01 18:28:01,009 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:01,009 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:01,009 models 570 138242068317888 Categorizing call for number: 0570126275
INFO 2024-10-01 18:28:01,013 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:01,015 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:01,016 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:01,017 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:01,017 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:01,017 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:01,017 models 570 138242068317888 Match found: 0570126275 matches 05
INFO 2024-10-01 18:28:01,017 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:01,018 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:01,018 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:28:01,018 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:28:01,018 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:01,018 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:01,029 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:01,029 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:28:01,034 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:28:01,036 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:01,041 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:28:01.039364+00:00, Should reset: False
INFO 2024-10-01 18:28:01,042 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:28:01,042 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:01,042 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:28:01,042 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:28:01,044 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:01,045 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:01,045 models 570 138242068317888 Initial state: caller=1030, callee=0570126275, duration=None, total_cost=0.00
INFO 2024-10-01 18:28:01,048 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:28:01,048 models 570 138242068317888 Before determining country, Caller: 1030, Callee: 0570126275
INFO 2024-10-01 18:28:01,049 utils 570 138242068317888 Original number: 0570126275
INFO 2024-10-01 18:28:01,049 utils 570 138242068317888 Cleaned number: 0570126275
INFO 2024-10-01 18:28:01,049 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:01,050 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:01,050 models 570 138242068317888 Categorizing call for number: 0570126275
INFO 2024-10-01 18:28:01,053 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:01,055 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:01,055 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:01,055 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:01,056 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:01,056 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:01,056 models 570 138242068317888 Match found: 0570126275 matches 05
INFO 2024-10-01 18:28:01,056 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:01,057 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:01,057 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:28:01,057 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:28:01,058 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:01,058 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:01,060 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:01,061 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:28:01,065 models 570 138242068317888 Found extension: 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:28:01,068 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:01,073 models 570 138242068317888 Quota for 1030 - Saiyed Jafar Ahmad (Smasco): Last reset: 2024-09-15 06:34:09.057697+00:00, Next reset: 2024-10-15 06:34:09.057697+00:00, Current time: 2024-10-01 15:28:01.070935+00:00, Should reset: False
INFO 2024-10-01 18:28:01,073 models 570 138242068317888 Quota reset not needed for 1030 - Saiyed Jafar Ahmad (Smasco)
INFO 2024-10-01 18:28:01,074 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:01,074 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:28:01,074 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:28:01,076 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:01,076 socket_server 570 138242068317888 Saved call record for company Smasco: 1030 -> 0570126275 at 2024-10-01 15:27:53+03:00
INFO 2024-10-01 18:28:01,484 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58233) on port 8000
INFO 2024-10-01 18:28:36,234 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:47,0532402311,7738,00:00:02,2024/10/01 15:28:33,2024/10/01 15:28:35,TerminatedBySrc,,,Ext.7738,0532402311,10001,,,Extension,Line,,Hanaa Alshalwi,0532402311,
INFO 2024-10-01 18:28:36,235 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:47', '0532402311', '7738', '00:00:02', '2024/10/01 15:28:33', '2024/10/01 15:28:35', 'TerminatedBySrc', '', '', 'Ext.7738', '0532402311', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0532402311', '']
INFO 2024-10-01 18:28:36,255 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:36,256 models 570 138242068317888 Initial state: caller=7738, callee=0532402311, duration=2, total_cost=0.0
INFO 2024-10-01 18:28:36,256 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:28:36,256 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0532402311
INFO 2024-10-01 18:28:36,257 utils 570 138242068317888 Original number: 0532402311
INFO 2024-10-01 18:28:36,257 utils 570 138242068317888 Cleaned number: 0532402311
INFO 2024-10-01 18:28:36,257 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:36,257 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:36,258 models 570 138242068317888 Categorizing call for number: 0532402311
INFO 2024-10-01 18:28:36,262 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:36,267 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:36,267 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:36,268 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:36,268 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:36,268 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Match found: 0532402311 matches 05
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:28:36,269 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:28:36,270 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:28:36,270 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:28:36,270 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:36,272 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:36,272 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:28:36,276 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:28:36,278 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:36,281 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:28:36.279799+00:00, Should reset: False
INFO 2024-10-01 18:28:36,282 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:28:36,282 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:36,282 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:28:36,283 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:28:36,283 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:28:36,283 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 18:28:36,285 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:36,285 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:36,286 models 570 138242068317888 Initial state: caller=7738, callee=0532402311, duration=2, total_cost=0.40
INFO 2024-10-01 18:28:36,288 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:28:36,289 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0532402311
INFO 2024-10-01 18:28:36,289 utils 570 138242068317888 Original number: 0532402311
INFO 2024-10-01 18:28:36,289 utils 570 138242068317888 Cleaned number: 0532402311
INFO 2024-10-01 18:28:36,289 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:36,289 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:36,290 models 570 138242068317888 Categorizing call for number: 0532402311
INFO 2024-10-01 18:28:36,291 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:36,293 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:36,293 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:36,293 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:36,293 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:36,294 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:36,294 models 570 138242068317888 Match found: 0532402311 matches 05
INFO 2024-10-01 18:28:36,294 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:36,294 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 Calculating total cost for call: duration=2 seconds
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:28:36,295 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:36,297 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:36,298 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:28:36,300 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:28:36,302 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:36,305 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:28:36.303307+00:00, Should reset: False
INFO 2024-10-01 18:28:36,305 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:28:36,305 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:28:36,305 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:28:36,306 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:28:36,307 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:36,307 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0532402311 at 2024-10-01 15:27:47+03:00
INFO 2024-10-01 18:28:36,706 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58237) on port 8000
INFO 2024-10-01 18:28:46,256 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:25,8000,10001,00:01:19,2024/10/01 15:27:25,2024/10/01 15:28:45,Failed_Cancelled,FailedBXferOfSrc,,545974615,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,545974615:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:28:46,256 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:25', '8000', '10001', '00:01:19', '2024/10/01 15:27:25', '2024/10/01 15:28:45', 'Failed_Cancelled', 'FailedBXferOfSrc', '', '545974615', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '545974615:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:28:46,276 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:46,276 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=79, total_cost=0.0
INFO 2024-10-01 18:28:46,276 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:28:46,277 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:28:46,278 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:28:46,278 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:28:46,278 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:28:46,278 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:46,278 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:28:46,282 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:46,284 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:46,285 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:28:46,285 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:28:46,286 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:46,286 models 570 138242068317888 Calculating total cost for call: duration=79 seconds
INFO 2024-10-01 18:28:46,286 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:28:46,286 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:28:46,286 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:28:46,288 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:46,288 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:46,291 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:46,291 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:28:46,294 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:28:46,297 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:46,298 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:46,298 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=79, total_cost=0.00
INFO 2024-10-01 18:28:46,303 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:28:46,306 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:28:46,306 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:28:46,306 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:28:46,306 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:28:46,306 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:46,306 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:28:46,312 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:46,318 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:46,318 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:28:46,318 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:28:46,318 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:46,318 models 570 138242068317888 Calculating total cost for call: duration=79 seconds
INFO 2024-10-01 18:28:46,319 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:28:46,319 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:28:46,319 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:28:46,319 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:46,319 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:46,324 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:46,325 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:28:46,327 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:28:46,328 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:46,329 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:27:25+03:00
INFO 2024-10-01 18:28:46,734 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58239) on port 8000
INFO 2024-10-01 18:28:51,635 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:49,0550144701,7821,,,2024/10/01 15:28:50,Failed,,,Ext.7821,0550144701,0550144701,,,Extension,LineSet,,Talal Alzahrani,0550144701,
INFO 2024-10-01 18:28:51,635 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:49', '0550144701', '7821', '', '', '2024/10/01 15:28:50', 'Failed', '', '', 'Ext.7821', '0550144701', '0550144701', '', '', 'Extension', 'LineSet', '', 'Talal Alzahrani', '0550144701', '']
INFO 2024-10-01 18:28:51,662 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:51,662 models 570 138242068317888 Initial state: caller=7821, callee=0550144701, duration=None, total_cost=0.0
INFO 2024-10-01 18:28:51,663 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:28:51,663 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0550144701
INFO 2024-10-01 18:28:51,663 utils 570 138242068317888 Original number: 0550144701
INFO 2024-10-01 18:28:51,663 utils 570 138242068317888 Cleaned number: 0550144701
INFO 2024-10-01 18:28:51,663 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:51,664 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:51,664 models 570 138242068317888 Categorizing call for number: 0550144701
INFO 2024-10-01 18:28:51,666 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:51,669 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:51,669 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:51,669 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Match found: 0550144701 matches 05
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:51,670 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:28:51,671 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:28:51,671 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:51,671 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:51,673 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:51,674 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:28:51,682 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:28:51,685 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:28:51,689 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:28:51.687088+00:00, Should reset: False
INFO 2024-10-01 18:28:51,689 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:28:51,689 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:28:51,690 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:28:51,690 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:28:51,692 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:51,692 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:28:51,693 models 570 138242068317888 Initial state: caller=7821, callee=0550144701, duration=None, total_cost=0.00
INFO 2024-10-01 18:28:51,695 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:28:51,696 models 570 138242068317888 Before determining country, Caller: 7821, Callee: 0550144701
INFO 2024-10-01 18:28:51,696 utils 570 138242068317888 Original number: 0550144701
INFO 2024-10-01 18:28:51,696 utils 570 138242068317888 Cleaned number: 0550144701
INFO 2024-10-01 18:28:51,696 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:28:51,696 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:28:51,697 models 570 138242068317888 Categorizing call for number: 0550144701
INFO 2024-10-01 18:28:51,698 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:28:51,700 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:28:51,700 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:28:51,700 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:28:51,700 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:28:51,701 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:28:51,701 models 570 138242068317888 Match found: 0550144701 matches 05
INFO 2024-10-01 18:28:51,701 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:28:51,701 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:28:51,701 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:28:51,701 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:28:51,702 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:28:51,702 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:28:51,704 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:28:51,704 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:28:51,707 models 570 138242068317888 Found extension: 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:28:51,708 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:28:51,711 models 570 138242068317888 Quota for 7821 - Talal Alzahrani (Smasco): Last reset: 2024-09-15 06:35:25.382081+00:00, Next reset: 2024-10-15 06:35:25.382081+00:00, Current time: 2024-10-01 15:28:51.709805+00:00, Should reset: False
INFO 2024-10-01 18:28:51,712 models 570 138242068317888 Quota reset not needed for 7821 - Talal Alzahrani (Smasco)
INFO 2024-10-01 18:28:51,712 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 16.40
INFO 2024-10-01 18:28:51,712 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:28:51,712 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:28:51,714 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:28:51,714 socket_server 570 138242068317888 Saved call record for company Smasco: 7821 -> 0550144701 at 2024-10-01 15:27:49+03:00
INFO 2024-10-01 18:28:52,108 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58241) on port 8000
INFO 2024-10-01 18:29:00,528 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:19,8000,10001,00:01:40,2024/10/01 15:27:19,2024/10/01 15:28:59,Failed_Cancelled,ReplacedDst,,0550544161,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0550544161:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:29:00,529 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:19', '8000', '10001', '00:01:40', '2024/10/01 15:27:19', '2024/10/01 15:28:59', 'Failed_Cancelled', 'ReplacedDst', '', '0550544161', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0550544161:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:29:00,550 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:00,550 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=100, total_cost=0.0
INFO 2024-10-01 18:29:00,551 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:00,552 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:29:00,552 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:29:00,552 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:29:00,552 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:29:00,553 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:00,554 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:29:00,557 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:00,560 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:00,561 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:29:00,562 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:29:00,562 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:00,563 models 570 138242068317888 Calculating total cost for call: duration=100 seconds
INFO 2024-10-01 18:29:00,563 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:00,563 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:29:00,563 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:29:00,563 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:00,564 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:00,567 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:00,567 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:29:00,571 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:29:00,575 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:00,576 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:00,576 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=100, total_cost=0.00
INFO 2024-10-01 18:29:00,579 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:29:00,580 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:29:00,581 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:29:00,581 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:29:00,582 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:29:00,583 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:00,583 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:29:00,586 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:00,592 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:00,592 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:29:00,592 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:29:00,592 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 Calculating total cost for call: duration=100 seconds
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:00,593 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:00,599 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:00,600 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:29:00,602 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:29:00,607 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:00,608 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:27:19+03:00
INFO 2024-10-01 18:29:01,012 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58242) on port 8000
INFO 2024-10-01 18:29:09,527 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:42,0505860286,7790,00:00:17,2024/10/01 15:28:51,2024/10/01 15:29:08,TerminatedByDst,,,Ext.7790,0505860286,10001,,,Extension,Line,,Maram Alharbi,0505860286,
INFO 2024-10-01 18:29:09,528 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:42', '0505860286', '7790', '00:00:17', '2024/10/01 15:28:51', '2024/10/01 15:29:08', 'TerminatedByDst', '', '', 'Ext.7790', '0505860286', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0505860286', '']
INFO 2024-10-01 18:29:09,547 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:09,548 models 570 138242068317888 Initial state: caller=7790, callee=0505860286, duration=17, total_cost=0.0
INFO 2024-10-01 18:29:09,548 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:09,549 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505860286
INFO 2024-10-01 18:29:09,549 utils 570 138242068317888 Original number: 0505860286
INFO 2024-10-01 18:29:09,549 utils 570 138242068317888 Cleaned number: 0505860286
INFO 2024-10-01 18:29:09,549 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:09,549 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:09,549 models 570 138242068317888 Categorizing call for number: 0505860286
INFO 2024-10-01 18:29:09,553 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:09,556 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:09,557 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:09,557 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:09,557 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Match found: 0505860286 matches 05
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Calculating total cost for call: duration=17 seconds
INFO 2024-10-01 18:29:09,558 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:29:09,560 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:09,560 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:29:09,560 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:29:09,561 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:09,564 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:09,564 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:09,569 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:29:09,572 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:09,577 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:29:09.574525+00:00, Should reset: False
INFO 2024-10-01 18:29:09,577 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:29:09,578 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:09,578 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:29:09,579 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:29:09,579 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:29:09,579 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:29:09,581 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:09,582 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:09,582 models 570 138242068317888 Initial state: caller=7790, callee=0505860286, duration=17, total_cost=0.40
INFO 2024-10-01 18:29:09,585 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:29:09,586 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0505860286
INFO 2024-10-01 18:29:09,587 utils 570 138242068317888 Original number: 0505860286
INFO 2024-10-01 18:29:09,587 utils 570 138242068317888 Cleaned number: 0505860286
INFO 2024-10-01 18:29:09,588 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:09,588 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:09,589 models 570 138242068317888 Categorizing call for number: 0505860286
INFO 2024-10-01 18:29:09,591 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:09,593 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:09,594 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:09,594 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:09,595 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:09,595 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:09,595 models 570 138242068317888 Match found: 0505860286 matches 05
INFO 2024-10-01 18:29:09,595 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:09,595 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:09,596 models 570 138242068317888 Calculating total cost for call: duration=17 seconds
INFO 2024-10-01 18:29:09,597 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:29:09,597 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:09,598 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:29:09,598 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:29:09,598 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:09,601 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:09,601 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:29:09,605 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:29:09,607 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:09,612 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:29:09.609781+00:00, Should reset: False
INFO 2024-10-01 18:29:09,613 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:29:09,613 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:09,613 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:09,614 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:09,616 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:09,616 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0505860286 at 2024-10-01 15:27:42+03:00
INFO 2024-10-01 18:29:10,030 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58244) on port 8000
INFO 2024-10-01 18:29:20,122 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:16,0593392694,7213,,,2024/10/01 15:29:19,Failed,,,Ext.7213,0593392694,0593392694,,,Extension,LineSet,,Fayazz Bora,0593392694,
INFO 2024-10-01 18:29:20,123 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:16', '0593392694', '7213', '', '', '2024/10/01 15:29:19', 'Failed', '', '', 'Ext.7213', '0593392694', '0593392694', '', '', 'Extension', 'LineSet', '', 'Fayazz Bora', '0593392694', '']
INFO 2024-10-01 18:29:20,144 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:20,145 models 570 138242068317888 Initial state: caller=7213, callee=0593392694, duration=None, total_cost=0.0
INFO 2024-10-01 18:29:20,145 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:20,146 models 570 138242068317888 Before determining country, Caller: 7213, Callee: 0593392694
INFO 2024-10-01 18:29:20,146 utils 570 138242068317888 Original number: 0593392694
INFO 2024-10-01 18:29:20,146 utils 570 138242068317888 Cleaned number: 0593392694
INFO 2024-10-01 18:29:20,147 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:20,148 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:20,148 models 570 138242068317888 Categorizing call for number: 0593392694
INFO 2024-10-01 18:29:20,151 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:20,154 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:20,155 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:20,155 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:20,156 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:20,156 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:20,156 models 570 138242068317888 Match found: 0593392694 matches 05
INFO 2024-10-01 18:29:20,157 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:20,157 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:20,157 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:29:20,158 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:29:20,158 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:20,158 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:20,161 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:20,162 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:20,167 models 570 138242068317888 Found extension: 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 18:29:20,169 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 18:29:20,174 models 570 138242068317888 Quota for 7213 - Fayazz Bora (Smasco): Last reset: 2024-09-15 06:34:55.183518+00:00, Next reset: 2024-10-15 06:34:55.183518+00:00, Current time: 2024-10-01 15:29:20.172235+00:00, Should reset: False
INFO 2024-10-01 18:29:20,175 models 570 138242068317888 Quota reset not needed for 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 18:29:20,175 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 18:29:20,176 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:20,176 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:20,178 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:20,178 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:20,179 models 570 138242068317888 Initial state: caller=7213, callee=0593392694, duration=None, total_cost=0.00
INFO 2024-10-01 18:29:20,182 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:29:20,182 models 570 138242068317888 Before determining country, Caller: 7213, Callee: 0593392694
INFO 2024-10-01 18:29:20,182 utils 570 138242068317888 Original number: 0593392694
INFO 2024-10-01 18:29:20,182 utils 570 138242068317888 Cleaned number: 0593392694
INFO 2024-10-01 18:29:20,183 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:20,183 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:20,183 models 570 138242068317888 Categorizing call for number: 0593392694
INFO 2024-10-01 18:29:20,186 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:20,188 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:20,188 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:20,189 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:20,189 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:20,190 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:20,190 models 570 138242068317888 Match found: 0593392694 matches 05
INFO 2024-10-01 18:29:20,190 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:20,190 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:20,190 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:29:20,190 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:29:20,191 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:20,192 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:20,194 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:20,195 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:20,198 models 570 138242068317888 Found extension: 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 18:29:20,201 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 18:29:20,205 models 570 138242068317888 Quota for 7213 - Fayazz Bora (Smasco): Last reset: 2024-09-15 06:34:55.183518+00:00, Next reset: 2024-10-15 06:34:55.183518+00:00, Current time: 2024-10-01 15:29:20.203463+00:00, Should reset: False
INFO 2024-10-01 18:29:20,206 models 570 138242068317888 Quota reset not needed for 7213 - Fayazz Bora (Smasco)
INFO 2024-10-01 18:29:20,206 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 60.00
INFO 2024-10-01 18:29:20,207 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:20,207 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:20,209 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:20,209 socket_server 570 138242068317888 Saved call record for company Smasco: 7213 -> 0593392694 at 2024-10-01 15:29:16+03:00
INFO 2024-10-01 18:29:20,605 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58249) on port 8000
INFO 2024-10-01 18:29:33,590 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:23:52,0502629904,8426,00:05:26,2024/10/01 15:24:05,2024/10/01 15:29:32,TerminatedByDst,,,Ext.8426,0502629904,10001,,,Extension,Line,,Rehan Khan Mohammed,0502629904,
INFO 2024-10-01 18:29:33,591 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:23:52', '0502629904', '8426', '00:05:26', '2024/10/01 15:24:05', '2024/10/01 15:29:32', 'TerminatedByDst', '', '', 'Ext.8426', '0502629904', '10001', '', '', 'Extension', 'Line', '', 'Rehan Khan Mohammed', '0502629904', '']
INFO 2024-10-01 18:29:33,613 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:33,614 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=326, total_cost=0.0
INFO 2024-10-01 18:29:33,614 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:33,615 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:29:33,615 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:29:33,615 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:29:33,615 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:33,615 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:33,616 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:29:33,622 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:33,627 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:33,628 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:33,629 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:33,629 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:33,629 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:33,629 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:29:33,630 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:33,630 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:33,630 models 570 138242068317888 Calculating total cost for call: duration=326 seconds
INFO 2024-10-01 18:29:33,630 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:29:33,631 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:33,631 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:29:33,631 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 18:29:33,631 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:33,640 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:33,640 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:33,644 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:29:33,646 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:33,650 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:29:33.648144+00:00, Should reset: False
INFO 2024-10-01 18:29:33,650 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:29:33,650 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:33,650 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 18:29:33,651 models 570 138242068317888 Attempting to deduct 2.40 from balance 0.00
WARNING 2024-10-01 18:29:33,651 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.40
WARNING 2024-10-01 18:29:33,651 models 570 138242068317888 Warning: Quota exceeded for extension 8426
INFO 2024-10-01 18:29:33,653 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:33,653 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:33,654 models 570 138242068317888 Initial state: caller=8426, callee=0502629904, duration=326, total_cost=2.40
INFO 2024-10-01 18:29:33,656 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 18:29:33,656 models 570 138242068317888 Before determining country, Caller: 8426, Callee: 0502629904
INFO 2024-10-01 18:29:33,656 utils 570 138242068317888 Original number: 0502629904
INFO 2024-10-01 18:29:33,657 utils 570 138242068317888 Cleaned number: 0502629904
INFO 2024-10-01 18:29:33,657 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:33,657 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:33,657 models 570 138242068317888 Categorizing call for number: 0502629904
INFO 2024-10-01 18:29:33,659 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:33,661 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:33,661 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:33,661 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:33,661 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:33,661 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Match found: 0502629904 matches 05
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Calculating total cost for call: duration=326 seconds
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:29:33,662 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:33,663 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:29:33,663 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 18:29:33,663 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:33,665 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:33,665 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 18:29:33,668 models 570 138242068317888 Found extension: 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:29:33,670 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:33,673 models 570 138242068317888 Quota for 8426 - Rehan Khan Mohammed (Smasco): Last reset: 2024-09-15 06:35:34.958377+00:00, Next reset: 2024-10-15 06:35:34.958377+00:00, Current time: 2024-10-01 15:29:33.671539+00:00, Should reset: False
INFO 2024-10-01 18:29:33,674 models 570 138242068317888 Quota reset not needed for 8426 - Rehan Khan Mohammed (Smasco)
INFO 2024-10-01 18:29:33,674 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:29:33,674 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:33,674 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:33,676 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:33,676 socket_server 570 138242068317888 Saved call record for company Smasco: 8426 -> 0502629904 at 2024-10-01 15:23:52+03:00
INFO 2024-10-01 18:29:34,069 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58260) on port 8000
INFO 2024-10-01 18:29:37,734 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:33,8000,10001,00:00:03,2024/10/01 15:29:33,2024/10/01 15:29:36,TerminatedBySrc,,,593392694,Ext.8000,8000,,,Line,Ivr,,593392694:Main Number,WelcomeMessage,
INFO 2024-10-01 18:29:37,734 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:33', '8000', '10001', '00:00:03', '2024/10/01 15:29:33', '2024/10/01 15:29:36', 'TerminatedBySrc', '', '', '593392694', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '593392694:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:29:37,751 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:37,751 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.0
INFO 2024-10-01 18:29:37,751 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:37,752 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:29:37,752 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:29:37,752 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:29:37,752 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:29:37,752 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:37,753 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:29:37,756 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:37,758 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:37,758 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:29:37,758 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:29:37,758 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:37,759 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:37,769 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:37,770 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:29:37,772 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:29:37,774 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:37,775 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:37,775 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=3, total_cost=0.00
INFO 2024-10-01 18:29:37,779 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:29:37,780 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:29:37,780 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:29:37,780 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:29:37,780 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:29:37,780 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:37,780 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:29:37,783 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:37,786 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:37,786 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:29:37,787 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:29:37,787 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:37,787 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:29:37,787 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:29:37,788 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:29:37,788 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:29:37,788 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:29:37,788 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:37,791 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:37,791 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:29:37,794 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:29:37,796 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:37,797 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:29:33+03:00
INFO 2024-10-01 18:29:38,206 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58262) on port 8000
INFO 2024-10-01 18:29:40,006 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:28:10,0555454340,7781,00:01:16,2024/10/01 15:28:22,2024/10/01 15:29:39,TerminatedBySrc,,,Ext.7781,0555454340,10001,,,Extension,Line,,Abdullah Jabal,0555454340,
INFO 2024-10-01 18:29:40,007 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:28:10', '0555454340', '7781', '00:01:16', '2024/10/01 15:28:22', '2024/10/01 15:29:39', 'TerminatedBySrc', '', '', 'Ext.7781', '0555454340', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0555454340', '']
INFO 2024-10-01 18:29:40,027 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:40,028 models 570 138242068317888 Initial state: caller=7781, callee=0555454340, duration=76, total_cost=0.0
INFO 2024-10-01 18:29:40,028 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:40,029 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0555454340
INFO 2024-10-01 18:29:40,029 utils 570 138242068317888 Original number: 0555454340
INFO 2024-10-01 18:29:40,030 utils 570 138242068317888 Cleaned number: 0555454340
INFO 2024-10-01 18:29:40,030 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:40,030 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:40,030 models 570 138242068317888 Categorizing call for number: 0555454340
INFO 2024-10-01 18:29:40,033 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:40,036 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:40,037 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:40,037 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:40,038 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:40,038 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:40,039 models 570 138242068317888 Match found: 0555454340 matches 05
INFO 2024-10-01 18:29:40,039 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:40,039 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 Calculating total cost for call: duration=76 seconds
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:29:40,040 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:40,044 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:40,044 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:40,049 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:29:40,051 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 31.20
INFO 2024-10-01 18:29:40,056 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:29:40.054229+00:00, Should reset: False
INFO 2024-10-01 18:29:40,056 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:29:40,056 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 31.20
INFO 2024-10-01 18:29:40,057 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:29:40,057 models 570 138242068317888 Attempting to deduct 0.80 from balance 68.80
INFO 2024-10-01 18:29:40,059 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 68.00
INFO 2024-10-01 18:29:40,060 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 68.00
INFO 2024-10-01 18:29:40,062 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:40,063 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:40,063 models 570 138242068317888 Initial state: caller=7781, callee=0555454340, duration=76, total_cost=0.80
INFO 2024-10-01 18:29:40,066 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:29:40,067 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0555454340
INFO 2024-10-01 18:29:40,067 utils 570 138242068317888 Original number: 0555454340
INFO 2024-10-01 18:29:40,068 utils 570 138242068317888 Cleaned number: 0555454340
INFO 2024-10-01 18:29:40,068 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:40,069 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:40,069 models 570 138242068317888 Categorizing call for number: 0555454340
INFO 2024-10-01 18:29:40,072 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:40,074 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:40,074 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:40,075 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:40,075 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:40,075 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Match found: 0555454340 matches 05
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Calculating total cost for call: duration=76 seconds
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:40,076 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:40,078 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:29:40,078 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:29:40,079 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:40,081 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:40,081 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:29:40,085 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:29:40,088 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 32.00
INFO 2024-10-01 18:29:40,092 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:29:40.090368+00:00, Should reset: False
INFO 2024-10-01 18:29:40,093 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:29:40,093 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 32.00
INFO 2024-10-01 18:29:40,093 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:40,093 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:40,095 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:40,096 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0555454340 at 2024-10-01 15:28:10+03:00
INFO 2024-10-01 18:29:40,498 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58267) on port 8000
INFO 2024-10-01 18:29:55,988 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:27:34,0553057535,7783,00:01:22,2024/10/01 15:28:32,2024/10/01 15:29:55,TerminatedBySrc,,,Ext.7783,0553057535,10001,,,Extension,Line,,Majd Alshehri,0553057535,
INFO 2024-10-01 18:29:55,988 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:27:34', '0553057535', '7783', '00:01:22', '2024/10/01 15:28:32', '2024/10/01 15:29:55', 'TerminatedBySrc', '', '', 'Ext.7783', '0553057535', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0553057535', '']
INFO 2024-10-01 18:29:56,009 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:56,010 models 570 138242068317888 Initial state: caller=7783, callee=0553057535, duration=82, total_cost=0.0
INFO 2024-10-01 18:29:56,010 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:29:56,011 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0553057535
INFO 2024-10-01 18:29:56,011 utils 570 138242068317888 Original number: 0553057535
INFO 2024-10-01 18:29:56,011 utils 570 138242068317888 Cleaned number: 0553057535
INFO 2024-10-01 18:29:56,011 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:56,012 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:56,013 models 570 138242068317888 Categorizing call for number: 0553057535
INFO 2024-10-01 18:29:56,016 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:56,018 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:56,019 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:56,020 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:56,020 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:56,020 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:56,020 models 570 138242068317888 Match found: 0553057535 matches 05
INFO 2024-10-01 18:29:56,022 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:56,022 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:56,023 models 570 138242068317888 Calculating total cost for call: duration=82 seconds
INFO 2024-10-01 18:29:56,023 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:56,023 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:56,023 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:29:56,024 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:29:56,025 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:56,028 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:56,028 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:29:56,034 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:29:56,037 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:29:56,042 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:29:56.039921+00:00, Should reset: False
INFO 2024-10-01 18:29:56,043 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:29:56,043 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 21.60
INFO 2024-10-01 18:29:56,043 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:29:56,043 models 570 138242068317888 Attempting to deduct 0.80 from balance 78.40
INFO 2024-10-01 18:29:56,046 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 77.60
INFO 2024-10-01 18:29:56,046 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 77.60
INFO 2024-10-01 18:29:56,048 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:56,049 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:29:56,049 models 570 138242068317888 Initial state: caller=7783, callee=0553057535, duration=82, total_cost=0.80
INFO 2024-10-01 18:29:56,052 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:29:56,052 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0553057535
INFO 2024-10-01 18:29:56,053 utils 570 138242068317888 Original number: 0553057535
INFO 2024-10-01 18:29:56,053 utils 570 138242068317888 Cleaned number: 0553057535
INFO 2024-10-01 18:29:56,054 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:29:56,054 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:29:56,054 models 570 138242068317888 Categorizing call for number: 0553057535
INFO 2024-10-01 18:29:56,057 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:29:56,059 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:29:56,059 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:29:56,060 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:29:56,060 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:29:56,061 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:29:56,061 models 570 138242068317888 Match found: 0553057535 matches 05
INFO 2024-10-01 18:29:56,061 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:29:56,061 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:29:56,061 models 570 138242068317888 Calculating total cost for call: duration=82 seconds
INFO 2024-10-01 18:29:56,062 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:29:56,063 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:29:56,063 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:29:56,064 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:29:56,064 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:29:56,067 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:29:56,068 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:29:56,071 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:29:56,073 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 22.40
INFO 2024-10-01 18:29:56,078 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:29:56.075519+00:00, Should reset: False
INFO 2024-10-01 18:29:56,078 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:29:56,079 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 22.40
INFO 2024-10-01 18:29:56,079 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:29:56,079 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:29:56,082 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:29:56,083 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0553057535 at 2024-10-01 15:27:34+03:00
INFO 2024-10-01 18:29:56,484 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58271) on port 8000
INFO 2024-10-01 18:30:15,124 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:19,0566385779,7791,00:00:46,2024/10/01 15:29:28,2024/10/01 15:30:14,TerminatedBySrc,,,Ext.7791,0566385779,10001,,,Extension,Line,,Arwa Almagli,0566385779,
INFO 2024-10-01 18:30:15,125 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:19', '0566385779', '7791', '00:00:46', '2024/10/01 15:29:28', '2024/10/01 15:30:14', 'TerminatedBySrc', '', '', 'Ext.7791', '0566385779', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0566385779', '']
INFO 2024-10-01 18:30:15,167 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:15,168 models 570 138242068317888 Initial state: caller=7791, callee=0566385779, duration=46, total_cost=0.0
INFO 2024-10-01 18:30:15,168 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:30:15,169 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0566385779
INFO 2024-10-01 18:30:15,170 utils 570 138242068317888 Original number: 0566385779
INFO 2024-10-01 18:30:15,170 utils 570 138242068317888 Cleaned number: 0566385779
INFO 2024-10-01 18:30:15,171 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:30:15,172 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:15,172 models 570 138242068317888 Categorizing call for number: 0566385779
INFO 2024-10-01 18:30:15,182 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:15,189 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:15,191 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:30:15,191 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:30:15,192 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:30:15,197 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:30:15,197 models 570 138242068317888 Match found: 0566385779 matches 05
INFO 2024-10-01 18:30:15,197 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:30:15,197 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:15,197 models 570 138242068317888 Calculating total cost for call: duration=46 seconds
INFO 2024-10-01 18:30:15,198 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:15,198 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:30:15,198 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:30:15,198 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:30:15,198 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:15,201 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:15,201 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:30:15,206 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:30:15,214 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:15,221 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:30:15.216281+00:00, Should reset: False
INFO 2024-10-01 18:30:15,222 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:30:15,223 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:15,223 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:30:15,223 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:30:15,224 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:30:15,224 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 18:30:15,228 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:15,229 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:15,229 models 570 138242068317888 Initial state: caller=7791, callee=0566385779, duration=46, total_cost=0.40
INFO 2024-10-01 18:30:15,234 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:30:15,235 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0566385779
INFO 2024-10-01 18:30:15,235 utils 570 138242068317888 Original number: 0566385779
INFO 2024-10-01 18:30:15,235 utils 570 138242068317888 Cleaned number: 0566385779
INFO 2024-10-01 18:30:15,236 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:30:15,236 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:15,237 models 570 138242068317888 Categorizing call for number: 0566385779
INFO 2024-10-01 18:30:15,241 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:15,243 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:15,243 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:30:15,244 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:30:15,244 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:30:15,244 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:30:15,244 models 570 138242068317888 Match found: 0566385779 matches 05
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Calculating total cost for call: duration=46 seconds
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:30:15,245 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:30:15,246 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:30:15,246 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:15,249 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:15,249 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:30:15,253 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:30:15,255 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:15,260 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:30:15.257243+00:00, Should reset: False
INFO 2024-10-01 18:30:15,260 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:30:15,261 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:15,261 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:30:15,261 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:30:15,262 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:15,263 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0566385779 at 2024-10-01 15:29:19+03:00
INFO 2024-10-01 18:30:15,659 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58278) on port 8000
INFO 2024-10-01 18:30:21,136 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:31,0500094982,7790,00:00:37,2024/10/01 15:29:43,2024/10/01 15:30:20,TerminatedByDst,,,Ext.7790,0500094982,10001,,,Extension,Line,,Maram Alharbi,0500094982,
INFO 2024-10-01 18:30:21,136 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:31', '0500094982', '7790', '00:00:37', '2024/10/01 15:29:43', '2024/10/01 15:30:20', 'TerminatedByDst', '', '', 'Ext.7790', '0500094982', '10001', '', '', 'Extension', 'Line', '', 'Maram Alharbi', '0500094982', '']
INFO 2024-10-01 18:30:21,156 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:21,157 models 570 138242068317888 Initial state: caller=7790, callee=0500094982, duration=37, total_cost=0.0
INFO 2024-10-01 18:30:21,157 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:30:21,157 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0500094982
INFO 2024-10-01 18:30:21,157 utils 570 138242068317888 Original number: 0500094982
INFO 2024-10-01 18:30:21,158 utils 570 138242068317888 Cleaned number: 0500094982
INFO 2024-10-01 18:30:21,158 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:30:21,158 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:21,158 models 570 138242068317888 Categorizing call for number: 0500094982
INFO 2024-10-01 18:30:21,162 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:21,165 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:21,166 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:30:21,166 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:30:21,166 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:30:21,167 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:30:21,168 models 570 138242068317888 Match found: 0500094982 matches 05
INFO 2024-10-01 18:30:21,168 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:30:21,169 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:21,169 models 570 138242068317888 Calculating total cost for call: duration=37 seconds
INFO 2024-10-01 18:30:21,172 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:21,172 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:30:21,172 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:30:21,173 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:30:21,173 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:21,180 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:21,181 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:30:21,192 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:30:21,195 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:21,201 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:30:21.198596+00:00, Should reset: False
INFO 2024-10-01 18:30:21,201 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:30:21,202 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:21,202 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:30:21,202 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:30:21,202 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:30:21,203 models 570 138242068317888 Warning: Quota exceeded for extension 7790
INFO 2024-10-01 18:30:21,205 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:21,205 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:21,205 models 570 138242068317888 Initial state: caller=7790, callee=0500094982, duration=37, total_cost=0.40
INFO 2024-10-01 18:30:21,208 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:30:21,208 models 570 138242068317888 Before determining country, Caller: 7790, Callee: 0500094982
INFO 2024-10-01 18:30:21,209 utils 570 138242068317888 Original number: 0500094982
INFO 2024-10-01 18:30:21,209 utils 570 138242068317888 Cleaned number: 0500094982
INFO 2024-10-01 18:30:21,209 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:30:21,210 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:21,210 models 570 138242068317888 Categorizing call for number: 0500094982
INFO 2024-10-01 18:30:21,212 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:21,214 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:21,215 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:30:21,215 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:30:21,215 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:30:21,215 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:30:21,216 models 570 138242068317888 Match found: 0500094982 matches 05
INFO 2024-10-01 18:30:21,216 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:30:21,216 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:21,217 models 570 138242068317888 Calculating total cost for call: duration=37 seconds
INFO 2024-10-01 18:30:21,217 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:21,217 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:30:21,217 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:30:21,218 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:30:21,218 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:21,221 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:21,222 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:30:21,224 models 570 138242068317888 Found extension: 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:30:21,226 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:21,231 models 570 138242068317888 Quota for 7790 - Maram Alharbi (Smasco): Last reset: 2024-09-15 06:35:25.302703+00:00, Next reset: 2024-10-15 06:35:25.302703+00:00, Current time: 2024-10-01 15:30:21.228827+00:00, Should reset: False
INFO 2024-10-01 18:30:21,231 models 570 138242068317888 Quota reset not needed for 7790 - Maram Alharbi (Smasco)
INFO 2024-10-01 18:30:21,231 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:30:21,231 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:30:21,232 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:30:21,233 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:21,233 socket_server 570 138242068317888 Saved call record for company Smasco: 7790 -> 0500094982 at 2024-10-01 15:29:31+03:00
INFO 2024-10-01 18:30:21,639 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58280) on port 8000
INFO 2024-10-01 18:30:34,429 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:30:10,7446,8494,00:00:03,2024/10/01 15:30:30,2024/10/01 15:30:33,TerminatedBySrc,,,Ext.8494,Ext.6666,7446,,,Extension,VMail,,Raha Taif Qutbiyyah,,
INFO 2024-10-01 18:30:34,429 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:30:10', '7446', '8494', '00:00:03', '2024/10/01 15:30:30', '2024/10/01 15:30:33', 'TerminatedBySrc', '', '', 'Ext.8494', 'Ext.6666', '7446', '', '', 'Extension', 'VMail', '', 'Raha Taif Qutbiyyah', '', '']
INFO 2024-10-01 18:30:34,453 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:34,453 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=3, total_cost=0.0
INFO 2024-10-01 18:30:34,453 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:30:34,453 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:30:34,454 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:30:34,455 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:30:34,455 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:30:34,455 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:34,455 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:30:34,458 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:34,462 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:34,463 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:30:34,463 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:30:34,464 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:34,464 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:30:34,465 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:34,466 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:30:34,466 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:30:34,466 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:30:34,466 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:34,470 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:34,470 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:30:34,475 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:30:34,477 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:30:34,484 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:30:34.478724+00:00, Should reset: False
INFO 2024-10-01 18:30:34,484 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:30:34,485 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:30:34,485 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:30:34,485 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:30:34,489 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:34,490 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:34,490 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=3, total_cost=0.00
INFO 2024-10-01 18:30:34,493 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:30:34,494 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:30:34,494 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:30:34,494 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:30:34,494 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:30:34,494 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:34,494 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:30:34,496 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:34,498 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:34,498 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:30:34,498 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:30:34,498 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:34,498 models 570 138242068317888 Calculating total cost for call: duration=3 seconds
INFO 2024-10-01 18:30:34,499 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:30:34,499 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:30:34,499 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:30:34,499 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:30:34,499 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:34,501 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:34,502 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:30:34,505 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:30:34,508 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:30:34,514 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:30:34.510207+00:00, Should reset: False
INFO 2024-10-01 18:30:34,514 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:30:34,514 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:30:34,514 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:30:34,515 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:30:34,516 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:34,516 socket_server 570 138242068317888 Saved call record for company Smasco: 8494 -> 7446 at 2024-10-01 15:30:10+03:00
INFO 2024-10-01 18:30:34,914 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58284) on port 8000
INFO 2024-10-01 18:30:41,759 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:13,8000,10001,00:01:26,2024/10/01 15:29:14,2024/10/01 15:30:40,TerminatedBySrc,ReplacedDst,,0550544161,Ext.8000,8000,Ext.1000,1000,Line,Ivr,Extension,0550544161:Main Number,WelcomeMessage,SMASCO Reception
INFO 2024-10-01 18:30:41,760 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:13', '8000', '10001', '00:01:26', '2024/10/01 15:29:14', '2024/10/01 15:30:40', 'TerminatedBySrc', 'ReplacedDst', '', '0550544161', 'Ext.8000', '8000', 'Ext.1000', '1000', 'Line', 'Ivr', 'Extension', '0550544161:Main Number', 'WelcomeMessage', 'SMASCO Reception']
INFO 2024-10-01 18:30:41,776 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:41,776 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=86, total_cost=0.0
INFO 2024-10-01 18:30:41,776 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:30:41,776 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:30:41,777 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:30:41,777 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:30:41,777 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:30:41,777 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:41,777 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:30:41,780 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:41,782 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:41,783 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:30:41,783 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:30:41,783 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 Calculating total cost for call: duration=86 seconds
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:30:41,784 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:41,787 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:41,787 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:30:41,789 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:30:41,792 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:41,792 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:30:41,792 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=86, total_cost=0.00
INFO 2024-10-01 18:30:41,795 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:30:41,796 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:30:41,796 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:30:41,796 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:30:41,796 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:30:41,796 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:30:41,797 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:30:41,799 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:30:41,800 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:30:41,801 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:30:41,801 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:30:41,801 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:30:41,801 models 570 138242068317888 Calculating total cost for call: duration=86 seconds
INFO 2024-10-01 18:30:41,802 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:30:41,802 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:30:41,802 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:30:41,802 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:30:41,802 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:30:41,805 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:30:41,805 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:30:41,806 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:30:41,808 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:30:41,809 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:29:13+03:00
INFO 2024-10-01 18:30:42,211 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58285) on port 8000
INFO 2024-10-01 18:31:07,666 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:43,0507268540,8436,,,2024/10/01 15:31:06,Failed,,,Ext.8436,0507268540,0507268540,,,Extension,LineSet,,Md Rana,0507268540,
INFO 2024-10-01 18:31:07,666 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:43', '0507268540', '8436', '', '', '2024/10/01 15:31:06', 'Failed', '', '', 'Ext.8436', '0507268540', '0507268540', '', '', 'Extension', 'LineSet', '', 'Md Rana', '0507268540', '']
INFO 2024-10-01 18:31:07,688 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:07,689 models 570 138242068317888 Initial state: caller=8436, callee=0507268540, duration=None, total_cost=0.0
INFO 2024-10-01 18:31:07,689 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:31:07,689 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0507268540
INFO 2024-10-01 18:31:07,690 utils 570 138242068317888 Original number: 0507268540
INFO 2024-10-01 18:31:07,691 utils 570 138242068317888 Cleaned number: 0507268540
INFO 2024-10-01 18:31:07,691 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:07,691 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:07,692 models 570 138242068317888 Categorizing call for number: 0507268540
INFO 2024-10-01 18:31:07,697 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:07,700 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:07,700 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:07,701 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:07,701 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:07,702 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:07,702 models 570 138242068317888 Match found: 0507268540 matches 05
INFO 2024-10-01 18:31:07,703 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:07,703 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:07,704 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:31:07,704 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:31:07,705 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:07,705 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:07,709 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:07,710 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:31:07,716 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:31:07,720 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:07,727 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:31:07.723401+00:00, Should reset: False
INFO 2024-10-01 18:31:07,728 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:31:07,728 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:07,729 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:31:07,729 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:31:07,731 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:07,731 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:07,732 models 570 138242068317888 Initial state: caller=8436, callee=0507268540, duration=None, total_cost=0.00
INFO 2024-10-01 18:31:07,735 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:31:07,736 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0507268540
INFO 2024-10-01 18:31:07,736 utils 570 138242068317888 Original number: 0507268540
INFO 2024-10-01 18:31:07,736 utils 570 138242068317888 Cleaned number: 0507268540
INFO 2024-10-01 18:31:07,737 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:07,737 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:07,737 models 570 138242068317888 Categorizing call for number: 0507268540
INFO 2024-10-01 18:31:07,739 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:07,742 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:07,742 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:07,743 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:07,743 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:07,743 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:07,744 models 570 138242068317888 Match found: 0507268540 matches 05
INFO 2024-10-01 18:31:07,744 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:07,744 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:07,745 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:31:07,745 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:31:07,745 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:07,745 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:07,748 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:07,749 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:31:07,752 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:31:07,754 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:07,759 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:31:07.756851+00:00, Should reset: False
INFO 2024-10-01 18:31:07,760 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:31:07,760 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:07,760 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:31:07,760 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:31:07,762 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:07,762 socket_server 570 138242068317888 Saved call record for company Smasco: 8436 -> 0507268540 at 2024-10-01 15:29:43+03:00
INFO 2024-10-01 18:31:08,184 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58295) on port 8000
INFO 2024-10-01 18:31:09,879 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:30:18,0565657547,7791,00:00:38,2024/10/01 15:30:30,2024/10/01 15:31:09,TerminatedByDst,,,Ext.7791,0565657547,10001,,,Extension,Line,,Arwa Almagli,0565657547,
INFO 2024-10-01 18:31:09,879 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:30:18', '0565657547', '7791', '00:00:38', '2024/10/01 15:30:30', '2024/10/01 15:31:09', 'TerminatedByDst', '', '', 'Ext.7791', '0565657547', '10001', '', '', 'Extension', 'Line', '', 'Arwa Almagli', '0565657547', '']
INFO 2024-10-01 18:31:09,896 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:09,896 models 570 138242068317888 Initial state: caller=7791, callee=0565657547, duration=38, total_cost=0.0
INFO 2024-10-01 18:31:09,897 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:31:09,897 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0565657547
INFO 2024-10-01 18:31:09,897 utils 570 138242068317888 Original number: 0565657547
INFO 2024-10-01 18:31:09,897 utils 570 138242068317888 Cleaned number: 0565657547
INFO 2024-10-01 18:31:09,897 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:09,898 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:09,898 models 570 138242068317888 Categorizing call for number: 0565657547
INFO 2024-10-01 18:31:09,900 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:09,903 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:09,903 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:09,903 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:09,904 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:09,904 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:09,904 models 570 138242068317888 Match found: 0565657547 matches 05
INFO 2024-10-01 18:31:09,905 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:09,905 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:09,905 models 570 138242068317888 Calculating total cost for call: duration=38 seconds
INFO 2024-10-01 18:31:09,906 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:09,906 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:31:09,906 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:31:09,906 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:31:09,906 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:09,909 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:09,909 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:31:09,913 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:31:09,915 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:09,925 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:31:09.918709+00:00, Should reset: False
INFO 2024-10-01 18:31:09,926 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:31:09,926 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:09,926 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:31:09,926 models 570 138242068317888 Attempting to deduct 0.40 from balance 0.00
WARNING 2024-10-01 18:31:09,926 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 0.40
WARNING 2024-10-01 18:31:09,927 models 570 138242068317888 Warning: Quota exceeded for extension 7791
INFO 2024-10-01 18:31:09,930 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:09,930 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:09,931 models 570 138242068317888 Initial state: caller=7791, callee=0565657547, duration=38, total_cost=0.40
INFO 2024-10-01 18:31:09,933 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:31:09,933 models 570 138242068317888 Before determining country, Caller: 7791, Callee: 0565657547
INFO 2024-10-01 18:31:09,934 utils 570 138242068317888 Original number: 0565657547
INFO 2024-10-01 18:31:09,934 utils 570 138242068317888 Cleaned number: 0565657547
INFO 2024-10-01 18:31:09,934 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:09,934 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:09,934 models 570 138242068317888 Categorizing call for number: 0565657547
INFO 2024-10-01 18:31:09,936 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:09,938 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:09,938 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:09,938 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:09,938 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:09,939 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:09,939 models 570 138242068317888 Match found: 0565657547 matches 05
INFO 2024-10-01 18:31:09,939 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:09,939 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:09,940 models 570 138242068317888 Calculating total cost for call: duration=38 seconds
INFO 2024-10-01 18:31:09,940 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:09,940 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:31:09,940 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:31:09,940 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:31:09,941 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:09,943 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:09,943 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:31:09,946 models 570 138242068317888 Found extension: 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:31:09,947 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:09,950 models 570 138242068317888 Quota for 7791 - Arwa Almagli (Smasco): Last reset: 2024-09-15 06:35:25.308880+00:00, Next reset: 2024-10-15 06:35:25.308880+00:00, Current time: 2024-10-01 15:31:09.949139+00:00, Should reset: False
INFO 2024-10-01 18:31:09,951 models 570 138242068317888 Quota reset not needed for 7791 - Arwa Almagli (Smasco)
INFO 2024-10-01 18:31:09,951 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:31:09,951 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:31:09,951 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:31:09,953 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:09,953 socket_server 570 138242068317888 Saved call record for company Smasco: 7791 -> 0565657547 at 2024-10-01 15:30:18+03:00
INFO 2024-10-01 18:31:10,363 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58296) on port 8000
INFO 2024-10-01 18:31:28,348 basehttp 91866 127264593282752 "GET /outgoing_international/ HTTP/1.1" 200 26478
INFO 2024-10-01 18:31:37,452 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:30:36,7446,8494,00:00:54,2024/10/01 15:30:41,2024/10/01 15:31:36,TerminatedByDst,,,Ext.8494,Ext.7446,7446,,,Extension,Extension,,Raha Taif Qutbiyyah,Alex George,
INFO 2024-10-01 18:31:37,453 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:30:36', '7446', '8494', '00:00:54', '2024/10/01 15:30:41', '2024/10/01 15:31:36', 'TerminatedByDst', '', '', 'Ext.8494', 'Ext.7446', '7446', '', '', 'Extension', 'Extension', '', 'Raha Taif Qutbiyyah', 'Alex George', '']
INFO 2024-10-01 18:31:37,472 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:37,473 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=54, total_cost=0.0
INFO 2024-10-01 18:31:37,473 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:31:37,473 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:31:37,474 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:31:37,474 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:31:37,475 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:31:37,475 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:37,475 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:31:37,478 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:37,481 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:37,481 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:31:37,481 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:31:37,482 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:37,482 models 570 138242068317888 Calculating total cost for call: duration=54 seconds
INFO 2024-10-01 18:31:37,482 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:37,483 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:31:37,483 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:31:37,483 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:37,483 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:37,486 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:37,486 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:31:37,491 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:31:37,493 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:31:37,499 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:31:37.497086+00:00, Should reset: False
INFO 2024-10-01 18:31:37,499 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:31:37,500 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:31:37,500 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:31:37,500 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:31:37,502 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:37,503 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:37,503 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=54, total_cost=0.00
INFO 2024-10-01 18:31:37,506 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:31:37,506 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:31:37,506 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:31:37,506 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:31:37,506 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:31:37,507 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:37,507 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:31:37,509 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:37,511 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:37,511 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:31:37,512 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:31:37,512 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:37,512 models 570 138242068317888 Calculating total cost for call: duration=54 seconds
INFO 2024-10-01 18:31:37,512 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:37,513 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:31:37,513 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:31:37,513 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:37,513 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:37,517 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:37,517 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:31:37,521 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:31:37,523 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:31:37,526 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:31:37.524825+00:00, Should reset: False
INFO 2024-10-01 18:31:37,527 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:31:37,527 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:31:37,528 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:31:37,528 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:31:37,529 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:37,530 socket_server 570 138242068317888 Saved call record for company Smasco: 8494 -> 7446 at 2024-10-01 15:30:36+03:00
INFO 2024-10-01 18:31:37,958 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58300) on port 8000
INFO 2024-10-01 18:31:44,029 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:37,0530092743,1159,,,2024/10/01 15:31:43,Failed,,,Ext.1159,0530092743,0530092743,,,Extension,LineSet,,Saad Almasood,0530092743,
INFO 2024-10-01 18:31:44,029 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:37', '0530092743', '1159', '', '', '2024/10/01 15:31:43', 'Failed', '', '', 'Ext.1159', '0530092743', '0530092743', '', '', 'Extension', 'LineSet', '', 'Saad Almasood', '0530092743', '']
INFO 2024-10-01 18:31:44,049 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:44,049 models 570 138242068317888 Initial state: caller=1159, callee=0530092743, duration=None, total_cost=0.0
INFO 2024-10-01 18:31:44,050 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:31:44,050 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0530092743
INFO 2024-10-01 18:31:44,051 utils 570 138242068317888 Original number: 0530092743
INFO 2024-10-01 18:31:44,051 utils 570 138242068317888 Cleaned number: 0530092743
INFO 2024-10-01 18:31:44,051 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:44,051 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:44,052 models 570 138242068317888 Categorizing call for number: 0530092743
INFO 2024-10-01 18:31:44,054 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:44,057 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:44,057 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:44,057 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:44,057 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:44,057 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:44,058 models 570 138242068317888 Match found: 0530092743 matches 05
INFO 2024-10-01 18:31:44,058 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:44,058 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:44,058 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:31:44,058 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:31:44,058 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:44,059 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:44,061 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:44,062 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:31:44,064 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 18:31:44,066 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:44,067 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:44,067 models 570 138242068317888 Initial state: caller=1159, callee=0530092743, duration=None, total_cost=0.00
INFO 2024-10-01 18:31:44,069 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:31:44,070 models 570 138242068317888 Before determining country, Caller: 1159, Callee: 0530092743
INFO 2024-10-01 18:31:44,070 utils 570 138242068317888 Original number: 0530092743
INFO 2024-10-01 18:31:44,070 utils 570 138242068317888 Cleaned number: 0530092743
INFO 2024-10-01 18:31:44,070 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:31:44,070 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:44,071 models 570 138242068317888 Categorizing call for number: 0530092743
INFO 2024-10-01 18:31:44,073 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:44,074 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:44,074 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:31:44,075 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:31:44,075 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:31:44,075 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:31:44,075 models 570 138242068317888 Match found: 0530092743 matches 05
INFO 2024-10-01 18:31:44,075 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:31:44,076 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:44,076 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:31:44,076 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:31:44,076 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:44,076 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:44,078 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:44,079 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:31:44,080 models 570 138242068317888 Warning: No extension found for 1159
INFO 2024-10-01 18:31:44,082 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:44,082 socket_server 570 138242068317888 Saved call record for company Smasco: 1159 -> 0530092743 at 2024-10-01 15:29:37+03:00
INFO 2024-10-01 18:31:44,500 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58301) on port 8000
INFO 2024-10-01 18:31:46,045 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:31:33,8000,10001,00:00:12,2024/10/01 15:31:33,2024/10/01 15:31:45,TerminatedBySrc,,,0508725001,Ext.8000,8000,,,Line,Ivr,,0508725001:Main Number,WelcomeMessage,
INFO 2024-10-01 18:31:46,045 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:31:33', '8000', '10001', '00:00:12', '2024/10/01 15:31:33', '2024/10/01 15:31:45', 'TerminatedBySrc', '', '', '0508725001', 'Ext.8000', '8000', '', '', 'Line', 'Ivr', '', '0508725001:Main Number', 'WelcomeMessage', '']
INFO 2024-10-01 18:31:46,064 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:46,064 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.0
INFO 2024-10-01 18:31:46,064 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:31:46,064 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:31:46,065 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:31:46,065 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:31:46,065 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:31:46,065 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:46,065 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:31:46,068 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:46,071 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:46,071 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:31:46,072 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:31:46,073 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:46,073 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:31:46,073 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:46,073 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:31:46,074 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:31:46,074 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:46,074 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:46,077 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:46,077 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:31:46,080 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:31:46,082 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:46,083 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:31:46,083 models 570 138242068317888 Initial state: caller=10001, callee=8000, duration=12, total_cost=0.00
INFO 2024-10-01 18:31:46,086 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:31:46,087 models 570 138242068317888 Before determining country, Caller: 10001, Callee: 8000
INFO 2024-10-01 18:31:46,087 utils 570 138242068317888 Original number: 8000
INFO 2024-10-01 18:31:46,087 utils 570 138242068317888 Cleaned number: 8000
INFO 2024-10-01 18:31:46,087 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:31:46,087 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:31:46,087 models 570 138242068317888 Categorizing call for number: 8000
INFO 2024-10-01 18:31:46,089 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:31:46,091 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:31:46,091 models 570 138242068317888 Match found: 8000 matches ^\d{4}$
INFO 2024-10-01 18:31:46,091 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Calculating total cost for call: duration=12 seconds
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:31:46,092 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:31:46,095 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:31:46,095 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:31:46,097 models 570 138242068317888 Warning: No extension found for 10001
INFO 2024-10-01 18:31:46,099 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:31:46,099 socket_server 570 138242068317888 Saved call record for company Smasco: 10001 -> 8000 at 2024-10-01 15:31:33+03:00
INFO 2024-10-01 18:31:46,504 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58302) on port 8000
INFO 2024-10-01 18:32:00,479 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:31:09,0506306335,7781,00:00:22,2024/10/01 15:31:37,2024/10/01 15:31:59,TerminatedBySrc,,,Ext.7781,0506306335,10001,,,Extension,Line,,Abdullah Jabal,0506306335,
INFO 2024-10-01 18:32:00,480 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:31:09', '0506306335', '7781', '00:00:22', '2024/10/01 15:31:37', '2024/10/01 15:31:59', 'TerminatedBySrc', '', '', 'Ext.7781', '0506306335', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0506306335', '']
INFO 2024-10-01 18:32:00,499 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:32:00,500 models 570 138242068317888 Initial state: caller=7781, callee=0506306335, duration=22, total_cost=0.0
INFO 2024-10-01 18:32:00,501 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:32:00,502 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0506306335
INFO 2024-10-01 18:32:00,502 utils 570 138242068317888 Original number: 0506306335
INFO 2024-10-01 18:32:00,503 utils 570 138242068317888 Cleaned number: 0506306335
INFO 2024-10-01 18:32:00,503 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:32:00,503 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:32:00,504 models 570 138242068317888 Categorizing call for number: 0506306335
INFO 2024-10-01 18:32:00,507 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:32:00,510 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:32:00,511 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:32:00,511 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:32:00,512 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:32:00,512 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:32:00,513 models 570 138242068317888 Match found: 0506306335 matches 05
INFO 2024-10-01 18:32:00,513 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:32:00,513 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 Calculating total cost for call: duration=22 seconds
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.40
INFO 2024-10-01 18:32:00,514 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:32:00,518 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:32:00,519 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:32:00,524 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:32:00,526 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 32.00
INFO 2024-10-01 18:32:00,531 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:32:00.528885+00:00, Should reset: False
INFO 2024-10-01 18:32:00,531 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:32:00,532 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 32.00
INFO 2024-10-01 18:32:00,532 models 570 138242068317888 Amount to deduct: 0.40
INFO 2024-10-01 18:32:00,533 models 570 138242068317888 Attempting to deduct 0.40 from balance 68.00
INFO 2024-10-01 18:32:00,535 models 570 138242068317888 Successfully deducted 0.40. New remaining balance: 67.60
INFO 2024-10-01 18:32:00,536 models 570 138242068317888 Successfully deducted 0.40 from quota. New balance: 67.60
INFO 2024-10-01 18:32:00,539 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:32:00,539 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:32:00,540 models 570 138242068317888 Initial state: caller=7781, callee=0506306335, duration=22, total_cost=0.40
INFO 2024-10-01 18:32:00,544 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.40
INFO 2024-10-01 18:32:00,544 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0506306335
INFO 2024-10-01 18:32:00,544 utils 570 138242068317888 Original number: 0506306335
INFO 2024-10-01 18:32:00,545 utils 570 138242068317888 Cleaned number: 0506306335
INFO 2024-10-01 18:32:00,545 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:32:00,545 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:32:00,545 models 570 138242068317888 Categorizing call for number: 0506306335
INFO 2024-10-01 18:32:00,547 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:32:00,549 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:32:00,549 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:32:00,549 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:32:00,549 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Match found: 0506306335 matches 05
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Calculating total cost for call: duration=22 seconds
INFO 2024-10-01 18:32:00,550 models 570 138242068317888 Duration in minutes: 1
INFO 2024-10-01 18:32:00,551 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:32:00,551 models 570 138242068317888 Calculated total cost: 0.40
INFO 2024-10-01 18:32:00,551 models 570 138242068317888 After cost calculation: old_total_cost=0.40, new_total_cost=0.40
INFO 2024-10-01 18:32:00,551 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:32:00,553 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:32:00,553 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.40
INFO 2024-10-01 18:32:00,556 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:32:00,558 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 32.40
INFO 2024-10-01 18:32:00,568 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:32:00.564493+00:00, Should reset: False
INFO 2024-10-01 18:32:00,568 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:32:00,568 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 32.40
INFO 2024-10-01 18:32:00,569 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:32:00,569 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:32:00,570 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:32:00,571 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0506306335 at 2024-10-01 15:31:09+03:00
INFO 2024-10-01 18:32:00,979 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58305) on port 8000
INFO 2024-10-01 18:32:54,792 autoreload 91866 127264792551552 /home/ubuntu/3CX/cdr/cdr3cx/views_reports.py changed, reloading.
INFO 2024-10-01 18:32:56,359 autoreload 92907 129476862529664 Watching for file changes with StatReloader
INFO 2024-10-01 18:33:00,381 basehttp 92907 129476662920896 "GET /outgoing_international/?time_period=7d&custom_date=&search=&per_page=100 HTTP/1.1" 200 40935
INFO 2024-10-01 18:33:01,937 basehttp 92907 129476662920896 "GET /outgoing_international/?time_period=today&custom_date=&search=&per_page=100 HTTP/1.1" 200 26478
INFO 2024-10-01 18:33:03,614 basehttp 92907 129476662920896 "GET /outgoing_international/pdf/?time_period=today&custom_date= HTTP/1.1" 200 2523
INFO 2024-10-01 18:33:10,834 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:31:04,0550544545,1131,,,2024/10/01 15:33:10,Failed,,,Ext.1131,0550544545,0550544545,,,Extension,LineSet,,MUNIRAH ALQURAISHI,0550544545,
INFO 2024-10-01 18:33:10,835 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:31:04', '0550544545', '1131', '', '', '2024/10/01 15:33:10', 'Failed', '', '', 'Ext.1131', '0550544545', '0550544545', '', '', 'Extension', 'LineSet', '', 'MUNIRAH ALQURAISHI', '0550544545', '']
INFO 2024-10-01 18:33:10,853 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:33:10,853 models 570 138242068317888 Initial state: caller=1131, callee=0550544545, duration=None, total_cost=0.0
INFO 2024-10-01 18:33:10,853 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:33:10,854 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0550544545
INFO 2024-10-01 18:33:10,854 utils 570 138242068317888 Original number: 0550544545
INFO 2024-10-01 18:33:10,854 utils 570 138242068317888 Cleaned number: 0550544545
INFO 2024-10-01 18:33:10,854 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:33:10,854 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:33:10,855 models 570 138242068317888 Categorizing call for number: 0550544545
INFO 2024-10-01 18:33:10,858 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:33:10,860 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:33:10,860 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:33:10,861 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:33:10,861 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:33:10,861 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:33:10,861 models 570 138242068317888 Match found: 0550544545 matches 05
INFO 2024-10-01 18:33:10,862 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:33:10,862 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:33:10,862 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:33:10,862 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:33:10,863 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:33:10,863 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:33:10,865 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:33:10,866 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:33:10,868 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:33:10,870 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:33:10,870 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:33:10,870 models 570 138242068317888 Initial state: caller=1131, callee=0550544545, duration=None, total_cost=0.00
INFO 2024-10-01 18:33:10,873 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:33:10,873 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0550544545
INFO 2024-10-01 18:33:10,873 utils 570 138242068317888 Original number: 0550544545
INFO 2024-10-01 18:33:10,874 utils 570 138242068317888 Cleaned number: 0550544545
INFO 2024-10-01 18:33:10,874 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:33:10,874 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:33:10,874 models 570 138242068317888 Categorizing call for number: 0550544545
INFO 2024-10-01 18:33:10,876 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:33:10,878 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:33:10,878 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:33:10,878 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:33:10,878 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:33:10,878 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:33:10,879 models 570 138242068317888 Match found: 0550544545 matches 05
INFO 2024-10-01 18:33:10,879 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:33:10,879 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:33:10,879 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:33:10,879 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:33:10,879 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:33:10,880 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:33:10,882 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:33:10,882 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:33:10,884 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:33:10,886 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:33:10,886 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0550544545 at 2024-10-01 15:31:04+03:00
INFO 2024-10-01 18:33:11,294 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58325) on port 8000
INFO 2024-10-01 18:33:16,209 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:31:09,0507268540,8436,,,2024/10/01 15:33:15,Failed,,,Ext.8436,0507268540,0507268540,,,Extension,LineSet,,Md Rana,0507268540,
INFO 2024-10-01 18:33:16,209 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:31:09', '0507268540', '8436', '', '', '2024/10/01 15:33:15', 'Failed', '', '', 'Ext.8436', '0507268540', '0507268540', '', '', 'Extension', 'LineSet', '', 'Md Rana', '0507268540', '']
INFO 2024-10-01 18:33:16,225 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:33:16,225 models 570 138242068317888 Initial state: caller=8436, callee=0507268540, duration=None, total_cost=0.0
INFO 2024-10-01 18:33:16,226 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:33:16,226 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0507268540
INFO 2024-10-01 18:33:16,226 utils 570 138242068317888 Original number: 0507268540
INFO 2024-10-01 18:33:16,226 utils 570 138242068317888 Cleaned number: 0507268540
INFO 2024-10-01 18:33:16,226 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:33:16,227 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:33:16,227 models 570 138242068317888 Categorizing call for number: 0507268540
INFO 2024-10-01 18:33:16,229 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:33:16,231 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:33:16,232 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:33:16,232 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:33:16,232 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:33:16,232 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:33:16,232 models 570 138242068317888 Match found: 0507268540 matches 05
INFO 2024-10-01 18:33:16,233 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:33:16,233 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:33:16,233 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:33:16,233 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:33:16,233 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:33:16,233 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:33:16,236 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:33:16,236 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:33:16,240 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:33:16,242 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:33:16,246 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:33:16.244072+00:00, Should reset: False
INFO 2024-10-01 18:33:16,246 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:33:16,246 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:33:16,246 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:33:16,246 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:33:16,249 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:33:16,249 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:33:16,250 models 570 138242068317888 Initial state: caller=8436, callee=0507268540, duration=None, total_cost=0.00
INFO 2024-10-01 18:33:16,253 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:33:16,253 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0507268540
INFO 2024-10-01 18:33:16,253 utils 570 138242068317888 Original number: 0507268540
INFO 2024-10-01 18:33:16,253 utils 570 138242068317888 Cleaned number: 0507268540
INFO 2024-10-01 18:33:16,253 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:33:16,254 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:33:16,254 models 570 138242068317888 Categorizing call for number: 0507268540
INFO 2024-10-01 18:33:16,256 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:33:16,257 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Match found: 0507268540 matches 05
INFO 2024-10-01 18:33:16,258 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:33:16,259 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:33:16,259 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:33:16,259 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:33:16,259 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:33:16,259 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:33:16,261 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:33:16,261 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:33:16,264 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:33:16,265 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:33:16,269 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:33:16.267604+00:00, Should reset: False
INFO 2024-10-01 18:33:16,269 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:33:16,270 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:33:16,270 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:33:16,270 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:33:16,272 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:33:16,272 socket_server 570 138242068317888 Saved call record for company Smasco: 8436 -> 0507268540 at 2024-10-01 15:31:09+03:00
INFO 2024-10-01 18:33:16,679 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58326) on port 8000
INFO 2024-10-01 18:34:25,738 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:32:31,0530965433,7781,00:01:37,2024/10/01 15:32:47,2024/10/01 15:34:24,TerminatedBySrc,,,Ext.7781,0530965433,10001,,,Extension,Line,,Abdullah Jabal,0530965433,
INFO 2024-10-01 18:34:25,739 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:32:31', '0530965433', '7781', '00:01:37', '2024/10/01 15:32:47', '2024/10/01 15:34:24', 'TerminatedBySrc', '', '', 'Ext.7781', '0530965433', '10001', '', '', 'Extension', 'Line', '', 'Abdullah Jabal', '0530965433', '']
INFO 2024-10-01 18:34:25,754 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:25,754 models 570 138242068317888 Initial state: caller=7781, callee=0530965433, duration=97, total_cost=0.0
INFO 2024-10-01 18:34:25,755 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:34:25,755 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0530965433
INFO 2024-10-01 18:34:25,755 utils 570 138242068317888 Original number: 0530965433
INFO 2024-10-01 18:34:25,755 utils 570 138242068317888 Cleaned number: 0530965433
INFO 2024-10-01 18:34:25,755 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:25,756 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:25,756 models 570 138242068317888 Categorizing call for number: 0530965433
INFO 2024-10-01 18:34:25,758 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:25,760 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:25,761 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:25,761 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:25,761 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:25,761 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:25,762 models 570 138242068317888 Match found: 0530965433 matches 05
INFO 2024-10-01 18:34:25,762 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:25,762 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:25,762 models 570 138242068317888 Calculating total cost for call: duration=97 seconds
INFO 2024-10-01 18:34:25,763 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:34:25,763 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:34:25,763 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:34:25,763 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:34:25,764 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:25,766 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:25,766 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:34:25,776 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:34:25,778 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 32.40
INFO 2024-10-01 18:34:25,782 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:34:25.780115+00:00, Should reset: False
INFO 2024-10-01 18:34:25,782 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:34:25,782 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 32.40
INFO 2024-10-01 18:34:25,782 models 570 138242068317888 Amount to deduct: 0.80
INFO 2024-10-01 18:34:25,782 models 570 138242068317888 Attempting to deduct 0.80 from balance 67.60
INFO 2024-10-01 18:34:25,784 models 570 138242068317888 Successfully deducted 0.80. New remaining balance: 66.80
INFO 2024-10-01 18:34:25,784 models 570 138242068317888 Successfully deducted 0.80 from quota. New balance: 66.80
INFO 2024-10-01 18:34:25,787 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:25,787 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:25,787 models 570 138242068317888 Initial state: caller=7781, callee=0530965433, duration=97, total_cost=0.80
INFO 2024-10-01 18:34:25,790 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:34:25,790 models 570 138242068317888 Before determining country, Caller: 7781, Callee: 0530965433
INFO 2024-10-01 18:34:25,790 utils 570 138242068317888 Original number: 0530965433
INFO 2024-10-01 18:34:25,790 utils 570 138242068317888 Cleaned number: 0530965433
INFO 2024-10-01 18:34:25,790 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:25,791 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:25,791 models 570 138242068317888 Categorizing call for number: 0530965433
INFO 2024-10-01 18:34:25,792 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:25,794 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:25,794 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:25,794 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:25,795 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:25,795 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:25,795 models 570 138242068317888 Match found: 0530965433 matches 05
INFO 2024-10-01 18:34:25,795 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:25,795 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:25,796 models 570 138242068317888 Calculating total cost for call: duration=97 seconds
INFO 2024-10-01 18:34:25,796 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:34:25,796 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:34:25,797 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:34:25,797 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:34:25,797 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:25,799 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:25,799 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
INFO 2024-10-01 18:34:25,803 models 570 138242068317888 Found extension: 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:34:25,804 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 33.20
INFO 2024-10-01 18:34:25,808 models 570 138242068317888 Quota for 7781 - Abdullah Jabal (Smasco): Last reset: 2024-09-15 06:35:25.272199+00:00, Next reset: 2024-10-15 06:35:25.272199+00:00, Current time: 2024-10-01 15:34:25.806095+00:00, Should reset: False
INFO 2024-10-01 18:34:25,808 models 570 138242068317888 Quota reset not needed for 7781 - Abdullah Jabal (Smasco)
INFO 2024-10-01 18:34:25,808 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 33.20
INFO 2024-10-01 18:34:25,808 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:34:25,808 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:34:25,810 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:25,811 socket_server 570 138242068317888 Saved call record for company Smasco: 7781 -> 0530965433 at 2024-10-01 15:32:31+03:00
INFO 2024-10-01 18:34:26,212 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58344) on port 8000
INFO 2024-10-01 18:34:26,907 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:34:20,0545260649,8436,,,2024/10/01 15:34:26,Failed,,,Ext.8436,0545260649,0545260649,,,Extension,LineSet,,Md Rana,0545260649,
INFO 2024-10-01 18:34:26,907 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:34:20', '0545260649', '8436', '', '', '2024/10/01 15:34:26', 'Failed', '', '', 'Ext.8436', '0545260649', '0545260649', '', '', 'Extension', 'LineSet', '', 'Md Rana', '0545260649', '']
INFO 2024-10-01 18:34:26,924 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:26,924 models 570 138242068317888 Initial state: caller=8436, callee=0545260649, duration=None, total_cost=0.0
INFO 2024-10-01 18:34:26,924 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:34:26,925 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0545260649
INFO 2024-10-01 18:34:26,925 utils 570 138242068317888 Original number: 0545260649
INFO 2024-10-01 18:34:26,925 utils 570 138242068317888 Cleaned number: 0545260649
INFO 2024-10-01 18:34:26,925 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:26,926 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:26,926 models 570 138242068317888 Categorizing call for number: 0545260649
INFO 2024-10-01 18:34:26,928 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:26,930 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:26,931 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:26,931 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:26,931 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:26,931 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:26,931 models 570 138242068317888 Match found: 0545260649 matches 05
INFO 2024-10-01 18:34:26,932 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:26,932 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:26,932 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:34:26,932 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:34:26,932 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:34:26,933 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:26,935 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:26,935 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:34:26,944 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:34:26,946 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:34:26,955 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:34:26.947871+00:00, Should reset: False
INFO 2024-10-01 18:34:26,956 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:34:26,956 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:34:26,956 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:34:26,956 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:34:26,958 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:26,959 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:26,959 models 570 138242068317888 Initial state: caller=8436, callee=0545260649, duration=None, total_cost=0.00
INFO 2024-10-01 18:34:26,962 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:34:26,962 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0545260649
INFO 2024-10-01 18:34:26,962 utils 570 138242068317888 Original number: 0545260649
INFO 2024-10-01 18:34:26,963 utils 570 138242068317888 Cleaned number: 0545260649
INFO 2024-10-01 18:34:26,963 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:26,963 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:26,963 models 570 138242068317888 Categorizing call for number: 0545260649
INFO 2024-10-01 18:34:26,965 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:26,966 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Match found: 0545260649 matches 05
INFO 2024-10-01 18:34:26,967 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:26,968 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:26,968 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:34:26,968 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:34:26,968 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:34:26,968 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:26,970 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:26,971 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:34:26,973 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:34:26,975 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:34:26,979 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:34:26.977096+00:00, Should reset: False
INFO 2024-10-01 18:34:26,979 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:34:26,979 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:34:26,980 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:34:26,980 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:34:26,982 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:26,982 socket_server 570 138242068317888 Saved call record for company Smasco: 8436 -> 0545260649 at 2024-10-01 15:34:20+03:00
INFO 2024-10-01 18:34:27,389 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58345) on port 8000
INFO 2024-10-01 18:34:35,294 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:30:37,0550830090,7783,00:03:49,2024/10/01 15:30:44,2024/10/01 15:34:34,TerminatedBySrc,,,Ext.7783,0550830090,10001,,,Extension,Line,,Majd Alshehri,0550830090,
INFO 2024-10-01 18:34:35,294 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:30:37', '0550830090', '7783', '00:03:49', '2024/10/01 15:30:44', '2024/10/01 15:34:34', 'TerminatedBySrc', '', '', 'Ext.7783', '0550830090', '10001', '', '', 'Extension', 'Line', '', 'Majd Alshehri', '0550830090', '']
INFO 2024-10-01 18:34:35,314 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:35,315 models 570 138242068317888 Initial state: caller=7783, callee=0550830090, duration=229, total_cost=0.0
INFO 2024-10-01 18:34:35,315 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:34:35,315 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0550830090
INFO 2024-10-01 18:34:35,315 utils 570 138242068317888 Original number: 0550830090
INFO 2024-10-01 18:34:35,315 utils 570 138242068317888 Cleaned number: 0550830090
INFO 2024-10-01 18:34:35,317 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:35,317 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:35,318 models 570 138242068317888 Categorizing call for number: 0550830090
INFO 2024-10-01 18:34:35,321 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:35,324 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:35,325 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:35,325 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:35,325 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Match found: 0550830090 matches 05
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Calculating total cost for call: duration=229 seconds
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:34:35,326 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:34:35,328 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:34:35,328 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:34:35,329 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:35,332 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:35,332 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:34:35,337 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:34:35,340 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 22.40
INFO 2024-10-01 18:34:35,344 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:34:35.342312+00:00, Should reset: False
INFO 2024-10-01 18:34:35,345 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:34:35,345 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 22.40
INFO 2024-10-01 18:34:35,346 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:34:35,346 models 570 138242068317888 Attempting to deduct 1.60 from balance 77.60
INFO 2024-10-01 18:34:35,348 models 570 138242068317888 Successfully deducted 1.60. New remaining balance: 76.00
INFO 2024-10-01 18:34:35,349 models 570 138242068317888 Successfully deducted 1.60 from quota. New balance: 76.00
INFO 2024-10-01 18:34:35,351 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:35,351 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:34:35,351 models 570 138242068317888 Initial state: caller=7783, callee=0550830090, duration=229, total_cost=1.60
INFO 2024-10-01 18:34:35,355 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:34:35,355 models 570 138242068317888 Before determining country, Caller: 7783, Callee: 0550830090
INFO 2024-10-01 18:34:35,356 utils 570 138242068317888 Original number: 0550830090
INFO 2024-10-01 18:34:35,356 utils 570 138242068317888 Cleaned number: 0550830090
INFO 2024-10-01 18:34:35,357 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:34:35,357 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:34:35,357 models 570 138242068317888 Categorizing call for number: 0550830090
INFO 2024-10-01 18:34:35,360 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:34:35,362 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:34:35,362 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Match found: 0550830090 matches 05
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:34:35,363 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:34:35,365 models 570 138242068317888 Calculating total cost for call: duration=229 seconds
INFO 2024-10-01 18:34:35,365 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:34:35,365 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:34:35,365 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:34:35,366 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:34:35,367 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:34:35,369 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:34:35,370 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:34:35,373 models 570 138242068317888 Found extension: 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:34:35,375 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 24.00
INFO 2024-10-01 18:34:35,380 models 570 138242068317888 Quota for 7783 - Majd Alshehri (Smasco): Last reset: 2024-09-15 06:35:25.277817+00:00, Next reset: 2024-10-15 06:35:25.277817+00:00, Current time: 2024-10-01 15:34:35.378038+00:00, Should reset: False
INFO 2024-10-01 18:34:35,380 models 570 138242068317888 Quota reset not needed for 7783 - Majd Alshehri (Smasco)
INFO 2024-10-01 18:34:35,380 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 24.00
INFO 2024-10-01 18:34:35,380 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:34:35,381 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:34:35,382 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:34:35,383 socket_server 570 138242068317888 Saved call record for company Smasco: 7783 -> 0550830090 at 2024-10-01 15:30:37+03:00
INFO 2024-10-01 18:34:35,795 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58348) on port 8000
INFO 2024-10-01 18:35:16,519 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:29:42,0565518684,7738,00:05:23,2024/10/01 15:29:51,2024/10/01 15:35:15,TerminatedByDst,,,Ext.7738,0565518684,10001,,,Extension,Line,,Hanaa Alshalwi,0565518684,
INFO 2024-10-01 18:35:16,519 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:29:42', '0565518684', '7738', '00:05:23', '2024/10/01 15:29:51', '2024/10/01 15:35:15', 'TerminatedByDst', '', '', 'Ext.7738', '0565518684', '10001', '', '', 'Extension', 'Line', '', 'Hanaa Alshalwi', '0565518684', '']
INFO 2024-10-01 18:35:16,534 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:35:16,535 models 570 138242068317888 Initial state: caller=7738, callee=0565518684, duration=323, total_cost=0.0
INFO 2024-10-01 18:35:16,535 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:35:16,535 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0565518684
INFO 2024-10-01 18:35:16,535 utils 570 138242068317888 Original number: 0565518684
INFO 2024-10-01 18:35:16,536 utils 570 138242068317888 Cleaned number: 0565518684
INFO 2024-10-01 18:35:16,536 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:35:16,536 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:35:16,536 models 570 138242068317888 Categorizing call for number: 0565518684
INFO 2024-10-01 18:35:16,539 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:35:16,541 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:35:16,541 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:35:16,541 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:35:16,541 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:35:16,542 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:35:16,542 models 570 138242068317888 Match found: 0565518684 matches 05
INFO 2024-10-01 18:35:16,542 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:35:16,543 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:35:16,543 models 570 138242068317888 Calculating total cost for call: duration=323 seconds
INFO 2024-10-01 18:35:16,543 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:35:16,543 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:35:16,544 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:35:16,544 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.40
INFO 2024-10-01 18:35:16,544 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:35:16,546 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:35:16,546 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:35:16,550 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:35:16,552 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:35:16,555 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:35:16.554088+00:00, Should reset: False
INFO 2024-10-01 18:35:16,556 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:35:16,556 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:35:16,557 models 570 138242068317888 Amount to deduct: 2.40
INFO 2024-10-01 18:35:16,557 models 570 138242068317888 Attempting to deduct 2.40 from balance 0.00
WARNING 2024-10-01 18:35:16,557 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 2.40
WARNING 2024-10-01 18:35:16,557 models 570 138242068317888 Warning: Quota exceeded for extension 7738
INFO 2024-10-01 18:35:16,559 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:35:16,559 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:35:16,560 models 570 138242068317888 Initial state: caller=7738, callee=0565518684, duration=323, total_cost=2.40
INFO 2024-10-01 18:35:16,562 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.40
INFO 2024-10-01 18:35:16,562 models 570 138242068317888 Before determining country, Caller: 7738, Callee: 0565518684
INFO 2024-10-01 18:35:16,563 utils 570 138242068317888 Original number: 0565518684
INFO 2024-10-01 18:35:16,563 utils 570 138242068317888 Cleaned number: 0565518684
INFO 2024-10-01 18:35:16,563 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:35:16,563 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:35:16,563 models 570 138242068317888 Categorizing call for number: 0565518684
INFO 2024-10-01 18:35:16,565 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:35:16,566 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:35:16,567 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:35:16,567 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:35:16,567 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:35:16,568 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:35:16,568 models 570 138242068317888 Match found: 0565518684 matches 05
INFO 2024-10-01 18:35:16,568 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:35:16,569 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:35:16,569 models 570 138242068317888 Calculating total cost for call: duration=323 seconds
INFO 2024-10-01 18:35:16,569 models 570 138242068317888 Duration in minutes: 6
INFO 2024-10-01 18:35:16,570 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:35:16,570 models 570 138242068317888 Calculated total cost: 2.40
INFO 2024-10-01 18:35:16,570 models 570 138242068317888 After cost calculation: old_total_cost=2.40, new_total_cost=2.40
INFO 2024-10-01 18:35:16,570 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:35:16,572 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:35:16,572 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.40
INFO 2024-10-01 18:35:16,575 models 570 138242068317888 Found extension: 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:35:16,576 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:35:16,580 models 570 138242068317888 Quota for 7738 - Hanaa Alshalwi (Smasco): Last reset: 2024-09-15 06:35:25.248390+00:00, Next reset: 2024-10-15 06:35:25.248390+00:00, Current time: 2024-10-01 15:35:16.578236+00:00, Should reset: False
INFO 2024-10-01 18:35:16,580 models 570 138242068317888 Quota reset not needed for 7738 - Hanaa Alshalwi (Smasco)
INFO 2024-10-01 18:35:16,580 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:35:16,580 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:35:16,580 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:35:16,582 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:35:16,582 socket_server 570 138242068317888 Saved call record for company Smasco: 7738 -> 0565518684 at 2024-10-01 15:29:42+03:00
INFO 2024-10-01 18:35:16,979 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58353) on port 8000
INFO 2024-10-01 18:35:28,498 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:31:56,7446,8494,00:03:24,2024/10/01 15:32:03,2024/10/01 15:35:27,TerminatedByDst,,,Ext.8494,Ext.7446,7446,,,Extension,Extension,,Raha Taif Qutbiyyah,Alex George,
INFO 2024-10-01 18:35:28,499 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:31:56', '7446', '8494', '00:03:24', '2024/10/01 15:32:03', '2024/10/01 15:35:27', 'TerminatedByDst', '', '', 'Ext.8494', 'Ext.7446', '7446', '', '', 'Extension', 'Extension', '', 'Raha Taif Qutbiyyah', 'Alex George', '']
INFO 2024-10-01 18:35:28,519 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:35:28,519 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=204, total_cost=0.0
INFO 2024-10-01 18:35:28,520 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:35:28,521 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:35:28,521 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:35:28,521 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:35:28,522 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:35:28,522 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:35:28,522 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:35:28,525 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:35:28,528 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:35:28,529 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:35:28,529 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:35:28,530 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:35:28,530 models 570 138242068317888 Calculating total cost for call: duration=204 seconds
INFO 2024-10-01 18:35:28,530 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:35:28,531 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:35:28,531 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:35:28,531 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:35:28,531 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:35:28,535 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:35:28,535 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:35:28,539 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:35:28,542 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:35:28,546 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:35:28.544372+00:00, Should reset: False
INFO 2024-10-01 18:35:28,547 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:35:28,547 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:35:28,547 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:35:28,547 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:35:28,549 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:35:28,549 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:35:28,550 models 570 138242068317888 Initial state: caller=8494, callee=7446, duration=204, total_cost=0.00
INFO 2024-10-01 18:35:28,552 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:35:28,552 models 570 138242068317888 Before determining country, Caller: 8494, Callee: 7446
INFO 2024-10-01 18:35:28,553 utils 570 138242068317888 Original number: 7446
INFO 2024-10-01 18:35:28,553 utils 570 138242068317888 Cleaned number: 7446
INFO 2024-10-01 18:35:28,553 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:35:28,553 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:35:28,553 models 570 138242068317888 Categorizing call for number: 7446
INFO 2024-10-01 18:35:28,555 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:35:28,557 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:35:28,557 models 570 138242068317888 Match found: 7446 matches ^\d{4}$
INFO 2024-10-01 18:35:28,557 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Calculating total cost for call: duration=204 seconds
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:35:28,558 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:35:28,561 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:35:28,561 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:35:28,564 models 570 138242068317888 Found extension: 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:35:28,565 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:35:28,569 models 570 138242068317888 Quota for 8494 - Raha Taif Qutbiyyah (Smasco): Last reset: 2024-09-15 06:35:35.240461+00:00, Next reset: 2024-10-15 06:35:35.240461+00:00, Current time: 2024-10-01 15:35:28.567098+00:00, Should reset: False
INFO 2024-10-01 18:35:28,569 models 570 138242068317888 Quota reset not needed for 8494 - Raha Taif Qutbiyyah (Smasco)
INFO 2024-10-01 18:35:28,569 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:35:28,569 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:35:28,570 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:35:28,571 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:35:28,571 socket_server 570 138242068317888 Saved call record for company Smasco: 8494 -> 7446 at 2024-10-01 15:31:56+03:00
INFO 2024-10-01 18:35:28,972 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58354) on port 8000
INFO 2024-10-01 18:36:24,557 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:35:05,0555042133,1131,00:01:02,2024/10/01 15:35:21,2024/10/01 15:36:23,TerminatedByDst,,,Ext.1131,0555042133,10001,,,Extension,Line,,MUNIRAH ALQURAISHI,0555042133,
INFO 2024-10-01 18:36:24,557 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:35:05', '0555042133', '1131', '00:01:02', '2024/10/01 15:35:21', '2024/10/01 15:36:23', 'TerminatedByDst', '', '', 'Ext.1131', '0555042133', '10001', '', '', 'Extension', 'Line', '', 'MUNIRAH ALQURAISHI', '0555042133', '']
INFO 2024-10-01 18:36:24,574 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:36:24,574 models 570 138242068317888 Initial state: caller=1131, callee=0555042133, duration=62, total_cost=0.0
INFO 2024-10-01 18:36:24,575 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:36:24,575 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0555042133
INFO 2024-10-01 18:36:24,575 utils 570 138242068317888 Original number: 0555042133
INFO 2024-10-01 18:36:24,575 utils 570 138242068317888 Cleaned number: 0555042133
INFO 2024-10-01 18:36:24,576 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:36:24,576 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:36:24,576 models 570 138242068317888 Categorizing call for number: 0555042133
INFO 2024-10-01 18:36:24,579 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:36:24,582 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:36:24,582 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:36:24,582 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:36:24,589 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:36:24,589 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:36:24,589 models 570 138242068317888 Match found: 0555042133 matches 05
INFO 2024-10-01 18:36:24,589 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:36:24,589 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 Calculating total cost for call: duration=62 seconds
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.80
INFO 2024-10-01 18:36:24,590 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:36:24,596 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:36:24,596 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
WARNING 2024-10-01 18:36:24,599 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:36:24,601 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:36:24,601 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:36:24,601 models 570 138242068317888 Initial state: caller=1131, callee=0555042133, duration=62, total_cost=0.80
INFO 2024-10-01 18:36:24,603 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.80
INFO 2024-10-01 18:36:24,604 models 570 138242068317888 Before determining country, Caller: 1131, Callee: 0555042133
INFO 2024-10-01 18:36:24,604 utils 570 138242068317888 Original number: 0555042133
INFO 2024-10-01 18:36:24,604 utils 570 138242068317888 Cleaned number: 0555042133
INFO 2024-10-01 18:36:24,604 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:36:24,605 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:36:24,605 models 570 138242068317888 Categorizing call for number: 0555042133
INFO 2024-10-01 18:36:24,607 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:36:24,608 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:36:24,609 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:36:24,609 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:36:24,609 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:36:24,610 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:36:24,610 models 570 138242068317888 Match found: 0555042133 matches 05
INFO 2024-10-01 18:36:24,610 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:36:24,610 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 Calculating total cost for call: duration=62 seconds
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 Calculated total cost: 0.80
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 After cost calculation: old_total_cost=0.80, new_total_cost=0.80
INFO 2024-10-01 18:36:24,611 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:36:24,614 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:36:24,614 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.80
WARNING 2024-10-01 18:36:24,615 models 570 138242068317888 Warning: No extension found for 1131
INFO 2024-10-01 18:36:24,617 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:36:24,617 socket_server 570 138242068317888 Saved call record for company Smasco: 1131 -> 0555042133 at 2024-10-01 15:35:05+03:00
INFO 2024-10-01 18:36:25,024 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58373) on port 8000
INFO 2024-10-01 18:36:32,384 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:32:18,0505649380,7195,00:04:02,2024/10/01 15:32:28,2024/10/01 15:36:31,TerminatedByDst,,,Ext.7195,0505649380,10001,,,Extension,Line,,Abdulaziz Alenzi,0505649380,
INFO 2024-10-01 18:36:32,384 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:32:18', '0505649380', '7195', '00:04:02', '2024/10/01 15:32:28', '2024/10/01 15:36:31', 'TerminatedByDst', '', '', 'Ext.7195', '0505649380', '10001', '', '', 'Extension', 'Line', '', 'Abdulaziz Alenzi', '0505649380', '']
INFO 2024-10-01 18:36:32,405 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:36:32,405 models 570 138242068317888 Initial state: caller=7195, callee=0505649380, duration=242, total_cost=0.0
INFO 2024-10-01 18:36:32,406 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:36:32,407 models 570 138242068317888 Before determining country, Caller: 7195, Callee: 0505649380
INFO 2024-10-01 18:36:32,407 utils 570 138242068317888 Original number: 0505649380
INFO 2024-10-01 18:36:32,407 utils 570 138242068317888 Cleaned number: 0505649380
INFO 2024-10-01 18:36:32,407 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:36:32,407 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:36:32,407 models 570 138242068317888 Categorizing call for number: 0505649380
INFO 2024-10-01 18:36:32,411 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:36:32,413 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:36:32,414 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:36:32,414 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:36:32,415 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:36:32,415 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:36:32,415 models 570 138242068317888 Match found: 0505649380 matches 05
INFO 2024-10-01 18:36:32,416 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:36:32,416 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:36:32,416 models 570 138242068317888 Calculating total cost for call: duration=242 seconds
INFO 2024-10-01 18:36:32,417 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 18:36:32,418 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:36:32,418 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 18:36:32,418 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.00
INFO 2024-10-01 18:36:32,418 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:36:32,421 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:36:32,422 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:36:32,426 models 570 138242068317888 Found extension: 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 18:36:32,429 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 18:36:32,433 models 570 138242068317888 Quota for 7195 - Abdulaziz Alenzi (Smasco): Last reset: 2024-09-15 06:34:55.101966+00:00, Next reset: 2024-10-15 06:34:55.101966+00:00, Current time: 2024-10-01 15:36:32.431521+00:00, Should reset: False
INFO 2024-10-01 18:36:32,434 models 570 138242068317888 Quota reset not needed for 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 18:36:32,434 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 34.40
INFO 2024-10-01 18:36:32,434 models 570 138242068317888 Amount to deduct: 2.00
INFO 2024-10-01 18:36:32,434 models 570 138242068317888 Attempting to deduct 2.00 from balance 65.60
INFO 2024-10-01 18:36:32,437 models 570 138242068317888 Successfully deducted 2.00. New remaining balance: 63.60
INFO 2024-10-01 18:36:32,438 models 570 138242068317888 Successfully deducted 2.00 from quota. New balance: 63.60
INFO 2024-10-01 18:36:32,440 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:36:32,440 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:36:32,440 models 570 138242068317888 Initial state: caller=7195, callee=0505649380, duration=242, total_cost=2.00
INFO 2024-10-01 18:36:32,444 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.00
INFO 2024-10-01 18:36:32,445 models 570 138242068317888 Before determining country, Caller: 7195, Callee: 0505649380
INFO 2024-10-01 18:36:32,446 utils 570 138242068317888 Original number: 0505649380
INFO 2024-10-01 18:36:32,446 utils 570 138242068317888 Cleaned number: 0505649380
INFO 2024-10-01 18:36:32,447 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:36:32,447 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:36:32,447 models 570 138242068317888 Categorizing call for number: 0505649380
INFO 2024-10-01 18:36:32,450 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:36:32,452 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:36:32,452 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:36:32,452 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:36:32,452 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:36:32,452 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Match found: 0505649380 matches 05
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Calculating total cost for call: duration=242 seconds
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Duration in minutes: 5
INFO 2024-10-01 18:36:32,453 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:36:32,454 models 570 138242068317888 Calculated total cost: 2.00
INFO 2024-10-01 18:36:32,454 models 570 138242068317888 After cost calculation: old_total_cost=2.00, new_total_cost=2.00
INFO 2024-10-01 18:36:32,454 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:36:32,456 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:36:32,456 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.00
INFO 2024-10-01 18:36:32,458 models 570 138242068317888 Found extension: 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 18:36:32,460 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 36.40
INFO 2024-10-01 18:36:32,463 models 570 138242068317888 Quota for 7195 - Abdulaziz Alenzi (Smasco): Last reset: 2024-09-15 06:34:55.101966+00:00, Next reset: 2024-10-15 06:34:55.101966+00:00, Current time: 2024-10-01 15:36:32.461249+00:00, Should reset: False
INFO 2024-10-01 18:36:32,463 models 570 138242068317888 Quota reset not needed for 7195 - Abdulaziz Alenzi (Smasco)
INFO 2024-10-01 18:36:32,463 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 36.40
INFO 2024-10-01 18:36:32,463 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:36:32,464 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:36:32,465 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:36:32,465 socket_server 570 138242068317888 Saved call record for company Smasco: 7195 -> 0505649380 at 2024-10-01 15:32:18+03:00
INFO 2024-10-01 18:36:32,882 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58375) on port 8000
INFO 2024-10-01 18:37:25,656 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:35:15,0545260649,8436,,,2024/10/01 15:37:24,Failed,,,Ext.8436,0545260649,0545260649,,,Extension,LineSet,,Md Rana,0545260649,
INFO 2024-10-01 18:37:25,657 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:35:15', '0545260649', '8436', '', '', '2024/10/01 15:37:24', 'Failed', '', '', 'Ext.8436', '0545260649', '0545260649', '', '', 'Extension', 'LineSet', '', 'Md Rana', '0545260649', '']
INFO 2024-10-01 18:37:25,681 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:25,681 models 570 138242068317888 Initial state: caller=8436, callee=0545260649, duration=None, total_cost=0.0
INFO 2024-10-01 18:37:25,682 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:37:25,682 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0545260649
INFO 2024-10-01 18:37:25,682 utils 570 138242068317888 Original number: 0545260649
INFO 2024-10-01 18:37:25,682 utils 570 138242068317888 Cleaned number: 0545260649
INFO 2024-10-01 18:37:25,683 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:25,683 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:25,683 models 570 138242068317888 Categorizing call for number: 0545260649
INFO 2024-10-01 18:37:25,686 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:25,689 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:25,690 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:25,690 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:25,690 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:25,690 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:25,690 models 570 138242068317888 Match found: 0545260649 matches 05
INFO 2024-10-01 18:37:25,691 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:25,691 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:25,691 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:37:25,691 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:37:25,692 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:37:25,692 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:25,694 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:25,695 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:25,698 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:37:25,700 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:25,706 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:37:25.703060+00:00, Should reset: False
INFO 2024-10-01 18:37:25,707 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:37:25,707 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:25,707 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:25,707 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:25,709 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:25,710 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:25,710 models 570 138242068317888 Initial state: caller=8436, callee=0545260649, duration=None, total_cost=0.00
INFO 2024-10-01 18:37:25,716 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:37:25,716 models 570 138242068317888 Before determining country, Caller: 8436, Callee: 0545260649
INFO 2024-10-01 18:37:25,717 utils 570 138242068317888 Original number: 0545260649
INFO 2024-10-01 18:37:25,717 utils 570 138242068317888 Cleaned number: 0545260649
INFO 2024-10-01 18:37:25,717 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:25,717 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:25,718 models 570 138242068317888 Categorizing call for number: 0545260649
INFO 2024-10-01 18:37:25,719 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:25,721 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Match found: 0545260649 matches 05
INFO 2024-10-01 18:37:25,722 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:25,723 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:25,723 models 570 138242068317888 Calculating total cost for call: duration=None seconds
WARNING 2024-10-01 18:37:25,723 models 570 138242068317888 Duration is None or 0, setting total cost to 0
INFO 2024-10-01 18:37:25,723 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:37:25,723 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:25,725 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:25,726 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:25,728 models 570 138242068317888 Found extension: 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:37:25,730 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:25,733 models 570 138242068317888 Quota for 8436 - Md Rana (Smasco): Last reset: 2024-09-15 06:35:35.009080+00:00, Next reset: 2024-10-15 06:35:35.009080+00:00, Current time: 2024-10-01 15:37:25.731430+00:00, Should reset: False
INFO 2024-10-01 18:37:25,734 models 570 138242068317888 Quota reset not needed for 8436 - Md Rana (Smasco)
INFO 2024-10-01 18:37:25,734 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:25,734 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:25,734 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:25,736 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:25,736 socket_server 570 138242068317888 Saved call record for company Smasco: 8436 -> 0545260649 at 2024-10-01 15:35:15+03:00
INFO 2024-10-01 18:37:26,143 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58381) on port 8000
INFO 2024-10-01 18:37:30,628 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:30:31,0593166436,7560,00:06:45,2024/10/01 15:30:44,2024/10/01 15:37:29,TerminatedBySrc,,,Ext.7560,0593166436,10001,,,Extension,Line,,Omar Al-Saqabi,0593166436,
INFO 2024-10-01 18:37:30,628 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:30:31', '0593166436', '7560', '00:06:45', '2024/10/01 15:30:44', '2024/10/01 15:37:29', 'TerminatedBySrc', '', '', 'Ext.7560', '0593166436', '10001', '', '', 'Extension', 'Line', '', 'Omar Al-Saqabi', '0593166436', '']
INFO 2024-10-01 18:37:30,649 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:30,649 models 570 138242068317888 Initial state: caller=7560, callee=0593166436, duration=405, total_cost=0.0
INFO 2024-10-01 18:37:30,649 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:37:30,649 models 570 138242068317888 Before determining country, Caller: 7560, Callee: 0593166436
INFO 2024-10-01 18:37:30,650 utils 570 138242068317888 Original number: 0593166436
INFO 2024-10-01 18:37:30,650 utils 570 138242068317888 Cleaned number: 0593166436
INFO 2024-10-01 18:37:30,650 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:30,650 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:30,650 models 570 138242068317888 Categorizing call for number: 0593166436
INFO 2024-10-01 18:37:30,653 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:30,655 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:30,655 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Match found: 0593166436 matches 05
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:30,656 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 Calculating total cost for call: duration=405 seconds
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=2.80
INFO 2024-10-01 18:37:30,657 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:30,660 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:30,661 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:30,665 models 570 138242068317888 Found extension: 7560 - Omar Al-Saqabi (Smasco)
INFO 2024-10-01 18:37:30,667 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 55.20
INFO 2024-10-01 18:37:30,671 models 570 138242068317888 Quota for 7560 - Omar Al-Saqabi (Smasco): Last reset: 2024-09-15 06:35:15.683553+00:00, Next reset: 2024-10-15 06:35:15.683553+00:00, Current time: 2024-10-01 15:37:30.669209+00:00, Should reset: False
INFO 2024-10-01 18:37:30,672 models 570 138242068317888 Quota reset not needed for 7560 - Omar Al-Saqabi (Smasco)
INFO 2024-10-01 18:37:30,672 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 55.20
INFO 2024-10-01 18:37:30,672 models 570 138242068317888 Amount to deduct: 2.80
INFO 2024-10-01 18:37:30,672 models 570 138242068317888 Attempting to deduct 2.80 from balance 44.80
INFO 2024-10-01 18:37:30,674 models 570 138242068317888 Successfully deducted 2.80. New remaining balance: 42.00
INFO 2024-10-01 18:37:30,674 models 570 138242068317888 Successfully deducted 2.80 from quota. New balance: 42.00
INFO 2024-10-01 18:37:30,676 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:30,677 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:30,677 models 570 138242068317888 Initial state: caller=7560, callee=0593166436, duration=405, total_cost=2.80
INFO 2024-10-01 18:37:30,680 models 570 138242068317888 This is an existing CallRecord. Old total cost: 2.80
INFO 2024-10-01 18:37:30,680 models 570 138242068317888 Before determining country, Caller: 7560, Callee: 0593166436
INFO 2024-10-01 18:37:30,680 utils 570 138242068317888 Original number: 0593166436
INFO 2024-10-01 18:37:30,680 utils 570 138242068317888 Cleaned number: 0593166436
INFO 2024-10-01 18:37:30,680 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:30,681 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:30,681 models 570 138242068317888 Categorizing call for number: 0593166436
INFO 2024-10-01 18:37:30,683 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:30,685 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:30,685 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:30,685 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Match found: 0593166436 matches 05
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:30,686 models 570 138242068317888 Calculating total cost for call: duration=405 seconds
INFO 2024-10-01 18:37:30,687 models 570 138242068317888 Duration in minutes: 7
INFO 2024-10-01 18:37:30,687 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:37:30,687 models 570 138242068317888 Calculated total cost: 2.80
INFO 2024-10-01 18:37:30,687 models 570 138242068317888 After cost calculation: old_total_cost=2.80, new_total_cost=2.80
INFO 2024-10-01 18:37:30,687 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:30,689 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:30,690 models 570 138242068317888 Starting update_user_quota with old_total_cost=2.80
INFO 2024-10-01 18:37:30,693 models 570 138242068317888 Found extension: 7560 - Omar Al-Saqabi (Smasco)
INFO 2024-10-01 18:37:30,694 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 58.00
INFO 2024-10-01 18:37:30,699 models 570 138242068317888 Quota for 7560 - Omar Al-Saqabi (Smasco): Last reset: 2024-09-15 06:35:15.683553+00:00, Next reset: 2024-10-15 06:35:15.683553+00:00, Current time: 2024-10-01 15:37:30.696433+00:00, Should reset: False
INFO 2024-10-01 18:37:30,699 models 570 138242068317888 Quota reset not needed for 7560 - Omar Al-Saqabi (Smasco)
INFO 2024-10-01 18:37:30,700 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 58.00
INFO 2024-10-01 18:37:30,700 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:30,700 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:30,703 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:30,703 socket_server 570 138242068317888 Saved call record for company Smasco: 7560 -> 0593166436 at 2024-10-01 15:30:31+03:00
INFO 2024-10-01 18:37:31,096 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58382) on port 8000
INFO 2024-10-01 18:37:35,756 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:34:20,0544434004,7464,00:03:07,2024/10/01 15:34:27,2024/10/01 15:37:34,TerminatedBySrc,,,Ext.7464,0544434004,10001,,,Extension,Line,,Mohammed Alasmari,0544434004,
INFO 2024-10-01 18:37:35,757 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:34:20', '0544434004', '7464', '00:03:07', '2024/10/01 15:34:27', '2024/10/01 15:37:34', 'TerminatedBySrc', '', '', 'Ext.7464', '0544434004', '10001', '', '', 'Extension', 'Line', '', 'Mohammed Alasmari', '0544434004', '']
INFO 2024-10-01 18:37:35,778 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:35,778 models 570 138242068317888 Initial state: caller=7464, callee=0544434004, duration=187, total_cost=0.0
INFO 2024-10-01 18:37:35,778 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:37:35,778 models 570 138242068317888 Before determining country, Caller: 7464, Callee: 0544434004
INFO 2024-10-01 18:37:35,779 utils 570 138242068317888 Original number: 0544434004
INFO 2024-10-01 18:37:35,779 utils 570 138242068317888 Cleaned number: 0544434004
INFO 2024-10-01 18:37:35,779 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:35,779 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:35,779 models 570 138242068317888 Categorizing call for number: 0544434004
INFO 2024-10-01 18:37:35,782 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:35,784 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:35,785 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:35,785 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:35,785 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:35,786 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:35,786 models 570 138242068317888 Match found: 0544434004 matches 05
INFO 2024-10-01 18:37:35,786 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:35,786 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:35,786 models 570 138242068317888 Calculating total cost for call: duration=187 seconds
INFO 2024-10-01 18:37:35,787 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:37:35,787 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:37:35,787 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:37:35,787 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=1.60
INFO 2024-10-01 18:37:35,788 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:35,809 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:35,809 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:35,825 models 570 138242068317888 Found extension: 7464 - Mohammed Alasmari (Smasco)
INFO 2024-10-01 18:37:35,828 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:35,834 models 570 138242068317888 Quota for 7464 - Mohammed Alasmari (Smasco): Last reset: 2024-09-15 06:35:06.257368+00:00, Next reset: 2024-10-15 06:35:06.257368+00:00, Current time: 2024-10-01 15:37:35.831555+00:00, Should reset: False
INFO 2024-10-01 18:37:35,835 models 570 138242068317888 Quota reset not needed for 7464 - Mohammed Alasmari (Smasco)
INFO 2024-10-01 18:37:35,835 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:35,835 models 570 138242068317888 Amount to deduct: 1.60
INFO 2024-10-01 18:37:35,836 models 570 138242068317888 Attempting to deduct 1.60 from balance 0.00
WARNING 2024-10-01 18:37:35,836 models 570 138242068317888 Insufficient balance. Current: 0.00, Attempted deduction: 1.60
WARNING 2024-10-01 18:37:35,836 models 570 138242068317888 Warning: Quota exceeded for extension 7464
INFO 2024-10-01 18:37:35,838 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:35,839 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:35,839 models 570 138242068317888 Initial state: caller=7464, callee=0544434004, duration=187, total_cost=1.60
INFO 2024-10-01 18:37:35,842 models 570 138242068317888 This is an existing CallRecord. Old total cost: 1.60
INFO 2024-10-01 18:37:35,842 models 570 138242068317888 Before determining country, Caller: 7464, Callee: 0544434004
INFO 2024-10-01 18:37:35,842 utils 570 138242068317888 Original number: 0544434004
INFO 2024-10-01 18:37:35,843 utils 570 138242068317888 Cleaned number: 0544434004
INFO 2024-10-01 18:37:35,843 models 570 138242068317888 Determined country for callee number: Saudi Arabia Mobile
INFO 2024-10-01 18:37:35,844 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:35,844 models 570 138242068317888 Categorizing call for number: 0544434004
INFO 2024-10-01 18:37:35,846 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:35,848 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:35,848 models 570 138242068317888 Checking pattern: ^(0091|\+91)\d{10}$
INFO 2024-10-01 18:37:35,848 models 570 138242068317888 Checking pattern: ^(0062|\+62)\d{9,12}
INFO 2024-10-01 18:37:35,849 models 570 138242068317888 Checking pattern: ^(00256|\+256)\d{9}$
INFO 2024-10-01 18:37:35,849 models 570 138242068317888 Checking pattern: 05
INFO 2024-10-01 18:37:35,849 models 570 138242068317888 Match found: 0544434004 matches 05
INFO 2024-10-01 18:37:35,849 models 570 138242068317888 Set call category to mobile and rate to 0.40
INFO 2024-10-01 18:37:35,849 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 Calculating total cost for call: duration=187 seconds
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 Duration in minutes: 4
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 Current call rate: 0.40
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 Calculated total cost: 1.60
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 After cost calculation: old_total_cost=1.60, new_total_cost=1.60
INFO 2024-10-01 18:37:35,850 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:35,853 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:35,853 models 570 138242068317888 Starting update_user_quota with old_total_cost=1.60
INFO 2024-10-01 18:37:35,857 models 570 138242068317888 Found extension: 7464 - Mohammed Alasmari (Smasco)
INFO 2024-10-01 18:37:35,859 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:35,863 models 570 138242068317888 Quota for 7464 - Mohammed Alasmari (Smasco): Last reset: 2024-09-15 06:35:06.257368+00:00, Next reset: 2024-10-15 06:35:06.257368+00:00, Current time: 2024-10-01 15:37:35.860938+00:00, Should reset: False
INFO 2024-10-01 18:37:35,863 models 570 138242068317888 Quota reset not needed for 7464 - Mohammed Alasmari (Smasco)
INFO 2024-10-01 18:37:35,864 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 100.00
INFO 2024-10-01 18:37:35,864 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:35,864 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:35,866 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:35,866 socket_server 570 138242068317888 Saved call record for company Smasco: 7464 -> 0544434004 at 2024-10-01 15:34:20+03:00
INFO 2024-10-01 18:37:36,267 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58383) on port 8000
INFO 2024-10-01 18:37:46,311 socket_server 570 138242068317888 Received data on port 8000: Call 2024/10/01 15:35:54,7199,7551,00:01:42,2024/10/01 15:36:02,2024/10/01 15:37:45,TerminatedBySrc,,,Ext.7551,Ext.7199,7199,,,Extension,Extension,,Adnan Ali,Alaa Alessawi,
INFO 2024-10-01 18:37:46,312 socket_server 570 138242068317888 Parsed CDR data: ['2024/10/01 15:35:54', '7199', '7551', '00:01:42', '2024/10/01 15:36:02', '2024/10/01 15:37:45', 'TerminatedBySrc', '', '', 'Ext.7551', 'Ext.7199', '7199', '', '', 'Extension', 'Extension', '', 'Adnan Ali', 'Alaa Alessawi', '']
INFO 2024-10-01 18:37:46,332 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:46,333 models 570 138242068317888 Initial state: caller=7551, callee=7199, duration=102, total_cost=0.0
INFO 2024-10-01 18:37:46,333 models 570 138242068317888 This is a new CallRecord
INFO 2024-10-01 18:37:46,333 models 570 138242068317888 Before determining country, Caller: 7551, Callee: 7199
INFO 2024-10-01 18:37:46,334 utils 570 138242068317888 Original number: 7199
INFO 2024-10-01 18:37:46,334 utils 570 138242068317888 Cleaned number: 7199
INFO 2024-10-01 18:37:46,334 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:37:46,334 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:46,334 models 570 138242068317888 Categorizing call for number: 7199
INFO 2024-10-01 18:37:46,339 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:46,341 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:46,342 models 570 138242068317888 Match found: 7199 matches ^\d{4}$
INFO 2024-10-01 18:37:46,342 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:37:46,342 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 Calculating total cost for call: duration=102 seconds
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:37:46,343 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:46,346 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:46,346 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:46,350 models 570 138242068317888 Found extension: 7551 - Adnan Ali (Smasco)
INFO 2024-10-01 18:37:46,352 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:37:46,355 models 570 138242068317888 Quota for 7551 - Adnan Ali (Smasco): Last reset: 2024-09-15 06:35:15.656385+00:00, Next reset: 2024-10-15 06:35:15.656385+00:00, Current time: 2024-10-01 15:37:46.353851+00:00, Should reset: False
INFO 2024-10-01 18:37:46,356 models 570 138242068317888 Quota reset not needed for 7551 - Adnan Ali (Smasco)
INFO 2024-10-01 18:37:46,356 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:37:46,356 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:46,356 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:46,359 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:46,359 models 570 138242068317888 --- Starting save process for CallRecord ---
INFO 2024-10-01 18:37:46,359 models 570 138242068317888 Initial state: caller=7551, callee=7199, duration=102, total_cost=0.00
INFO 2024-10-01 18:37:46,362 models 570 138242068317888 This is an existing CallRecord. Old total cost: 0.00
INFO 2024-10-01 18:37:46,362 models 570 138242068317888 Before determining country, Caller: 7551, Callee: 7199
INFO 2024-10-01 18:37:46,362 utils 570 138242068317888 Original number: 7199
INFO 2024-10-01 18:37:46,363 utils 570 138242068317888 Cleaned number: 7199
INFO 2024-10-01 18:37:46,363 models 570 138242068317888 Determined country for callee number: Internal Company Call
INFO 2024-10-01 18:37:46,363 models 570 138242068317888 Categorizing call...
INFO 2024-10-01 18:37:46,363 models 570 138242068317888 Categorizing call for number: 7199
INFO 2024-10-01 18:37:46,365 models 570 138242068317888 Number of patterns found for company Smasco: 7
INFO 2024-10-01 18:37:46,367 models 570 138242068317888 Checking pattern: ^\d{4}$
INFO 2024-10-01 18:37:46,367 models 570 138242068317888 Match found: 7199 matches ^\d{4}$
INFO 2024-10-01 18:37:46,367 models 570 138242068317888 Set call category to local and rate to 0.00
INFO 2024-10-01 18:37:46,367 models 570 138242068317888 Calculating total cost...
INFO 2024-10-01 18:37:46,368 models 570 138242068317888 Calculating total cost for call: duration=102 seconds
INFO 2024-10-01 18:37:46,368 models 570 138242068317888 Duration in minutes: 2
INFO 2024-10-01 18:37:46,368 models 570 138242068317888 Current call rate: 0.00
INFO 2024-10-01 18:37:46,368 models 570 138242068317888 Calculated total cost: 0.00
INFO 2024-10-01 18:37:46,368 models 570 138242068317888 After cost calculation: old_total_cost=0.00, new_total_cost=0.00
INFO 2024-10-01 18:37:46,369 models 570 138242068317888 Calling super().save()
INFO 2024-10-01 18:37:46,371 models 570 138242068317888 Updating user quota...
INFO 2024-10-01 18:37:46,371 models 570 138242068317888 Starting update_user_quota with old_total_cost=0.00
INFO 2024-10-01 18:37:46,375 models 570 138242068317888 Found extension: 7551 - Adnan Ali (Smasco)
INFO 2024-10-01 18:37:46,377 models 570 138242068317888 Found UserQuota: current total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:37:46,380 models 570 138242068317888 Quota for 7551 - Adnan Ali (Smasco): Last reset: 2024-09-15 06:35:15.656385+00:00, Next reset: 2024-10-15 06:35:15.656385+00:00, Current time: 2024-10-01 15:37:46.378381+00:00, Should reset: False
INFO 2024-10-01 18:37:46,380 models 570 138242068317888 Quota reset not needed for 7551 - Adnan Ali (Smasco)
INFO 2024-10-01 18:37:46,380 models 570 138242068317888 After check_and_reset_if_needed: total_amount = 100.00, used_amount = 0.00
INFO 2024-10-01 18:37:46,381 models 570 138242068317888 Amount to deduct: 0.00
INFO 2024-10-01 18:37:46,381 models 570 138242068317888 No change in total cost, quota remains the same.
INFO 2024-10-01 18:37:46,384 models 570 138242068317888 --- Finished save process for CallRecord ---
INFO 2024-10-01 18:37:46,385 socket_server 570 138242068317888 Saved call record for company Smasco: 7551 -> 7199 at 2024-10-01 15:35:54+03:00
INFO 2024-10-01 18:37:46,783 socket_server 570 138242326267584 Accepted connection from ('87.101.181.54', 58384) on port 8000
